(window.webpackJsonp=window.webpackJsonp||[]).push([[10,32,33,34,35,36,38,39,40,41,42,43,48,49,51,53,54,55],{108:function(e,t,o){var i,r,n;!function(a){"use strict";r=[o(44)],void 0===(n="function"==typeof(i=function(e){var t=e.transform;e.transform=function(o,i,r,n,a){t.call(e,e.scale(o,i,a),i,r,n,a)},e.transformCoordinates=function(){},e.getTransformedOptions=function(e,t){var o,i,r,n,a=t.aspectRatio;if(!a)return t;for(i in o={},t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i]);return o.crop=!0,(r=e.naturalWidth||e.width)/(n=e.naturalHeight||e.height)>a?(o.maxWidth=n*a,o.maxHeight=n):(o.maxWidth=r,o.maxHeight=r/a),o},e.renderImageToCanvas=function(e,t,o,i,r,n,a,s,l,c){return e.getContext("2d").drawImage(t,o,i,r,n,a,s,l,c),e},e.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},e.scale=function(t,o,i){o=o||{};var r,n,a,s,l,c,d,u,h,p,f,g=document.createElement("canvas"),m=t.getContext||e.hasCanvasOption(o)&&g.getContext,b=t.naturalWidth||t.width,y=t.naturalHeight||t.height,v=b,S=y;function x(){var e=Math.max((a||v)/v,(s||S)/S);e>1&&(v*=e,S*=e)}function k(){var e=Math.min((r||v)/v,(n||S)/S);e<1&&(v*=e,S*=e)}if(m&&(d=(o=e.getTransformedOptions(t,o,i)).left||0,u=o.top||0,o.sourceWidth?(l=o.sourceWidth,void 0!==o.right&&void 0===o.left&&(d=b-l-o.right)):l=b-d-(o.right||0),o.sourceHeight?(c=o.sourceHeight,void 0!==o.bottom&&void 0===o.top&&(u=y-c-o.bottom)):c=y-u-(o.bottom||0),v=l,S=c),r=o.maxWidth,n=o.maxHeight,a=o.minWidth,s=o.minHeight,m&&r&&n&&o.crop?(v=r,S=n,(f=l/c-r/n)<0?(c=n*l/r,void 0===o.top&&void 0===o.bottom&&(u=(y-c)/2)):f>0&&(l=r*c/n,void 0===o.left&&void 0===o.right&&(d=(b-l)/2))):((o.contain||o.cover)&&(a=r=r||a,s=n=n||s),o.cover?(k(),x()):(x(),k())),m){if((h=o.pixelRatio)>1&&(g.style.width=v+"px",g.style.height=S+"px",v*=h,S*=h,g.getContext("2d").scale(h,h)),(p=o.downsamplingRatio)>0&&p<1&&v<l&&S<c)for(;l*p>v;)g.width=l*p,g.height=c*p,e.renderImageToCanvas(g,t,d,u,l,c,0,0,g.width,g.height),d=0,u=0,l=g.width,c=g.height,(t=document.createElement("canvas")).width=l,t.height=c,e.renderImageToCanvas(t,g,0,0,l,c,0,0,l,c);return g.width=v,g.height=S,e.transformCoordinates(g,o),e.renderImageToCanvas(g,t,d,u,l,c,0,0,v,S)}return t.width=v,t.height=S,t}})?i.apply(t,r):i)||(e.exports=n)}()},109:function(e,t,o){var i,r,n;!function(a){"use strict";r=[o(44),o(53)],void 0===(n="function"==typeof(i=function(e){e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(t,o,i){if(i&&!(o+i>t.byteLength))return e.createObjectURL(new Blob([t.buffer.slice(o,o+i)]));console.log("Invalid Exif data: Invalid thumbnail data.")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,o){return e.getUint16(t,o)},size:2},4:{getValue:function(e,t,o){return e.getUint32(t,o)},size:4},5:{getValue:function(e,t,o){return e.getUint32(t,o)/e.getUint32(t+4,o)},size:8},9:{getValue:function(e,t,o){return e.getInt32(t,o)},size:4},10:{getValue:function(e,t,o){return e.getInt32(t,o)/e.getInt32(t+4,o)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,o,i,r,n,a){var s,l,c,d,u,h,p=e.exifTagTypes[r];if(p){if(!((l=(s=p.size*n)>4?o+t.getUint32(i+8,a):i+8)+s>t.byteLength)){if(1===n)return p.getValue(t,l,a);for(c=[],d=0;d<n;d+=1)c[d]=p.getValue(t,l+d*p.size,a);if(p.ascii){for(u="",d=0;d<c.length&&"\0"!==(h=c[d]);d+=1)u+=h;return u}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},e.parseExifTag=function(t,o,i,r,n){var a=t.getUint16(i,r);n.exif[a]=e.getExifValue(t,o,i,t.getUint16(i+2,r),t.getUint32(i+4,r),r)},e.parseExifTags=function(e,t,o,i,r){var n,a,s;if(o+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((a=o+2+12*(n=e.getUint16(o,i)))+4>e.byteLength)){for(s=0;s<n;s+=1)this.parseExifTag(e,t,o+2+12*s,i,r);return e.getUint32(a,i)}console.log("Invalid Exif data: Invalid directory size.")}},e.parseExifData=function(t,o,i,r,n){if(!n.disableExif){var a,s,l,c=o+10;if(1165519206===t.getUint32(o+4))if(c+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(o+8)){switch(t.getUint16(c)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(c+2,a)?(s=t.getUint32(c+4,a),r.exif=new e.ExifMap,(s=e.parseExifTags(t,c,c+s,a,r))&&!n.disableExifThumbnail&&(l={exif:{}},s=e.parseExifTags(t,c,c+s,a,l),l.exif[513]&&(r.exif.Thumbnail=e.getExifThumbnail(t,c+l.exif[513],l.exif[514]))),r.exif[34665]&&!n.disableExifSub&&e.parseExifTags(t,c,c+r.exif[34665],a,r),r.exif[34853]&&!n.disableExifGps&&e.parseExifTags(t,c,c+r.exif[34853],a,r)):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)})?i.apply(t,r):i)||(e.exports=n)}()},110:function(e,t,o){var i,r,n;!function(a){"use strict";r=[o(44),o(53)],void 0===(n="function"==typeof(i=function(e){e.IptcMap=function(){return this},e.IptcMap.prototype.map={ObjectName:5},e.IptcMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.parseIptcTags=function(e,t,o,i){function r(e,t,o){for(var i="",r=t;r<t+o;r++)i+=String.fromCharCode(e.getUint8(r));return i}for(var n,a,s,l=t;l<t+o;)28===e.getUint8(l)&&2===e.getUint8(l+1)&&(s=e.getUint8(l+2))in i.iptc.tags&&(a=e.getInt16(l+3),n=r(e,l+5,a),Object.prototype.hasOwnProperty.call(i.iptc,s)?i.iptc[s]instanceof Array?i.iptc[s].push(n):i.iptc[s]=[i.iptc[s],n]:i.iptc[s]=n),l++},e.parseIptcData=function(t,o,i,r,n){if(!n.disableIptc){for(var a=o+i,s=function(e,t){return 943868237===e.getUint32(t)&&1028===e.getUint16(t+4)};o+8<a;){if(s(t,o)){var l=t.getUint8(o+7);l%2!=0&&(l+=1),0===l&&(l=4);var c=o+8+l;if(c>a){console.log("Invalid IPTC data: Invalid segment offset.");break}var d=t.getUint16(o+6+l);if(o+d>a){console.log("Invalid IPTC data: Invalid segment size.");break}return r.iptc=new e.IptcMap,e.parseIptcTags(t,c,d,r)}o++}console.log("No IPTC data at this offset - could be XMP")}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData)})?i.apply(t,r):i)||(e.exports=n)}()},121:function(e,t,o){"use strict";var i=o(93);class r extends i.a{}r.blotName="italic",r.tagName=["EM","I"],t.a=r},133:function(e,t,o){e.exports=o(44),o(108),o(53),o(134),o(109),o(135),o(110),o(136),o(137)},134:function(e,t,o){var i,r,n;!function(a){"use strict";r=[o(44),o(53)],void 0===(n="function"==typeof(i=function(e){"undefined"!=typeof fetch&&"undefined"!=typeof Request?e.fetchBlob=function(t,o,i){e.hasMetaOption(i)?fetch(new Request(t,i)).then((function(e){return e.blob()})).then(o).catch((function(e){console.log(e),o()})):o()}:"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof ProgressEvent&&(e.fetchBlob=function(t,o,i){if(e.hasMetaOption(i)){i=i||{};var r=new XMLHttpRequest;r.open(i.method||"GET",t),i.headers&&Object.keys(i.headers).forEach((function(e){r.setRequestHeader(e,i.headers[e])})),r.withCredentials="include"===i.credentials,r.responseType="blob",r.onload=function(){o(r.response)},r.onerror=r.onabort=r.ontimeout=function(e){console.log(e),o()},r.send(i.body)}else o()})})?i.apply(t,r):i)||(e.exports=n)}()},135:function(e,t,o){var i,r,n;!function(a){"use strict";r=[o(44),o(109)],void 0===(n="function"==typeof(i=function(e){e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t)return;return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t)return;return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t)return;return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,o=e.tags,i=e.map;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[o[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,o={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this.tags[e])&&(o[t]=this.getText(t));return o}})?i.apply(t,r):i)||(e.exports=n)}()},136:function(e,t,o){var i,r,n;!function(a){"use strict";r=[o(44),o(110)],void 0===(n="function"==typeof(i=function(e){e.IptcMap.prototype.tags={3:"ObjectType",4:"ObjectAttribute",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectRef",15:"Category",20:"SupplCategory",22:"FixtureID",25:"Keywords",26:"ContentLocCode",27:"ContentLocName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"RefService",47:"RefDate",50:"RefNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"CountryName",103:"OrigTransRef",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",122:"WriterEditor",130:"ImageType",131:"ImageOrientation",135:"LanguageID"},e.IptcMap.prototype.getText=function(e){var t=this.get(e);return String(t)},function(e){var t,o=e.tags,i=e.map||{};for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[o[t]]=t)}(e.IptcMap.prototype),e.IptcMap.prototype.getAll=function(){var e,t,o={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this.tags[e])&&(o[t]=this.getText(t));return o}})?i.apply(t,r):i)||(e.exports=n)}()},137:function(e,t,o){var i,r,n;!function(a){"use strict";r=[o(44),o(108),o(53)],void 0===(n="function"==typeof(i=function(e){var t=e.hasCanvasOption,o=e.hasMetaOption,i=e.transformCoordinates,r=e.getTransformedOptions;e.hasCanvasOption=function(o){return!!o.orientation||t.call(e,o)},e.hasMetaOption=function(t){return t&&!0===t.orientation||o.call(e,t)},e.transformCoordinates=function(t,o){i.call(e,t,o);var r=t.getContext("2d"),n=t.width,a=t.height,s=t.style.width,l=t.style.height,c=o.orientation;if(c&&!(c>8))switch(c>4&&(t.width=a,t.height=n,t.style.width=l,t.style.height=s),c){case 2:r.translate(n,0),r.scale(-1,1);break;case 3:r.translate(n,a),r.rotate(Math.PI);break;case 4:r.translate(0,a),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-a);break;case 7:r.rotate(.5*Math.PI),r.translate(n,-a),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-n,0)}},e.getTransformedOptions=function(t,o,i){var n,a,s=r.call(e,t,o),l=s.orientation;if(!0===l&&i&&i.exif&&(l=i.exif.get("Orientation")),!l||l>8||1===l)return s;for(a in n={},s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a]);switch(n.orientation=l,l){case 2:n.left=s.right,n.right=s.left;break;case 3:n.left=s.right,n.top=s.bottom,n.right=s.left,n.bottom=s.top;break;case 4:n.top=s.bottom,n.bottom=s.top;break;case 5:n.left=s.top,n.top=s.left,n.right=s.bottom,n.bottom=s.right;break;case 6:n.left=s.top,n.top=s.right,n.right=s.bottom,n.bottom=s.left;break;case 7:n.left=s.bottom,n.top=s.right,n.right=s.top,n.bottom=s.left;break;case 8:n.left=s.bottom,n.top=s.left,n.right=s.top,n.bottom=s.right}return n.orientation>4&&(n.maxWidth=s.maxHeight,n.maxHeight=s.maxWidth,n.minWidth=s.minHeight,n.minHeight=s.minWidth,n.sourceWidth=s.sourceHeight,n.sourceHeight=s.sourceWidth),n}})?i.apply(t,r):i)||(e.exports=n)}()},44:function(e,t,o){var i;!function(r){"use strict";function n(e,t,o){var i,r=document.createElement("img");return r.onerror=function(i){return n.onerror(r,i,e,t,o)},r.onload=function(i){return n.onload(r,i,e,t,o)},"string"==typeof e?(n.fetchBlob(e,(function(t){t&&n.isInstanceOf("Blob",t)?(e=t,i=n.createObjectURL(e)):(i=e,o&&o.crossOrigin&&(r.crossOrigin=o.crossOrigin)),r.src=i}),o),r):n.isInstanceOf("Blob",e)||n.isInstanceOf("File",e)?(i=r._objectURL=n.createObjectURL(e))?(r.src=i,r):n.readFile(e,(function(e){var o=e.target;o&&o.result?r.src=o.result:t&&t(e)})):void 0}var a=r.createObjectURL&&r||r.URL&&URL.revokeObjectURL&&URL||r.webkitURL&&webkitURL;function s(e,t){!e._objectURL||t&&t.noRevoke||(n.revokeObjectURL(e._objectURL),delete e._objectURL)}n.fetchBlob=function(e,t){t()},n.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},n.transform=function(e,t,o,i,r){o(e,r)},n.onerror=function(e,t,o,i,r){s(e,r),i&&i.call(e,t)},n.onload=function(e,t,o,i,r){s(e,r),i&&n.transform(e,r,i,o,{originalWidth:e.naturalWidth||e.width,originalHeight:e.naturalHeight||e.height})},n.createObjectURL=function(e){return!!a&&a.createObjectURL(e)},n.revokeObjectURL=function(e){return!!a&&a.revokeObjectURL(e)},n.readFile=function(e,t,o){if(r.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,i[o=o||"readAsDataURL"])return i[o](e),i}return!1},void 0===(i=function(){return n}.call(t,o,t,e))||(e.exports=i)}("undefined"!=typeof window&&window||this)},45:function(e,t,o){"use strict";o.r(t),o.d(t,"BreakBlot",(function(){return n}));var i=o(41),r=o(42);class n extends r.a{}n.blotName="textBreak",n.tagName="br",n.className="inline",i.a.register(n)},46:function(e,t,o){"use strict";o.r(t),o.d(t,"SingleLineBlot",(function(){return s}));var i=o(42),r=o(45),n=o(43),a=o.n(n);class s extends i.c{replace(e){e.children.forEach(e=>{e instanceof r.BreakBlot&&e.replaceWith(a.a.create("text"," "))}),super.replace(e)}insertAt(e,t,o){void 0!==o&&"textBreak"==t?super.insertAt(e,"\n"):super.insertAt(e,t,o)}}},49:function(e,t,o){"use strict";o.r(t),o.d(t,"T",(function(){return n})),o.d(t,"draftSave",(function(){return a})),o.d(t,"getPageContent",(function(){return s})),o.d(t,"isEdit",(function(){return l})),o.d(t,"updateEditableText",(function(){return c})),o.d(t,"sanitize",(function(){return u})),o.d(t,"uploadDataToBlob",(function(){return h})),o.d(t,"showError",(function(){return p})),o.d(t,"updateEditable",(function(){return f})),o.d(t,"transliterate",(function(){return g})),o.d(t,"storageDelete",(function(){return m})),o.d(t,"draftClear",(function(){return b}));var i=o(60),r=o.n(i);let n={apiUrl:"https://inscriptum.js.org",datetime:0,pageId:0};function a(e,t){if(!e)return!1;if(!n.pageId){var o=s(!0,t);if(e!=o)return e=o,function(e,t){try{return localStorage.setItem(e,t),!!localStorage.getItem(e)}catch(e){return!1}}("draft",o)}return!1}function s(e,t){let o=t.scroll.domNode;o.querySelectorAll("textarea,input").forEach(e=>{e.setAttribute("data-value",e.value)});let i=o.cloneNode(!0);if(o.querySelectorAll("textarea,input").forEach(e=>{e.removeAttribute("data-value")}),i.querySelectorAll("textarea,input").forEach(e=>{e.value=e.getAttribute("data-value")||"",e.removeAttribute("data-value")}),c(i,!1),i.querySelectorAll("[contenteditable]").forEach(e=>e.removeAttribute("contenteditable")),i.querySelectorAll("[data-placeholder]").forEach(e=>e.removeAttribute("data-placeholder")),i.querySelectorAll("[data-label]").forEach(e=>e.removeAttribute("data-label")),i.querySelectorAll("[data-title]").forEach(e=>e.removeAttribute("data-title")),i.querySelectorAll(".editable_text").forEach(e=>e.classList.remove("editable_text")),i.querySelectorAll(".focus").forEach(e=>e.classList.remove("focus")),i.querySelectorAll(".empty").forEach(e=>e.classList.remove("empty")),i.querySelectorAll('[class=""]').forEach(e=>e.removeAttribute("class")),i.querySelectorAll(".file_progress").forEach(e=>e.remove()),i.querySelectorAll(".cursor_wrapper").forEach(e=>e.remove()),!e){const e=i.querySelector("h1,address");e&&e.remove();const t=i.querySelector("br.inline");return t&&t.replaceWith("\n"),{data:JSON.stringify(d(i).children),length:i.innerHTML.length}}return i.querySelectorAll("h1").forEach(e=>{e.querySelector("br")||e.append(document.createElement("br"))}),i.querySelectorAll("address").forEach(e=>{e.querySelector("br")||e.append(document.createElement("br"))}),i.innerHTML}function l(){return document.getElementsByClassName("tl_article_edit").length>0}function c(e,t){void 0===t&&(t=l()),t?e.querySelectorAll(".editable_text").forEach(e=>{let t=!1;if(e.childNodes.forEach(e=>{!t&&e&&e.classList&&(t=e.classList.contains("editable_input"))}),!t){let t=e.textContent||"",o=document.createElement("textarea");o.classList.add("editable_input"),o.setAttribute("tabindex","-1"),o.setAttribute("rows","1"),o.value=t,t||e.classList.add("empty"),e.innerHTML="",e.append(o),r()(o)}}):e.querySelectorAll(".editable_text > .editable_input").forEach(e=>{let t=e.value,o=e.parentNode;o.innerHTML="",o.textContent=t})}function d(e){if(!e.tagName)return e.data;let t={tag:e.tagName.toLowerCase()};if(e.attributes.length){t.attrs={};for(var o=0;o<e.attributes.length;o++){let i=e.attributes[o];t.attrs[i.name]=i.value}}if(e.childNodes.length){t.children=[];for(o=0;o<e.childNodes.length;o++)t.children.push(d(e.childNodes[o]))}return t}function u(e,t){let o=document.createElement("a");o.href=e;let i=o.href.slice(0,o.href.indexOf(":"));return t.indexOf(i)>-1}function h(e){for(var t=atob(e.base64_data),o=[],i=0;i<t.length;i++)o.push(t.charCodeAt(i));return new Blob([new Uint8Array(o)],{type:e.type})}function p(e){let t=document.querySelector("#_error_msg");t.textContent=e,clearTimeout(t.to),t.classList.add("shown"),t.to=setTimeout(()=>{t.classList.remove("shown")},3e3)}function f(e,t,o,i,r,n){if(i&&i.classList.toggle("tl_article_edit",e),c(document.body),t&&(t.enable(e),e&&t.focus()),!e&&r&&n){const e=r.querySelector("h1"),i=e?e.textContent:"",a=r.querySelector("address"),s=a?a.textContent:"",l=r.querySelector("address a"),c=l&&l.getAttribute("href");n.querySelector("h1").textContent=i,n.querySelector("address a").textContent=s,c?n.querySelector("address a").setAttribute("href",c):n.querySelector("address a").removeAttribute("href"),o.hideFormatTooltip(t),o.hideBlocksTooltip()}}function g(e,t=!1){const o="щ   ш  ч  ц  ю  я  ё  ж  ъ  ы  э  а б в г д е з и й к л м н о п р с т у ф х ь".split(/ +/g),i="shh sh ch cz yu ya yo zh `` y' e` a b v g d e z i j k l m n o p r s t u f x `".split(/ +/g);for(let r=0;r<o.length;r++)e=(e=e.split(t?i[r]:o[r]).join(t?o[r]:i[r])).split(t?i[r].toUpperCase():o[r].toUpperCase()).join(t?o[r].toUpperCase():i[r].toUpperCase());return e}function m(e){try{return localStorage.removeItem(e),!0}catch(e){return!1}}function b(){m("draft")}!function(){var e=document.querySelector("time");if(e&&n.datetime){var t=new Date(1e3*n.datetime);let o="January February March April May June July August September October November December".split(" ")[t.getMonth()],i=t.getDate();e.textContent=o+" "+(10>i?"0":"")+i+", "+t.getFullYear()}}()},50:function(e,t,o){"use strict";o.r(t),o.d(t,"FieldBlot",(function(){return r}));var i=o(46);class r extends i.SingleLineBlot{}},53:function(e,t,o){var i,r,n;!function(a){"use strict";r=[o(44)],void 0===(n="function"==typeof(i=function(e){var t="undefined"!=typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[],65517:[]}},e.parseMetaData=function(t,o,i,r){r=r||{};var n=this,a=(i=i||{}).maxMetaDataSize||262144;!!("undefined"!=typeof DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice)&&e.readFile(e.blobSlice.call(t,0,a),(function(t){if(t.target.error)return console.log(t.target.error),void o(r);var a,s,l,c,d=t.target.result,u=new DataView(d),h=2,p=u.byteLength-4,f=h;if(65496===u.getUint16(0)){for(;h<p&&((a=u.getUint16(h))>=65504&&a<=65519||65534===a);){if(h+(s=u.getUint16(h+2)+2)>u.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(l=e.metaDataParsers.jpeg[a])for(c=0;c<l.length;c+=1)l[c].call(n,u,h,s,r,i);f=h+=s}!i.disableImageHead&&f>6&&(d.slice?r.imageHead=d.slice(0,f):r.imageHead=new Uint8Array(d).subarray(0,f))}else console.log("Invalid JPEG file: Missing JPEG marker.");o(r)}),"readAsArrayBuffer")||o(r)},e.hasMetaOption=function(e){return e&&e.meta};var o=e.transform;e.transform=function(t,i,r,n,a){e.hasMetaOption(i)?e.parseMetaData(n,(function(a){o.call(e,t,i,r,n,a)}),i,a):o.apply(e,arguments)}})?i.apply(t,r):i)||(e.exports=n)}()},54:function(e,t,o){"use strict";o.r(t),o.d(t,"HeaderBlot",(function(){return n}));var i=o(41),r=o(46);class n extends r.SingleLineBlot{optimize(e){super.optimize(e);let t=this.domNode.innerText;t=t.replace(/[\s_]+/g,"-"),t=t.replace(/(^-+|-+$)/g,""),this.domNode.id!==t&&this.domNode.setAttribute("id",t)}formatAt(e,t,o,i){("bold"!==o&&"italic"!==o&&"code"!==o||!i)&&super.formatAt(e,t,o,i)}}n.blotName="blockHeader",n.tagName="h3",i.a.register(n)},56:function(e,t,o){"use strict";o.r(t);var i=o(133),r=o.n(i),n=o(92),a=o.n(n),s=o(42),l=o(41),c=o(70),d=o(71),u=o(43),h=o.n(u);class p extends h.a.Attributor.Class{add(e,t){if("+1"===t||"-1"===t){let o=this.value(e)||0;t="+1"===t?o+1:o-1}return 0===t?(this.remove(e),!0):super.add(e,t)}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t))}value(e){return parseInt(super.value(e))||void 0}}let f=new p("indent","ql-indent",{scope:h.a.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});var g=o(67),m=o(111),b=o(72),y=o(45),v=o(50),S=o(73),x=o(74),k=o(75),E=o(46),L=o(68),T=o(76),C=o(77),w=o(93),N=o(121),A=o(54),q=o(78),B=o(65),I=o(79),_=o(49),P=o(80);o.d(t,"browser",(function(){return D})),o.d(t,"editor",(function(){return R}));let O=navigator.userAgent.toLowerCase(),D={opera:/opera/i.test(O)||/opr/i.test(O),msie:/msie/i.test(O)&&!/opera/i.test(O)||/trident\//i.test(O)||/edge/i.test(O),msie_edge:/edge/i.test(O)&&!/opera/i.test(O),mozilla:/firefox/i.test(O),chrome:/chrome/i.test(O)&&!/edge/i.test(O),safari:!/chrome/i.test(O)&&/webkit|safari|khtml/i.test(O),iphone:/iphone/i.test(O),ipod:/ipod/i.test(O),ipad:/ipad/i.test(O),android:/android/i.test(O),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(O),safari_mobile:/iphone|ipod|ipad/i.test(O),opera_mobile:/opera mini|opera mobi/i.test(O),opera_mini:/opera mini/i.test(O),mac:/mac/i.test(O)};function R(e,t){console.log(x.MyQuill.length),console.log(x.MyQuill.imports["formats/"]),S.LinkBlot.blotName="link",S.LinkBlot.tagName="a",S.LinkBlot.showLinkTooltip=t=>{e.showLinkTooltip(t,t.value,Object(_.isEdit)(),z)},S.LinkBlot.hideLinkTooltip=()=>e.hideLinkTooltip(z),x.MyQuill.register(S.LinkBlot,!0),T.FigureBlot.blotName="blockFigure",T.FigureBlot.tagName="figure",T.FigureBlot.quillSetSelection=(e,t=0)=>z.setSelection(e,t,l.a.sources.USER),T.FigureBlot.quillDeleteText=(e,t,o=l.a.sources.USER)=>z.deleteText(e,t,o),T.FigureBlot.quillInsertText=(e,t)=>z.insertText(e,t,l.a.sources.USER),T.FigureBlot.draftSave=()=>Object(_.draftSave)(o,z),x.MyQuill.register(T.FigureBlot,!0),x.MyQuill.register({"modules/syntax":B.InsSyntaxModule,"formats/bold":w.a,"formats/italic":N.a,"formats/indent":f,"formats/list":d.ListContinuer,"formats/list-item":c.a,"formats/code":g.a},!0);var o=!1;D.mobile&&document.body.classList.add("mobile");let i=document.querySelector(".tl_article"),n=document.querySelector(".tl_article_header"),u=document.querySelector(".tl_article_content"),h=document.querySelector("#_bold_button"),p=document.querySelector("#_italic_button"),O=document.querySelector("#_link_button"),R=document.querySelector("#_header_button"),F=document.querySelector("#_subheader_button"),U=document.querySelector("#_quote_button"),M=document.querySelector("#_image_button"),j=document.querySelector("#_embed_button");document.querySelector(".account");var z=new x.MyQuill(t,{scrollingContainer:"html, body",readOnly:!0,modules:{syntax:{highlight:e=>P.default.highlightAuto(e).value},clipboard:{matchers:[H("h2",{blockHeader:!0}),H("h5",{blockSubheader:!0}),H("h6",{blockSubheader:!0}),["img",function(e,t){return e.src&&Object(_.sanitize)(e.src,["http","https","data"])?(new a.a).insert({blockFigure:{image:e.src,caption:e.alt||""}}):new a.a}],["video",function(e,t){return e.src&&Object(_.sanitize)(e.src,["http","https","data"])?(new a.a).insert({blockFigure:{video:e.src}}):new a.a}],["br",function(e,t){return console.log("modules.clipboard.matchers.br"),e.classList.contains("inline")?(new a.a).insert({textBreak:!0}):t}]]},keyboard:{bindings:{"required enter":{key:m.a.keys.ENTER,collapsed:!0,shiftKey:null,format:["blockTitle","blockDescription"],suffix:/^$/,handler:function(e,t){console.log("keyboard.bindings.required_enter.handler");let[o]=this.quill.scroll.descendant(v.FieldBlot,e.index);return!(o&&o.next&&o.next.domNode&&!o.next.domNode.textContent)||(this.quill.setSelection(o.next.offset(this.quill.scroll),0,l.a.sources.USER),!1)}},"required tab prev":{key:m.a.keys.TAB,shiftKey:!0,handler:function(e,t){console.log("keyboard.bindings.required_tab_prev.handler");let o=null;if(e.length>0){let t=z.scroll.descendants(s.c,e.index,e.length);if(1!=t.length)return!0;o=t[0]}else[o]=z.scroll.descendant(s.c,e.index);if(null!=o&&null!=o.prev&&o.prev instanceof v.FieldBlot){let e=o.prev.offset(z.scroll),t=o.prev.length();return z.setSelection(e,t>1?t:0,l.a.sources.USER),!1}return!0}},"required tab next":{key:m.a.keys.TAB,shiftKey:!1,handler:function(e,t){console.log("keyboard.bindings.required_tab_next.handler");let o=null;if(e.length>0){let t=z.scroll.descendants(s.c,e.index,e.length);if(1!=t.length)return!0;o=t[0]}else[o]=z.scroll.descendant(s.c,e.index);if(null!=o&&o instanceof v.FieldBlot&&null!=o.next){let e=o.next.offset(z.scroll);if(o.next instanceof v.FieldBlot){let t=o.next.length();z.setSelection(e,t>1?t:0,l.a.sources.USER)}else z.setSelection(e,0,l.a.sources.USER);return!1}return!0}},"no tab":{key:m.a.keys.TAB,shiftKey:null,handler:function(e,t){return console.log("keyboard.bindings.no_tab.handler"),!1}},"detect embed":{key:m.a.keys.ENTER,collapsed:!0,handler:function(t,o){console.log("keyboard.bindings.detect_embed.handler");let[i,r]=z.scroll.line(t.index);if(i){let o,n=i.domNode.textContent.substr(0,r);if(o=n.match(/(^|\s)(https?:\/\/\S+)$/)){let s=o[2];if(z.scroll.descendants(S.LinkBlot,t.index-s.length,s.length).length||z.formatText(t.index-s.length,s.length,"link",s,l.a.sources.USER),!n.substr(0,r-s.length).trim().length&&"P"==i.domNode.tagName){let t=$(s);if(t){let o=i.offset(z.scroll);return z.updateContents((new a.a).retain(o).delete(n.length).insert({blockFigure:t}),l.a.sources.USER),e.hideBlocksTooltip(),!1}}}}return!0}},"divider autofill":{key:m.a.keys.ENTER,collapsed:!0,prefix:/^([-*])\1{2,}$/,handler:function(e,t){console.log("keyboard.bindings.divider_autofill.handler");let[o,i]=z.scroll.line(e.index);if(o&&"P"==o.domNode.tagName){let e=o.offset(z.scroll),t=(new a.a).retain(e).delete(o.length()).insert({blockDivider:!0});return o.next||t.insert("\n"),z.updateContents(t,l.a.sources.USER),!1}return!0}},break:{key:m.a.keys.ENTER,shiftKey:!0,handler:G.bind(null,!0)},enter:{key:m.a.keys.ENTER,handler:G.bind(null,!1)},"detect link":{key:" ",collapsed:!0,handler:function(e){console.log("detectLinkHandler",e);let[t,o]=z.scroll.line(e.index);if(t){let i,r=t.domNode.textContent.substr(0,o);if(i=r.match(/(^|\s)((?:https?|tg):\/\/\S+|www\.\S+)$/)){let t=i[2],o=t.length;"www."==t.substr(0,4)&&(t="http://"+t),z.scroll.descendants(S.LinkBlot,e.index-o,o).length||z.formatText(e.index-o,o,"link",t,l.a.sources.USER)}}return!0}},"cancel placeholder":{key:m.a.keys.ESCAPE,handler:function(e,t){return console.log("keyboard.bindings.cancel_placeholder.handler"),K(),this.quill.updateSelection(l.a.sources.USER),!0}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{list:!1,"code-block":!1,blockquote:!1,header:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query&&null==this.quill.scroll.query("list"))return!0;const{length:o}=t.prefix,[i,r]=this.quill.getLine(e.index);if(r>o)return!0;let n;switch(t.prefix.trim()){case"[]":case"[ ]":n="unchecked";break;case"[x]":n="checked";break;case"-":case"*":n="bullet";break;default:n={type:"ordered",start:Number(t.prefix.slice(0,-1))-1}}this.quill.insertText(e.index," ",l.a.sources.USER),this.quill.history.cutoff(),console.log("keyboard.bindings.list_autofill.handler",e,t);const s=(new a.a).retain(e.index-r).delete(o+1).retain(i.length()-2-r).retain(1,{list:n,start:n.start});console.log("keyboard.bindings.list_autofill.handler",s);const c=this.quill.updateContents(s,l.a.sources.USER);return console.log("keyboard.bindings.list_autofill.handler",c),this.quill.history.cutoff(),this.quill.setSelection(e.index-o,l.a.sources.SILENT),!1}},"pre wrap":{key:192,collapsed:!0,format:{"code-block":!1},prefix:/^``$/,offset:2,handler:function(e,t){console.log("keyboard.bindings.pre_wrap.handler");let o=t.prefix.length,i=e.index-o;this.quill.scroll.deleteAt(i,o),this.quill.formatLine(i,1,"code-block",!0,l.a.sources.USER),this.quill.setSelection(i,l.a.sources.SILENT)}},code:{key:192,handler:function(e,t){if(console.log("keyboard.bindings.code.handler",!t.format),!t.collapsed){let o=z.scroll.descendants(s.c,e.index,e.length);if(o.length>1||1==o.length&&o[0]instanceof I.a)return this.quill.format("code-block",!t.format["code-block"],l.a.sources.USER),!1;if(z.scroll.descendants(y.BreakBlot,e.index,e.length).length)return this.quill.format("code-block",!t.format["code-block"],l.a.sources.USER),!1}if(t.collapsed&&!t.format.code&&!/\s$/.test(t.prefix))return!0;this.quill.format("code",!t.format.code,l.a.sources.USER)}},"figure delete":{key:m.a.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(e,t){console.log("keyboard.bindings.figure_delete.handler");let[o,i]=z.scroll.line(e.index);return!(o&&o.prev&&o.prev instanceof T.FigureBlot)||(t.empty&&z.deleteText(e.index,1,l.a.sources.USER),z.setSelection(o.prev.offset(z.scroll)),!1)}},"field backspace":{key:m.a.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(e,t){console.log("keyboard.bindings.field_backspace.handler");let[o,i]=z.scroll.line(e.index);return!(o&&o.prev&&o.prev instanceof v.FieldBlot&&o.domNode.textContent.length>0)}}}}}});function H(e,t){return[e,function(e,o){return o.compose((new a.a).retain(o.length(),t))}]}function W(e){let t=function(e){let[t,o]=z.scroll.line(e);return z.getText(e,t.length()-o)}(e);return!t||"\n"==t}function G(e,t,o){console.log("breakHandler",e,t,o);let i,r=t.index;t.length>0&&z.scroll.deleteAt(r,t.length);let n=W(r),a=!1;return[i]=z.scroll.descendant(y.BreakBlot,r),i?(!i.prev||i.prev instanceof y.BreakBlot)&&(z.scroll.deleteAt(--r,1),a=!0):([i]=z.scroll.descendant(y.BreakBlot,r-1),i&&(z.scroll.deleteAt(--r,1),a=!0)),[i]=z.scroll.descendant(E.SingleLineBlot,r),i||a||!e?(z.insertText(r,"\n",l.a.sources.USER),z.setSelection(++r,0,l.a.sources.USER),(o.format.blockHeader||o.format.blockSubheader||o.format.blockBlockquote||o.format.blockPullquote)&&n&&z.formatLine(r,1,{blockHeader:!1,blockSubheader:!1,blockBlockquote:!1,blockPullquote:!1},l.a.sources.USER)):(z.insertEmbed(r,"textBreak",!0,l.a.sources.USER),[i]=z.scroll.descendant(y.BreakBlot,r),!i||i.next||i.prev&&i.prev instanceof y.BreakBlot||(z.insertEmbed(++r,"textBreak",!0,l.a.sources.SILENT),z.setSelection(r,0,l.a.sources.SILENT))),!1}function V(e){let t=null==e?{}:z.getFormat(e),o=!!t.blockDescription,i=!(!t.blockHeader&&!t.blockSubheader),r=!!t["code-block"];if(h.classList.toggle("active",!!t.bold),h.classList.toggle("disabled",o||i||r),p.classList.toggle("active",!!t.italic),p.classList.toggle("disabled",o||i||r),R.classList.toggle("active",!!t.blockHeader),R.classList.toggle("disabled",o),F.classList.toggle("active",!!t.blockSubheader),F.classList.toggle("disabled",o),U.classList.toggle("active",!(!t.blockBlockquote&&!t.blockPullquote)),U.classList.toggle("pullquote",!!t.blockPullquote),U.classList.toggle("disabled",o),null!=e){let t=z.scroll.descendants(S.LinkBlot,e.index,e.length);O.classList.toggle("active",!!t.length)}else O.classList.toggle("active",!1);O.classList.toggle("disabled",r)}function $(e){let t;if((t=e.match(/^(https?):\/\/(www\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/i))||(t=e.match(/^(https?):\/\/(www\.)?youtu\.be\/([a-zA-Z0-9_-]+)/i)))return{embed:"/embed/youtube?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(www\.)?vimeo\.com\/(\d+)/i))return{embed:"/embed/vimeo?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(www\.|mobile\.)?twitter\.com\/(.+)\/status\/(\d+)/i))return{embed:"/embed/twitter?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(t\.me|telegram\.me|telegram\.dog)\/([a-zA-Z0-9_]+)\/(\d+)/i))return{embed:"/embed/telegram?url="+encodeURIComponent(e)};if(t=e.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))return"video/"==t[1].substr(0,6)?{video:e}:{image:e};if(t=e.match(/^(https?):\/\/\S+/i)){let o=document.createElement("a");if(o.href=e,o.pathname.match(/\.(jpe?g|png|gif|mp4)$/i))return"mp4"==t[1]?{video:e}:{image:e}}return!1}function K(){const e=document.querySelector(".placeholder_once");null!==e&&(e.removeAttribute("data-placeholder"),e.classList.remove("placeholder_once","empty"))}function X(e){e.scroll.descendants(s.c,0,e.scroll.length()).forEach(e=>{if(e.domNode.hasAttribute("data-placeholder")){let t=e.domNode.textContent;e.domNode.classList.toggle("empty",!t)}})}function Y(e){let[t,o]=e.scroll.lines();if(t instanceof s.a)e.updateContents((new a.a).insert("\n",{blockTitle:!0}).insert("\n",{blockDescription:!0}),l.a.sources.SILENT);else if(t instanceof L.TitleBlot||e.formatLine(0,1,{blockTitle:!0},l.a.sources.SILENT),o){if(o instanceof s.a){let t=o.offset(e.scroll);e.updateContents((new a.a).retain(t).insert("\n",{blockDescription:!0}),l.a.sources.SILENT)}else if(!(o instanceof C.DescriptionBlot)){let t=o.offset(e.scroll);e.formatLine(t,1,{blockDescription:!0},l.a.sources.SILENT)}}else{let t=e.scroll.length();e.updateContents((new a.a).retain(t).insert("\n",{blockDescription:!0}),l.a.sources.SILENT)}let[,,i]=e.scroll.lines();if(i){let t=i.offset(e.scroll),o=e.scroll.length()-t;e.scroll.descendants(v.FieldBlot,t,o).forEach(t=>{let o=t.offset(e.scroll),i=t.length(),r=t.constructor.blotName;e.formatText(o,i,r,!1,l.a.sources.SILENT)})}else{let t=e.scroll.length();e.insertText(t,"\n",l.a.sources.SILENT)}let r=e.scroll.lines();r.forEach((e,t)=>{"P"==e.domNode.tagName&&(3==r.length&&2==t?e.domNode.setAttribute("data-placeholder","Your story..."):e.domNode.removeAttribute("data-placeholder"))})}function J(e,t){(t=t||{}).close_btn=t.close_btn||"OK",t.submit_btn=t.submit_btn||!1,t.close=t.close||Q,t.submit=t.submit||t.close,Q();var o=document.createElement("div");o.classList.add("tl_alert"),o.innerHTML='<main class="tl_alert_message"><section></section><aside class="tl_message_buttons"></aside></main>',o.querySelector("section").innerHTML=e;var i=o.querySelector("aside");if(t.close_btn){var r=document.createElement("button");r.classList.add("button"),r.innerHTML=t.close_btn,r.addEventListener("click",t.close),r.append(i)}if(t.submit_btn){var n=document.createElement("button");n.classList.add("button"),n.innerHTML=t.submit_btn,n.addEventListener("click",(function(){o.classList.add("tl_alert_loading"),t.submit()})),n.append(i)}o.append("body")}function Q(){const e=document.querySelector(".tl_alert");e&&e.remove()}function Z(e){console.log(Z)}function ee(e){let t=e.querySelector(".prompt_input"),o=e.querySelector(".close");t.onkeydown=null,t.onblur=null,o.onclick=null,e.style.display="",e.classList.remove("tooltip_prompt"),z.focus()}return z.addContainer(e.$tl_link_tooltip),z.addContainer(e.$tl_tooltip),z.addContainer(e.$tl_blocks),z.on(l.a.events.EDITOR_CHANGE,(function(t,o){if(t!==l.a.events.SELECTION_CHANGE)return;if(!z.isEnabled())return;if(null==o)return;!function(t){let[o]=z.scroll.descendant(T.FigureBlot,t.index);z.scroll.descendants(T["FigureBlot"],0,z.scroll.length()).forEach(e=>{o!==e&&e.blur()}),o&&(o.focus(),e.hideFormatTooltip(z),e.hideBlocksTooltip())}(o);let[r,n]=z.scroll.descendant(s.c,o.index);0===o.length?(e.hideFormatTooltip(z),null==r||r instanceof v.FieldBlot||r instanceof b.BlockquoteBlot||r instanceof k.PullquoteBlot||r instanceof I.a||r instanceof c.a||""!==r.domNode.textContent?e.hideBlocksTooltip():e.showBlocksTooltip(o,Object(_.isEdit)(),z)):(null==r||r instanceof L.TitleBlot?e.hideFormatTooltip(z):(e.showFormatTooltip(o,z,Object(_.isEdit)()),V(o)),e.hideBlocksTooltip());let a=z.getFormat(o);i&&i.classList.toggle("title_focused",!(!a.blockTitle&&!a.blockDescription)),K()})),z.on(l.a.events.TEXT_CHANGE,(function(){z.getSelection();Y(z),X(z),K(),Object(_.draftSave)(o,z)})),z.on(l.a.events.SCROLL_OPTIMIZE,(function(e){e.forEach(e=>{if("childList"==e.type&&!e.addedNodes.length&&e.removedNodes.length){let t=e.previousSibling,o=e.nextSibling;if(!o&&t&&"BR"==t.tagName&&"inline"==t.className){let t=document.createElement("br");t.className="inline",e.target.appendChild(t)}else!o||!t||"BR"==t.tagName&&"inline"==t.className||"BR"!=o.tagName||"inline"!=o.className||o.nextSibling||o.parentNode&&o.parentNode.removeChild(o)}})})),z.scroll.domNode.setAttribute("dir","auto"),document.addEventListener("click touchstart",(function(t){let o=t.target;for(;o;){if(o===z.container)return;o=o.parentNode}e.hideFormatTooltip(z),e.hideBlocksTooltip()})),Y(z),X(z),function(){const t={page_id:_.T.pageId};t.save_hash&&(_.T.saveHash=t.save_hash);if(!_.T.pageId&&(i&&i.classList.add("tl_article_edit"),!function(){if(!_.T.pageId)return function(e){try{return localStorage.getItem(e)}catch(e){return!1}}("draft");return!1}()&&t.author_name)){let e;e=t.author_url?{link:t.author_url}:{};let[o]=z.scroll.descendants(C.DescriptionBlot);o&&z.updateContents((new a.a).retain(o.offset()).delete(o.length()).insert(t.author_name,e),l.a.sources.USER)}if(t.auth_alert&&t.short_name){var r="Success! You are now logged in as <b>"+t.short_name.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;").replace(/%/g,"&#37;")+"</b> in this browser.";t.migrate_count>0&&t.migrate_hash?(r+="<br/><br/>",J(r+="We can also add "+t.migrate_count+" Telegraph page"+(t.migrate_count>1?"s":"")+" from this browser to your account.",{close_btn:"Skip",submit_btn:"Add",submit:function(){Z(t.migrate_hash)}})):J(r)}o=Object(_.getPageContent)(!0,z),Object(_.updateEditable)(Object(_.isEdit)(),z,e,i,u,n)}(),h.onclick=e=>{console.log("$bold_button.onclick");let t=e.target.classList.contains("active");e.preventDefault(),console.log("$bold_button.onclick",!t),z.format("bold",!t),console.log("$bold_button.onclick",z.getSelection(!0)),z.updateSelection(l.a.sources.API)},p.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault(),z.format("italic",!t),z.updateSelection(l.a.sources.API)},O.onclick=t=>{let o=t.target.classList.contains("active");t.preventDefault();var i=z.getSelection(!0);if(o){z.scroll.descendants(S.LinkBlot,i.index,i.length).forEach(e=>{let t=e.offset(z.scroll),o=e.length();z.formatText(t,o,"link",!1)}),V(i)}else!function(e,t,o){let i=e.querySelector(".prompt_input"),r=e.querySelector(".close");i.value="",i.setAttribute("placeholder",t),i.onkeydown=t=>{let r=t.which||t.keyCode;if(27==r)ee(e);else if(13==r){let r=i.value;r&&(o&&o(r),t.preventDefault()),ee(e)}},i.onblur=()=>{ee(e)},r.onclick=()=>{ee(e)},e.style.display="",e.classList.add("tooltip_prompt"),i.focus()}(e.$tl_tooltip,"Paste or type a link...",(function(e){"#"!=(e=e.trim()).substr(0,1)&&"/"!=e.substr(0,1)&&"http://"!=e.substr(0,7)&&"https://"!=e.substr(0,8)&&"tg://"!=e.substr(0,5)&&"mailto:"!=e.substr(0,7)&&(e=e.indexOf("@")>0?"mailto:"+e:"http://"+e),z.focus(),z.format("link",e),V(i)}))},R.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault();let o=z.getSelection(!0);z.format("blockHeader",!t),z.scroll.descendants(A.HeaderBlot,o.index,o.length).forEach(e=>{let t=e.offset(z.scroll),o=e.length();z.formatText(t,o,{bold:!1,italic:!1,code:!1},l.a.sources.SILENT)}),z.updateSelection(l.a.sources.API)},F.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault();let o=z.getSelection(!0);z.format("blockSubheader",!t),z.scroll.descendants(q.SubheaderBlot,o.index,o.length).forEach(e=>{let t=e.offset(z.scroll),o=e.length();z.formatText(t,o,{bold:!1,italic:!1,code:!1},l.a.sources.SILENT)}),z.updateSelection(l.a.sources.API)},U.onclick=e=>{let t=e.target,o=t.classList.contains("active"),i=t.classList.contains("pullquote");e.preventDefault();z.getSelection(!0);o?z.format("blockPullquote",!i):z.format("blockBlockquote",!0),z.updateSelection(l.a.sources.API)},M.onclick=()=>{let e=z.container.querySelector("input.ql-image[type=file][data-status=ready]");null==e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",D.safari_mobile?"image/gif, image/jpeg, image/jpg, image/png":"image/gif, image/jpeg, image/jpg, image/png, video/mp4"),e.classList.add("ql-image"),e.addEventListener("change",()=>{if(e&&null!=e.files&&null!=e.files[0]){var t=e.files[0];const o=function(){Object(_.showError)("File too big (up to 5 MB allowed)")},i=5242880;!function(e,t){if("image/jpg"==e.type||"image/jpeg"==e.type)return r()(e,o=>{if("error"===o.type)t(e);else if(o.toBlob)o.toBlob((function(e){t(e)}),e.type);else{var i=o.toDataURL(e.type),r={type:e.type,base64_data:i.split(",")[1]};t(Object(_.uploadDataToBlob)(r))}},{canvas:!0,orientation:!0});t(e)}(t,t=>{if(t.size>i)return o&&o();var r=new FileReader;r.onload=function(t){if(t&&null!==t.target){let o=$(t.target.result);if(o){let e=z.getSelection(!0);z.updateContents((new a.a).retain(e.index).delete(e.length).insert({blockFigure:o}),l.a.sources.USER)}else Object(_.showError)("Invalid file format");e.value="",e.setAttribute("data-status","ready")}},r.readAsDataURL(t)})}}),z.container.appendChild(e)),e.setAttribute("data-status","busy"),e.click()},j.onclick=t=>{let o=z.getSelection(!0),[i]=z.scroll.line(o.index);const r=i.domNode;if(i){r.textContent||(r.setAttribute("data-placeholder","Paste a YouTube, Vimeo or Twitter link, and press Enter"),r.classList.add("placeholder_once","empty"),e.hideBlocksTooltip())}},window.addEventListener("scroll resize",()=>{e.tooltipUpdatePosition(e.$tl_tooltip,null,e.formatTTOptions,z),e.tooltipUpdatePosition(e.$tl_link_tooltip,null,e.linkTTOptions,z)}),z}},60:function(e,t,o){var i,r,n;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/r=[e,t],void 0===(n="function"==typeof(i=function(e,t){"use strict";var o,i,r="function"==typeof Map?new Map:(o=[],i=[],{has:function(e){return o.indexOf(e)>-1},get:function(e){return i[o.indexOf(e)]},set:function(e,t){-1===o.indexOf(e)&&(o.push(e),i.push(t))},delete:function(e){var t=o.indexOf(e);t>-1&&(o.splice(t,1),i.splice(t,1))}}),n=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){n=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function a(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t,o=null,i=null,a=null,s=function(){e.clientWidth!==i&&u()},l=function(t){window.removeEventListener("resize",s,!1),e.removeEventListener("input",u,!1),e.removeEventListener("keyup",u,!1),e.removeEventListener("autosize:destroy",l,!1),e.removeEventListener("autosize:update",u,!1),Object.keys(t).forEach((function(o){e.style[o]=t[o]})),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",l,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",u,!1),window.addEventListener("resize",s,!1),e.addEventListener("input",u,!1),e.addEventListener("autosize:update",u,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:l,update:u}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),o="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(o)&&(o=0),u()}function c(t){var o=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=o,e.style.overflowY=t}function d(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+o+"px",i=e.clientWidth,t.forEach((function(e){e.node.scrollTop=e.scrollTop})),r&&(document.documentElement.scrollTop=r)}}function u(){d();var t=Math.round(parseFloat(e.style.height)),o=window.getComputedStyle(e,null),i="content-box"===o.boxSizing?Math.round(parseFloat(o.height)):e.offsetHeight;if(i<t?"hidden"===o.overflowY&&(c("scroll"),d(),i="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==o.overflowY&&(c("hidden"),d(),i="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),a!==i){a=i;var r=n("autosize:resized");try{e.dispatchEvent(r)}catch(e){}}}}function s(e){var t=r.get(e);t&&t.destroy()}function l(e){var t=r.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return a(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],l),e}),t.default=c,e.exports=t.default})?i.apply(t,r):i)||(e.exports=n)},64:function(e,t,o){"use strict";o.r(t),o.d(t,"uploadFileService",(function(){return i}));function i(e,t){return new Promise((o,i)=>{var r=new XMLHttpRequest,n=new FormData;r.open("POST","https://api.cloudinary.com/v1_1/inscriptum/upload",!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.upload.addEventListener("progress",(function(e){e.lengthComputable&&t&&t(e.loaded,e.total)})),t&&t(0,1),n.append("upload_preset","cz5pibn5"),n.append("tags","browser_upload"),n.append("file",e),r.send(n),r.onreadystatechange=e=>{if(4==r.readyState&&200==r.status){var t=JSON.parse(r.responseText);console.log(1111,t),t.src=t.secure_url,o(t)}},r.onerror=function(){i(new Error("Network Error"))}})}},65:function(e,t,o){"use strict";o.r(t),o.d(t,"CodeEndLineFlag",(function(){return a})),o.d(t,"InsSyntaxCodeBlock",(function(){return s})),o.d(t,"InsSyntaxModule",(function(){return l}));var i=o(41),r=o(57),n=o(79);class a extends r.a{static formats(){return{}}}a.blotName="code-end",a.className="l",a.tagName="SPAN",i.a.register(a);class s extends n.a{highlight(e){let t=this.domNode.textContent||"";if(this.cachedText!==t){if(t.trim().length>0||null==this.cachedText){let o="";const i=e(t).split("\n");for(let e=0;e<i.length-1;e++)o+=`<span class="l">${i[e]||" "}</span>\n`;o+=`<span class="l">${i[i.length-1]}</span>`,this.domNode.innerHTML=`<code class="hljs">${o}</code>`}this.cachedText=t}}}class l extends n.c{static register(){i.a.register(n.b,!0),i.a.register(s,!0)}highlight(){if(this.quill.selection.composing)return;this.quill.update(i.a.sources.USER);let e=this.quill.getSelection();this.quill.scroll.descendants(s).forEach(e=>{e.highlight(this.options.highlight)}),this.quill.update(i.a.sources.SILENT),null!=e&&document.activeElement===this.quill.container.querySelector("[contenteditable]")&&this.quill.setSelection(e,i.a.sources.SILENT)}}},68:function(e,t,o){"use strict";o.r(t),o.d(t,"TitleBlot",(function(){return n}));var i=o(41),r=o(50);class n extends r.FieldBlot{static create(e){let t=super.create(e);return t.setAttribute("data-placeholder","Title"),t.setAttribute("data-label","Title"),t}formatAt(e,t,o,i){o===n.blotName&&super.formatAt(e,t,o,i)}}n.blotName="blockTitle",n.tagName="h1",i.a.register(n)},70:function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return l}));var i=o(43),r=o.n(i),n=o(42),a=o(120);class s extends n.c{static formats(e){return e.tagName===this.tagName?void 0:super.formats(e)}format(e,t){e!==l.blotName||t?super.format(e,t):this.replaceWith(r.a.create(this.statics.scope))}remove(){null==this.prev&&null==this.next?this.parent.remove():super.remove()}replaceWith(e,t){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,t),this):(this.parent.unwrap(),super.replaceWith(e,t))}}s.blotName="list-item",s.tagName="LI";class l extends a.a{static create(e){let t="ordered"===e?"OL":"UL",o=super.create(t);return"checked"!==e&&"unchecked"!==e||o.setAttribute("data-checked","checked"===e),o}static formats(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}constructor(e){super(e);const t=t=>{if(t.target.parentNode!==e)return;let o=this.statics.formats(e),i=r.a.find(t.target);"checked"===o?i.format("list","unchecked"):"unchecked"===o&&i.format("list","checked")};e.addEventListener("touchstart",t),e.addEventListener("mousedown",t)}format(e,t){this.children.length>0&&this.children.tail.format(e,t)}formats(){return{[this.statics.blotName]:this.statics.formats(this.domNode)}}insertBefore(e,t){if(e instanceof s)super.insertBefore(e,t);else{let o=null==t?this.length():t.offset(this),i=this.split(o);i.parent.insertBefore(e,i)}}optimize(e){super.optimize(e);let t=this.next;null!=t&&t.prev===this&&t.statics.blotName===this.statics.blotName&&t.domNode.tagName===this.domNode.tagName&&t.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(t.moveChildren(this),t.remove())}replace(e){if(e.statics.blotName!==this.statics.blotName){let t=r.a.create(this.statics.defaultChild);e.moveChildren(t),this.appendChild(t)}super.replace(e)}}l.blotName="list",l.scope=r.a.Scope.BLOCK_BLOT,l.tagName=["OL","UL"],l.defaultChild="list-item",l.allowedChildren=[s]},71:function(e,t,o){"use strict";o.r(t),o.d(t,"ListContinuer",(function(){return r}));var i=o(70);class r extends i.b{static create(e){let t;return"string"==typeof e?t=super.create(e):(t=super.create(e.type),void 0!==e.start&&(t.setAttribute("start",e.start),t.style["counter-reset"]=`list-0 ${e.start}`)),t}static formats(e){let t=super.formats(e);return console.log("MyList-static.formats",t,e.getAttribute("start")),{type:t,start:e.getAttribute("start")}}}},72:function(e,t,o){"use strict";o.r(t),o.d(t,"BlockquoteBlot",(function(){return n}));var i=o(41),r=o(42);class n extends r.c{}n.blotName="blockBlockquote",n.tagName="blockquote",i.a.register(n)},73:function(e,t,o){"use strict";o.r(t),o.d(t,"LinkBlot",(function(){return n}));var i=o(57),r=o(49);class n extends i.a{constructor(e,t){super(e),this.value=t,e.addEventListener("mouseover",n.showLinkTooltip.bind(this,this),!1),e.addEventListener("mouseout",n.hideLinkTooltip,!1)}static create(e){let t=super.create(e);e=this.sanitize(e),t.setAttribute("href",e);var o=e.substr(0,1);return"/"!=o&&"#"!=o&&"tg://"!=e.substr(0,5)&&"mailto:"!=e.substr(0,7)&&t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){const t=n.relativeUrl(e);return Object(r.sanitize)(e,["http","https","tg","mailto"])?t:"about:blank"}detach(){this.domNode.removeEventListener("mouseover",n.showLinkTooltip.bind(this,this),!1),this.domNode.removeEventListener("mouseout",n.hideLinkTooltip,!1),super.detach(),n.hideLinkTooltip()}format(e,t){if(e!==this.statics.blotName||!t)return super.format(e,t);t=n.sanitize(t),this.domNode.setAttribute("href",t),this.domNode.setAttribute("data-title",t)}static relativeUrl(e){let t=location,o=document.createElement("a");return o.href=e,t.origin!==o.origin?o.href:t.pathname!==o.pathname||t.search!==o.search?o.pathname+o.search+o.hash:t.href===o.href?o.hash||o.pathname+o.search+o.hash:o.hash}}},74:function(e,t,o){"use strict";o.r(t),o.d(t,"MyQuill",(function(){return r}));var i=o(41);class r extends i.a{formatLine(...e){super.formatLine(...e),this.updateSelection()}formatText(...e){super.formatText(...e),this.updateSelection()}updateSelection(e){if(this.hasFocus()){e=e||r.sources.SILENT;let t=this.getSelection(!0);this.setSelection(++t.index,t.length,e),this.setSelection(--t.index,t.length,e)}}}},75:function(e,t,o){"use strict";o.r(t),o.d(t,"PullquoteBlot",(function(){return n}));var i=o(41),r=o(42);class n extends r.c{}n.blotName="blockPullquote",n.tagName="aside",i.a.register(n)},76:function(e,t,o){"use strict";o.r(t),o.d(t,"FigureBlot",(function(){return d}));var i=o(41),r=o(42),n=o(111),a=o(60),s=o.n(a),l=o(64),c=o(49);class d extends r.a{constructor(e,t){super(e),this.domNode=e,this.domWrapper=document.createElement("div"),this.domCursor=document.createElement("span"),this.domCaption=document.createElement("figcaption"),this.domWrapper.classList.add("figure_wrapper"),this.domCursor.classList.add("cursor_wrapper"),this.domCursor.setAttribute("contenteditable","true"),this.domCaption.classList.add("editable_text"),this.domCaption.setAttribute("data-placeholder","Caption (optional)"),t.caption&&(this.domCaption.innerText=t.caption),this.domNode.appendChild(this.domWrapper),this.domNode.appendChild(this.domCursor),this.domNode.appendChild(this.domCaption),setTimeout(()=>{Object(c.updateEditableText)(this.domNode)},1);let o=!1;t.image?(this.appendImgNode(t.image),o=this.uploadData(t.image)):t.video?(this.appendVideoNode(t.video),o=this.uploadData(t.video)):t.embed&&this.appendIframeNode(t.embed),o&&(this.domProgress=document.createElement("div"),this.domProgressBar=document.createElement("div"),this.domProgress.classList.add("file_progress"),this.domProgressBar.classList.add("file_progress_bar"),this.domWrapper.classList.add("loading"),this.domProgress.appendChild(this.domProgressBar),this.domWrapper.appendChild(this.domProgress),this.uploadFile(o)),this.domWrapper.onclick=()=>{if(!this.domNode.classList.contains("focus")){let e=this.offset(this.scroll);this.focus(),d.quillSetSelection(e)}},this.domCursor.onkeydown=e=>{let t=e.which||e.keyCode;if(t==n.a.keys.BACKSPACE){let t=this.offset(this.scroll);d.quillDeleteText(t,this.length()),d.quillSetSelection(t-1),e.preventDefault()}else if(t==n.a.keys.ENTER){let t=this.offset(this.scroll)+this.length();this.focus(),d.quillInsertText(t,"\n"),d.quillSetSelection(t),e.preventDefault()}},this.domCursor.onpaste=e=>{e.stopPropagation(),e.preventDefault()},this.domCaption.onkeydown=e=>{let t=e.which||e.keyCode,o=e.target;if(t==n.a.keys.ENTER){if(e.shiftKey)return;let t={start:o.selectionStart,end:o.selectionEnd},i=o.value;if(t.start!=t.end)i=i.substr(0,t.start)+i.substr(t.end),o.setSelectionRange(i.length,i.length);else if(t.end==i.length){let e=this.offset(this.scroll)+this.length();this.focus(),d.quillInsertText(e,"\n"),d.quillSetSelection(e)}e.preventDefault()}else if(t==n.a.keys.DOWN||t==n.a.keys.TAB||t==n.a.keys.RIGHT){let t={start:o.selectionStart,end:o.selectionEnd},i=o.value;if(t.start==t.end&&t.end==i.length){let t=this.offset(this.scroll)+this.length();this.focus(),d.quillSetSelection(t,0),e.preventDefault()}}else if(t==n.a.keys.LEFT||t==n.a.keys.UP){let t={start:o.selectionStart,end:o.selectionEnd};if(t.start==t.end&&0===t.start){let t=this.offset(this.scroll)-1;this.focus(),d.quillSetSelection(t,0),e.preventDefault()}}};const i=e=>{null!==e&&null!==e.target&&(this.domCaption.classList.toggle("empty",!e.target.value),s.a.update(e.target),d.draftSave())};this.domCaption.onpaste=e=>{e.stopPropagation(),i(e)},this.domCaption.onkeyup=i,this.domCaption.ondrop=i,this.domCaption.onchange=i,this.domCaption.oninput=i,this.domCaption.oncut=i,this.domCaption.onclick=e=>{e.target&&e.target.focus()}}static create(e){let t=super.create(e);return t.setAttribute("contenteditable","false"),t}appendImgNode(e){let t=document.createElement("img");return t.setAttribute("src",this.sanitize(e)),this.domWrapper.appendChild(t),t}appendVideoNode(e){let t=document.createElement("video");return t.setAttribute("src",this.sanitize(e)),t.setAttribute("preload","auto"),t.setAttribute("controls","controls"),t.addEventListener("loadeddata",(function(){this.mozHasAudio||this.webkitAudioDecodedByteCount||this.audioTracks&&this.audioTracks.length||(this.setAttribute("autoplay","autoplay"),this.setAttribute("loop","loop"),this.setAttribute("muted","muted"),this.removeAttribute("controls"),this.play())})),this.domWrapper.appendChild(t),t}appendIframeNode(e){let t=document.createElement("div"),o=document.createElement("div"),i=document.createElement("iframe");return t.classList.add("iframe_wrap"),t.appendChild(o),o.classList.add("iframe_helper"),o.style.paddingTop="56.25%",o.appendChild(i),i.setAttribute("src",this.sanitize(e)),i.setAttribute("width","640"),i.setAttribute("height","360"),i.setAttribute("frameborder","0"),i.setAttribute("allowtransparency","true"),i.setAttribute("allowfullscreen","true"),i.setAttribute("scrolling","no"),this.domWrapper.appendChild(t),t}uploadFile(e){this.uploadFileStart(e,(e,t)=>{let o=0;t&&e&&(o=100*e/t,o=Math.min(100,o)),this.domProgressBar.style.width=o+"%"},t=>{if(t){let o=this.sanitize(t.src);if("video/"==e.type.substr(0,6)){let e=this.domWrapper.querySelector("video");e&&e.setAttribute("src",o)}else{let e=this.domWrapper.querySelector("img");e&&e.setAttribute("src",o)}this.domWrapper.classList.remove("loading"),d.draftSave()}},e=>(d.quillDeleteText(this.offset(this.scroll),this.length(),i.a.sources.SILENT),d.draftSave(),Object(c.showError)(e)))}uploadData(e){let t=null;return!!(t=e.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))&&{type:t[1],base64_data:t[2]}}sanitize(e){return Object(c.sanitize)(e,["http","https","data"])?e:"//:0"}static value(e){let t={caption:""},o=e.querySelector("img");o&&(t.image=o.src);let i=e.querySelector("video");i&&(t.video=i.src);let r=e.querySelector("iframe");r&&(t.embed=r.src);let n=e.querySelector("figcaption");if(n){let e=n.querySelector(".editable_input");t.caption=e?e.value:n.innerText}return t}focus(){this.domNode.classList.add("focus")}blur(){this.domNode.classList.remove("focus")}_index(e,t){if(e===this.domCaption)return 0;let o=0;return e.nodeType==e.TEXT_NODE&&(o+=t>=0?t:e.data.length),e.previousSibling?o+this._index(e.previousSibling,-1):e.parentNode?o+this._index(e.parentNode,-1):0}_position(e,t){if(e.nodeType==e.TEXT_NODE)return t<=e.data.length?[e,t]:[null,t-=e.data.length];{let o=e.firstChild;for(;o;){let e=null;if([e,t]=this._position(o,t),e)return[e,t];o=o.nextSibling}return[e,t]}}update(e){this.domCursor.innerHTML=""}index(e,t){return 0}position(e,t){return[this.domCursor,0]}async uploadFileStart(e,t,o,i){try{const i=await Object(l.uploadFileService)(Object(c.uploadDataToBlob)(e),t);o&&o(i)}catch(e){i&&i("Network error")}}}},77:function(e,t,o){"use strict";o.r(t),o.d(t,"DescriptionBlot",(function(){return n}));var i=o(41),r=o(50);class n extends r.FieldBlot{static create(e){console.log("DescriptionBlot create ",e);let t=super.create(e);return t.setAttribute("data-placeholder","Summary of the text"),t.setAttribute("data-label","Description"),t}formatAt(e,t,o,i){console.log("DescriptionBlot formatAt ",e,t,o,i),o===n.blotName?super.formatAt(e,t,o,i):"link"===o&&super.formatAt(0,this.length(),o,i)}format(e,t){console.log("DescriptionBlot format ",e,t),super.format(e,t)}replace(e){console.log("DescriptionBlot replace ",e),super.replace(e)}insertAt(e,t,o){console.log("DescriptionBlot insertAt ",e,t,o),super.insertAt(e,t,o)}}n.blotName="blockDescription",n.tagName="address",i.a.register(n)},78:function(e,t,o){"use strict";o.r(t),o.d(t,"SubheaderBlot",(function(){return n}));var i=o(41),r=o(54);class n extends r.HeaderBlot{}n.blotName="blockSubheader",n.tagName="h4",i.a.register(n)},79:function(e,t,o){"use strict";o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return d}));var i=o(43),r=o.n(i),n=o(105),a=o(101),s=o(67);class l extends s.b{replaceWith(e){this.domNode.textContent=this.domNode.textContent,this.attach(),super.replaceWith(e)}highlight(e){let t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}l.className="ql-syntax";let c=new r.a.Attributor.Class("token","hljs",{scope:r.a.Scope.INLINE});class d extends a.a{static register(){n.a.register(c,!0),n.a.register(l,!0)}constructor(e,t){if(super(e,t),"function"!=typeof this.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");let o=null;this.quill.on(n.a.events.SCROLL_OPTIMIZE,()=>{clearTimeout(o),o=setTimeout(()=>{this.highlight(),o=null},this.options.interval)}),this.highlight()}highlight(){if(this.quill.selection.composing)return;this.quill.update(n.a.sources.USER);let e=this.quill.getSelection();this.quill.scroll.descendants(l).forEach(e=>{e.highlight(this.options.highlight)}),this.quill.update(n.a.sources.SILENT),null!=e&&this.quill.setSelection(e,n.a.sources.SILENT)}}d.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3}},80:function(e,t,o){"use strict";o.r(t);var i=o(139),r=o.n(i),n=o(140),a=o.n(n),s=o(141),l=o.n(s),c=o(142),d=o.n(c),u=o(143),h=o.n(u),p=o(144),f=o.n(p),g=o(145),m=o.n(g),b=o(146),y=o.n(b),v=o(147),S=o.n(v);r.a.registerLanguage("javascript",a.a),r.a.registerLanguage("typescript",l.a),r.a.registerLanguage("sql",h.a),r.a.registerLanguage("html",d.a),r.a.registerLanguage("xml",f.a),r.a.registerLanguage("css",m.a),r.a.registerLanguage("bash",y.a),r.a.registerLanguage("yaml",S.a),t.default=r.a},93:function(e,t,o){"use strict";var i=o(57);class r extends i.a{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}r.blotName="bold",r.tagName=["STRONG","B"],t.a=r}}]);