(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{623:function(t,o,i){"use strict";i.r(o),i.d(o,"EditorTooltipComponent",function(){return d});var e=i(212),s=i(46),n=i(531),l=i(566);function p(){var t=function(t,o){o||(o=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(o)}}))}(['\n      <div id="_tl_link_tooltip" class="tl_link_tooltip"></div>\n      <div id="_tl_tooltip" class="tl_tooltip" @mouseover='," @mouseout=",'>\n        <div class="buttons">\n          <span class="button_hover"></span>\n          <div class="button_group">\n            <button id="_bold_button"></button>\n            <button id="_italic_button"></button>\n            <button id="_link_button"></button>\n          </div>\n          <div class="button_group">\n            <button id="_header_button"></button>\n            <button id="_subheader_button"></button>\n            <button id="_quote_button"></button>\n          </div>\n        </div>\n        <div class="prompt">\n          <span class="close"></span>\n          <div class="prompt_input_wrap"><input type="url" class="prompt_input" /></div>\n        </div>\n      </div>\n      <div id="_tl_blocks" class="tl_blocks">\n        <div class="buttons">\n          <button id="_image_button"></button>\n          <button id="_embed_button"></button>\n        </div>\n      </div>\n    ']);return p=function(){return t},t}var d=class extends e.a{constructor(){super(n.a,!1),this.html=s.e,this.linkTTOptions={padding:7,position:"bottom",depend:this.$tl_tooltip,dependPadding:10},this.formatTTOptions={padding:10,position:l.browser.mobile?"bottom":"top",minDelta:5}}connectedCallback(){super.connectedCallback(),this.$tl_link_tooltip=this.querySelector("#_tl_link_tooltip")||document.createElement("div"),this.$tl_tooltip=this.querySelector("#_tl_tooltip")||document.createElement("div"),this.$tl_blocks=this.querySelector("#_tl_blocks")||document.createElement("div")}render(){return this.html(p(),this.handleMouseover.bind(this),this.handleMouseout.bind(this))}handleMouseover(t){var o=t.target;t&&o&&"BUTTON"==o.tagName&&!o.classList.contains("disabled")&&(this.$tl_tooltip.setAttribute("data-hover",o.id),this.$tl_tooltip.classList.add("hover"),setTimeout(()=>{this.$tl_tooltip.classList.add("hover_anim")},1),clearTimeout(this.$tl_tooltip.to))}handleMouseout(t){"BUTTON"==t.target.tagName&&(this.$tl_tooltip.classList.remove("hover"),this.$tl_tooltip.to=setTimeout(()=>{this.$tl_tooltip.classList.remove("hover_anim")},70))}tooltipUpdatePosition(t,o,i,e){if(i=i||{padding:10,position:"top"},null!=(o=o||t._range||null)){var s=e.getBounds(o),n=e.container.getBoundingClientRect(),l={width:t.offsetWidth,height:t.offsetHeight},p=window.outerWidth,d=window.outerHeight,a=document.body.scrollTop,h=9,r=a+9,_=p-l.width-9,c=a+d-l.height-9;l.left=s.left+s.width/2-l.width/2;var u,b=n.left+l.left;if(b<h?l.left=h-n.left:b>_&&(l.left=_-n.left),"top"==i.position)l.top=s.top-l.height-i.padding,u=!1,n.top+l.top<r&&(l.top=s.bottom+i.padding,u=!0);else if("bottom"==i.position){var m=!1;l.top=s.bottom+i.padding,(m=this.isOverElement(l,i.depend,i.dependPadding))&&(l.top=m.bottom+i.dependPadding),u=!0,n.top+(l.top||0)>c&&(l.top=s.top-l.height-i.padding,(m=this.isOverElement(l,i.depend,i.dependPadding))&&(l.top=m.top-l.height-i.dependPadding),u=!1)}l.left=Math.round(l.left),l.top=Math.round(l.top||0),t._range=o,i.minDelta&&Math.abs(l.left-t._left)<i.minDelta&&Math.abs(l.top-t._top)<i.minDelta||(t._left=l.left,t._top=l.top,t.style.left=l.left+"px",t.style.top=l.top+"px",t.classList.toggle("bottom",u))}}isOverElement(t,o,i){if(!o||!o.classList.contains("shown"))return!1;t.bottom=t.top+t.height,t.right=t.left+t.width;var e={_left:o.offsetLeft,_top:o.offsetTop},s={top:e._top,bottom:e._top+o.offsetHeight,left:e._left,right:e._left+o.offsetWidth};return!(t.left-s.right>=i||s.left-t.right>=i||t.top-s.bottom>=i||s.top-t.bottom>=i)&&s}hideBlocksTooltip(){this.$tl_blocks.classList.remove("shown")}showFormatTooltip(t,o,i){i&&(this.$tl_tooltip.classList.remove("tooltip_prompt"),this.tooltipUpdatePosition(this.$tl_tooltip,t,this.formatTTOptions,o),this.$tl_tooltip.classList.contains("move_anim")||setTimeout(()=>{this.$tl_tooltip.classList.add("move_anim")},10),this.$tl_tooltip.classList.contains("shown")?this.tooltipUpdatePosition(this.$tl_link_tooltip,null,this.linkTTOptions,o):setTimeout(()=>{this.$tl_tooltip.classList.add("shown"),this.tooltipUpdatePosition(this.$tl_link_tooltip,null,this.linkTTOptions,o)},10))}hideFormatTooltip(t){this.$tl_tooltip.classList.remove("move_anim","shown"),this.tooltipUpdatePosition(this.$tl_link_tooltip,null,this.linkTTOptions,t)}showBlocksTooltip(t,o,i){o&&(this.$tl_blocks.classList.add("shown"),this.blocksUpdatePosition(t,i))}blocksUpdatePosition(t,o){if(void 0===t&&(t=o.getSelection()),null!=t&&o){var i=o.getBounds(t);this.$tl_blocks.style.top=i.top+i.height/2+"px"}}showLinkTooltip(t,o,i,e){if(i){var s={index:t.offset(e.scroll),length:t.length()};this.$tl_link_tooltip.textContent=o,this.tooltipUpdatePosition(this.$tl_link_tooltip,s,this.linkTTOptions,e),this.$tl_link_tooltip.classList.contains("move_anim")||setTimeout(()=>{this.$tl_link_tooltip.classList.add("move_anim")},1),this.$tl_link_tooltip.classList.contains("shown")||setTimeout(()=>{this.$tl_link_tooltip.classList.add("shown")},10)}}hideLinkTooltip(t){this.$tl_link_tooltip.classList.remove("move_anim","shown")}};d=function(t,o,i,e){var s,n=arguments.length,l=n<3?o:null===e?e=Object.getOwnPropertyDescriptor(o,i):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,o,i,e);else for(var p=t.length-1;p>=0;p--)(s=t[p])&&(l=(n<3?s(l):n>3?s(o,i,l):s(o,i))||l);return n>3&&l&&Object.defineProperty(o,i,l),l}([Object(e.b)("inscriptum-editor-tooltip")],d)}}]);