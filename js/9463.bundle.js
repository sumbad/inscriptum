"use strict";(self.webpackChunkinscriptum=self.webpackChunkinscriptum||[]).push([[9463,8079,8926,3164,4099,9731,3041,9296,9691,9022,1888,6885,6301],{8079:(e,t,o)=>{o.r(t),o.d(t,{BlockquoteBlot:()=>r});var n=o(5039),i=o(3691);class r extends i.ZP{}r.blotName="blockBlockquote",r.tagName="blockquote",n.Z.register(r)},8926:(e,t,o)=>{o.r(t),o.d(t,{BreakBlot:()=>r});var n=o(5039),i=o(3691);class r extends i.i2{}r.blotName="textBreak",r.tagName="br",r.className="inline",n.Z.register(r)},3164:(e,t,o)=>{o.r(t),o.d(t,{DescriptionBlot:()=>r});var n=o(5039),i=o(9731);class r extends i.FieldBlot{static create(e){console.log("DescriptionBlot create ",e);let t=super.create(e);return t.setAttribute("data-placeholder","Summary of the text"),t.setAttribute("data-label","Description"),t}formatAt(e,t,o,n){console.log("DescriptionBlot formatAt ",e,t,o,n),o===r.blotName?super.formatAt(e,t,o,n):"link"===o&&super.formatAt(0,this.length(),o,n)}format(e,t){console.log("DescriptionBlot format ",e,t),super.format(e,t)}replace(e){console.log("DescriptionBlot replace ",e),super.replace(e)}insertAt(e,t,o){console.log("DescriptionBlot insertAt ",e,t,o),super.insertAt(e,t,o)}}r.blotName="blockDescription",r.tagName="address",n.Z.register(r)},4099:(e,t,o)=>{o.r(t),o.d(t,{DividerBlot:()=>i});var n=o(3691);class i extends n.i2{}i.blotName="blockDivider",i.tagName="hr"},9731:(e,t,o)=>{o.r(t),o.d(t,{FieldBlot:()=>i});var n=o(9022);class i extends n.SingleLineBlot{}},3041:(e,t,o)=>{o.r(t),o.d(t,{HeaderBlot:()=>r});var n=o(5039),i=o(9022);class r extends i.SingleLineBlot{optimize(e){super.optimize(e);let t=this.domNode.innerText;t=t.replace(/[\s_]+/g,"-"),t=t.replace(/(^-+|-+$)/g,""),this.domNode.id!==t&&this.domNode.setAttribute("id",t)}formatAt(e,t,o,n){("bold"!==o&&"italic"!==o&&"code"!==o||!n)&&super.formatAt(e,t,o,n)}}r.blotName="blockHeader",r.tagName="h3",n.Z.register(r)},5622:(e,t,o)=>{o.r(t),o.d(t,{CodeEndLineFlag:()=>a,InsSyntaxCodeBlock:()=>l,InsSyntaxModule:()=>s});var n=o(5039),i=o(1154),r=o(3549);class a extends i.Z{static formats(){return{}}}a.blotName="code-end",a.className="l",a.tagName="SPAN",n.Z.register(a);class l extends r.dn{highlight(e){let t=this.domNode.textContent||"";if(this.cachedText!==t){if(t.trim().length>0||null==this.cachedText){let o="";const n=e(t).split("\n");for(let e=0;e<n.length-1;e++)o+=`<span class="l">${n[e]||" "}</span>\n`;o+=`<span class="l">${n[n.length-1]}</span>`,this.domNode.innerHTML=`<code class="hljs">${o}</code>`}this.cachedText=t}}}class s extends r.ZP{static register(){n.Z.register(r.GW,!0),n.Z.register(l,!0)}highlight(){if(this.quill.selection.composing)return;this.quill.update(n.Z.sources.USER);let e=this.quill.getSelection();this.quill.scroll.descendants(l).forEach((e=>{e.highlight(this.options.highlight)})),this.quill.update(n.Z.sources.SILENT),null!=e&&document.activeElement===this.quill.container.querySelector("[contenteditable]")&&this.quill.setSelection(e,n.Z.sources.SILENT)}}},7466:(e,t,o)=>{o.r(t),o.d(t,{LinkBlot:()=>r});var n=o(1154),i=o(6136);class r extends n.Z{constructor(e,t){super(e),this.value=t,e.addEventListener("mouseover",r.showLinkTooltip.bind(this,this),!1),e.addEventListener("mouseout",r.hideLinkTooltip,!1)}static create(e){let t=super.create(e);e=this.sanitize(e),t.setAttribute("href",e);var o=e.substr(0,1);return"/"!=o&&"#"!=o&&"tg://"!=e.substr(0,5)&&"mailto:"!=e.substr(0,7)&&t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){const t=r.relativeUrl(e);return(0,i.sanitize)(e,["http","https","tg","mailto"])?t:"about:blank"}detach(){this.domNode.removeEventListener("mouseover",r.showLinkTooltip.bind(this,this),!1),this.domNode.removeEventListener("mouseout",r.hideLinkTooltip,!1),super.detach(),r.hideLinkTooltip()}format(e,t){if(e!==this.statics.blotName||!t)return super.format(e,t);t=r.sanitize(t),this.domNode.setAttribute("href",t),this.domNode.setAttribute("data-title",t)}static relativeUrl(e){let t=location,o=document.createElement("a");return o.href=e,t.origin!==o.origin?o.href:t.pathname!==o.pathname||t.search!==o.search?o.pathname+o.search+o.hash:t.href===o.href?o.hash||o.pathname+o.search+o.hash:o.hash}}},1428:(e,t,o)=>{o.r(t),o.d(t,{ListContinuer:()=>i});var n=o(9244);class i extends n.Z{static create(e){let t;return"string"==typeof e?t=super.create(e):(t=super.create(e.type),void 0!==e.start&&(t.setAttribute("start",e.start),t.style["counter-reset"]=`list-0 ${e.start}`)),t}static formats(e){let t=super.formats(e);return console.log("MyList-static.formats",t,e.getAttribute("start")),{type:t,start:e.getAttribute("start")}}}},9296:(e,t,o)=>{o.r(t),o.d(t,{MyQuill:()=>i});var n=o(5039);class i extends n.Z{formatLine(...e){super.formatLine(...e),this.updateSelection()}formatText(...e){super.formatText(...e),this.updateSelection()}updateSelection(e){if(this.hasFocus()){e=e||i.sources.SILENT;let t=this.getSelection(!0);this.setSelection(++t.index,t.length,e),this.setSelection(--t.index,t.length,e)}}}},9691:(e,t,o)=>{o.r(t),o.d(t,{PullquoteBlot:()=>r});var n=o(5039),i=o(3691);class r extends i.ZP{}r.blotName="blockPullquote",r.tagName="aside",n.Z.register(r)},9022:(e,t,o)=>{o.r(t),o.d(t,{SingleLineBlot:()=>l});var n=o(3691),i=o(8926),r=o(347),a=o.n(r);class l extends n.ZP{replace(e){e.children.forEach((e=>{e instanceof i.BreakBlot&&e.replaceWith(a().create("text"," "))})),super.replace(e)}insertAt(e,t,o){void 0!==o&&"textBreak"==t?super.insertAt(e,"\n"):super.insertAt(e,t,o)}}},1888:(e,t,o)=>{o.r(t),o.d(t,{SubheaderBlot:()=>r});var n=o(5039),i=o(3041);class r extends i.HeaderBlot{}r.blotName="blockSubheader",r.tagName="h4",n.Z.register(r)},6885:(e,t,o)=>{o.r(t),o.d(t,{TitleBlot:()=>r});var n=o(5039),i=o(9731);class r extends i.FieldBlot{static create(e){let t=super.create(e);return t.setAttribute("data-placeholder","Title"),t.setAttribute("data-label","Title"),t}formatAt(e,t,o,n){o===r.blotName&&super.formatAt(e,t,o,n)}}r.blotName="blockTitle",r.tagName="h1",n.Z.register(r)},6301:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var n=o(637),i=o(9622),r=o(2247),a=o(4085),l=o(1042),s=o(836),c=o(6167),d=o(5688);n.Z.registerLanguage("javascript",i.Z),n.Z.registerLanguage("typescript",r.Z),n.Z.registerLanguage("sql",a.Z),n.Z.registerLanguage("xml",l.Z),n.Z.registerLanguage("css",s.Z),n.Z.registerLanguage("bash",c.Z),n.Z.registerLanguage("yaml",d.Z);const u=n.Z},9463:(e,t,o)=>{o.r(t),o.d(t,{draftElement:()=>Bo});var n=o(3445),i=o(78),r=o(7948),a=o(4860),l=o(7157),s=o(7012),c=o(1640),d=o(3584),u=o(4938),p=o(669);const h=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-download" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path>
          <polyline points="7 11 12 16 17 11"></polyline>
          <line x1="12" y1="4" x2="12" y2="16"></line>
        </svg>
    `,this)}))(),f=(0,d.EG)({props:{draftId:d.p.req("draft-id")}})((function*(e){function t(){r.Z.dispatch({type:a.u.DRAFT_PUBLISH,payload:{draftId:e.draftId}})}for(;;)yield(0,c.sY)(c.dy`<div style=${u.iv`
          display: flex;
          flex-direction: row;
        `}>
        <button class="btn btn_icon" @click=${t}>
          ${h({})}
        </button>
      </div>`,this)}));var g=o(8760),b=o(6008),m=o(2114);const v="DRAFT_ACTION",y={LOAD:Symbol(`[${v}] LOAD`),LOADING:Symbol(`[${v}] LOADING`),LOAD_DONE:Symbol(`[${v}] LOAD_DONE`),UPDATE_TOC_DONE:Symbol(`[${v}] UPDATE_TOC_DONE`),UPDATE_TOC_ERROR:Symbol(`[${v}] UPDATE_TOC_ERROR`)};var x=o(6798),w=o(8481),k=o(6856),_=o(128),A=o(7082),E=o(54),S=o(9302),L=o(4334),$=o(7191),M=o(1769),T=o(732),P=o(6829),N=o(9802),C=o(3427),B=o(5961),I=o(9457),z=o(3418),Z=o(9068),O=o(4746),D=o(6667),j=o(4524),H=o(6106),R=o(6922),q=o(8757);const F=x.NB.create({name:"topicDoc",topNode:!0,content:"topicTitle topicSummary topicFirstLine block*",addProseMirrorPlugins:()=>[new R.Sy({key:new R.H$("TopicDoc Decorations"),props:{decorations:({doc:e,selection:t})=>{const o=[],n=e.content.child(0),i=e.content.child(1),r=e.content.child(2);return 0===n.content.size?o.push(q.p.node(0,n.nodeSize,{class:"empty"})):t.to<=n.nodeSize+i.nodeSize&&o.push(q.p.node(0,n.nodeSize,{class:"focused"})),0===i.content.size?o.push(q.p.node(n.nodeSize,n.nodeSize+i.nodeSize,{class:"empty"})):t.to<=n.nodeSize+i.nodeSize&&o.push(q.p.node(n.nodeSize,n.nodeSize+i.nodeSize,{class:"focused"})),e.content.lastChild===r&&0===r.content.size&&o.push(q.p.node(n.nodeSize+i.nodeSize,n.nodeSize+i.nodeSize+r.nodeSize,{class:"empty"})),q.EH.create(e,o)}}})]});var G=o(9059),U=o(9586);const Y=x.NB.create({name:"topicFirstLine",group:"topicDoc",content:"inline*",addAttributes:()=>({"data-placeholder":{default:"Take a notes"}}),parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",(0,x.P1)(this.options.HTMLAttributes,e),0]}});const V=o(8802).rU.extend({renderHTML(e){return"function"==typeof this.options.onRenderHTML&&this.options.onRenderHTML(e),["a",(0,x.P1)(this.options.HTMLAttributes,e.HTMLAttributes),0]}});var W=o(3861);const J=x.NB.create({name:"aside",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML:()=>[{tag:"aside"}],renderHTML({HTMLAttributes:e}){return["aside",(0,x.P1)(this.options.HTMLAttributes,e),0]},addCommands:()=>({setAside:()=>({commands:e})=>e.wrapIn("aside"),toggleAside:()=>({commands:e})=>e.toggleWrap("aside"),unsetAside:()=>({commands:e})=>e.lift("aside")})});var K=o(8638);const X=o(9889).dn.extend({name:"hljsCodeBlock",content:"hljsCodeBlockRow+",topNode:!0,parseHTML:()=>[{preserveWhitespace:"full",tag:"pre"}],renderHTML({HTMLAttributes:e}){return["pre",this.options.HTMLAttributes,["code",e,0]]}}),Q=x.vc.create({name:"hljsMark",spanning:!1,group:"hljsCodeBlock hljsCodeBlockRow",defaultOptions:{HTMLAttributes:{}},addAttributes:()=>({class:{default:void 0}}),parseHTML:()=>[{tag:"span",preserveWhitespace:!0}],renderHTML({HTMLAttributes:e}){return["span",(0,x.P1)(this.options.HTMLAttributes,e),0]}}),ee=x.NB.create({name:"hljsCodeBlockRow",defaultOptions:{HTMLAttributes:{}},group:"hljsCodeBlock",content:"inline*",marks:"hljsMark",addAttributes:()=>({class:{default:"l"}}),parseHTML:()=>[{tag:"div.l",preserveWhitespace:"full",attrs:{class:"l"}}],renderHTML({HTMLAttributes:e,node:t}){return["div",(0,x.P1)(this.options.HTMLAttributes,e),0]}});var te=o(896),oe=o(837),ne=o(9622),ie=o(2247),re=o(4085),ae=o(1042),le=o(836),se=o(6167),ce=o(5688);oe.Z.registerLanguage("javascript",ne.Z),oe.Z.registerLanguage("typescript",ie.Z),oe.Z.registerLanguage("sql",re.Z),oe.Z.registerLanguage("xml",ae.Z),oe.Z.registerLanguage("css",le.Z),oe.Z.registerLanguage("bash",se.Z),oe.Z.registerLanguage("yaml",ce.Z);const de=["javascript","typescript","sql","xml","css","bash","yaml"];function ue(e){const t=oe.Z.highlightAuto(e,de).value.split("\n");let o="";const n=[X,Z.Z,ee,Q],i=document.createElement("pre");for(const e of t)o+=`<div class="l">${e||""}</div>`;i.innerHTML=o;const r=function(e,t){const o=(0,x.J1)(t);return K.aw.fromSchema(o).parse(e,{preserveWhitespace:"full"})}(i,n);return i.remove(),n.length=0,r.toJSON()}function pe(e,t,o){return new te.VK(e,((e,n,i,r)=>{const a=o instanceof Function?o(n):o,{tr:l}=e;return n[0]&&(l.replaceWith(i-1,r,t.create(a,e.schema.node("hljsCodeBlockRow"))),l.setSelection(R.Bs.create(l.doc,r-1))),l}))}function he(e){let t="";return e.content.forEach(((o,n)=>{t+=o.textContent,n+o.nodeSize<e.nodeSize-2&&(t+="\n")})),t}const fe=/^```(?<language>[a-z]*)? $/,ge=/^~~~(?<language>[a-z]*)? $/,be=x.NB.create({name:"hljsCodeBlock",content:"(hljsCodeBlockRow|paragraph?)+",isolating:!0,defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{},printContentAsHTML:!1},marks:"",group:"block",defining:!0,addAttributes(){return{autocomplete:{default:"off"},autocorrect:{default:"off"},autocapitalize:{default:"off"},spellcheck:{default:"false"},language:{default:null,parseHTML:e=>{var t;const o=null===(t=e.firstElementChild)||void 0===t?void 0:t.getAttribute("class");if(!o)return null;const n=new RegExp(`^(${this.options.languageClassPrefix})`);return{language:o.replace(n,"")}},renderHTML:e=>e.language?{class:this.options.languageClassPrefix+e.language}:null}}},parseHTML:()=>[{preserveWhitespace:"full",tag:"pre",getContent(e,t){let o="";e.childNodes.forEach((e=>{o+=e.textContent,"BR"===e.nodeName&&(o+="\n")}));const n=ue(o);return t.nodeFromJSON(n).content}},{tag:"div",preserveWhitespace:"full",getAttrs:e=>"pre"===e.style.whiteSpace&&null,getContent(e,t){let o="";e.childNodes.forEach((e=>{o+=e.textContent+"\n"}));const n=ue(o);return t.nodeFromJSON(n).content}}],renderHTML({HTMLAttributes:e,node:t}){const o=this.options.printContentAsHTML?0:he(t);return["pre",this.options.HTMLAttributes,["code",e,o]]},addCommands(){return{setHljsCodeBlock:e=>t=>{const o=t.state.selection.content();let n="";o.content.forEach(((e,t)=>{n+=e.textContent,t+e.nodeSize<o.content.size-2&&(n+="\n")}));const i=ue(n),r=t.editor.schema.nodeFromJSON(i).content.toJSON()||[];return t.chain().insertContent({type:this.name,attrs:e,content:r}).setTextSelection(t.state.selection.$to.end()-1).run()},toggleHljsCodeBlock:e=>t=>{const o=t.state.selection.content().content;if(null!=o.firstChild&&o.firstChild.type===this.type){let e="";return o.forEach(((t,n)=>{t.type===this.type?e+=he(t):e+=t.textContent,n+t.nodeSize<o.size-2&&(e+="\n")})),t.chain().deleteRange({from:t.state.selection.from-2,to:t.state.selection.to}).insertContent({type:"paragraph",content:[{type:"text",text:e}]}).setTextSelection(t.state.selection.$to.end()).run()}return t.commands.setHljsCodeBlock(e)}}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleHljsCodeBlock(),"Mod-Enter":()=>{const{$anchor:e}=this.editor.state.selection;if("hljsCodeBlockRow"!==e.parent.type.name)return!1;const{tr:t}=this.editor.state;return this.editor.view.dispatch(t.insert(e.pos,this.editor.schema.node("paragraph",{})).split(e.pos+1,1).replaceWith(e.pos+2,e.pos+4,this.editor.schema.node("paragraph",{})).setSelection(R.Bs.create(t.doc,e.pos+2))),!0},Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,o=this.editor.state.doc.nodeAt(t.pos-2);return!((null==o?void 0:o.type)!==this.type||1!==o.content.childCount||!e)&&this.editor.commands.insertContentAt({from:t.pos-2,to:t.pos-2+o.nodeSize},{type:"paragraph"})}}},addInputRules(){return[pe(fe,this.type,(({groups:e})=>e)),pe(ge,this.type,(({groups:e})=>e))]},addNodeView(){return({editor:e,node:t,getPos:o})=>{const n=document.createElement("pre"),i=document.createElement("code");for(const e in t.attrs)i.setAttribute(e,t.attrs[e]);return 0===t.content.size&&"function"==typeof o&&requestAnimationFrame((()=>{e.view.dispatch(e.view.state.tr.insert(o()+1,e.schema.node("hljsCodeBlockRow")))})),n.appendChild(i),{dom:n,contentDOM:i,update:t=>{if(t.type!==this.type)return!1;const o=ue(he(t)),n=e.schema.nodeFromJSON(o);t.content=n.content}}}}}),me=x.NB.create({name:"codeBlock",defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{}},content:"text*",marks:"",group:"block",code:!0,defining:!0,parseHTML:()=>[{preserveWhitespace:"full",tag:"pre"}],renderHTML({HTMLAttributes:e}){return["pre",this.options.HTMLAttributes,["code",e,0]]},addNodeView:()=>({editor:e,node:t,getPos:o})=>{const n=t.content.firstChild;if(1===t.content.childCount&&null!=n&&"function"==typeof o)return requestAnimationFrame((()=>{const i=ue(n.text||""),r=e.schema.nodeFromJSON(i);e.view.dispatch(e.view.state.tr.deleteRange(o(),o()+t.nodeSize-1).insert(o(),r))})),{ignoreMutation:!0,update:!1};{const e=document.createElement("pre"),t=document.createElement("code");return e.appendChild(t),{dom:e,contentDOM:t}}}});function ve(e,t=!1){return(0,x.ar)(e,ye(t,!0))}function ye(e=!1,t=!1){return[...e?[F,G.l,U.V,Y]:[w.Z],I.Z,Z.Z,_.ZP,N.ZP,E.ZP,z.ZP,$.Z,M.Z,k.ZP,A.ZP,B.ZP,C.Z,P.Z,T.Z,S.Z,L.Z,O.Z,D.ZP,j.ZP,be.configure({printContentAsHTML:t}),Q,ee,me,H.Bc,J,V.configure({onRenderHTML:()=>{setTimeout((()=>{document.querySelectorAll("a[href]").forEach((e=>{null==e._tippy&&(0,W.ZP)(e,{delay:[300,200],placement:"bottom",content:e=>e.href})}))}),1)}})]}var xe=o(3135),we=o(7848),ke=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};function _e(e,t){return ke(this,void 0,void 0,(function*(){return(0,we.G)((()=>ke(this,void 0,void 0,(function*(){try{const{update_draft_by_pk:o}=yield(0,m.S)().updateDraftTOC({id:t,table_of_contents:e,updated_at:(new Date).toISOString()});null!=o&&r.Z.dispatch({type:y.UPDATE_TOC_DONE,payload:{id:t,toc:o.table_of_contents}})}catch(e){r.Z.dispatch({type:y.UPDATE_TOC_ERROR,payload:{id:t,error:e}})}}))))}))}function Ae(e){return ke(this,void 0,void 0,(function*(){(0,we.G)((t=>ke(this,void 0,void 0,(function*(){var o,n;const i="Title is too small",r="Content cannot be empty",a="Title was not found",l="Author was not found";let s,c="",d="",p="";for(const t of e.pages||[]){const e=0===t.order,o=t.content;if(null==(null==o?void 0:o.content))throw alert(r),new Error(r);p+=`<section>${ve(o,e)}</section>`,e&&(s=(0,u.WV)(o),c=s.title.trim(),d=(0,u.u)(c).replace(/[^a-zA-Z0-9-_]/g,"-"))}if(null==s)throw alert(a),new Error(a);if(c.length<2)throw alert(i),new Error(i);const h=(yield(0,m.S)().findAuthorByAuth0({auth0_id:t.userInfo.auth0Id})).author[0];if(null==h)throw alert(l),new Error(l);const f={created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};if(null!=e.notes&&e.notes.length>0){const t=e.notes[0],o=(yield(0,m.S)().updateNode({id:t.id,name:d,preview:s,static_link:`note/${d}`,updated_at:f.updated_at})).update_note_by_pk;f.created_at=null==o?void 0:o.created_at,f.created_at=null==o?void 0:o.created_at}else{const t=(yield(0,m.S)().createNode({draft_id:e.id,author_id:h.id,name:d,preview:s,static_link:`note/${d}`,created_at:(new Date).toISOString()})).insert_note_one;f.created_at=null==t?void 0:t.created_at,f.created_at=null==t?void 0:t.created_at}const g=(yield(0,m.S)().getAllNotes()).notes;!function(e){const t=document.createElement("a");e.forEach((e=>{const o=new Blob([e.content],{type:e.type||"application/octet-stream"});t.href=window.URL.createObjectURL(o),t.download=e.name,t.click()})),t.remove()}([{content:`  \n    <html>\n      <head>\n        <meta charset="utf-8">\n        <title>${c}</title>\n        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">\n        <meta name="format-detection" content="telephone=no">\n        <meta http-equiv="X-UA-Compatible" content="IE=edge">\n        <meta name="MobileOptimized" content="176">\n        <meta name="HandheldFriendly" content="True">\n        <meta name="robots" content="index, follow">\n        <meta name="description" content="${s.description}">\n        <meta property="og:site_name" content="inscriptum">\n        <meta property="og:type" content="article">\n        <meta property="og:title" content="${c}">\n        <meta property="og:description" content="${s.description}">\n        <meta property="og:image" content="${s.image}">\n        <meta property="article:published_time" content="${f.created_at}">\n        <meta property="article:modified_time" content="${f.updated_at}">\n        <meta property="article:author" content="${h.name||h.email}">\n        <meta name="twitter:card" content="summary">\n        <meta name="twitter:title" content="${c}">\n        <meta name="twitter:description" content="${s.description}">\n        <meta name="twitter:image" content="${s.image}">\n        ${(null===(n=null===(o=document.styleSheets.item(0))||void 0===o?void 0:o.ownerNode)||void 0===n?void 0:n.outerHTML)||""}\n        <link rel="shortcut icon" type="image/png" href="favicon.png">\n        <link href="/css/note.css" rel="stylesheet">\n        <link href="/css/custom_editor_fonts.css" rel="stylesheet">\n      </head>\n      <body>\n        <article>\n          ${p}\n        </article>\n      </body>\n      <script type="text/javascript" src="/js/note.js"><\/script>\n    </html>`,name:`${d}.html`},{content:JSON.stringify(g,null,2),name:xe.v.nodeListFileName}])}))))}))}const Ee="MARGIN_ACTION",Se={LOAD_DONE:Symbol(`[${Ee}] LOAD_DONE`),LOAD_FAIL:Symbol(`[${Ee}] LOAD_FAIL`),SAVE_DONE:Symbol(`[${Ee}] SAVE_DONE`),SAVE_FAIL:Symbol(`[${Ee}] SAVE_FAIL`)};var Le=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};function $e(e){return Le(this,void 0,void 0,(function*(){return yield(0,we.G)((()=>Le(this,void 0,void 0,(function*(){const{margin:t}=yield(0,m.S)().getMarginById({id:e});if(null!=t)return r.Z.dispatch({type:Se.LOAD_DONE,payload:t}),t;throw r.Z.dispatch({type:Se.LOAD_FAIL,payload:{id:e,error:{message:`The Margin ${e} not found!`}}}),new Error(`The Margin ${e} not found!`)}))))}))}var Me=o(6925);const Te={data:void 0,isLoading:!1};const Pe=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" 
          class="icon icon-tabler icon-tabler-arrow-bar-left" 
          width="24" 
          height="24" 
          viewBox="0 0 24 24" 
          stroke-width="1" 
          stroke="currentColor" 
          fill="none" 
          stroke-linecap="round" 
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <line x1="4" y1="12" x2="14" y2="12"></line>
          <line x1="4" y1="12" x2="8" y2="16"></line>
          <line x1="4" y1="12" x2="8" y2="8"></line>
          <line x1="20" y1="4" x2="20" y2="20"></line>
        </svg>
    `,this)})),Ne=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" 
          class="icon icon-tabler icon-tabler-arrow-bar-right" 
          width="24" 
          height="24" 
          viewBox="0 0 24 24" 
          stroke-width="1" 
          stroke="currentColor" 
          fill="none" 
          stroke-linecap="round" 
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <line x1="20" y1="12" x2="10" y2="12"></line>
          <line x1="20" y1="12" x2="16" y2="16"></line>
          <line x1="20" y1="12" x2="16" y2="8"></line>
          <line x1="4" y1="4" x2="4" y2="20"></line>
        </svg>
    `,this)})),Ce=(0,d.NG)((function*(e){var t;const o=c.YP`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-bulb" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7"></path>
      <path d="M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3"></path>
      <line x1="9.7" y1="17" x2="14.3" y2="17"></line>
    </svg>
`,n=c.YP`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-bulb-off" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3"></path>
      <line x1="9.7" y1="17" x2="14.3" y2="17"></line>
    </svg>
`;for(;;){let i=null!==(t=e.isOn)&&void 0!==t&&t;e=yield(0,p.$)(i?o:n,this)}})),Be=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrows-maximize" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <polyline points="16 4 20 4 20 8"></polyline>
          <line x1="14" y1="10" x2="20" y2="4"></line>
          <polyline points="8 20 4 20 4 16"></polyline>
          <line x1="4" y1="20" x2="10" y2="14"></line>
          <polyline points="16 20 20 20 20 16"></polyline>
          <line x1="14" y1="14" x2="20" y2="20"></line>
          <polyline points="8 4 4 4 4 8"></polyline>
          <line x1="4" y1="4" x2="10" y2="10"></line>
        </svg>
      `,this)})),Ie=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrows-minimize" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <polyline points="5 9 9 9 9 5"></polyline>
          <line x1="3" y1="3" x2="9" y2="9"></line>
          <polyline points="5 15 9 15 9 19"></polyline>
          <line x1="3" y1="21" x2="9" y2="15"></line>
          <polyline points="19 9 15 9 15 5"></polyline>
          <line x1="15" y1="9" x2="21" y2="3"></line>
          <polyline points="19 15 15 15 15 19"></polyline>
          <line x1="15" y1="15" x2="21" y2="21"></line>
        </svg>
      `,this)}));var ze=o(9491);o(6941);const Ze=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-download" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
        <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
        <line x1="12" y1="11" x2="12" y2="17"></line>
        <polyline points="9 14 12 17 15 14"></polyline>
      </svg>
    `,this)})),Oe=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-eraser" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M19 19h-11l-4 -4a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9 9"></path>
        <line x1="18" y1="12.3" x2="11.7" y2="6"></line>
      </svg>
    `,this)})),De=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-device-floppy" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"></path>
        <circle cx="12" cy="14" r="2"></circle>
        <polyline points="14 4 14 8 8 8 8 4"></polyline>
      </svg>
    `,this)})),je=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
        <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
      </svg>
    `,this)}));var He=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};window.requestIdleCallback=window.requestIdleCallback||function(e){setTimeout(e,1)};class Re{constructor(e,t){this.canvas=e,this.isMousedown=!1,this.points=[],this.strokeHistory=[],this._defaultOptions={backgroundColor:"rgba(0,0,0,0)"},this.lineWidth=0,this.penColor="black",this.penSize=1,this.context=e.getContext("2d"),this._options=Object.assign(Object.assign({},this._defaultOptions),t),this.context.fillStyle=this._options.backgroundColor,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillRect(0,0,this.canvas.width,this.canvas.height);const o="ontouchstart"in document,n=/Macintosh/.test(navigator.userAgent)&&o;null==window.PointerEvent||n?(this._handleMouseEvents(),o&&this._handleTouchEvents()):this._handlePointerEvents()}get isEmpty(){return 0===this.strokeHistory.length}restore(e=this.strokeHistory){for(const t of e){this.context.beginPath();let e=[];t.map((t=>{e.push(t),this._draw(e)}))}}clear(){this.context.fillStyle=this._options.backgroundColor,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}reset(){this.lineWidth=0,this.isMousedown=!1,this.points=[],this.strokeHistory=[]}toDataURL(e="image/png",t){return this.canvas.toDataURL(e,t)}fromDataURL(e,t={}){return He(this,void 0,void 0,(function*(){this._options=Object.assign(Object.assign({},this._options),{backgroundColor:this._defaultOptions.backgroundColor}),this.clear(),yield new Promise(((o,n)=>{const i=new Image,r=t.ratio||window.devicePixelRatio||1,a=t.width||this.canvas.width/r,l=t.height||this.canvas.height/r,s=t.xOffset||0,c=t.yOffset||0;i.onload=()=>{this.context.drawImage(i,s,c,a,l),o()},i.onerror=e=>{n(e)},i.crossOrigin="anonymous",i.src=e}))}))}undoDraw(e){this.strokeHistory.pop(),e.clearRect(0,0,this.canvas.width,this.canvas.height),this.strokeHistory.map((t=>{if(0===this.strokeHistory.length)return;e.beginPath();let o=[];t.map((e=>{o.push(e),this._draw(o)}))}))}_startDraw(e){const t=this._prepareEvent(e);null!=t&&(e.preventDefault(),this.isMousedown=!0,this.lineWidth=8*Math.log(t.pressure*this.penSize+1),this.context.lineWidth=this.lineWidth,this._addPoint(t.drawEvent,this.lineWidth),this._draw(this.points))}_continueDraw(e){if(!this.isMousedown)return;const t=this._prepareEvent(e);if(null==t)return;let o=8*Math.log(t.pressure*this.penSize+1);o+=.5*this.lineWidth,this.lineWidth=o,this._addPoint(t.drawEvent,o),this._draw(this.points)}_stopDraw(){this.isMousedown=!1,requestIdleCallback((()=>{this.strokeHistory.push([...this.points]),this.points=[]})),this.lineWidth=0}_draw(e){this.context.lineCap="round",this.context.lineJoin="round";const t=e.length-1,o=e[t-1],n=e[t];if(this.context.strokeStyle=n.color,this.context.globalCompositeOperation=n.globalCompositeOperation,e.length>=3){const e=(n.x+o.x)/2,t=(n.y+o.y)/2;this.context.lineWidth=o.lineWidth,this.context.quadraticCurveTo(o.x,o.y,e,t),this.context.stroke(),this.context.beginPath(),this.context.moveTo(e,t)}else this.context.lineWidth=n.lineWidth,this.context.beginPath(),this.context.moveTo(n.x,n.y),this.context.stroke()}_prepareEvent(e){let t,o=0,n="mouse";if("touches"in e){if(1!==e.touches.length)return null;{e.preventDefault();const i=e.touches[0];o=i.force,n=i.touchType,t=i}}else"pressure"in e&&(o=e.pressure/2.5,n=e.pointerType),t=e;return["direct","mouse",void 0].includes(n)&&0===o&&(o=this.penSize/5),{pressure:o,drawEvent:t,deviceType:n}}_addPoint(e,t){const o=this.canvas.getBoundingClientRect(),n=e.clientX-o.left,i=e.clientY-o.top;this.points.push({x:n,y:i,lineWidth:t,color:this.penColor,globalCompositeOperation:this.context.globalCompositeOperation})}_handlePointerEvents(){this.canvas.addEventListener("pointerdown",this._startDraw.bind(this)),this.canvas.addEventListener("pointermove",this._continueDraw.bind(this)),document.addEventListener("pointerup",this._stopDraw.bind(this))}_handleMouseEvents(){this.canvas.addEventListener("mousedown",this._startDraw.bind(this)),this.canvas.addEventListener("mousemove",this._continueDraw.bind(this)),document.addEventListener("mouseup",this._stopDraw.bind(this))}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._startDraw.bind(this)),this.canvas.addEventListener("touchmove",this._continueDraw.bind(this)),this.canvas.addEventListener("touchend",this._stopDraw.bind(this))}}const qe=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-pencil" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"></path>
          <line x1="13.5" y1="6.5" x2="17.5" y2="10.5"></line>
        </svg>
      `,this)})),Fe=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 21a9 9 0 1 1 0 -18a9 8 0 0 1 9 8a4.5 4 0 0 1 -4.5 4h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"></path>
          <circle cx="7.5" cy="10.5" r=".5" fill="currentColor"></circle>
          <circle cx="12" cy="7.5" r=".5" fill="currentColor"></circle>
          <circle cx="16.5" cy="10.5" r=".5" fill="currentColor"></circle>
        </svg>
      `,this)})),Ge=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tools" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"></path>
          <line x1="14.5" y1="5.5" x2="18.5" y2="9.5"></line>
          <polyline points="12 8 7 3 3 7 8 12"></polyline>
          <line x1="7" y1="8" x2="5.5" y2="9.5"></line>
          <polyline points="16 12 21 17 17 21 12 16"></polyline>
          <line x1="16" y1="17" x2="14.5" y2="18.5"></line>
        </svg>
      `,this)})),Ue=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-settings" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
      `,this)}));var Ye=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};const Ve=Ze(),We=De(),Je=Oe(),Ke=je(),Xe=qe(),Qe=Fe(),et=Ge(),tt=Ue(),ot=(0,d.EG)({props:{data:d.p.req(),mode:d.p.opt()}})((function*(e){var t,o,n,i;const a=(0,ze.V)(),l=(0,ze.V)();let s,d,p=e.data,h=e.mode,f=Math.max(window.devicePixelRatio||1,1),g=null!==(o=null===(t=p.options)||void 0===t?void 0:t.height)&&void 0!==o?o:0,b=null!==(i=null===(n=p.options)||void 0===n?void 0:n.width)&&void 0!==i?i:0,v=1,y=1.2,x="#000000";const w=()=>{const e=a.value,t=l.value;if(null==e||null==t)throw new Error("Can not find a canvas element!");if(s=t.getContext("2d"),null==s)throw new Error("Can not find a canvas context!");const o=b,n=g;g=Math.max(e.getBoundingClientRect().height,window.innerHeight,n),b=Math.max(e.getBoundingClientRect().width,o),t.height=g,t.width=b,t.style.height=`${g}px`,t.style.width=`${b}px`,e.style.height=`${g}px`,this.style.height=`${g}px`,f=Math.max(window.devicePixelRatio||1,1),t.width=t.offsetWidth*f,t.height=t.offsetHeight*f,s.scale(f,f),null==d&&(d=new Re(t),d.penSize=y)},k=(e=!0)=>Ye(this,void 0,void 0,(function*(){if(null!=d){if(d.context.globalCompositeOperation="source-over",null!=(null==p?void 0:p.imgBase64)&&null!=(null==p?void 0:p.options)){const e=p.options,t=`${e.type},${p.imgBase64}`;d.context.globalAlpha=v,yield d.fromDataURL(t,{height:e.height,width:e.width,ratio:f})}d.context.globalAlpha=1,e?d.restore():d.reset()}})),_=()=>{if(null==d||d.isEmpty)return alert("Please draw something.");null!=(null==p?void 0:p.id)&&function(e,t,o){Le(this,void 0,void 0,(function*(){const[n,i]=t.split(",");return yield(0,we.G)((()=>Le(this,void 0,void 0,(function*(){const{update_margin_by_pk:t}=yield(0,m.S)().saveMargin({id:e,options:Object.assign(Object.assign({},o),{type:n}),img:i,updated_at:(new Date).toISOString()});if(null!=t)return r.Z.dispatch({type:Se.SAVE_DONE,payload:t}),t;r.Z.dispatch({type:Se.SAVE_FAIL,payload:{id:e,error:{message:`The Margin ${e} has not been saved!`}}})}))))}))}(p.id,d.toDataURL(),{height:g,width:b,ratio:f})},A=()=>{null!=p.id&&$e(p.id),null!=d&&d.clear(),null!=s&&(s.font="26px sans-serif",s.fillStyle="#CCCCCC",s.fillText("loading...",50,100))};function E(){null!=s&&(s.globalCompositeOperation="destination-out")}function S(){null!=d&&d.clear()}function L(e){if(null!=(null==e?void 0:e.currentTarget)&&null!=d){const t=e.currentTarget;v=Number(t.value)}}const $=e=>{null!=d&&(d.penColor=e.detail.value,this.next())},M=e=>{if(null!=d&&null!=(null==e?void 0:e.currentTarget)){const t=e.currentTarget;y=Number(t.value),d.penSize=y}},T=()=>{null!=s&&(s.globalCompositeOperation="source-over")};for(window.onresize=()=>{w(),k()},requestAnimationFrame((()=>{w(),k()}));;)Object.is(p,e.data)||(p=e.data,k(!1)),h!==e.mode&&("full"!=e.mode&&"full"!=h&&(w(),k()),h=e.mode),e=yield(0,c.sY)(c.dy`
        <div .ref=${(0,ze.i)(a)} class="sketch-pad_frame" style=${u.iv`
            background-color: ${"full"===h?"white":"transparent"};
          `}>
          <canvas .ref=${(0,ze.i)(l)} class="signature-pad"></canvas>
        </div>

        <div class="fab-container fab-container_main">
          <div class="fab-container fab-container_vertical">
            <hex-color-picker id=${`${p.id}_colorPicker`} name="colorPicker" style=${u.iv`
                cursor: pointer;
              `} .value=${x} @color-changed=${$}></hex-color-picker>
          </div>

          <div class="fab-container fab-container_vertical">
            <button class="fab-button fab-button_empty" style=${u.iv`
                bottom: -7px;
                width: 20px;
                height: 20px;
              `}>
              <div class="sub-button">
                <input type="range" .value=${y} min="0.5" max="10" step="0.5" @input=${M}>
              </div>
            </button>
            <button class="fab-button" @click=${E}>
              ${Je({})}
            </button>
            <button class="fab-button" @click=${T}>
              ${Xe({})}
            </button>
            <button class="fab-button fab-button_lg">
              ${et({})}
            </button>
          </div>

          <div class="fab-container fab-container_vertical">
            <button class="fab-button fab-button_empty" @click=${k}>
              <div class="sub-button">
                <input type="range" .value=${v} min="0" max="1" step="0.01" @input=${L}>
                <div class="sub-button__back">
                  <div style=${u.iv`
                      width: 100%;
                      height: 20px;
                      background: linear-gradient(to right, rgba(255, 128, 0, 0), ${x});
                    `}></div>
                </div>
              </div>
            </button>
            <button class="fab-button" @click=${S}>
              ${Ke({})}
            </button>
            <button class="fab-button" @click=${A}>
              ${Ve({})}
            </button>
            <button class="fab-button" @click=${_}>
              ${We({})}
            </button>
            <button class="fab-button fab-button_lg">
              ${tt({})}
            </button>
          </div>

          <button class="fab-button fab-button_lg">
            ${Qe({})}
          </button>
        </div>
      `,this)}));var nt=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};ot("sketch-pad");const it=Pe(),rt=Ne(),at=Ce(),lt=Be(),st=Ie(),ct=(0,d.EG)({props:{marginId:d.p.req(),onchangeMarginMode:d.p.opt()}})((function*(e){var t;const n=this.attachShadow({mode:"open"}),i=[];let l=Te,s="hide";var d;i.push((d=e.marginId,r.Z.$.pipe((0,Me.Z)(Se),(0,b.h)((e=>e.payload.id===d)))).subscribe((e=>{l=function(e,t){switch(t.type){case Se.LOAD_DONE:return{data:t.payload,isLoading:!1,error:null};case Se.LOAD_FAIL:return Object.assign(Object.assign({},e),{isLoading:!1,error:t.payload.error});case Se.SAVE_FAIL:return Object.assign(Object.assign({},e),{error:t.payload.error});default:return e}}(l,e),this.next()})));const p=e=>()=>nt(this,void 0,void 0,(function*(){switch(e){case"expand":n.host.style.position="absolute";break;case"full":yield function(e){return nt(this,void 0,void 0,(function*(){"requestFullscreen"in e&&null==document.fullscreenElement?yield e.requestFullscreen():"webkitRequestFullscreen"in e&&(yield e.webkitRequestFullscreen())}))}(n.host);break;default:n.host.style.position="relative",yield function(){return nt(this,void 0,void 0,(function*(){"exitFullscreen"in document&&null!=document.fullscreenElement?yield document.exitFullscreen():"webkitExitFullscreen"in document&&(yield document.webkitExitFullscreen())}))}()}s=e,this.dispatchEvent(new CustomEvent("changeMarginMode",{detail:{mode:s}})),this.next()}));i.push(r.Z.$.pipe((0,b.h)((e=>e.type===a.u.FULLSCREEN_CHANGED))).subscribe((e=>{e.type===a.u.FULLSCREEN_CHANGED&&(e.payload.isFullscreen&&"full"!==s&&(s="full",this.next()),e.payload.isFullscreen||"full"!==s||(s="collapse",this.next()))})));try{for(;;){e.marginId!==(null===(t=l.data)||void 0===t?void 0:t.id)&&$e(e.marginId);let i=c.dy``;switch(s){case"hide":i=c.dy`
              <button class="btn btn_icon btn__first" @click=${p("collapse")}>
                ${at({isOn:!1})}
              </button>
            `;break;case"collapse":i=c.dy`
              <button class="btn btn_icon btn__first" @click=${p("hide")}>
                ${at({isOn:!0})}
              </button>
              <button class="btn btn_icon btn__second" title="expand" @click=${p("expand")}>
                ${it({})}
              </button>
              <button class="btn btn_icon btn__third" title="full" @click=${p("full")}>
                ${lt({})}
              </button>
            `;break;case"expand":i=c.dy`
              <button class="btn btn_icon btn__first" title="expand" @click=${p("collapse")}>
                ${rt({})}
              </button>
              <button class="btn btn_icon btn__second" title="full" @click=${p("full")}>
                ${lt({})}
              </button>
            `;break;case"full":i=c.dy`
              <button class="btn btn_icon btn__first" title="minimize" @click=${p("collapse")}>
                ${st({})}
              </button>
            `}e=yield(0,c.sY)(c.dy`
          <style>${o(8608)}</style>

          ${i}

          ${l.data?c.dy`<sketch-pad style=${u.iv`
                visibility: ${"hide"!==s?"visible":"hidden"};
              `} .data=${l.data} .mode=${s}></sketch-pad>`:""}
        `,n)}}finally{i.forEach((e=>e.unsubscribe()))}}));const dt=String.raw,ut=(0,i.EG)({props:{label:String,value:String,isFolded:Boolean,change:{}},shadow:{mode:"open"},render:n.sY})((function(e){const[t,o]=(0,i.eJ)(e.isFolded);(0,i.d4)((()=>{o(e.isFolded)}),[e.isFolded]);const r=(0,i.I4)((()=>{o((e=>!e)),e.change(e.value,!t)}),[t,o,e]);return(0,i.d4)((()=>{const e=dt`
      :host {
        display: inline-flex;
        align-items: center;
        flex-direction: row;
        position: absolute;
        right: 100%;
        font-family: var(--font-family);
      }
      button,
      label {
        cursor: pointer;
        border: none;
        background-color: transparent;
      }
      button:focus {
        outline: 0;
      }
      .icon-tabler,
      label {
        stroke: var(--border-color);
        color: var(--border-color);
        transition: 0.2s;
      }

      :host(:hover) .icon-tabler {
        stroke: var(--dark-grey);
      }
      :host(:hover) label {
        color: var(--dark-grey);
      }
    `,t=null==this?void 0:this.shadowRoot;if(null!=t&&null!=t.adoptedStyleSheets){const o=new CSSStyleSheet;o.replaceSync(e),t.adoptedStyleSheets=[o]}}),[]),n.dy`
      <label for=${e.value}>${e.label}</label>
      <button id=${e.value} @click=${r}>
        ${n.YP`
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="icon icon-tabler icon-tabler-chevron-left"
            width="44"
            height="44"
            viewBox="0 0 24 24"
            stroke-width="0.5"
            stroke="#9e9e9e"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <polyline points=${t?"9 6 15 12 9 18":"6 9 12 15 18 9"} />
          </svg>        
        `}
      </button>
    `})),pt=(0,n.XM)(((e,t)=>(null!=t.current&&(t.current.setValue(e),t.current.commit()),o=>{t.current=o,t.current.setValue(e)}))),ht=(0,i.NG)({render:pt})((()=>n.YP`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
      <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
      <line x1="12" y1="11" x2="12" y2="17"></line>
      <line x1="9" y1="14" x2="15" y2="14"></line>
    </svg>
  `)),ft=(0,i.NG)({render:pt})((()=>n.YP`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
      <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
      <path d="M10 12l4 4m0 -4l-4 4"></path>
    </svg>
  `)),gt={CREATE_MARGIN:Symbol("[PAGE_ACTION] CREATE_MARGIN"),CREATE_MARGIN_DONE:Symbol("[PAGE_ACTION] CREATE_MARGIN_DONE"),CREATE_MARGIN_FAIL:Symbol("[PAGE_ACTION] CREATE_MARGIN_FAIL")};var bt=o(4072),mt=o(5631),vt=o(1410),yt=o(3068),xt=o(3507),wt=o(4035),kt=o(486),_t=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};function At(e){return e.pipe((0,yt.b)((e=>{r.Z.dispatch({type:a.u.PAGE_SAVE,payload:{pageId:e.pageId,draftId:e.draftId}})})),(0,xt.b)(xe.v.isDevMode?3e3:1e4),(0,yt.b)((e=>{r.Z.dispatch({type:a.u.PAGE_SAVING,payload:{pageId:e.pageId,draftId:e.draftId}})})),(0,wt.w)((e=>(0,bt.D)(function(e,t,o){return _t(this,void 0,void 0,(function*(){return yield(0,we.G)((()=>_t(this,void 0,void 0,(function*(){try{return yield(0,m.S)().updatePageById({id:e,content:o,updated_at:(new Date).toISOString()}),{pageId:e,draftId:t,content:o}}catch(t){throw{pageId:e,error:t}}}))))}))}(e.pageId,e.draftId,e.content)).pipe((0,yt.b)((e=>{r.Z.dispatch({type:a.u.PAGE_SAVE_DONE,payload:e})})),(0,kt.K)((t=>(r.Z.dispatch({type:a.u.PAGE_SAVE_FAIL,payload:{draftId:e.draftId,pageId:e.pageId,error:t}}),mt.E)))))))}function Et(e){return e.pipe((0,wt.w)((e=>(0,vt.P)((()=>_t(this,void 0,void 0,(function*(){return(0,we.G)((()=>_t(this,void 0,void 0,(function*(){var t;const{insert_page_one:o,update_page:n}=yield(0,m.S)().addPageToDraft({draft_id:e.draftId,order:e.order,created_at:(new Date).toISOString()});if(null==o)throw new Error("newPage == null");const i=null!==(t=null==n?void 0:n.returning)&&void 0!==t?t:[];return{draftId:e.draftId,newPage:o,updatedPages:i}}))))})))))),(0,yt.b)((e=>{const{draftId:t,updatedPages:o,newPage:n}=e;r.Z.dispatch({type:a.u.DRAFT_ADD_PAGE_DONE,payload:{draftId:t,newPage:Object.assign(Object.assign({},n),{content:null==n?void 0:n.content,draftId:t}),updatedPages:o}})})))}function St(e){return e.pipe((0,wt.w)((e=>(0,vt.P)((()=>_t(this,void 0,void 0,(function*(){return(0,we.G)((()=>_t(this,void 0,void 0,(function*(){var t;const{update_page_by_pk:o,update_page:n}=yield(0,m.S)().deletePage({id:e.pageId,ended_at:(new Date).toISOString(),draft_id:e.draftId,order:e.order}),i=null!==(t=null==n?void 0:n.returning)&&void 0!==t?t:[],r={id:null==o?void 0:o.id,order:e.order};return{draftId:e.draftId,deletedPage:r,updatedPages:i}}))))})))))),(0,yt.b)((e=>{r.Z.dispatch({type:a.u.DRAFT_DELETE_PAGE_DONE,payload:{draftId:e.draftId,deletedPage:e.deletedPage,updatedPages:e.updatedPages}})})))}var Lt=o(211),$t=o(4370);function Mt(e,t){switch(t.type){case gt.CREATE_MARGIN_DONE:return null!=e.data&&(e.data.margins=[{id:t.payload.marginId},...e.data.margins]),e;default:return e}}const Tt=(0,i.NG)({render:pt})((()=>n.YP`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-writing" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"></path>
      <path d="M16 7h4"></path>
      <path d="M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"></path>
    </svg>
  `));function Pt(e){const[t,o]=(0,i.eJ)();return(0,i.d4)((()=>{const t=new Lt.xQ;return o([e(t),e=>t.next(e)]),()=>t.unsubscribe()}),[]),t}function Nt(){const[e]=(0,i.eJ)((()=>{let e;return{get current(){var t;return null===(t=null==e?void 0:e.committer)||void 0===t?void 0:t.element},ref:(0,n.XM)((()=>t=>{e=t}))}}));return e}var Ct=o(7072);const Bt=(0,i.EG)({props:{editor:{},className:String,tippyOptions:{},pluginKey:{type:String,default:Ct.NM.options.pluginKey},shouldShow:{type:{},default:null}},render:n.sY})((function(e){const[t,o]=(0,i.eJ)(0),r=Nt(),[a,l]=(0,i.eJ)(null);return(0,i.d4)((()=>{console.log("useEffect bubbleMenuElement"),cancelAnimationFrame(t);const{editor:n,tippyOptions:i}=e;o(requestAnimationFrame((()=>{null!=r.current&&n.registerPlugin((0,Ct.q3)({editor:n,element:r.current,pluginKey:e.pluginKey,shouldShow:e.shouldShow}))})));const a=new Lt.xQ,s=({transaction:e})=>{e.steps.length>0?l(Zt(n)):e.selection.empty?l(null):a.next()};return n.on("transaction",s),a.pipe((0,xt.b)(700)).subscribe((e=>{l(Zt(n))})),()=>{console.log("DESTROY bubbleMenuElement"),a.unsubscribe(),n.off("transaction",s),cancelAnimationFrame(t),n.unregisterPlugin(Ct.NM.options.pluginKey)}}),[r.current]),n.dy`<div .ref=${r.ref()} class=${e.className} style=${u.iv`
        visibility: 'hidden';
      `}>
      ${a}
    </div>`})),It=["figure"],zt=["topicTitle"];function Zt(e){const t=e.state.selection;return t instanceof R.qv&&It.includes(t.node.type.name)||t instanceof R.Bs&&(zt.includes(t.$from.parent.type.name)||zt.includes(t.$to.parent.type.name))?null:n.dy`
      <button @click=${()=>e.chain().focus().toggleBold().run()} class=${e.isActive("bold")?"is-active":""}>
        bold
      </button>
      <button @click=${()=>e.chain().focus().toggleItalic().run()} class=${e.isActive("italic")?"is-active":""}>
        italic
      </button>
      <button @click=${()=>e.chain().focus().toggleStrike().run()} class=${e.isActive("strike")?"is-active":""}>
        strike
      </button>
      <button @click=${()=>e.chain().focus().toggleHighlight().run()} class=${e.isActive("highlight")?"is-active":""}>
        highlight
      </button>
      <button @click=${()=>{var t;const o=null!==(t=window.prompt("URL"))&&void 0!==t?t:"";e.chain().focus().toggleLink({href:o}).run()}} class=${e.isActive("link")?"is-active":""}>
        link
      </button>
      <button @click=${()=>e.chain().focus().toggleBlockquote().run()} class=${e.isActive("blockquote")?"is-active":""}>
        blockquote
      </button>
      <button @click=${()=>e.chain().focus().toggleAside().run()} class=${e.isActive("aside")?"is-active":""}>
        aside
      </button>

      <button @click=${()=>e.chain().focus().toggleHeading({level:2}).run()} class=${e.isActive("heading",{level:2})?"is-active":""}>
        h2
      </button>
      <button @click=${()=>e.chain().focus().toggleHeading({level:3}).run()} class=${e.isActive("heading",{level:3})?"is-active":""}>
        h3
      </button>
      <button @click=${()=>e.chain().focus().toggleHeading({level:4}).run()} class=${e.isActive("heading",{level:4})?"is-active":""}>
        h4
      </button>
      <button @click=${()=>e.chain().focus().toggleHljsCodeBlock().run()} class=${e.isActive("hljsCodeBlock")?"is-active":""}>
        ${"<>"}
      </button>
    `}var Ot=o(9303),Dt=o.n(Ot),jt=o(8895),Ht=o.n(jt),Rt=o(3691),qt=o(5039),Ft=o(9244),Gt=o(1428),Ut=o(7443),Yt=o(2415),Vt=o(8952),Wt=o(1812),Jt=o(8926),Kt=o(9731),Xt=o(7466),Qt=o(9296),eo=o(9022),to=o(6885),oo=o(6681),no=o(3164),io=o(9733),ro=o(3881),ao=o(3041),lo=o(1888),so=o(5622),co=o(3549),uo=o(6136),po=o(6301),ho=o(4099);let fo=navigator.userAgent.toLowerCase(),go=(/opera/i.test(fo)||/opr/i.test(fo),/msie/i.test(fo)&&!/opera/i.test(fo)||/trident\//i.test(fo)||/edge/i.test(fo),/edge/i.test(fo)&&/opera/i.test(fo),/firefox/i.test(fo),/chrome/i.test(fo)&&/edge/i.test(fo),!/chrome/i.test(fo)&&/webkit|safari|khtml/i.test(fo),/iphone/i.test(fo),/ipod/i.test(fo),/ipad/i.test(fo),/android/i.test(fo),/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(fo)),bo=/iphone|ipod|ipad/i.test(fo);/opera mini|opera mobi/i.test(fo),/opera mini/i.test(fo),/mac/i.test(fo);function mo(e,t,o=!0){Xt.LinkBlot.blotName="link",Xt.LinkBlot.tagName="a",Xt.LinkBlot.showLinkTooltip=t=>{e&&e.showLinkTooltip(t,t.value,(0,uo.isEdit)(),i)},Xt.LinkBlot.hideLinkTooltip=()=>e&&e.hideLinkTooltip(i),Qt.MyQuill.register(Xt.LinkBlot,!0),oo.FigureBlot.blotName="blockFigure",oo.FigureBlot.tagName="figure",oo.FigureBlot.quillSetSelection=(e,t=0)=>i.setSelection(e,t,qt.Z.sources.USER),oo.FigureBlot.quillDeleteText=(e,t,o=qt.Z.sources.USER)=>i.deleteText(e,t,o),oo.FigureBlot.quillInsertText=(e,t)=>i.insertText(e,t,qt.Z.sources.USER),oo.FigureBlot.draftSave=()=>(0,uo.draftSave)(n,i),Qt.MyQuill.register(oo.FigureBlot,!0),Qt.MyQuill.register(ho.DividerBlot),Qt.MyQuill.register({"modules/syntax":so.InsSyntaxModule,"formats/bold":io.Z,"formats/italic":ro.Z,"formats/indent":Ut.a,"formats/list":Gt.ListContinuer,"formats/list-item":Ft.H,"formats/code":Yt.E,"formats/strike":Vt.Z},!0);var n=!1;go&&document.body.classList.add("mobile");var i=new Qt.MyQuill(t,{scrollingContainer:"html, body",readOnly:!0,modules:{syntax:{highlight:e=>po.default.highlightAuto(e).value},clipboard:{matchers:[r("h2",{blockHeader:!0}),r("h5",{blockSubheader:!0}),r("h6",{blockSubheader:!0}),["img",function(e,t){return e.src&&(0,uo.sanitize)(e.src,["http","https","data"])?(new(Ht())).insert({blockFigure:{image:e.src,caption:e.alt||""}}):new(Ht())}],["video",function(e,t){return e.src&&(0,uo.sanitize)(e.src,["http","https","data"])?(new(Ht())).insert({blockFigure:{video:e.src}}):new(Ht())}],["br",function(e,t){return console.log("modules.clipboard.matchers.br"),e.classList.contains("inline")?(new(Ht())).insert({textBreak:!0}):t}]]},keyboard:{bindings:{"required enter":{key:Wt.Z.keys.ENTER,collapsed:!0,shiftKey:null,format:["blockTitle","blockDescription"],suffix:/^$/,handler:function(e,t){console.log("keyboard.bindings.required_enter.handler");let[o]=this.quill.scroll.descendant(Kt.FieldBlot,e.index);return!(o&&o.next&&o.next.domNode&&!o.next.domNode.textContent)||(this.quill.setSelection(o.next.offset(this.quill.scroll),0,qt.Z.sources.USER),!1)}},"required tab prev":{key:Wt.Z.keys.TAB,shiftKey:!0,handler:function(e,t){console.log("keyboard.bindings.required_tab_prev.handler");let o=null;if(e.length>0){let t=i.scroll.descendants(Rt.ZP,e.index,e.length);if(1!=t.length)return!0;o=t[0]}else[o]=i.scroll.descendant(Rt.ZP,e.index);if(null!=o&&null!=o.prev&&o.prev instanceof Kt.FieldBlot){let e=o.prev.offset(i.scroll),t=o.prev.length();return i.setSelection(e,t>1?t:0,qt.Z.sources.USER),!1}return!0}},"required tab next":{key:Wt.Z.keys.TAB,shiftKey:!1,handler:function(e,t){console.log("keyboard.bindings.required_tab_next.handler");let o=null;if(e.length>0){let t=i.scroll.descendants(Rt.ZP,e.index,e.length);if(1!=t.length)return!0;o=t[0]}else[o]=i.scroll.descendant(Rt.ZP,e.index);if(null!=o&&o instanceof Kt.FieldBlot&&null!=o.next){let e=o.next.offset(i.scroll);if(o.next instanceof Kt.FieldBlot){let t=o.next.length();i.setSelection(e,t>1?t:0,qt.Z.sources.USER)}else i.setSelection(e,0,qt.Z.sources.USER);return!1}return!0}},"no tab":{key:Wt.Z.keys.TAB,shiftKey:null,handler:function(e,t){return console.log("keyboard.bindings.no_tab.handler"),!1}},"detect embed":{key:Wt.Z.keys.ENTER,collapsed:!0,handler:function(t,o){console.log("keyboard.bindings.detect_embed.handler");let[n,r]=i.scroll.line(t.index);if(n){let o,a=n.domNode.textContent.substr(0,r);if(o=a.match(/(^|\s)(https?:\/\/\S+)$/)){let l=o[2];if(i.scroll.descendants(Xt.LinkBlot,t.index-l.length,l.length).length||i.formatText(t.index-l.length,l.length,"link",l,qt.Z.sources.USER),!a.substr(0,r-l.length).trim().length&&"P"==n.domNode.tagName){let t=s(l);if(t){let o=n.offset(i.scroll);return i.updateContents((new(Ht())).retain(o).delete(a.length).insert({blockFigure:t}),qt.Z.sources.USER),e&&e.hideBlocksTooltip(),!1}}}}return!0}},"divider autofill":{key:Wt.Z.keys.ENTER,collapsed:!0,prefix:/^([-*])\1{2,}$/,handler:function(e,t){console.log("keyboard.bindings.divider_autofill.handler");let[o,n]=i.scroll.line(e.index);if(o&&"P"==o.domNode.tagName){let e=o.offset(i.scroll),t=(new(Ht())).retain(e).delete(o.length()).insert({blockDivider:!0});return o.next||t.insert("\n"),i.updateContents(t,qt.Z.sources.USER),!1}return!0}},break:{key:Wt.Z.keys.ENTER,shiftKey:!0,handler:l.bind(null,!0)},enter:{key:Wt.Z.keys.ENTER,handler:l.bind(null,!1)},"detect link":{key:" ",collapsed:!0,handler:function(e){console.log("detectLinkHandler",e);let[t,o]=i.scroll.line(e.index);if(t){let n,r=t.domNode.textContent.substr(0,o);if(n=r.match(/(^|\s)((?:https?|tg):\/\/\S+|www\.\S+)$/)){let t=n[2],o=t.length;"www."==t.substr(0,4)&&(t="http://"+t),i.scroll.descendants(Xt.LinkBlot,e.index-o,o).length||i.formatText(e.index-o,o,"link",t,qt.Z.sources.USER)}}return!0}},"cancel placeholder":{key:Wt.Z.keys.ESCAPE,handler:function(e,t){return console.log("keyboard.bindings.cancel_placeholder.handler"),yo(),this.quill.updateSelection(qt.Z.sources.USER),!0}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{list:!1,"code-block":!1,blockquote:!1,header:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query&&null==this.quill.scroll.query("list"))return!0;const{length:o}=t.prefix,[n,i]=this.quill.getLine(e.index);if(i>o)return!0;let r;switch(t.prefix.trim()){case"[]":case"[ ]":r="unchecked";break;case"[x]":r="checked";break;case"-":case"*":r="bullet";break;default:r={type:"ordered",start:Number(t.prefix.slice(0,-1))-1}}this.quill.insertText(e.index," ",qt.Z.sources.USER),this.quill.history.cutoff(),console.log("keyboard.bindings.list_autofill.handler",e,t);const a=(new(Ht())).retain(e.index-i).delete(o+1).retain(n.length()-2-i).retain(1,{list:r,start:r.start});console.log("keyboard.bindings.list_autofill.handler",a);const l=this.quill.updateContents(a,qt.Z.sources.USER);return console.log("keyboard.bindings.list_autofill.handler",l),this.quill.history.cutoff(),this.quill.setSelection(e.index-o,qt.Z.sources.SILENT),!1}},"pre wrap":{key:192,collapsed:!0,format:{"code-block":!1},prefix:/^``$/,offset:2,handler:function(e,t){console.log("keyboard.bindings.pre_wrap.handler");let o=t.prefix.length,n=e.index-o;this.quill.scroll.deleteAt(n,o),this.quill.formatLine(n,1,"code-block",!0,qt.Z.sources.USER),this.quill.setSelection(n,qt.Z.sources.SILENT)}},code:{key:192,handler:function(e,t){if(console.log("keyboard.bindings.code.handler",!t.format),!t.collapsed){let o=i.scroll.descendants(Rt.ZP,e.index,e.length);if(o.length>1||1==o.length&&o[0]instanceof co.dn)return this.quill.format("code-block",!t.format["code-block"],qt.Z.sources.USER),!1;if(i.scroll.descendants(Jt.BreakBlot,e.index,e.length).length)return this.quill.format("code-block",!t.format["code-block"],qt.Z.sources.USER),!1}if(t.collapsed&&!t.format.code&&!/\s$/.test(t.prefix))return!0;this.quill.format("code",!t.format.code,qt.Z.sources.USER)}},"figure delete":{key:Wt.Z.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(e,t){console.log("keyboard.bindings.figure_delete.handler");let[o,n]=i.scroll.line(e.index);return!(o&&o.prev&&o.prev instanceof oo.FigureBlot)||(t.empty&&i.deleteText(e.index,1,qt.Z.sources.USER),i.setSelection(o.prev.offset(i.scroll)),!1)}},"field backspace":{key:Wt.Z.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(e,t){console.log("keyboard.bindings.field_backspace.handler");let[o,n]=i.scroll.line(e.index);return!(o&&o.prev&&o.prev instanceof Kt.FieldBlot&&o.domNode.textContent.length>0)}},strikethrough:{key:"X",shortKey:!0,shiftKey:!0,handler:function(e,t){i.formatText(e,"strike",!t.format.strike)}}}}}});function r(e,t){return[e,function(e,o){return o.compose((new(Ht())).retain(o.length(),t))}]}function a(e){let t=function(e){let[t,o]=i.scroll.line(e);return i.getText(e,t.length()-o)}(e);return!t||"\n"==t}function l(e,t,o){console.log("breakHandler",e,t,o);let n,r=t.index;t.length>0&&i.scroll.deleteAt(r,t.length);let l=a(r),s=!1;return[n]=i.scroll.descendant(Jt.BreakBlot,r),n?(!n.prev||n.prev instanceof Jt.BreakBlot)&&(i.scroll.deleteAt(--r,1),s=!0):([n]=i.scroll.descendant(Jt.BreakBlot,r-1),n&&(i.scroll.deleteAt(--r,1),s=!0)),[n]=i.scroll.descendant(eo.SingleLineBlot,r),n||s||!e?(i.insertText(r,"\n",qt.Z.sources.USER),i.setSelection(++r,0,qt.Z.sources.USER),(o.format.blockHeader||o.format.blockSubheader||o.format.blockBlockquote||o.format.blockPullquote)&&l&&i.formatLine(r,1,{blockHeader:!1,blockSubheader:!1,blockBlockquote:!1,blockPullquote:!1},qt.Z.sources.USER)):(i.insertEmbed(r,"textBreak",!0,qt.Z.sources.USER),[n]=i.scroll.descendant(Jt.BreakBlot,r),!n||n.next||n.prev&&n.prev instanceof Jt.BreakBlot||(i.insertEmbed(++r,"textBreak",!0,qt.Z.sources.SILENT),i.setSelection(r,0,qt.Z.sources.SILENT))),!1}function s(e){let t;if((t=e.match(/^(https?):\/\/(www\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/i))||(t=e.match(/^(https?):\/\/(www\.)?youtu\.be\/([a-zA-Z0-9_-]+)/i)))return{embed:"/embed/youtube?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(www\.)?vimeo\.com\/(\d+)/i))return{embed:"/embed/vimeo?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(www\.|mobile\.)?twitter\.com\/(.+)\/status\/(\d+)/i))return{embed:"/embed/twitter?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(t\.me|telegram\.me|telegram\.dog)\/([a-zA-Z0-9_]+)\/(\d+)/i))return{embed:"/embed/telegram?url="+encodeURIComponent(e)};if(t=e.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))return"video/"==t[1].substr(0,6)?{video:e}:{image:e};if(t=e.match(/^(https?):\/\/\S+/i)){let o=document.createElement("a");if(o.href=e,o.pathname.match(/\.(jpe?g|png|gif|mp4)$/i))return"mp4"==t[1]?{video:e}:{image:e}}return!1}function c(e){e.scroll.descendants(Rt.ZP,0,e.scroll.length()).forEach((e=>{if(e.domNode.hasAttribute("data-placeholder")){let t=e.domNode.textContent;e.domNode.classList.toggle("empty",!t)}}))}function d(e){if(o){let[t,o]=e.scroll.lines();if(t instanceof Rt.i2)e.updateContents((new(Ht())).insert("\n",{blockTitle:!0}).insert("\n",{blockDescription:!0}),qt.Z.sources.SILENT);else if(t instanceof to.TitleBlot||e.formatLine(0,1,{blockTitle:!0},qt.Z.sources.SILENT),o){if(o instanceof Rt.i2){let t=o.offset(e.scroll);e.updateContents((new(Ht())).retain(t).insert("\n",{blockDescription:!0}),qt.Z.sources.SILENT)}else if(!(o instanceof no.DescriptionBlot)){let t=o.offset(e.scroll);e.formatLine(t,1,{blockDescription:!0},qt.Z.sources.SILENT)}}else{let t=e.scroll.length();e.updateContents((new(Ht())).retain(t).insert("\n",{blockDescription:!0}),qt.Z.sources.SILENT)}let[,,n]=e.scroll.lines();if(n){let t=n.offset(e.scroll),o=e.scroll.length()-t;e.scroll.descendants(Kt.FieldBlot,t,o).forEach((t=>{let o=t.offset(e.scroll),n=t.length(),i=t.constructor.blotName;e.formatText(o,n,i,!1,qt.Z.sources.SILENT)}))}else{let t=e.scroll.length();e.insertText(t,"\n",qt.Z.sources.SILENT)}}const n=e.scroll.lines();t.querySelectorAll("[data-placeholder]").forEach((e=>e.removeAttribute("data-placeholder")));(o?3===n.length:1===n.length)&&n.forEach(((e,t)=>{if("P"==e.domNode.tagName){(o?2===t:0==t)&&e.domNode.setAttribute("data-placeholder","The page content...")}}))}function u(e){let t=e.querySelector(".prompt_input"),o=e.querySelector(".close");t.onkeydown=null,t.onblur=null,o.onclick=null,e.style.display="",e.classList.remove("tooltip_prompt"),i.focus()}return e&&i.addContainer(e),i.on(qt.Z.events.TEXT_CHANGE,(function(){i.getSelection();d(i),c(i),yo(),(0,uo.draftSave)(n,i)})),i.on(qt.Z.events.SCROLL_OPTIMIZE,(function(e){e.forEach((e=>{if("childList"==e.type&&!e.addedNodes.length&&e.removedNodes.length){let t=e.previousSibling,o=e.nextSibling;if(!o&&t&&"BR"==t.tagName&&"inline"==t.className){let t=document.createElement("br");t.className="inline",e.target.appendChild(t)}else!o||!t||"BR"==t.tagName&&"inline"==t.className||"BR"!=o.tagName||"inline"!=o.className||o.nextSibling||o.parentNode&&o.parentNode.removeChild(o)}}))})),i.scroll.domNode.setAttribute("dir","auto"),document.addEventListener("click touchstart",(function(t){let o=t.target;for(;o;){if(o===i.container)return;o=o.parentNode}e&&e.hideFormatTooltip(i),e&&e.hideBlocksTooltip()})),d(i),c(i),e&&(e.$bold_button.onclick=e=>{console.log("$bold_button.onclick");let t=e.target.classList.contains("active");e.preventDefault(),console.log("$bold_button.onclick",!t),i.format("bold",!t),console.log("$bold_button.onclick",i.getSelection(!0)),i.updateSelection(qt.Z.sources.API)}),e&&(e.$italic_button.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault(),i.format("italic",!t),i.updateSelection(qt.Z.sources.API)}),e&&(e.$link_button.onclick=t=>{let o=t.target.classList.contains("active");t.preventDefault();var n=i.getSelection(!0);if(o){i.scroll.descendants(Xt.LinkBlot,n.index,n.length).forEach((e=>{let t=e.offset(i.scroll),o=e.length();i.formatText(t,o,"link",!1)})),e&&vo(n,i,e)}else e&&function(e,t,o){let n=e.querySelector(".prompt_input"),i=e.querySelector(".close");n.value="",n.setAttribute("placeholder",t),n.onkeydown=t=>{let i=t.which||t.keyCode;if(27==i)u(e);else if(13==i){let i=n.value;i&&(o&&o(i),t.preventDefault()),u(e)}},n.onblur=()=>{u(e)},i.onclick=()=>{u(e)},e.style.display="",e.classList.add("tooltip_prompt"),n.focus()}(e.$tl_tooltip,"Paste or type a link...",(function(t){"#"!=(t=t.trim()).substr(0,1)&&"/"!=t.substr(0,1)&&"http://"!=t.substr(0,7)&&"https://"!=t.substr(0,8)&&"tg://"!=t.substr(0,5)&&"mailto:"!=t.substr(0,7)&&(t=t.indexOf("@")>0?"mailto:"+t:"http://"+t),i.focus(),i.format("link",t),vo(n,i,e)}))}),e&&(e.$header_button.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault();let o=i.getSelection(!0);i.format("blockHeader",!t),i.scroll.descendants(ao.HeaderBlot,o.index,o.length).forEach((e=>{let t=e.offset(i.scroll),o=e.length();i.formatText(t,o,{bold:!1,italic:!1,code:!1},qt.Z.sources.SILENT)})),i.updateSelection(qt.Z.sources.API)}),e&&(e.$subheader_button.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault();let o=i.getSelection(!0);i.format("blockSubheader",!t),i.scroll.descendants(lo.SubheaderBlot,o.index,o.length).forEach((e=>{let t=e.offset(i.scroll),o=e.length();i.formatText(t,o,{bold:!1,italic:!1,code:!1},qt.Z.sources.SILENT)})),i.updateSelection(qt.Z.sources.API)}),e&&(e.$quote_button.onclick=e=>{let t=e.target,o=t.classList.contains("active"),n=t.classList.contains("pullquote");e.preventDefault();i.getSelection(!0);o?i.format("blockPullquote",!n):i.format("blockBlockquote",!0),i.updateSelection(qt.Z.sources.API)}),e&&(e.$strikeButton.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault(),i.format("strike",!t),i.updateSelection(qt.Z.sources.API)}),e&&(e.$image_button.onclick=()=>{let e=i.container.querySelector("input.ql-image[type=file][data-status=ready]");null==e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",bo?"image/gif, image/jpeg, image/jpg, image/png":"image/gif, image/jpeg, image/jpg, image/png, video/mp4"),e.classList.add("ql-image"),e.addEventListener("change",(()=>{if(e&&null!=e.files&&null!=e.files[0]){var t=e.files[0];const o=function(){(0,uo.showError)("File too big (up to 5 MB allowed)")},n=5242880;!function(e,t){if("image/jpg"==e.type||"image/jpeg"==e.type)return Dt()(e,(o=>{if("error"===o.type)t(e);else if(o.toBlob)o.toBlob((function(e){t(e)}),e.type);else{var n=o.toDataURL(e.type),i={type:e.type,base64_data:n.split(",")[1]};t((0,uo.uploadDataToBlob)(i))}}),{canvas:!0,orientation:!0});t(e)}(t,(t=>{if(t.size>n)return o&&o();var r=new FileReader;r.onload=function(t){if(t&&null!==t.target){let o=s(t.target.result);if(o){let e=i.getSelection(!0);i.updateContents((new(Ht())).retain(e.index).delete(e.length).insert({blockFigure:o}),qt.Z.sources.USER)}else(0,uo.showError)("Invalid file format");e.value="",e.setAttribute("data-status","ready")}},r.readAsDataURL(t)}))}})),i.container.appendChild(e)),e.setAttribute("data-status","busy"),e.click()}),e&&(e.$embed_button.onclick=t=>{let o=i.getSelection(!0),[n]=i.scroll.line(o.index);const r=n.domNode;if(n){r.textContent||(r.setAttribute("data-placeholder","Paste a YouTube, Vimeo or Twitter link, and press Enter"),r.classList.add("placeholder_once","empty"),e.hideBlocksTooltip())}}),window.addEventListener("scroll resize",(()=>{e&&e.tooltipUpdatePosition(e.$tl_tooltip,null,e.formatTTOptions,i),e&&e.tooltipUpdatePosition(e.$tl_link_tooltip,null,e.linkTTOptions,i)})),i}function vo(e,t,o){let n=null==e?{}:t.getFormat(e),i=!!n.blockDescription,r=!(!n.blockHeader&&!n.blockSubheader),a=!!n["code-block"];if(o.$bold_button.classList.toggle("active",!!n.bold),o.$bold_button.classList.toggle("disabled",i||r||a),o.$italic_button.classList.toggle("active",!!n.italic),o.$italic_button.classList.toggle("disabled",i||r||a),o.$header_button.classList.toggle("active",!!n.blockHeader),o.$header_button.classList.toggle("disabled",i),o.$subheader_button.classList.toggle("active",!!n.blockSubheader),o.$subheader_button.classList.toggle("disabled",i),o.$quote_button.classList.toggle("active",!(!n.blockBlockquote&&!n.blockPullquote)),o.$quote_button.classList.toggle("pullquote",!!n.blockPullquote),o.$quote_button.classList.toggle("disabled",i),o.$strikeButton.classList.toggle("active",!!n.strike),o.$strikeButton.classList.toggle("disabled",i),null!=e){let n=t.scroll.descendants(Xt.LinkBlot,e.index,e.length);o.$link_button.classList.toggle("active",!!n.length)}else o.$link_button.classList.toggle("active",!1);o.$link_button.classList.toggle("disabled",a)}function yo(){const e=document.querySelector(".placeholder_once");null!==e&&(e.removeAttribute("data-placeholder"),e.classList.remove("placeholder_once","empty"))}var xo=o(8079),wo=o(9691);Bt("inscriptum-redactor-bubble-menu");const ko=(0,i.EG)({props:{content:{type:{},default:null},cbOnUpdateContent:{type:{},default:()=>{}},isTitle:Boolean,disable:Boolean},render:n.sY})((function(e){const[t,r]=(0,i.eJ)(0),[a,l]=(0,i.eJ)(),s=Nt();return(0,i.d4)((()=>(cancelAnimationFrame(t),r(requestAnimationFrame((()=>{const t=s.current;if(null!=t){let o=null;o=null!=e.content&&"object"==typeof e.content&&"ops"in e.content?function(e){const t=document.createElement("div"),o=document.createElement("template");o.append(t),document.body.append(o);const n=mo(null,t);Kt.FieldBlot,xo.BlockquoteBlot,wo.PullquoteBlot,co.dn,Ft.H,to.TitleBlot,Rt.ZP,n.setContents(e);const i=n.root.innerHTML;return t.remove(),o.remove(),"function"==typeof n.destroy&&n.destroy(),i}(e.content):e.content,l(function(e,t,o=!1,n){return new x.ML({element:e,content:t,onUpdate:null==n?void 0:n.onUpdate,extensions:ye(o)})}(t,o,e.isTitle,{onUpdate:({editor:t})=>{e.cbOnUpdateContent(t.getJSON())}}))}}))),()=>{var e,o;console.log("DESTROY redactorElement"),null===(o=null===(e=s.current)||void 0===e?void 0:e.firstChild)||void 0===o||o.remove(),cancelAnimationFrame(t),null!=a&&a.destroy()})),[s.current,e.content,e.isTitle,e.cbOnUpdateContent]),null!=a&&a.setEditable(!e.disable),n.dy`<div class="redactor">
      <style>${o(5257)}</style>
      <article .ref=${s.ref()} class="redactor__article"></article>
      ${null!=a&&n.dy`<inscriptum-redactor-bubble-menu .editor=${a}></inscriptum-redactor-bubble-menu>`}
    </div>`})),_o=String.raw,Ao=(ko("inscriptum-redactor"),ct("inscriptum-margin"),ut("inscriptum-folding"),ht()),Eo=ft(),So=Tt(),Lo=(0,i.EG)({props:{page:{type:{}},header:{type:{}}},render:n.sY})((function(e){const[t,o]=(0,i._Y)(Mt,{data:e.page,isLoading:!1});let[r,a]=(0,i.eJ)(e.page.content);const[l,s]=(0,i.eJ)(e.page.isFolded),[c,d]=(0,i.eJ)("hide"),[u,p]=Pt(At),[h,f]=Pt(Et),[g,b]=Pt(St);(0,i.d4)((()=>{const n=function(e){const t=new Lt.xQ;return(0,$t.T)(t)}(e.page.id).subscribe((e=>o(e)));return n.add(u.subscribe((e=>{null!=t.data&&(t.data.content=e.content)}))),n.add(h.subscribe()),n.add(g.subscribe()),()=>{n.unsubscribe()}}),[]),(0,i.d4)((()=>{var e;null!=(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.content)&&(null==r&&null!=t.data.content&&a(t.data.content),null!=t.data.isFolded&&l!==t.data.isFolded&&(t.data.isFolded||a(t.data.content)))}),[t,r,l,a,s]);const v=(0,i.I4)((e=>{null!=t.data&&(p({pageId:t.data.id,draftId:t.data.draftId,content:e}),null!=r?r.content=e.content:r=e)}),[t,p,r]),y=(0,i.I4)((e=>()=>{var o;null!=(null===(o=t.data)||void 0===o?void 0:o.draftId)&&f({draftId:t.data.draftId,order:e})}),[t.data,p]),x=(0,i.I4)((()=>{null!=t.data&&b({draftId:t.data.draftId,pageId:t.data.id,order:t.data.order})}),[t.data]),w=(0,i.I4)((()=>{var e;null!=(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.id)&&function(e,t){_t(this,void 0,void 0,(function*(){return yield(0,we.G)((()=>_t(this,void 0,void 0,(function*(){const{insert_margin_one:o}=yield(0,m.S)().createMargin({page_id:e,created_at:(new Date).toISOString()});if(null!=(null==o?void 0:o.id))return t({type:gt.CREATE_MARGIN_DONE,payload:{pageId:e,marginId:o.id}}),o;t({type:gt.CREATE_MARGIN_FAIL,payload:{pageId:e,error:{massage:`Can not create a new Margin for Page ${e}!`}}})}))))}))}(t.data.id,o)}),[t]),k=(0,i.I4)((e=>{d(e.detail.mode)}),[t]);if(null!=(null==t?void 0:t.data)){const o=n.dy`<div class="page__controls">
        <div>
          <button class="btn btn_icon" title="add a new page" @click=${y(t.data.order+1)}>
            ${Ao({})}
          </button>
          ${t.data.order>0?n.dy`<button class="btn btn_icon" title="delete this page" @click=${x}>
              ${Eo({})}
            </button>`:null}
        </div>
        <div>
          ${l?null:n.dy`<button class="btn btn_icon" title="create new margin" @click=${w}>
              ${So({})}
            </button>`}
        </div>
      </div>`;return n.dy`
        <inscriptum-folding .label=${t.data.order>0?String(t.data.order):""} .value=${t.data.id} .isFolded=${l} .change=${(e,t)=>s(t)}></inscriptum-folding>
        ${l?n.dy`
            <span style=${_o`
                display: flex;
                justify-content: center;
                cursor: pointer;
                font-size: 15px;
                line-height: 18px;
                color: var(--color-contrast-medium);
                padding-top: 10px;
              `} @click=${()=>s(!1)}>
              ${e.header&&e.header.trim().length>0?e.header:"..."}
            </span>
            ${o}
          `:n.dy`<div class="row" style=${_o`
              display: flex;
              width: 100%;
              min-height: ${t.data.margins.length>0?"100vh":"auto"};
            `}>
            <div style=${_o`
                min-width: 732px;
                padding: 1rem 0 0 0;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
              `}>
              
              <inscriptum-redactor .disable=${["expand","full"].includes(c)} .content=${r} .cbOnUpdateContent=${v} .isTitle=${0===t.data.order}></inscriptum-redactor>
              ${o}
            </div>
            ${t.data.margins.length>0?n.dy`<inscriptum-margin .marginId=${t.data.margins[0].id} @changeMarginMode=${k}></inscriptum-margin>`:null}
          </div>`}
      `}})),$o=(0,d.EG)({props:{items:d.p.req()}})((function*(e){var t,i;for(;;)e=yield(0,n.sY)(n.dy`
        <style>${o(7135)}</style>
        <nav class="toc-panel">
          <ul class="toc-panel__list">
            <li class="toc-panel__title">${null!==(i=null===(t=e.items[0])||void 0===t?void 0:t.header)&&void 0!==i?i:"In this article"}</li>
            ${e.items.slice(1).map(((e,t)=>{var o;return n.dy`<li class="toc-panel__item">
                <span class="toc-panel__page-numb">${t+1}</span>
                <a class=${"toc-panel__header "+(t+1===0?"toc-panel__header_selected":"")}>${null!==(o=null==e?void 0:e.header)&&void 0!==o?o:"..."}</a>
              </li>`}))}

            
          </ul>
        </nav>
      `,this)}));function Mo(e,t){var o,n,i,r,l,s,c,d;switch(t.type){case y.LOAD:case y.LOADING:return Object.assign(Object.assign({},e),{isLoading:!0});case y.LOAD_DONE:if((null===(o=t.payload.pages)||void 0===o?void 0:o.length)!==t.payload.table_of_contents.length){t.payload.table_of_contents=[];for(const e of null!==(n=t.payload.pages)&&void 0!==n?n:[])t.payload.table_of_contents.push({header:To(e.content),pageId:e.id});_e(t.payload.table_of_contents,t.payload.id)}return Object.assign(Object.assign({},e),{data:t.payload,isLoading:!1});case a.u.DRAFT_ADD_PAGE_DONE:if(null!=e.data&&null!=t.payload.newPage){const o=null!==(i=e.data.pages)&&void 0!==i?i:[];for(const e of o){const o=t.payload.updatedPages.find((t=>t.id===e.id));null!=o&&(e.order=o.order)}o.push(t.payload.newPage);const n=e.data.table_of_contents;return _e([...n.slice(0,t.payload.newPage.order),{header:"...",pageId:t.payload.newPage.id},...n.slice(t.payload.newPage.order)],e.data.id),Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{pages:o.sort(((e,t)=>e.order-t.order))})})}return e;case a.u.DRAFT_DELETE_PAGE_DONE:if(null!=e.data){const o=(null!==(r=e.data.pages)&&void 0!==r?r:[]).filter((e=>e.id!==t.payload.deletedPage.id));for(const e of o){const o=t.payload.updatedPages.find((t=>t.id===e.id));null!=o&&(e.order=o.order)}const n=e.data.table_of_contents;return _e([...n.slice(0,t.payload.deletedPage.order),...n.slice(t.payload.deletedPage.order+1)],e.data.id),Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{pages:o.sort(((e,t)=>e.order-t.order))})})}return e;case y.UPDATE_TOC_DONE:return null!=e.data?Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{table_of_contents:t.payload.toc})}):e;case y.UPDATE_TOC_ERROR:return console.warn(t.payload.error),e;case a.u.PAGE_SAVE_DONE:if(null!=e.data){const o=null!==(c=null===(s=null===(l=e.data.pages)||void 0===l?void 0:l.find((e=>e.id===t.payload.pageId)))||void 0===s?void 0:s.order)&&void 0!==c?c:-1,n=e.data.table_of_contents;let i=To(t.payload.content);n[o]=null!==(d=n[o])&&void 0!==d?d:{},o>-1&&n[o].header!==String(i)&&(n[o]={header:String(i),pageId:t.payload.pageId},_e(n,e.data.id))}return e;case a.u.DRAFT_PUBLISH:return null!=e.data?Ae(e.data):alert("Error: the draft cannot be published. The draft state is null."),e;default:return e}}function To(e){var t;let o="...";return null==e||("ops"in e&&(o=e.ops[0].insert),"type"in e&&Array.isArray(e.content)&&Array.isArray(e.content[0].content)&&"text"===e.content[0].content[0].type&&(o=null!==(t=e.content[0].content[0].text)&&void 0!==t?t:o)),o}const Po=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu-2" width="38" height="38" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <line x1="4" y1="6" x2="20" y2="6"></line>
          <line x1="4" y1="12" x2="20" y2="12"></line>
          <line x1="4" y1="18" x2="20" y2="18"></line>
        </svg>      
      `,this)}))(),No=(0,d.EG)()((function*(){var e;const t=window.innerWidth<=Number(null!==(e=getComputedStyle(this).getPropertyValue("--ipad-min-width"))&&void 0!==e?e:0);for(;;)yield(0,c.sY)(c.dy`
        <style>${o(6599)}</style>
        <input type="checkbox" id="sidebar" name="sidebar" class="sidebar-checkbox" .checked=${!t}>
        <div class="sidebar">
          <label class="btn btn_icon sidebar-toggle" for="sidebar">
            ${Po({})}
          </label>
          <div class="sidebar-content">
            <slot></slot>
          </div>
        </div>
      `,this.attachShadow({mode:"open"}))})),Co=String.raw,Bo=(Lo("inscriptum-page"),(0,s.s)("loading-progress-bar"),$o("inscriptum-table-of-content"),f("inscriptum-controls-panel"),No("inscriptum-sidebar"),(0,i.EG)({props:{id:{type:String,attribute:"data-id"}},render:n.sY})((function(e){var t,s,c,d;const[u,p]=(0,i._Y)(Mo,{isLoading:!1}),[h,f]=(0,i.eJ)(new g.w),[v,x]=(0,i.eJ)(0),w=(0,i.sO)(null);return(0,i.d4)((()=>{const t=function(e){const t=r.Z.$.pipe(),o=r.Z.$.pipe((0,b.h)((t=>t.type===a.u.PAGE_SAVE_DONE&&t.payload.draftId===e)));return(0,$t.T)(t,o)}(e.id).subscribe((e=>p(e)));return()=>{t.unsubscribe()}}),[]),(0,i.d4)((()=>{!function(e){ke(this,void 0,void 0,(function*(){return r.Z.dispatch({type:y.LOADING,payload:{id:e}}),(0,we.G)((()=>ke(this,void 0,void 0,(function*(){const{draft:t}=yield(0,m.S)().getDraftById({id:e});null!=t&&r.Z.dispatch({type:y.LOAD_DONE,payload:{id:t.id,created_at:t.created_at,updated_at:t.updated_at,table_of_contents:t.table_of_contents,notes:t.notes,pages:t.pages.sort(((e,t)=>e.order-t.order)).map(((t,o)=>{var n;return Object.assign(Object.assign({},t),{content:t.content,draftId:e,isFolded:0!==o,margins:null!==(n=t.margins)&&void 0!==n?n:[]})}))}})}))))}))}(e.id)}),[e.id]),(0,i.d4)((()=>(cancelAnimationFrame(v),x(requestAnimationFrame((()=>{null!=w.current&&(h.unsubscribe(),f(function(e){var t,o;const n=new g.w;let i=document.title;const l=null===(t=e.current)||void 0===t?void 0:t.togglePause,s=null===(o=e.current)||void 0===o?void 0:o.generateProgress;if(null!=l&&null!=s){let e=2e3,t=!1,o=!1;n.add(r.Z.$.pipe((0,b.h)((e=>e.type===a.u.PAGE_SAVE))).subscribe((()=>{o||(i=document.title,document.title=`*${i}`,o=!0)}))),n.add(r.Z.$.pipe((0,b.h)((e=>e.type===a.u.PAGE_SAVING))).subscribe((()=>{t&&s.next(),e=2e3,t=!0;const o=s.next();void 0!==o&&1===o.value&&(setTimeout((()=>{t&&(l(!0),e-=300)}),300),setTimeout((()=>{t&&l(!1)}),1e3),setTimeout((()=>{t&&(l(!0),e-=1e3)}),2e3),setTimeout((()=>{t&&(e-=1e3)}),3e3))}))),n.add(r.Z.$.pipe((0,b.h)((e=>e.type===a.u.PAGE_SAVE_DONE))).subscribe((n=>{t=!1,l(!1),setTimeout((()=>{s.next()}),e>0?e:0),document.title=i,o=!1}))),n.add(r.Z.$.pipe((0,b.h)((e=>e.type===a.u.PAGE_SAVE_FAIL))).subscribe((()=>{t=!1,l(!1),setTimeout((()=>{s.next()}),e>0?e:0)})))}return n}(w)))}))),()=>{cancelAnimationFrame(v),h.unsubscribe()})),[w.current]),(0,i.d4)((()=>{var e;const t=null===(e=u.data)||void 0===e?void 0:e.table_of_contents[0];null!=t&&(document.title=t.header)}),[u]),n.dy`
      <style>${o(6061)}</style>
      <loading-progress-bar .ref=${w}></loading-progress-bar>

      <um-preloader .loading=${u.isLoading}>
        <div class="draft-content">
          <inscriptum-sidebar>
            <inscriptum-controls-panel .draftId=${e.id}></inscriptum-controls-panel>
            <inscriptum-table-of-content .items=${null!==(s=null===(t=u.data)||void 0===t?void 0:t.table_of_contents)&&void 0!==s?s:[]}></inscriptum-table-of-content>
          </inscriptum-sidebar>
          <div style=${Co`
              width: 100%;
            `}>
            ${(0,l.r)(null!==(d=null===(c=u.data)||void 0===c?void 0:c.pages)&&void 0!==d?d:[],(e=>`${e.id}_${e.order}`),(e=>{var t,o;return n.dy`<inscriptum-page .page=${e} style=${Co`
                    position: relative;
                    display: block;
                    border-bottom: 1px solid #eee;
                    margin-left: 150px;
                  `} .header=${null===(o=null===(t=u.data)||void 0===t?void 0:t.table_of_contents[e.order])||void 0===o?void 0:o.header}></inscriptum-page>`}))}
          </div>
        </div>
      </um-preloader>
    `})))},6106:(e,t,o)=>{o.d(t,{j7:()=>c,Bc:()=>d});var n=o(6798),i=o(6136),r=o(8770),a=o(8638),l=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};const s=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,c="figure",d=n.NB.create({name:c,draggable:!0,defining:!0,selectable:!0,content:()=>"text*",defaultOptions:{inline:!1,HTMLAttributes:{}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML:()=>[{tag:"figure",contentElement:"figcaption",getAttrs:e=>{const t=e.querySelector("img");return{src:null==t?void 0:t.getAttribute("src"),alt:null==t?void 0:t.getAttribute("alt"),title:null==t?void 0:t.getAttribute("title")}}},{tag:"img[src]",preserveWhitespace:!0,getContent:(e,t)=>a.HY.from(t.text(e.alt.length>0?e.alt:" ")),getAttrs:e=>({src:e.getAttribute("src")})}],renderHTML({HTMLAttributes:e}){return["figure",["img",(0,n.P1)(this.options.HTMLAttributes,e)],["figcaption",0]]},addCommands(){return{setFigure:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[(0,n.x2)(s,this.type,(e=>{const[,t,o,n]=e;return{src:o,alt:t,title:n}}))]},addNodeView(){return({node:e,HTMLAttributes:t,getPos:o,editor:n})=>{const a=document.createElement("figure");a.setAttribute("draggable","true");const s=document.createElement("div"),c=document.createElement("figcaption");s.classList.add("figure_wrapper"),s.contentEditable="false",c.classList.add("editable_text"),c.classList.add("empty"),c.setAttribute("data-placeholder","Caption (optional)");const d=e.content.firstChild;(null==d?void 0:d.isText)&&null!=d.text&&d.text.trim().length>0&&c.classList.remove("empty"),a.appendChild(s),a.appendChild(c);const p=function(e,t){const o=document.createElement("img");return o.setAttribute("src",u(e)),t.appendChild(o),o}(e.attrs.src,s);e.attrs.alt&&p.setAttribute("alt",e.attrs.alt),e.attrs.title&&p.setAttribute("title",e.attrs.title);const h=function(e){const t=e.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/);if(null!=t)return{type:t[1],base64_data:t[2]}}(e.attrs.src);if(null!=h){const e=document.createElement("div"),t=document.createElement("div");e.classList.add("file_progress"),t.classList.add("file_progress_bar"),s.classList.add("loading"),e.appendChild(t),s.appendChild(e),function(e,t,o){!function(e,t,o,n){l(this,void 0,void 0,(function*(){try{const n=yield(0,r.uploadFileService)((0,i.uploadDataToBlob)(e),t);o&&o(n)}catch(e){n&&n(e)}}))}(e,((e,t)=>{let n=0;t&&e&&(n=100*e/t,n=Math.min(100,n)),o.style.width=n+"%"}),(e=>{if(e){const o=u(e.src),n=t.querySelector("img");null!=n&&(n.src=o),t.classList.remove("loading")}}),(e=>(0,i.showError)(e)))}(h,s,t)}return p.onclick=()=>{"function"==typeof o&&this.editor.commands.setNodeSelection(o())},{dom:a,contentDOM:c,ignoreMutation:t=>"attributes"===t.type&&null!=t.attributeName&&(["src","title","alt"].includes(t.attributeName)&&(e.attrs[t.attributeName]=t.target.getAttribute(t.attributeName)),!0),update:e=>e.type===this.type&&(c.classList.toggle("empty",0===e.content.size),!0)}}}});function u(e){return function(e,t){const o=document.createElement("a");o.href=e;const n=o.href.slice(0,o.href.indexOf(":"));return t.indexOf(n)>-1}(e,["http","https","data"])?e:"//:0"}},9586:(e,t,o)=>{o.d(t,{W:()=>i,V:()=>r});var n=o(6798);const i="topicSummary",r=n.NB.create({name:i,group:"topicDoc",content:"inline*",addAttributes:()=>({"data-placeholder":{default:"Summary of the text"},"data-label":{default:"Summary"},role:{default:"definition"}}),parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",(0,n.P1)(this.options.HTMLAttributes,e),0]}})},9059:(e,t,o)=>{o.d(t,{H:()=>i,l:()=>r});var n=o(6798);const i="topicTitle",r=n.NB.create({name:i,content:"inline*",group:"topicDoc",defining:!0,selectable:!0,addAttributes:()=>({"data-placeholder":{default:"Title"},"data-label":{default:"Title"}}),parseHTML:()=>[{tag:"h1"}],renderHTML({HTMLAttributes:e}){return["h1",(0,n.P1)(this.options.HTMLAttributes,e),0]}})},4938:(e,t,o)=>{o.d(t,{X7:()=>a,Ro:()=>l,WV:()=>s,iv:()=>u,u:()=>p});var n=o(6106),i=o(9586),r=o(9059);function a(e){if(!document.getElementById(e)){var t=document.getElementsByTagName("head")[0],o=document.createElement("link");o.id=e,o.rel="stylesheet",o.type="text/css",o.href=document.location.origin+e,o.media="all",t.appendChild(o)}}function l(e){let t="<noname>",o="...",n="";if(Array.isArray(null==e?void 0:e.ops)&&e.ops.length>0){t=String(e.ops[0].insert),o=String(e.ops[2].insert);const i=e.ops.find((e=>void 0!==d(e,["insert","blockFigure","image"])));if(null!=i&&(n=d(i,["insert","blockFigure","image"])),o.length<3){for(const[t,i]of e.ops.entries())if(t>2){if(o.length>100)break;void 0!==d(i,["insert","blockFigure","image"])?n=d(i,["insert","blockFigure","image"]):o+=" "+i.insert}o+="..."}}return o=o.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/`/g,"&DiacriticalGrave;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),{title:t,description:o,image:n}}function s(e){var t,o,a;let l="<noname>",s="...",d="";if(null!=e){const u=c(e,r.H);null!=(null==u?void 0:u.content)&&(l=null!==(t=u.content[0].text)&&void 0!==t?t:l);const p=c(e,i.W);null!=(null==p?void 0:p.content)&&(s=null!==(o=p.content[0].text)&&void 0!==o?o:s);const h=c(e,n.j7);null!=(null==h?void 0:h.attrs)&&(d=null!==(a=h.attrs.src)&&void 0!==a?a:d)}return s=s.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/`/g,"&DiacriticalGrave;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),{title:l,description:s,image:d}}function c(e,t){if(e.type===t)return e;if(Array.isArray(e.content))for(const o of e.content){const e=c(o,t);if(null!=e)return e}return null}function d(e,t){return t.reduce(((e,t)=>e&&"undefined"!==e[t]?e[t]:void 0),e)}const u=String.raw;function p(e,t=!1){const o="щ   ш  ч  ц  ю  я  ё  ж  ъ  ы  э  а б в г д е з и й к л м н о п р с т у ф х ь".split(/ +/g),n="shh sh ch cz yu ya yo zh `` y' e` a b v g d e z i j k l m n o p r s t u f x `".split(/ +/g);for(let i=0;i<o.length;i++)e=(e=e.split(t?n[i]:o[i]).join(t?o[i]:n[i])).split(t?n[i].toUpperCase():o[i].toUpperCase()).join(t?o[i].toUpperCase():n[i].toUpperCase());return e}},669:(e,t,o)=>{o.d(t,{$:()=>s});var n=o(1640),i=o(8147),r=o(3255);class a extends i.s{render(e,t){return t.current=this,e}}const l=(0,r.XM)(a);function s(e,t){if(!(t.current instanceof HTMLElement))return t.current instanceof a&&t.current.setValue(e),l(e,t);(0,n.sY)(e,t.current)}},6061:e=>{e.exports='/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--font-family: Inter, sans-serif;--ipad-min-width: 1366}.container{position:relative;width:100%;max-width:960px;margin:0 auto;padding:0 20px;box-sizing:border-box}.column,.columns{width:100%;float:left;box-sizing:border-box}@media(min-width: 400px){.container{width:85%;padding:0}}@media(min-width: 550px){.container{width:80%}.column,.columns{margin-left:4%}.column:first-child,.columns:first-child{margin-left:0}.one.column,.one.columns{width:grid-column-width(1)}.two.columns{width:grid-column-width(2)}.three.columns{width:grid-column-width(3)}.four.columns{width:grid-column-width(4)}.five.columns{width:grid-column-width(5)}.six.columns{width:grid-column-width(6)}.seven.columns{width:grid-column-width(7)}.eight.columns{width:grid-column-width(8)}.nine.columns{width:grid-column-width(9)}.ten.columns{width:grid-column-width(10)}.eleven.columns{width:grid-column-width(11)}.twelve.columns{width:100%;margin-left:0}.one-third.column{width:grid-column-width(4)}.two-thirds.column{width:grid-column-width(8)}.one-half.column{width:grid-column-width(6)}.offset-by-one.column,.offset-by-one.columns{margin-left:grid-offset-length(1)}.offset-by-two.column,.offset-by-two.columns{margin-left:grid-offset-length(2)}.offset-by-three.column,.offset-by-three.columns{margin-left:grid-offset-length(3)}.offset-by-four.column,.offset-by-four.columns{margin-left:grid-offset-length(4)}.offset-by-five.column,.offset-by-five.columns{margin-left:grid-offset-length(5)}.offset-by-six.column,.offset-by-six.columns{margin-left:grid-offset-length(6)}.offset-by-seven.column,.offset-by-seven.columns{margin-left:grid-offset-length(7)}.offset-by-eight.column,.offset-by-eight.columns{margin-left:grid-offset-length(8)}.offset-by-nine.column,.offset-by-nine.columns{margin-left:grid-offset-length(9)}.offset-by-ten.column,.offset-by-ten.columns{margin-left:grid-offset-length(10)}.offset-by-eleven.column,.offset-by-eleven.columns{margin-left:grid-offset-length(11)}.offset-by-one-third.column,.offset-by-one-third.columns{margin-left:grid-offset-length(4)}.offset-by-two-thirds.column,.offset-by-two-thirds.columns{margin-left:grid-offset-length(8)}.offset-by-one-half.column,.offset-by-one-half.column{margin-left:grid-offset-length(6)}}.container:after,.row:after,.u-cf{content:"";display:table;clear:both}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--font-family: Inter, sans-serif;--ipad-min-width: 1366}.btn{cursor:pointer}.btn.btn_icon{background:transparent;border:none}.btn.btn_icon .icon-tabler{transition:.2s;stroke:#bbb;stroke:var(--border-color);color:#bbb;color:var(--border-color)}.btn.btn_icon .icon-tabler:hover{stroke:#333;stroke:var(--dark-grey)}.um-drafts__submenu{display:flex;flex-direction:row-reverse;padding-top:10px;border-bottom:1px solid #eee}.um-drafts__export-all{margin:0 0 10px 10px;stroke:#fff;stroke-width:30px;color:#bbb}.um-drafts__export-all:hover{color:#888;cursor:pointer}.draft-content{display:flex;flex-direction:column}@media(min-width: 400px){.draft-content{flex-direction:row}}.page__controls{display:flex;justify-content:space-between;align-items:start;opacity:.3;transition:.2s}.page__controls:hover{opacity:1}'},8608:e=>{e.exports=":root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--font-family: Inter, sans-serif;--ipad-min-width: 1366}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--font-family: Inter, sans-serif;--ipad-min-width: 1366}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--font-family: Inter, sans-serif;--ipad-min-width: 1366}.btn{cursor:pointer}.btn.btn_icon{background:transparent;border:none}.btn.btn_icon .icon-tabler{transition:.2s;stroke:#bbb;stroke:var(--border-color);color:#bbb;color:var(--border-color)}.btn.btn_icon .icon-tabler:hover{stroke:#333;stroke:var(--dark-grey)}:host{position:relative;width:100%;display:flex;flex-direction:row;border-left:solid 1px #e1e1e1;user-select:none;-webkit-user-select:none}sketch-pad{width:100%;display:block}.sketch-pad_frame{flex-grow:1;position:absolute;height:100%;width:100%;overflow:auto;user-select:none;-webkit-user-select:none}.signature-pad{position:absolute;user-select:none;-webkit-user-select:none}.fab-container{display:inline-flex;align-items:flex-end;justify-content:flex-end}.fab-container_main{position:sticky;top:calc(100% - 60px);left:20px;display:flex;margin:1em;flex-direction:row;height:0}.fab-container_main>*:not(:last-child){opacity:0;margin-left:0;transform:translateX(10px)}.fab-container_main:hover{height:50px;top:calc(100% - 60px - 50px)}.fab-container_main:hover>*{display:flex;opacity:1;transform:none;margin-left:10px}.fab-container [tooltip]:before{bottom:115%;border-radius:2px;background:rgba(88,88,88,.16);content:attr(tooltip);font-size:12px;visibility:hidden;opacity:0;padding:5px 7px;margin-right:12px;position:absolute;white-space:nowrap}.fab-container [tooltip]:hover:before,.fab-container [tooltip]:hover:after{visibility:visible;opacity:1}.fab-container_horizontal{flex-direction:row;position:relative;margin:0;display:none}.fab-container_horizontal>*:not(:last-child){opacity:0;margin-left:0;transform:translateX(10px)}.fab-container_horizontal:hover>*{display:inherit;opacity:1;transform:none;margin-left:10px}.fab-container_vertical{flex-direction:column;position:relative;margin:0;display:none}.fab-container_vertical>*:not(:last-child){opacity:0;margin-top:0;transform:translateY(10px);z-index:0}.fab-container_vertical:hover>*{z-index:1;opacity:1;margin-top:10px;transform:none}.fab-container:nth-last-child(1){transition-delay:25ms;background-size:contain}.fab-container:not(:last-child):nth-last-child(2){transition-delay:20ms;background-size:contain}.fab-container:not(:last-child):nth-last-child(3){transition-delay:40ms;background-size:contain}.fab-container:not(:last-child):nth-last-child(4){transition-delay:60ms;background-size:contain}.fab-button{border:none;background-color:#fff;cursor:pointer;box-shadow:2px 2px 2px 0px rgba(0,0,0,.18),0px 4px 7px -7px rgba(0,0,0,.15);border-radius:50%;display:block;width:40px;height:40px;margin:5px;position:relative;transition:all .1s ease-out;text-decoration:none;display:flex;justify-content:center;align-items:center;color:#bbb}.fab-button:active,.fab-button:focus,.fab-button:hover{box-shadow:3px 2px 2px rgba(0,0,0,.14),0 4px 8px rgba(0,0,0,.28);color:#bbb}.fab-button_lg{width:50px;height:50px;margin:0}.fab-button_empty{box-shadow:none}.fab-button_empty:hover{box-shadow:none}.btn__first{position:absolute;z-index:2}.btn__second{position:absolute;z-index:2;left:2rem}.btn__third{position:absolute;z-index:2;left:4rem}.sub-button{display:block;position:absolute;background:#fff;border:1px solid #eee;border-radius:4px;filter:drop-shadow(0 0 6px rgba(0, 0, 0, 0.1));padding:5px}.sub-button__back{position:relative;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)}"},5257:e=>{e.exports='pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{background:#23241f;color:#f8f8f2}.hljs-subst,.hljs-tag{color:#f8f8f2}.hljs-emphasis,.hljs-strong{color:#a8a8a2}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ae81ff}.hljs-code,.hljs-section,.hljs-selector-class,.hljs-title{color:#a6e22e}.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}.hljs-attr,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#f92672}.hljs-attribute,.hljs-symbol{color:#66d9ef}.hljs-class .hljs-title,.hljs-params,.hljs-title.class_{color:#f8f8f2}.hljs-addition,.hljs-built_in,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-string,.hljs-template-variable,.hljs-type,.hljs-variable{color:#e6db74}.hljs-comment,.hljs-deletion,.hljs-meta{color:#75715e}.redactor{max-width:732px;margin:0 auto}.redactor__article{font-family:Georgia,Times,Times New Roman,serif;font-weight:400;font-style:normal;font-size:18px;line-height:1.58;color:rgba(12,10,10,.8);padding:0;margin:0}.redactor__article .ProseMirror{outline:0}.redactor__article .ProseMirror>*+*{margin-top:.75em}.redactor__article .ProseMirror>::selection,.redactor__article .ProseMirror>:not(pre) ::selection{background:#5f5f5f2f}.redactor__article .ProseMirror h1,.redactor__article .ProseMirror h2,.redactor__article .ProseMirror h3,.redactor__article .ProseMirror h4{font-family:Inter,sans-serif;font-weight:600;font-style:normal;letter-spacing:initial}.redactor__article .ProseMirror h1{font-size:32px;margin:21px 21px 12px;line-height:34px}.redactor__article .ProseMirror h2{font-size:30px;margin:21px 21px 12px;line-height:34px}.redactor__article .ProseMirror h3{font-size:28px;margin:18px 21px 9px}.redactor__article .ProseMirror h4{font-size:24px;margin:18px 21px 7px}.redactor__article .ProseMirror p{margin:0 21px 12px;word-wrap:break-word;white-space:pre-wrap}.redactor__article .ProseMirror blockquote{margin:18px 21px 16px 0;padding-left:15px;position:relative;font-style:italic;word-wrap:break-word;border-left:3px solid #000}.redactor__article .ProseMirror aside{font-size:21px;color:rgba(0,0,0,.6);margin:18px 21px 16px;padding:0 18px;text-align:center;font-style:italic}.redactor__article .ProseMirror hr{width:50%;margin:30px auto;border:none;font-size:2px;text-align:right;overflow:visible}.redactor__article .ProseMirror hr:after{content:"";display:block;border-top:1px solid #c9cdd1;margin:0 3px;position:relative;top:1px}.redactor__article .ProseMirror [contenteditable=false]{white-space:normal}.redactor__article .ProseMirror ul[data-type=taskList]{list-style:none;padding:0;margin:0 21px 12px}.redactor__article .ProseMirror ul[data-type=taskList] li{display:block}.redactor__article .ProseMirror ul[data-type=taskList] li>label{float:left;margin-right:.5rem}.redactor__article .ProseMirror ul[data-type=taskList] li>div{display:contents}.redactor__article .ProseMirror ul[data-type=taskList] li p{margin:0}.redactor__article .ProseMirror mark{background-color:#faf594b4}.redactor__article .ProseMirror :not(pre)>code{background-color:rgba(97,97,97,.1);color:#616161;font-family:JetBrainsMono,monospace;font-variant-ligatures:normal;padding:.1rem .3rem;border-radius:.4rem;font-size:.9rem}.redactor__article .ProseMirror a[href]{text-decoration:none;transition:all .2s ease-in-out;color:rgba(0,0,0,.8);border-bottom:.1rem rgba(0,0,0,.425) solid}.redactor__article .ProseMirror a[href]:hover,.redactor__article .ProseMirror a[href]:focus{border-bottom:.1rem rgba(0,0,0,.8) solid}.redactor__article .ProseMirror *[data-placeholder].empty{position:relative}.redactor__article .ProseMirror *[data-placeholder].empty:before{position:absolute;left:0;right:0;content:attr(data-placeholder);color:rgba(0,0,0,.44);font-weight:normal;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;pointer-events:none}.redactor__article .ProseMirror *[data-label]{position:relative}.redactor__article .ProseMirror *[data-label]:after{position:absolute;content:attr(data-label);color:rgba(0,0,0,.44);border-right:1px solid rgba(0,0,0,.15);right:100%;top:-6px;bottom:-6px;padding:6px 12px;font-weight:normal;margin:0 21px;opacity:0;visibility:hidden;transition:opacity .15s ease}.redactor__article .ProseMirror .focused *[data-label].empty:after{position:absolute;content:attr(data-label);color:rgba(0,0,0,.44);border-right:1px solid rgba(0,0,0,.15);right:100%;top:-6px;bottom:-6px;padding:6px 12px;font-weight:normal;margin:0 21px;opacity:0;visibility:hidden;transition:opacity .15s ease}.redactor__article .ProseMirror *[data-label].focused:after{opacity:1;visibility:visible}.redactor__article .ProseMirror *[role=definition]{font-family:Inter,sans-serif;font-size:15px;line-height:18px;color:#79828b;margin:12px 21px;font-style:normal}.redactor__article .ProseMirror *[role=definition] a{color:#79828b}.redactor__article .ProseMirror *[role=definition] a[href]{border-bottom:none;border-bottom:.1em solid rgba(0,0,0,.4)}.redactor__article .ProseMirror *[role=definition].empty{display:block}.redactor__article .ProseMirror *[role=definition] time:before{content:"•";padding:0 7px}.redactor__article .ProseMirror img{max-width:100%;vertical-align:top}.redactor__article .ProseMirror .iframe_wrap{max-width:100%;vertical-align:top;max-width:100%;vertical-align:top;position:relative}.redactor__article .ProseMirror .iframe_wrap iframe{position:absolute;width:1px;height:1px;min-width:100%;min-height:100%;*width:100%;*height:100%;top:0;left:0}.redactor__article .ProseMirror figure{margin:0 21px 16px;padding:0;text-align:center;position:relative;user-select:inherit}.redactor__article .ProseMirror figure.ProseMirror-selectednode img{box-shadow:0 0 0 3px rgba(0,0,0,.4)}.redactor__article .ProseMirror figure.ProseMirror-selectednode img:hover{box-shadow:0 0 0 3px rgba(0,0,0,.4)}.redactor__article .ProseMirror figure img:hover{box-shadow:0 0 0 3px rgba(0,0,0,.2)}.redactor__article .ProseMirror figcaption{font-family:Inter,sans-serif;font-size:15px;color:#79828b;padding:12px 21px 0;line-height:18px;vertical-align:top;text-align:center}.redactor__article .ProseMirror .figure_wrapper{position:relative}.redactor__article .ProseMirror .figure_wrapper img{opacity:1;transition:opacity .15s ease;max-height:690px}.redactor__article .ProseMirror .figure_wrapper.loading img{opacity:.3}.redactor__article .ProseMirror .figure_wrapper .file_progress{position:absolute;z-index:1;bottom:0;left:0;right:0;padding:3px;background-color:rgba(255,255,255,.7);transition:opacity .15s ease;visibility:hidden;opacity:0}.redactor__article .ProseMirror .figure_wrapper.loading .file_progress{visibility:visible;opacity:1}.redactor__article .ProseMirror .figure_wrapper .file_progress_bar{height:2px;background-color:#333;transition:width .1s linear;width:0}.redactor__article .ProseMirror figcaption[data-placeholder].empty{position:relative;overflow:hidden;width:calc(100% - 170px)}.redactor__article .ProseMirror figcaption[data-placeholder].empty:before{display:none}.redactor__article .ProseMirror figcaption[data-placeholder].empty:after{position:absolute;content:attr(data-placeholder);color:rgba(0,0,0,.44);font-weight:normal;font-style:italic;top:0px;padding-top:12px}.redactor__article .ProseMirror pre{background:#232b2b;border-radius:.3rem;box-shadow:0 .5rem 1rem rgba(0,0,0,.4);border-left:6px solid #516363;margin:1rem auto;white-space:pre-wrap;color:#c7d3de;counter-reset:step;counter-increment:step 0;position:relative;font-family:JetBrainsMono,monospace;font-variant-ligatures:normal;font-size:.9rem;padding:.75rem 1rem}.redactor__article .ProseMirror pre code{font-family:JetBrainsMono,monospace;font-variant-ligatures:normal;white-space:pre-wrap;margin-left:2.5rem;display:block}.redactor__article .ProseMirror pre ::selection{background:#dbdbdb2d}.redactor__article .ProseMirror pre div.l:before{color:#516363;position:absolute;left:15px;content:counter(step);counter-increment:step}@media(max-width: 960px){.redactor__article .ProseMirror *[data-label]:after{display:none}}.is-active{background:#000;color:#fff}'},6599:e=>{e.exports=":root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--font-family: Inter, sans-serif;--ipad-min-width: 1366}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--font-family: Inter, sans-serif;--ipad-min-width: 1366}.btn{cursor:pointer}.btn.btn_icon{background:transparent;border:none}.btn.btn_icon .icon-tabler{transition:.2s;stroke:#bbb;stroke:var(--border-color);color:#bbb;color:var(--border-color)}.btn.btn_icon .icon-tabler:hover{stroke:#333;stroke:var(--dark-grey)}:host{--width: 240px;--toggle-size: 38px}:host .sidebar{position:fixed;border-right:solid 1px #e1e1e1;width:0;visibility:hidden;height:100%;background:#fff;z-index:1;transition:all .35s}@media(min-width: 1367px){:host .sidebar{position:relative;border-right:none}}:host .sidebar .sidebar-content{overflow-y:scroll;transition:all .2s;transform:translateX(calc(240px * -1));transform:translateX(calc(var(--width) * -1))}@media(min-width: 1367px){:host .sidebar .sidebar-content{overflow:initial}}:host .sidebar .sidebar-toggle{position:absolute;right:calc(38px * -1 - 10px);right:calc(var(--toggle-size) * -1 - 10px);padding-top:8px;visibility:visible}:host .sidebar .sidebar-toggle :checked{right:0}:host .sidebar-checkbox{display:none}:host .sidebar-checkbox:checked+.sidebar{width:240px;width:var(--width);visibility:visible}:host .sidebar-checkbox:checked+.sidebar .sidebar-content{transform:translateX(0)}"},7135:e=>{e.exports='/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--font-family: Inter, sans-serif;--ipad-min-width: 1366}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:2rem;font-weight:300}h1{font-size:4rem;line-height:1.2;letter-spacing:-0.1rem}h2{font-size:3.6rem;line-height:1.25;letter-spacing:-0.1rem}h3{font-size:3rem;line-height:1.3;letter-spacing:-0.1rem}h4{font-size:2.4rem;line-height:1.35;letter-spacing:-0.08rem}h5{font-size:1.8rem;line-height:1.5;letter-spacing:-0.05rem}h6{font-size:1.5rem;line-height:1.6;letter-spacing:0}@media(min-width: 550px){h1{font-size:5rem}h2{font-size:4.2rem}h3{font-size:3.6rem}h4{font-size:3rem}h5{font-size:2.4rem}h6{font-size:1.5rem}}p{margin-top:0}.toc-panel{--toc-border-width: 1px;--text-unit: 1em;--text-scale-ratio: 1.2;--text-xs: calc((1em / 1.2) / 1.2);--text-xs: calc((var(--text-unit) / var(--text-scale-ratio)) / var(--text-scale-ratio));--text-sm: calc(calc((1em / 1.2) / 1.2) * 1.2);--text-sm: calc(var(--text-xs) * var(--text-scale-ratio));box-shadow:inset 1px 0 0 hsl(240, 1%, 83%);box-shadow:inset var(--toc-border-width) 0 0 var(--color-contrast-low);font-family:"Inter",sans-serif;top:1.25rem;max-height:calc(100vh - 1.25rem);overflow:visible}.toc-panel ol,.toc-panel ul{list-style:none;margin:0;padding:0;border:0}.toc-panel .toc-panel__list{position:relative}.toc-panel .toc-panel__list .toc-panel__list .toc-panel__header{padding-left:calc(1.25rem * 2)}.toc-panel .toc-panel__title{padding:.25rem 1.25rem;text-transform:uppercase;letter-spacing:.1em;font-size:calc(calc((1em / 1.2) / 1.2) * 1.2);font-size:var(--text-sm)}.toc-panel .toc-panel__header{padding:.25rem 1.25rem;position:relative;display:inline-flex;color:hsl(240, 1%, 48%);color:var(--color-contrast-medium);text-decoration:none;overflow:hidden;text-overflow:ellipsis}.toc-panel .toc-panel__header::before{content:"";width:1px;width:var(--toc-border-width);height:100%;position:absolute;left:0;top:0}.toc-panel .toc-panel__header:hover{color:hsl(240, 4%, 20%);color:var(--color-contrast-high)}.toc-panel .toc-panel__header_selected{color:#2a6df4}.toc-panel .toc-panel__header_selected::before{background-color:#2a6df4}.toc-panel .toc-panel__page-numb{width:2rem;text-align:right;padding-top:.25rem;padding-right:.5rem;flex-shrink:0;white-space:nowrap}.toc-panel .toc-panel__item{display:flex;margin-left:-2.5rem;color:hsl(240, 1%, 48%);color:var(--color-contrast-medium)}.toc-panel .toc-panel__item:hover{color:hsl(240, 4%, 20%);color:var(--color-contrast-high)}'}}]);