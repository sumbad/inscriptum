(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{564:function(e,t,r){"use strict";r.r(t),r.d(t,"T",function(){return a}),r.d(t,"draftSave",function(){return l}),r.d(t,"getPageContent",function(){return i}),r.d(t,"isEdit",function(){return u}),r.d(t,"updateEditableText",function(){return c}),r.d(t,"sanitize",function(){return s}),r.d(t,"uploadDataToBlob",function(){return f}),r.d(t,"showError",function(){return p}),r.d(t,"updateEditable",function(){return h}),r.d(t,"transliterate",function(){return v}),r.d(t,"storageDelete",function(){return y}),r.d(t,"draftClear",function(){return m});r(608);var n=r(651),o=r.n(n),a={apiUrl:"https://inscriptum.js.org",datetime:0,pageId:0};function l(e,t){if(!e)return!1;if(!a.pageId){var r=i(!0,t);if(e!=r)return e=r,function(e,t){try{return localStorage.setItem(e,t),!!localStorage.getItem(e)}catch(e){return!1}}("draft",r)}return!1}function i(e,t){var r=t.scroll.domNode;r.querySelectorAll("textarea,input").forEach(e=>{e.setAttribute("data-value",e.value)});var n=r.cloneNode(!0);if(r.querySelectorAll("textarea,input").forEach(e=>{e.removeAttribute("data-value")}),n.querySelectorAll("textarea,input").forEach(e=>{e.value=e.getAttribute("data-value")||"",e.removeAttribute("data-value")}),c(n,!1),n.querySelectorAll("[contenteditable]").forEach(e=>e.removeAttribute("contenteditable")),n.querySelectorAll("[data-placeholder]").forEach(e=>e.removeAttribute("data-placeholder")),n.querySelectorAll("[data-label]").forEach(e=>e.removeAttribute("data-label")),n.querySelectorAll("[data-title]").forEach(e=>e.removeAttribute("data-title")),n.querySelectorAll(".editable_text").forEach(e=>e.classList.remove("editable_text")),n.querySelectorAll(".focus").forEach(e=>e.classList.remove("focus")),n.querySelectorAll(".empty").forEach(e=>e.classList.remove("empty")),n.querySelectorAll('[class=""]').forEach(e=>e.removeAttribute("class")),n.querySelectorAll(".file_progress").forEach(e=>e.remove()),n.querySelectorAll(".cursor_wrapper").forEach(e=>e.remove()),!e){var o=n.querySelector("h1,address");o&&o.remove();var a=n.querySelector("br.inline");return a&&a.replaceWith("\n"),{data:JSON.stringify(d(n).children),length:n.innerHTML.length}}return n.querySelectorAll("h1").forEach(e=>{e.querySelector("br")||e.append(document.createElement("br"))}),n.querySelectorAll("address").forEach(e=>{e.querySelector("br")||e.append(document.createElement("br"))}),n.innerHTML}function u(){return document.getElementsByClassName("tl_article_edit").length>0}function c(e,t){void 0===t&&(t=u()),t?e.querySelectorAll(".editable_text").forEach(e=>{var t=!1;if(e.childNodes.forEach(e=>{!t&&e&&e.classList&&(t=e.classList.contains("editable_input"))}),!t){var r=e.textContent||"",n=document.createElement("textarea");n.classList.add("editable_input"),n.setAttribute("tabindex","-1"),n.setAttribute("rows","1"),n.value=r,r||e.classList.add("empty"),e.innerHTML="",e.append(n),o()(n)}}):e.querySelectorAll(".editable_text > .editable_input").forEach(e=>{var t=e.value,r=e.parentNode;r.innerHTML="",r.textContent=t})}function d(e){if(!e.tagName)return e.data;var t={tag:e.tagName.toLowerCase()};if(e.attributes.length){t.attrs={};for(var r=0;r<e.attributes.length;r++){var n=e.attributes[r];t.attrs[n.name]=n.value}}if(e.childNodes.length){t.children=[];for(r=0;r<e.childNodes.length;r++)t.children.push(d(e.childNodes[r]))}return t}function s(e,t){var r=document.createElement("a");r.href=e;var n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}function f(e){for(var t=atob(e.base64_data),r=[],n=0;n<t.length;n++)r.push(t.charCodeAt(n));return new Blob([new Uint8Array(r)],{type:e.type})}function p(e){var t=document.querySelector("#_error_msg");t.textContent=e,clearTimeout(t.to),t.classList.add("shown"),t.to=setTimeout(()=>{t.classList.remove("shown")},3e3)}function h(e,t,r,n,o,a){if(n&&n.classList.toggle("tl_article_edit",e),c(document.body),t&&(t.enable(e),e&&t.focus()),!e&&o&&a){var l=o.querySelector("h1"),i=l?l.textContent:"",u=o.querySelector("address"),d=u?u.textContent:"",s=o.querySelector("address a"),f=s&&s.getAttribute("href");a.querySelector("h1").textContent=i,a.querySelector("address a").textContent=d,f?a.querySelector("address a").setAttribute("href",f):a.querySelector("address a").removeAttribute("href"),r.hideFormatTooltip(t),r.hideBlocksTooltip()}}function v(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="щ   ш  ч  ц  ю  я  ё  ж  ъ  ы  э  а б в г д е з и й к л м н о п р с т у ф х ь".split(/ +/g),n="shh sh ch cz yu ya yo zh `` y' e` a b v g d e z i j k l m n o p r s t u f x `".split(/ +/g),o=0;o<r.length;o++)e=(e=e.split(t?n[o]:r[o]).join(t?r[o]:n[o])).split(t?n[o].toUpperCase():r[o].toUpperCase()).join(t?r[o].toUpperCase():n[o].toUpperCase());return e}function y(e){try{return localStorage.removeItem(e),!0}catch(e){return!1}}function m(){y("draft")}!function(){var e=document.querySelector("time");if(e&&a.datetime){var t=new Date(1e3*a.datetime),r="January February March April May June July August September October November December".split(" ")[t.getMonth()],n=t.getDate();e.textContent=r+" "+(10>n?"0":"")+n+", "+t.getFullYear()}}()},651:function(e,t,r){var n,o,a;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/o=[e,t],void 0===(a="function"==typeof(n=function(e,t){"use strict";var r,n,o="function"==typeof Map?new Map:(r=[],n=[],{has:function(e){return r.indexOf(e)>-1},get:function(e){return n[r.indexOf(e)]},set:function(e,t){-1===r.indexOf(e)&&(r.push(e),n.push(t))},delete:function(e){var t=r.indexOf(e);t>-1&&(r.splice(t,1),n.splice(t,1))}}),a=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function l(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!o.has(e)){var t,r=null,n=null,l=null,i=function(){e.clientWidth!==n&&s()},u=function(t){window.removeEventListener("resize",i,!1),e.removeEventListener("input",s,!1),e.removeEventListener("keyup",s,!1),e.removeEventListener("autosize:destroy",u,!1),e.removeEventListener("autosize:update",s,!1),Object.keys(t).forEach(function(r){e.style[r]=t[r]}),o.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",u,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",s,!1),window.addEventListener("resize",i,!1),e.addEventListener("input",s,!1),e.addEventListener("autosize:update",s,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",o.set(e,{destroy:u,update:s}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),r="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(r)&&(r=0),s()}function c(t){var r=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=r,e.style.overflowY=t}function d(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+r+"px",n=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),o&&(document.documentElement.scrollTop=o)}}function s(){d();var t=Math.round(parseFloat(e.style.height)),r=window.getComputedStyle(e,null),n="content-box"===r.boxSizing?Math.round(parseFloat(r.height)):e.offsetHeight;if(n<t?"hidden"===r.overflowY&&(c("scroll"),d(),n="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==r.overflowY&&(c("hidden"),d(),n="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),l!==n){l=n;var o=a("autosize:resized");try{e.dispatchEvent(o)}catch(e){}}}}function i(e){var t=o.get(e);t&&t.destroy()}function u(e){var t=o.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return l(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],u),e}),t.default=c,e.exports=t.default})?n.apply(t,o):n)||(e.exports=a)}}]);