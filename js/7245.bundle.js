"use strict";(self.webpackChunkinscriptum=self.webpackChunkinscriptum||[]).push([[7245],{7245:(e,t,o)=>{o.r(t),o.d(t,{draftElement:()=>yo});var n=o(3445),i=o(78),r=o(9048);const a={PAGE_SAVE:Symbol("[HUB_ACTION] PAGE_SAVE"),PAGE_SAVING:Symbol("[HUB_ACTION] PAGE_SAVING"),PAGE_SAVE_DONE:Symbol("[HUB_ACTION] PAGE_SAVE_DONE"),PAGE_SAVE_FAIL:Symbol("[HUB_ACTION] PAGE_SAVE_FAIL"),DRAFT_ADD_PAGE_DONE:Symbol("[HUB_ACTION] DRAFT_ADD_PAGE_DONE"),DRAFT_DELETE_PAGE_DONE:Symbol("[HUB_ACTION] DRAFT_DELETE_PAGE_DONE"),DRAFT_PUBLISH:Symbol("[HUB_ACTION] DRAFT_PUBLISH")};var l=o(7157),s=o(7012),c=o(1640),d=o(3584),u=o(4938),p=o(669);const h=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-download" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path>
          <polyline points="7 11 12 16 17 11"></polyline>
          <line x1="12" y1="4" x2="12" y2="16"></line>
        </svg>
    `,this)}))(),f=(0,d.EG)({props:{draftId:d.p.req("draft-id")}})((function*(e){function t(){r.Z.dispatch({type:a.DRAFT_PUBLISH,payload:{draftId:e.draftId}})}for(;;)yield(0,c.sY)(c.dy`<div style=${u.iv`
          margin: 1rem 0;
          display: flex;
          flex-direction: row;
        `}>
        <button class="btn btn_icon" @click=${t}>
          ${h({})}
        </button>
      </div>`,this)}));var g=o(8760),b=o(6008),m=o(3724);const y="DRAFT_ACTION",v={LOAD:Symbol(`[${y}] LOAD`),LOADING:Symbol(`[${y}] LOADING`),LOAD_DONE:Symbol(`[${y}] LOAD_DONE`),UPDATE_TOC_DONE:Symbol(`[${y}] UPDATE_TOC_DONE`),UPDATE_TOC_ERROR:Symbol(`[${y}] UPDATE_TOC_ERROR`)};var _=o(6798),x=o(8481),w=o(6856),k=o(128),A=o(7082),E=o(54),S=o(9302),$=o(4334),P=o(7191),T=o(1769),M=o(732),L=o(6829),I=o(9802),N=o(3427),O=o(5961),C=o(9457),B=o(3418),z=o(9068),D=o(4746),Z=o(6667),j=o(4524),R=o(6106),H=o(6922),F=o(8780);const G=_.NB.create({name:"topicDoc",topNode:!0,content:"topicTitle topicSummary topicFirstLine block*",addProseMirrorPlugins:()=>[new H.Sy({key:new H.H$("TopicDoc Decorations"),props:{decorations:({doc:e,selection:t})=>{const o=[],n=e.content.child(0),i=e.content.child(1),r=e.content.child(2);return 0===n.content.size?o.push(F.p.node(0,n.nodeSize,{class:"empty"})):t.to<=n.nodeSize+i.nodeSize&&o.push(F.p.node(0,n.nodeSize,{class:"focused"})),0===i.content.size?o.push(F.p.node(n.nodeSize,n.nodeSize+i.nodeSize,{class:"empty"})):t.to<=n.nodeSize+i.nodeSize&&o.push(F.p.node(n.nodeSize,n.nodeSize+i.nodeSize,{class:"focused"})),e.content.lastChild===r&&0===r.content.size&&o.push(F.p.node(n.nodeSize+i.nodeSize,n.nodeSize+i.nodeSize+r.nodeSize,{class:"empty"})),F.EH.create(e,o)}}})]});var q=o(9059),U=o(9586);const V=_.NB.create({name:"topicFirstLine",group:"topicDoc",content:"inline*",addAttributes:()=>({"data-placeholder":{default:"Take a notes"}}),parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",(0,_.P1)(this.options.HTMLAttributes,e),0]}});const Y=o(8802).rU.extend({renderHTML(e){return"function"==typeof this.options.onRenderHTML&&this.options.onRenderHTML(e),["a",(0,_.P1)(this.options.HTMLAttributes,e.HTMLAttributes),0]}});var J=o(3861);const W=_.NB.create({name:"aside",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML:()=>[{tag:"aside"}],renderHTML({HTMLAttributes:e}){return["aside",(0,_.P1)(this.options.HTMLAttributes,e),0]},addCommands:()=>({setAside:()=>({commands:e})=>e.wrapIn("aside"),toggleAside:()=>({commands:e})=>e.toggleWrap("aside"),unsetAside:()=>({commands:e})=>e.lift("aside")})});var K=o(8638);const Q=o(9889).dn.extend({name:"hljsCodeBlock",content:"hljsCodeBlockRow+",topNode:!0,parseHTML:()=>[{preserveWhitespace:"full",tag:"pre"}],renderHTML({HTMLAttributes:e}){return["pre",this.options.HTMLAttributes,["code",e,0]]}}),X=_.vc.create({name:"hljsMark",spanning:!1,group:"hljsCodeBlock hljsCodeBlockRow",defaultOptions:{HTMLAttributes:{}},addAttributes:()=>({class:{default:void 0}}),parseHTML:()=>[{tag:"span",preserveWhitespace:!0}],renderHTML({HTMLAttributes:e}){return["span",(0,_.P1)(this.options.HTMLAttributes,e),0]}}),ee=_.NB.create({name:"hljsCodeBlockRow",defaultOptions:{HTMLAttributes:{}},group:"hljsCodeBlock",content:"inline*",marks:"hljsMark",addAttributes:()=>({class:{default:"l"}}),parseHTML:()=>[{tag:"div.l",preserveWhitespace:"full",attrs:{class:"l"}}],renderHTML({HTMLAttributes:e,node:t}){return["div",(0,_.P1)(this.options.HTMLAttributes,e),0]}});var te=o(896),oe=o(837),ne=o(9622),ie=o(2247),re=o(4085),ae=o(1042),le=o(836),se=o(6167),ce=o(5688);oe.Z.registerLanguage("javascript",ne.Z),oe.Z.registerLanguage("typescript",ie.Z),oe.Z.registerLanguage("sql",re.Z),oe.Z.registerLanguage("xml",ae.Z),oe.Z.registerLanguage("css",le.Z),oe.Z.registerLanguage("bash",se.Z),oe.Z.registerLanguage("yaml",ce.Z);const de=["javascript","typescript","sql","xml","css","bash","yaml"];function ue(e){const t=oe.Z.highlightAuto(e,de).value.split("\n");let o="";const n=[Q,z.Z,ee,X],i=document.createElement("pre");for(const e of t)o+=`<div class="l">${e||""}</div>`;i.innerHTML=o;const r=function(e,t){const o=(0,_.J1)(t);return K.aw.fromSchema(o).parse(e,{preserveWhitespace:"full"})}(i,n);return i.remove(),n.length=0,r.toJSON()}function pe(e,t,o){return new te.VK(e,((e,n,i,r)=>{const a=o instanceof Function?o(n):o,{tr:l}=e;return n[0]&&(l.replaceWith(i-1,r,t.create(a,e.schema.node("hljsCodeBlockRow"))),l.setSelection(H.Bs.create(l.doc,r-1))),l}))}function he(e){let t="";return e.content.forEach(((o,n)=>{t+=o.textContent,n+o.nodeSize<e.nodeSize-2&&(t+="\n")})),t}const fe=/^```(?<language>[a-z]*)? $/,ge=/^~~~(?<language>[a-z]*)? $/,be=_.NB.create({name:"hljsCodeBlock",content:"(hljsCodeBlockRow|paragraph?)+",isolating:!0,defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{},printContentAsHTML:!1},marks:"",group:"block",defining:!0,addAttributes(){return{autocomplete:{default:"off"},autocorrect:{default:"off"},autocapitalize:{default:"off"},spellcheck:{default:"false"},language:{default:null,parseHTML:e=>{var t;const o=null===(t=e.firstElementChild)||void 0===t?void 0:t.getAttribute("class");if(!o)return null;const n=new RegExp(`^(${this.options.languageClassPrefix})`);return{language:o.replace(n,"")}},renderHTML:e=>e.language?{class:this.options.languageClassPrefix+e.language}:null}}},parseHTML:()=>[{preserveWhitespace:"full",tag:"pre",getContent(e,t){let o="";e.childNodes.forEach((e=>{o+=e.textContent,"BR"===e.nodeName&&(o+="\n")}));const n=ue(o);return t.nodeFromJSON(n).content}},{tag:"div",preserveWhitespace:"full",getAttrs:e=>"pre"===e.style.whiteSpace&&null,getContent(e,t){let o="";e.childNodes.forEach((e=>{o+=e.textContent+"\n"}));const n=ue(o);return t.nodeFromJSON(n).content}}],renderHTML({HTMLAttributes:e,node:t}){const o=this.options.printContentAsHTML?0:he(t);return["pre",this.options.HTMLAttributes,["code",e,o]]},addCommands(){return{setHljsCodeBlock:e=>t=>{const o=t.state.selection.content();let n="";o.content.forEach(((e,t)=>{n+=e.textContent,t+e.nodeSize<o.content.size-2&&(n+="\n")}));const i=ue(n),r=t.editor.schema.nodeFromJSON(i).content.toJSON()||[];return t.chain().insertContent({type:this.name,attrs:e,content:r}).setTextSelection(t.state.selection.$to.end()-1).run()},toggleHljsCodeBlock:e=>t=>{const o=t.state.selection.content().content;if(null!=o.firstChild&&o.firstChild.type===this.type){let e="";return o.forEach(((t,n)=>{t.type===this.type?e+=he(t):e+=t.textContent,n+t.nodeSize<o.size-2&&(e+="\n")})),t.chain().deleteRange({from:t.state.selection.from-2,to:t.state.selection.to}).insertContent({type:"paragraph",content:[{type:"text",text:e}]}).setTextSelection(t.state.selection.$to.end()).run()}return t.commands.setHljsCodeBlock(e)}}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleHljsCodeBlock(),"Mod-Enter":()=>{const{$anchor:e}=this.editor.state.selection;if("hljsCodeBlockRow"!==e.parent.type.name)return!1;const{tr:t}=this.editor.state;return this.editor.view.dispatch(t.insert(e.pos,this.editor.schema.node("paragraph",{})).split(e.pos+1,1).replaceWith(e.pos+2,e.pos+4,this.editor.schema.node("paragraph",{})).setSelection(H.Bs.create(t.doc,e.pos+2))),!0},Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,o=this.editor.state.doc.nodeAt(t.pos-2);return!((null==o?void 0:o.type)!==this.type||1!==o.content.childCount||!e)&&this.editor.commands.insertContentAt({from:t.pos-2,to:t.pos-2+o.nodeSize},{type:"paragraph"})}}},addInputRules(){return[pe(fe,this.type,(({groups:e})=>e)),pe(ge,this.type,(({groups:e})=>e))]},addNodeView(){return({editor:e,node:t,getPos:o})=>{const n=document.createElement("pre"),i=document.createElement("code");for(const e in t.attrs)i.setAttribute(e,t.attrs[e]);return 0===t.content.size&&"function"==typeof o&&requestAnimationFrame((()=>{e.view.dispatch(e.view.state.tr.insert(o()+1,e.schema.node("hljsCodeBlockRow")))})),n.appendChild(i),{dom:n,contentDOM:i,update:t=>{if(t.type!==this.type)return!1;const o=ue(he(t)),n=e.schema.nodeFromJSON(o);t.content=n.content}}}}}),me=_.NB.create({name:"codeBlock",defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{}},content:"text*",marks:"",group:"block",code:!0,defining:!0,parseHTML:()=>[{preserveWhitespace:"full",tag:"pre"}],renderHTML({HTMLAttributes:e}){return["pre",this.options.HTMLAttributes,["code",e,0]]},addNodeView:()=>({editor:e,node:t,getPos:o})=>{const n=t.content.firstChild;if(1===t.content.childCount&&null!=n&&"function"==typeof o)return requestAnimationFrame((()=>{const i=ue(n.text||""),r=e.schema.nodeFromJSON(i);e.view.dispatch(e.view.state.tr.deleteRange(o(),o()+t.nodeSize-1).insert(o(),r))})),{ignoreMutation:!0,update:!1};{const e=document.createElement("pre"),t=document.createElement("code");return e.appendChild(t),{dom:e,contentDOM:t}}}});function ye(e,t=!1){return(0,_.ar)(e,ve(t,!0))}function ve(e=!1,t=!1){return[...e?[G,q.l,U.V,V]:[x.Z],C.Z,z.Z,k.ZP,I.ZP,E.ZP,B.ZP,P.Z,T.Z,w.ZP,A.ZP,O.ZP,N.Z,L.Z,M.Z,S.Z,$.Z,D.Z,Z.ZP,j.ZP,be.configure({printContentAsHTML:t}),X,ee,me,R.Bc,W,Y.configure({onRenderHTML:()=>{setTimeout((()=>{document.querySelectorAll("a[href]").forEach((e=>{null==e._tippy&&(0,J.ZP)(e,{delay:[300,200],placement:"bottom",content:e=>e.href})}))}),1)}})]}var _e=o(3135),xe=o(7848),we=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};function ke(e,t){return we(this,void 0,void 0,(function*(){return(0,xe.G)((()=>we(this,void 0,void 0,(function*(){try{const{update_draft_by_pk:o}=yield(0,m.S)().updateDraftTOC({id:t,table_of_contents:e,updated_at:(new Date).toISOString()});null!=o&&r.Z.dispatch({type:v.UPDATE_TOC_DONE,payload:{id:t,toc:o.table_of_contents}})}catch(e){r.Z.dispatch({type:v.UPDATE_TOC_ERROR,payload:{id:t,error:e}})}}))))}))}function Ae(e){return we(this,void 0,void 0,(function*(){(0,xe.G)((t=>we(this,void 0,void 0,(function*(){var o,n;const i="Title is too small",r="Content cannot be empty",a="Title was not found",l="Author was not found";let s,c="",d="",p="";for(const t of e.pages||[]){const e=0===t.order,o=t.content;if(null==o.content)throw alert(r),new Error(r);p+=`<section>${ye(o,e)}</section>`,e&&(s=(0,u.WV)(o),c=s.title.trim(),d=(0,u.u)(c).replace(/[^a-zA-Z0-9-_]/g,"-"))}if(null==s)throw alert(a),new Error(a);if(c.length<2)throw alert(i),new Error(i);const h=(yield(0,m.S)().findAuthorByAuth0({auth0_id:t.userInfo.auth0Id})).author[0];if(null==h)throw alert(l),new Error(l);const f={created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};if(null!=e.notes&&e.notes.length>0){const t=e.notes[0],o=(yield(0,m.S)().updateNode({id:t.id,name:d,preview:s,static_link:`note/${d}`,updated_at:f.updated_at})).update_note_by_pk;f.created_at=null==o?void 0:o.created_at,f.created_at=null==o?void 0:o.created_at}else{const t=(yield(0,m.S)().createNode({draft_id:e.id,author_id:h.id,name:d,preview:s,static_link:`note/${d}`,created_at:(new Date).toISOString()})).insert_note_one;f.created_at=null==t?void 0:t.created_at,f.created_at=null==t?void 0:t.created_at}const g=(yield(0,m.S)().getAllNotes()).notes;!function(e){const t=document.createElement("a");e.forEach((e=>{const o=new Blob([e.content],{type:e.type||"application/octet-stream"});t.href=window.URL.createObjectURL(o),t.download=e.name,t.click()})),t.remove()}([{content:`  \n    <html>\n      <head>\n        <meta charset="utf-8">\n        <title>${c}</title>\n        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">\n        <meta name="format-detection" content="telephone=no">\n        <meta http-equiv="X-UA-Compatible" content="IE=edge">\n        <meta name="MobileOptimized" content="176">\n        <meta name="HandheldFriendly" content="True">\n        <meta name="robots" content="index, follow">\n        <meta name="description" content="${s.description}">\n        <meta property="og:site_name" content="inscriptum">\n        <meta property="og:type" content="article">\n        <meta property="og:title" content="${c}">\n        <meta property="og:description" content="${s.description}">\n        <meta property="og:image" content="${s.image}">\n        <meta property="article:published_time" content="${f.created_at}">\n        <meta property="article:modified_time" content="${f.updated_at}">\n        <meta property="article:author" content="${h.name||h.email}">\n        <meta name="twitter:card" content="summary">\n        <meta name="twitter:title" content="${c}">\n        <meta name="twitter:description" content="${s.description}">\n        <meta name="twitter:image" content="${s.image}">\n        ${(null===(n=null===(o=document.styleSheets.item(0))||void 0===o?void 0:o.ownerNode)||void 0===n?void 0:n.outerHTML)||""}\n        <link rel="shortcut icon" type="image/png" href="favicon.png">\n        <link href="/css/note.css" rel="stylesheet">\n        <link href="/css/custom_editor_fonts.css" rel="stylesheet">\n      </head>\n      <body>\n        <article>\n          ${p}\n        </article>\n      </body>\n      <script type="text/javascript" src="/js/note.js"><\/script>\n    </html>`,name:`${d}.html`},{content:JSON.stringify(g,null,2),name:_e.v.nodeListFileName}])}))))}))}const Ee={LOAD_DONE:Symbol("[MARGIN_ACTION] LOAD_DONE"),LOAD_FAIL:Symbol("[MARGIN_ACTION] LOAD_FAIL"),SAVE_DONE:Symbol("[MARGIN_ACTION] SAVE_DONE"),SAVE_FAIL:Symbol("[MARGIN_ACTION] SAVE_FAIL")};var Se=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};function $e(e){return Se(this,void 0,void 0,(function*(){return yield(0,xe.G)((()=>Se(this,void 0,void 0,(function*(){const{margin:t}=yield(0,m.S)().getMarginById({id:e});if(null!=t)return r.Z.dispatch({type:Ee.LOAD_DONE,payload:t}),t;throw r.Z.dispatch({type:Ee.LOAD_FAIL,payload:{id:e,error:{message:`The Margin ${e} not found!`}}}),new Error(`The Margin ${e} not found!`)}))))}))}var Pe=o(6925);const Te={data:void 0,isLoading:!1};var Me=o(9491),Le=o(7672);const Ie=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-download" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
        <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
        <line x1="12" y1="11" x2="12" y2="17"></line>
        <polyline points="9 14 12 17 15 14"></polyline>
      </svg>
    `,this)})),Ne=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-eraser" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M19 19h-11l-4 -4a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9 9"></path>
        <line x1="18" y1="12.3" x2="11.7" y2="6"></line>
      </svg>
    `,this)})),Oe=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-device-floppy" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"></path>
        <circle cx="12" cy="14" r="2"></circle>
        <polyline points="14 4 14 8 8 8 8 4"></polyline>
      </svg>
    `,this)})),Ce=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
        <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
      </svg>
    `,this)})),Be=(0,d.NG)((function*(e={strokeWidth:"1"}){for(;;)e=yield(0,p.$)(c.YP`
      <svg 
        xmlns="http://www.w3.org/2000/svg" 
        class="icon icon-tabler icon-tabler-ripple" 
        width="24" 
        height="24" 
        viewBox="0 0 24 24" 
        stroke-width=${e.strokeWidth} 
        stroke="currentColor" 
        fill="none" 
        stroke-linecap="round" 
        stroke-linejoin="round"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12c3 -2 6 -2 9 0s6 2 9 0"></path>
      </svg>
    `,this)})),ze=Ie(),De=Oe(),Ze=Ne(),je=Ce(),Re=Be(),He=(0,d.EG)({props:{data:d.p.req(),isExpanded:d.p.opt()}})((function*(e){var t,o,n,i;const a=(0,Me.V)(),l=(0,Me.V)();let s,d,p=e.data,h=e.isExpanded,f=Math.max(window.devicePixelRatio||1,1),g=null!==(o=null===(t=p.options)||void 0===t?void 0:t.height)&&void 0!==o?o:0,b=null!==(i=null===(n=p.options)||void 0===n?void 0:n.width)&&void 0!==i?i:0,y=1,v="#000000";const _=()=>{const e=a.value,t=l.value;if(null==e||null==t)throw new Error("Can not find a canvas element!");s=t.getContext("2d");const o=b,n=g;let i=null;null==d?d=new Le.Z(t,{penColor:v,minDistance:1,onBegin:()=>{null!=s&&(s.globalAlpha=1)}}):(i=d.toDataURL(),d.clear()),g=Math.max(e.getBoundingClientRect().height,window.innerHeight,n),b=Math.max(e.getBoundingClientRect().width,o),t.height=g,t.width=b,t.style.height=`${g}px`,t.style.width=`${b}px`,e.style.height=`${g}px`,this.style.height=`${g}px`,null!=t&&null!=s&&(f=Math.max(window.devicePixelRatio||1,1),t.width=t.offsetWidth*f,t.height=t.offsetHeight*f,s.scale(f,f)),null!=d&&null!=i&&d.fromDataURL(i,{height:n,width:o,ratio:f})},x=()=>{null!=s&&(s.globalCompositeOperation="source-over")},w=()=>{if(null==d||d.isEmpty())return alert("Please provide a signature first.");null!=(null==p?void 0:p.id)&&function(e,t,o){Se(this,void 0,void 0,(function*(){const[n,i]=t.split(",");return yield(0,xe.G)((()=>Se(this,void 0,void 0,(function*(){const{update_margin_by_pk:t}=yield(0,m.S)().saveMargin({id:e,options:Object.assign(Object.assign({},o),{type:n}),img:i,updated_at:(new Date).toISOString()});if(null!=t)return r.Z.dispatch({type:Ee.SAVE_DONE,payload:t}),t;r.Z.dispatch({type:Ee.SAVE_FAIL,payload:{id:e,error:{message:`The Margin ${e} has not been saved!`}}})}))))}))}(p.id,d.toDataURL(),{height:g,width:b,ratio:f})},k=()=>{if(null!=s&&null!=d&&null!=(null==p?void 0:p.imgBase64)&&null!=(null==p?void 0:p.options)){console.log(s.globalCompositeOperation),s.globalAlpha=y,s.globalCompositeOperation="source-over";const e=d.toData();d.clear();const t=p.options,o=`${t.type},${p.imgBase64}`;d.fromDataURL(o,{height:t.height,width:t.width,ratio:f}),d.fromData(e)}},A=()=>{null!=p.id&&$e(p.id),null!=d&&d.clear(),null!=s&&(s.font="26px sans-serif",s.fillStyle="#CCCCCC",s.fillText("loading...",50,100))};function E(){null!=s&&(s.globalCompositeOperation="destination-out")}function S(){null!=d&&d.clear()}function $(e,t){return()=>{null!=d&&(d.minWidth=e,d.maxWidth=t,console.log(e,t))}}const P=e=>{if(null!=(null==e?void 0:e.currentTarget)&&null!=d){const t=e.currentTarget;v=t.value,d.penColor=v,this.next()}},T=e=>{if(null!=(null==e?void 0:e.currentTarget)){const t=e.currentTarget;y=Number(t.value)}};for(window.onresize=_,requestAnimationFrame((()=>{_(),k()}));;)p!==e.data&&(p=e.data,k()),h!==e.isExpanded&&(_(),h=e.isExpanded),e=yield(0,c.sY)(c.dy`
        <div .ref=${(0,Me.i)(a)} class="sketch-pad_frame">
          <canvas .ref=${(0,Me.i)(l)} id="signature-pad" class="signature-pad"></canvas>
        </div>
        <div class="fab-container fab-container_main">
          <div class="fab-container">
            <button class="fab-button">
              <input type="color" id=${`${p.id}_colorPicker`} name="colorPicker" style=${u.iv`
                  cursor: pointer;
                `} .value=${v} @input=${P}>
            </button>
          </div>
          <div class="fab-container fab-container_vertical">
            <button class="fab-button" @click=${$(6,8)}>
              ${Re({strokeWidth:"6"})}
            </button>
            <button class="fab-button" @click=${$(2.5,4)}>
              ${Re({strokeWidth:"4"})}
            </button>
            <button class="fab-button" @click=${$(.3,1)}>
              ${Re({strokeWidth:"1"})}
            </button>
            <button class="fab-button fab-button_lg" @click=${$(.5,2.5)}>
              ${Re({strokeWidth:"2"})}
            </button>
          </div>
          <div class="fab-container fab-container_vertical">
            <button class="fab-button" @click=${S}>
              ${je({})}
            </button>
            <button class="fab-button fab-button_lg" @click=${E}>
              ${Ze({})}
            </button>
          </div>
          <div class="fab-container fab-container_vertical">
            <button class="fab-button" @click=${k}>
              <div class="alpha-setter">
                <input type="range" .value=${y} min="0" max="1" step="0.01" @input=${T}>
                <div class="alpha-setter__back">
                  <div style=${u.iv`
                      width: 100%;
                      height: 20px;
                      background: linear-gradient(to right, rgba(255, 128, 0, 0), ${v});
                    `}></div>
                </div>
              </div>
            </button>
            <button class="fab-button" @click=${A}>
              ${ze({})}
            </button>
            <button class="fab-button fab-button_lg" @click=${w}>
              ${De({})}
            </button>
          </div>
          <button class="fab-button fab-button_lg" @click=${x}>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-pencil" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"></path>
              <line x1="13.5" y1="6.5" x2="17.5" y2="10.5"></line>
            </svg>
          </button>
        </div>
      `,this)})),Fe=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" 
          class="icon icon-tabler icon-tabler-arrow-bar-left" 
          width="24" 
          height="24" 
          viewBox="0 0 24 24" 
          stroke-width="1" 
          stroke="currentColor" 
          fill="none" 
          stroke-linecap="round" 
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <line x1="4" y1="12" x2="14" y2="12"></line>
          <line x1="4" y1="12" x2="8" y2="16"></line>
          <line x1="4" y1="12" x2="8" y2="8"></line>
          <line x1="20" y1="4" x2="20" y2="20"></line>
        </svg>
    `,this)})),Ge=(0,d.NG)((function*(){for(;;)yield(0,p.$)(c.YP`
        <svg xmlns="http://www.w3.org/2000/svg" 
          class="icon icon-tabler icon-tabler-arrow-bar-right" 
          width="24" 
          height="24" 
          viewBox="0 0 24 24" 
          stroke-width="1" 
          stroke="currentColor" 
          fill="none" 
          stroke-linecap="round" 
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <line x1="20" y1="12" x2="10" y2="12"></line>
          <line x1="20" y1="12" x2="16" y2="16"></line>
          <line x1="20" y1="12" x2="16" y2="8"></line>
          <line x1="4" y1="4" x2="4" y2="20"></line>
        </svg>
    `,this)})),qe=(0,d.NG)((function*(e){var t;const o=c.YP`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-bulb" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7"></path>
      <path d="M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3"></path>
      <line x1="9.7" y1="17" x2="14.3" y2="17"></line>
    </svg>
`,n=c.YP`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-bulb-off" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3"></path>
      <line x1="9.7" y1="17" x2="14.3" y2="17"></line>
    </svg>
`;for(;;){let i=null!==(t=e.isOn)&&void 0!==t&&t;e=yield(0,p.$)(i?o:n,this)}})),Ue=(He("sketch-pad"),Fe()),Ve=Ge(),Ye=qe(),Je=(0,d.EG)({props:{marginId:d.p.req()}})((function*(e){var t;const n=this.attachShadow({mode:"open"});let i=Te,a=!1,l=!1;const s=(d=e.marginId,r.Z.$.pipe((0,Pe.Z)(Ee),(0,b.h)((e=>e.payload.id===d)))).subscribe((e=>{i=function(e,t){switch(t.type){case Ee.LOAD_DONE:return{data:t.payload,isLoading:!1,error:null};case Ee.LOAD_FAIL:return Object.assign(Object.assign({},e),{isLoading:!1,error:t.payload.error});case Ee.SAVE_FAIL:return Object.assign(Object.assign({},e),{error:t.payload.error});default:return e}}(i,e),this.next()}));var d;const p=()=>{a=!a,n.host.style.position=a?"absolute":"relative",this.next()},h=()=>{l=!l,this.next()};try{for(;;)e.marginId!==(null===(t=i.data)||void 0===t?void 0:t.id)&&$e(e.marginId),e=yield(0,c.sY)(c.dy`
          <style>${o(8608)}</style>

          <button class="btn btn_icon btn__show" @click=${h} style=${u.iv`
              visibility: ${a?"hidden":"visible"};
            `}>
            ${Ye({isOn:l})}
          </button>

          <button class="btn btn_icon btn__expand" title=${""+(a?"expand":"collapse")} @click=${p} style=${u.iv`
              visibility: ${l?"visible":"hidden"};
            `}>
            ${a?c.dy`${Ve({})}`:c.dy`${Ue({})}`}
          </button>

          ${i.data?c.dy`<sketch-pad style=${u.iv`
                visibility: ${l?"visible":"hidden"};
              `} .data=${i.data} .isExpanded=${a}></sketch-pad>`:""}
        `,n)}finally{s.unsubscribe()}})),We=String.raw,Ke=(0,i.EG)({props:{label:String,value:String,isFolded:Boolean,change:{}},shadow:{mode:"open"},render:n.sY})((function(e){const[t,o]=(0,i.eJ)(e.isFolded);(0,i.d4)((()=>{o(e.isFolded)}),[e.isFolded]);const r=(0,i.I4)((()=>{o((e=>!e)),e.change(e.value,!t)}),[t,o,e]);return(0,i.d4)((()=>{const e=We`
      :host {
        display: inline-flex;
        align-items: center;
        flex-direction: row;
        position: absolute;
        right: 100%;
        font-family: var(--font-family);
      }
      button,
      label {
        cursor: pointer;
        border: none;
        background-color: transparent;
      }
      button:focus {
        outline: 0;
      }
      .icon-tabler,
      label {
        stroke: var(--border-color);
        color: var(--border-color);
        transition: 0.2s;
      }

      :host(:hover) .icon-tabler {
        stroke: var(--dark-grey);
      }
      :host(:hover) label {
        color: var(--dark-grey);
      }
    `,t=null==this?void 0:this.shadowRoot;if(null!=t&&null!=t.adoptedStyleSheets){const o=new CSSStyleSheet;o.replaceSync(e),t.adoptedStyleSheets=[o]}}),[]),n.dy`
      <label for=${e.value}>${e.label}</label>
      <button id=${e.value} @click=${r}>
        ${n.YP`
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="icon icon-tabler icon-tabler-chevron-left"
            width="44"
            height="44"
            viewBox="0 0 24 24"
            stroke-width="0.5"
            stroke="#9e9e9e"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <polyline points=${t?"9 6 15 12 9 18":"6 9 12 15 18 9"} />
          </svg>        
        `}
      </button>
    `})),Qe=(0,n.XM)(((e,t)=>(null!=t.current&&(t.current.setValue(e),t.current.commit()),o=>{t.current=o,t.current.setValue(e)}))),Xe=(0,i.NG)({render:Qe})((()=>n.YP`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
      <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
      <line x1="12" y1="11" x2="12" y2="17"></line>
      <line x1="9" y1="14" x2="15" y2="14"></line>
    </svg>
  `)),et=(0,i.NG)({render:Qe})((()=>n.YP`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
      <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
      <path d="M10 12l4 4m0 -4l-4 4"></path>
    </svg>
  `)),tt={CREATE_MARGIN:Symbol("[PAGE_ACTION] CREATE_MARGIN"),CREATE_MARGIN_DONE:Symbol("[PAGE_ACTION] CREATE_MARGIN_DONE"),CREATE_MARGIN_FAIL:Symbol("[PAGE_ACTION] CREATE_MARGIN_FAIL")};var ot=o(4072),nt=o(5631),it=o(1410),rt=o(3068),at=o(3507),lt=o(6381),st=o(486),ct=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};function dt(e){return e.pipe((0,rt.b)((e=>{r.Z.dispatch({type:a.PAGE_SAVE,payload:{pageId:e.pageId,draftId:e.draftId}})})),(0,at.b)(_e.v.isDevMode?3e3:1e4),(0,rt.b)((e=>{r.Z.dispatch({type:a.PAGE_SAVING,payload:{pageId:e.pageId,draftId:e.draftId}})})),(0,lt.w)((e=>(0,ot.D)(function(e,t,o){return ct(this,void 0,void 0,(function*(){return yield(0,xe.G)((()=>ct(this,void 0,void 0,(function*(){try{return yield(0,m.S)().updatePageById({id:e,content:o,updated_at:(new Date).toISOString()}),{pageId:e,draftId:t,content:o}}catch(t){throw{pageId:e,error:t}}}))))}))}(e.pageId,e.draftId,e.content)).pipe((0,rt.b)((e=>{r.Z.dispatch({type:a.PAGE_SAVE_DONE,payload:e})})),(0,st.K)((t=>(r.Z.dispatch({type:a.PAGE_SAVE_FAIL,payload:{draftId:e.draftId,pageId:e.pageId,error:t}}),nt.E)))))))}function ut(e){return e.pipe((0,lt.w)((e=>(0,it.P)((()=>ct(this,void 0,void 0,(function*(){return(0,xe.G)((()=>ct(this,void 0,void 0,(function*(){var t;const{insert_page_one:o,update_page:n}=yield(0,m.S)().addPageToDraft({draft_id:e.draftId,order:e.order,created_at:(new Date).toISOString()});if(null==o)throw new Error("newPage == null");const i=null!==(t=null==n?void 0:n.returning)&&void 0!==t?t:[];return{draftId:e.draftId,newPage:o,updatedPages:i}}))))})))))),(0,rt.b)((e=>{const{draftId:t,updatedPages:o,newPage:n}=e;r.Z.dispatch({type:a.DRAFT_ADD_PAGE_DONE,payload:{draftId:t,newPage:Object.assign(Object.assign({},n),{content:null==n?void 0:n.content,draftId:t}),updatedPages:o}})})))}function pt(e){return e.pipe((0,lt.w)((e=>(0,it.P)((()=>ct(this,void 0,void 0,(function*(){return(0,xe.G)((()=>ct(this,void 0,void 0,(function*(){var t;const{update_page_by_pk:o,update_page:n}=yield(0,m.S)().deletePage({id:e.pageId,ended_at:(new Date).toISOString(),draft_id:e.draftId,order:e.order}),i=null!==(t=null==n?void 0:n.returning)&&void 0!==t?t:[],r={id:null==o?void 0:o.id,order:e.order};return{draftId:e.draftId,deletedPage:r,updatedPages:i}}))))})))))),(0,rt.b)((e=>{r.Z.dispatch({type:a.DRAFT_DELETE_PAGE_DONE,payload:{draftId:e.draftId,deletedPage:e.deletedPage,updatedPages:e.updatedPages}})})))}var ht=o(211),ft=o(4370);function gt(e,t){switch(t.type){case tt.CREATE_MARGIN_DONE:return null!=e.data&&(e.data.margins=[{id:t.payload.marginId},...e.data.margins]),e;default:return e}}const bt=(0,i.NG)({render:Qe})((()=>n.YP`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-writing" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"></path>
      <path d="M16 7h4"></path>
      <path d="M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"></path>
    </svg>
  `));function mt(e){const[t,o]=(0,i.eJ)();return(0,i.d4)((()=>{const t=new ht.xQ;return o([e(t),e=>t.next(e)]),()=>t.unsubscribe()}),[]),t}function yt(){const[e]=(0,i.eJ)((()=>{let e;return{get current(){var t;return null===(t=null==e?void 0:e.committer)||void 0===t?void 0:t.element},ref:(0,n.XM)((()=>t=>{e=t}))}}));return e}var vt=o(7072);const _t=(0,i.EG)({props:{editor:{},className:String,tippyOptions:{},pluginKey:{type:String,default:vt.NM.options.pluginKey},shouldShow:{type:{},default:null}},render:n.sY})((function(e){const[t,o]=(0,i.eJ)(0),r=yt(),[a,l]=(0,i.eJ)(null);return(0,i.d4)((()=>{console.log("useEffect bubbleMenuElement"),cancelAnimationFrame(t);const{editor:n,tippyOptions:i}=e;o(requestAnimationFrame((()=>{null!=r.current&&n.registerPlugin((0,vt.q3)({editor:n,element:r.current,pluginKey:e.pluginKey,shouldShow:e.shouldShow}))})));const a=new ht.xQ,s=({transaction:e})=>{e.steps.length>0?l(kt(n)):e.selection.empty?l(null):a.next()};return n.on("transaction",s),a.pipe((0,at.b)(700)).subscribe((e=>{l(kt(n))})),()=>{console.log("DESTROY bubbleMenuElement"),a.unsubscribe(),n.off("transaction",s),cancelAnimationFrame(t),n.unregisterPlugin(vt.NM.options.pluginKey)}}),[r.current]),n.dy`<div .ref=${r.ref()} class=${e.className} style=${u.iv`
        visibility: 'hidden';
      `}>
      ${a}
    </div>`})),xt=["figure"],wt=["topicTitle"];function kt(e){const t=e.state.selection;return t instanceof H.qv&&xt.includes(t.node.type.name)||t instanceof H.Bs&&(wt.includes(t.$from.parent.type.name)||wt.includes(t.$to.parent.type.name))?null:n.dy`
      <button @click=${()=>e.chain().focus().toggleBold().run()} class=${e.isActive("bold")?"is-active":""}>
        bold
      </button>
      <button @click=${()=>e.chain().focus().toggleItalic().run()} class=${e.isActive("italic")?"is-active":""}>
        italic
      </button>
      <button @click=${()=>e.chain().focus().toggleStrike().run()} class=${e.isActive("strike")?"is-active":""}>
        strike
      </button>
      <button @click=${()=>e.chain().focus().toggleHighlight().run()} class=${e.isActive("highlight")?"is-active":""}>
        highlight
      </button>
      <button @click=${()=>{var t;const o=null!==(t=window.prompt("URL"))&&void 0!==t?t:"";e.chain().focus().toggleLink({href:o}).run()}} class=${e.isActive("link")?"is-active":""}>
        link
      </button>
      <button @click=${()=>e.chain().focus().toggleBlockquote().run()} class=${e.isActive("blockquote")?"is-active":""}>
        blockquote
      </button>
      <button @click=${()=>e.chain().focus().toggleAside().run()} class=${e.isActive("aside")?"is-active":""}>
        aside
      </button>

      <button @click=${()=>e.chain().focus().toggleHeading({level:2}).run()} class=${e.isActive("heading",{level:2})?"is-active":""}>
        h2
      </button>
      <button @click=${()=>e.chain().focus().toggleHeading({level:3}).run()} class=${e.isActive("heading",{level:3})?"is-active":""}>
        h3
      </button>
      <button @click=${()=>e.chain().focus().toggleHeading({level:4}).run()} class=${e.isActive("heading",{level:4})?"is-active":""}>
        h4
      </button>
      <button @click=${()=>e.chain().focus().toggleHljsCodeBlock().run()} class=${e.isActive("hljsCodeBlock")?"is-active":""}>
        ${"<>"}
      </button>
    `}var At=o(9303),Et=o.n(At),St=o(8895),$t=o.n(St),Pt=o(3691),Tt=o(5039),Mt=o(9244),Lt=o(1428),It=o(7443),Nt=o(2415),Ot=o(8952),Ct=o(1812),Bt=o(8926),zt=o(9731),Dt=o(7466),Zt=o(9296),jt=o(9022),Rt=o(6885),Ht=o(6681),Ft=o(3164),Gt=o(9733),qt=o(3881),Ut=o(3041),Vt=o(1888),Yt=o(5622),Jt=o(3549),Wt=o(6136),Kt=o(6301),Qt=o(4099);let Xt=navigator.userAgent.toLowerCase(),eo=(/opera/i.test(Xt)||/opr/i.test(Xt),/msie/i.test(Xt)&&!/opera/i.test(Xt)||/trident\//i.test(Xt)||/edge/i.test(Xt),/edge/i.test(Xt)&&/opera/i.test(Xt),/firefox/i.test(Xt),/chrome/i.test(Xt)&&/edge/i.test(Xt),!/chrome/i.test(Xt)&&/webkit|safari|khtml/i.test(Xt),/iphone/i.test(Xt),/ipod/i.test(Xt),/ipad/i.test(Xt),/android/i.test(Xt),/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(Xt)),to=/iphone|ipod|ipad/i.test(Xt);/opera mini|opera mobi/i.test(Xt),/opera mini/i.test(Xt),/mac/i.test(Xt);function oo(e,t,o=!0){Dt.LinkBlot.blotName="link",Dt.LinkBlot.tagName="a",Dt.LinkBlot.showLinkTooltip=t=>{e&&e.showLinkTooltip(t,t.value,(0,Wt.isEdit)(),i)},Dt.LinkBlot.hideLinkTooltip=()=>e&&e.hideLinkTooltip(i),Zt.MyQuill.register(Dt.LinkBlot,!0),Ht.FigureBlot.blotName="blockFigure",Ht.FigureBlot.tagName="figure",Ht.FigureBlot.quillSetSelection=(e,t=0)=>i.setSelection(e,t,Tt.Z.sources.USER),Ht.FigureBlot.quillDeleteText=(e,t,o=Tt.Z.sources.USER)=>i.deleteText(e,t,o),Ht.FigureBlot.quillInsertText=(e,t)=>i.insertText(e,t,Tt.Z.sources.USER),Ht.FigureBlot.draftSave=()=>(0,Wt.draftSave)(n,i),Zt.MyQuill.register(Ht.FigureBlot,!0),Zt.MyQuill.register(Qt.DividerBlot),Zt.MyQuill.register({"modules/syntax":Yt.InsSyntaxModule,"formats/bold":Gt.Z,"formats/italic":qt.Z,"formats/indent":It.a,"formats/list":Lt.ListContinuer,"formats/list-item":Mt.H,"formats/code":Nt.E,"formats/strike":Ot.Z},!0);var n=!1;eo&&document.body.classList.add("mobile");var i=new Zt.MyQuill(t,{scrollingContainer:"html, body",readOnly:!0,modules:{syntax:{highlight:e=>Kt.default.highlightAuto(e).value},clipboard:{matchers:[r("h2",{blockHeader:!0}),r("h5",{blockSubheader:!0}),r("h6",{blockSubheader:!0}),["img",function(e,t){return e.src&&(0,Wt.sanitize)(e.src,["http","https","data"])?(new($t())).insert({blockFigure:{image:e.src,caption:e.alt||""}}):new($t())}],["video",function(e,t){return e.src&&(0,Wt.sanitize)(e.src,["http","https","data"])?(new($t())).insert({blockFigure:{video:e.src}}):new($t())}],["br",function(e,t){return console.log("modules.clipboard.matchers.br"),e.classList.contains("inline")?(new($t())).insert({textBreak:!0}):t}]]},keyboard:{bindings:{"required enter":{key:Ct.Z.keys.ENTER,collapsed:!0,shiftKey:null,format:["blockTitle","blockDescription"],suffix:/^$/,handler:function(e,t){console.log("keyboard.bindings.required_enter.handler");let[o]=this.quill.scroll.descendant(zt.FieldBlot,e.index);return!(o&&o.next&&o.next.domNode&&!o.next.domNode.textContent)||(this.quill.setSelection(o.next.offset(this.quill.scroll),0,Tt.Z.sources.USER),!1)}},"required tab prev":{key:Ct.Z.keys.TAB,shiftKey:!0,handler:function(e,t){console.log("keyboard.bindings.required_tab_prev.handler");let o=null;if(e.length>0){let t=i.scroll.descendants(Pt.ZP,e.index,e.length);if(1!=t.length)return!0;o=t[0]}else[o]=i.scroll.descendant(Pt.ZP,e.index);if(null!=o&&null!=o.prev&&o.prev instanceof zt.FieldBlot){let e=o.prev.offset(i.scroll),t=o.prev.length();return i.setSelection(e,t>1?t:0,Tt.Z.sources.USER),!1}return!0}},"required tab next":{key:Ct.Z.keys.TAB,shiftKey:!1,handler:function(e,t){console.log("keyboard.bindings.required_tab_next.handler");let o=null;if(e.length>0){let t=i.scroll.descendants(Pt.ZP,e.index,e.length);if(1!=t.length)return!0;o=t[0]}else[o]=i.scroll.descendant(Pt.ZP,e.index);if(null!=o&&o instanceof zt.FieldBlot&&null!=o.next){let e=o.next.offset(i.scroll);if(o.next instanceof zt.FieldBlot){let t=o.next.length();i.setSelection(e,t>1?t:0,Tt.Z.sources.USER)}else i.setSelection(e,0,Tt.Z.sources.USER);return!1}return!0}},"no tab":{key:Ct.Z.keys.TAB,shiftKey:null,handler:function(e,t){return console.log("keyboard.bindings.no_tab.handler"),!1}},"detect embed":{key:Ct.Z.keys.ENTER,collapsed:!0,handler:function(t,o){console.log("keyboard.bindings.detect_embed.handler");let[n,r]=i.scroll.line(t.index);if(n){let o,a=n.domNode.textContent.substr(0,r);if(o=a.match(/(^|\s)(https?:\/\/\S+)$/)){let l=o[2];if(i.scroll.descendants(Dt.LinkBlot,t.index-l.length,l.length).length||i.formatText(t.index-l.length,l.length,"link",l,Tt.Z.sources.USER),!a.substr(0,r-l.length).trim().length&&"P"==n.domNode.tagName){let t=s(l);if(t){let o=n.offset(i.scroll);return i.updateContents((new($t())).retain(o).delete(a.length).insert({blockFigure:t}),Tt.Z.sources.USER),e&&e.hideBlocksTooltip(),!1}}}}return!0}},"divider autofill":{key:Ct.Z.keys.ENTER,collapsed:!0,prefix:/^([-*])\1{2,}$/,handler:function(e,t){console.log("keyboard.bindings.divider_autofill.handler");let[o,n]=i.scroll.line(e.index);if(o&&"P"==o.domNode.tagName){let e=o.offset(i.scroll),t=(new($t())).retain(e).delete(o.length()).insert({blockDivider:!0});return o.next||t.insert("\n"),i.updateContents(t,Tt.Z.sources.USER),!1}return!0}},break:{key:Ct.Z.keys.ENTER,shiftKey:!0,handler:l.bind(null,!0)},enter:{key:Ct.Z.keys.ENTER,handler:l.bind(null,!1)},"detect link":{key:" ",collapsed:!0,handler:function(e){console.log("detectLinkHandler",e);let[t,o]=i.scroll.line(e.index);if(t){let n,r=t.domNode.textContent.substr(0,o);if(n=r.match(/(^|\s)((?:https?|tg):\/\/\S+|www\.\S+)$/)){let t=n[2],o=t.length;"www."==t.substr(0,4)&&(t="http://"+t),i.scroll.descendants(Dt.LinkBlot,e.index-o,o).length||i.formatText(e.index-o,o,"link",t,Tt.Z.sources.USER)}}return!0}},"cancel placeholder":{key:Ct.Z.keys.ESCAPE,handler:function(e,t){return console.log("keyboard.bindings.cancel_placeholder.handler"),io(),this.quill.updateSelection(Tt.Z.sources.USER),!0}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{list:!1,"code-block":!1,blockquote:!1,header:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query&&null==this.quill.scroll.query("list"))return!0;const{length:o}=t.prefix,[n,i]=this.quill.getLine(e.index);if(i>o)return!0;let r;switch(t.prefix.trim()){case"[]":case"[ ]":r="unchecked";break;case"[x]":r="checked";break;case"-":case"*":r="bullet";break;default:r={type:"ordered",start:Number(t.prefix.slice(0,-1))-1}}this.quill.insertText(e.index," ",Tt.Z.sources.USER),this.quill.history.cutoff(),console.log("keyboard.bindings.list_autofill.handler",e,t);const a=(new($t())).retain(e.index-i).delete(o+1).retain(n.length()-2-i).retain(1,{list:r,start:r.start});console.log("keyboard.bindings.list_autofill.handler",a);const l=this.quill.updateContents(a,Tt.Z.sources.USER);return console.log("keyboard.bindings.list_autofill.handler",l),this.quill.history.cutoff(),this.quill.setSelection(e.index-o,Tt.Z.sources.SILENT),!1}},"pre wrap":{key:192,collapsed:!0,format:{"code-block":!1},prefix:/^``$/,offset:2,handler:function(e,t){console.log("keyboard.bindings.pre_wrap.handler");let o=t.prefix.length,n=e.index-o;this.quill.scroll.deleteAt(n,o),this.quill.formatLine(n,1,"code-block",!0,Tt.Z.sources.USER),this.quill.setSelection(n,Tt.Z.sources.SILENT)}},code:{key:192,handler:function(e,t){if(console.log("keyboard.bindings.code.handler",!t.format),!t.collapsed){let o=i.scroll.descendants(Pt.ZP,e.index,e.length);if(o.length>1||1==o.length&&o[0]instanceof Jt.dn)return this.quill.format("code-block",!t.format["code-block"],Tt.Z.sources.USER),!1;if(i.scroll.descendants(Bt.BreakBlot,e.index,e.length).length)return this.quill.format("code-block",!t.format["code-block"],Tt.Z.sources.USER),!1}if(t.collapsed&&!t.format.code&&!/\s$/.test(t.prefix))return!0;this.quill.format("code",!t.format.code,Tt.Z.sources.USER)}},"figure delete":{key:Ct.Z.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(e,t){console.log("keyboard.bindings.figure_delete.handler");let[o,n]=i.scroll.line(e.index);return!(o&&o.prev&&o.prev instanceof Ht.FigureBlot)||(t.empty&&i.deleteText(e.index,1,Tt.Z.sources.USER),i.setSelection(o.prev.offset(i.scroll)),!1)}},"field backspace":{key:Ct.Z.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(e,t){console.log("keyboard.bindings.field_backspace.handler");let[o,n]=i.scroll.line(e.index);return!(o&&o.prev&&o.prev instanceof zt.FieldBlot&&o.domNode.textContent.length>0)}},strikethrough:{key:"X",shortKey:!0,shiftKey:!0,handler:function(e,t){i.formatText(e,"strike",!t.format.strike)}}}}}});function r(e,t){return[e,function(e,o){return o.compose((new($t())).retain(o.length(),t))}]}function a(e){let t=function(e){let[t,o]=i.scroll.line(e);return i.getText(e,t.length()-o)}(e);return!t||"\n"==t}function l(e,t,o){console.log("breakHandler",e,t,o);let n,r=t.index;t.length>0&&i.scroll.deleteAt(r,t.length);let l=a(r),s=!1;return[n]=i.scroll.descendant(Bt.BreakBlot,r),n?(!n.prev||n.prev instanceof Bt.BreakBlot)&&(i.scroll.deleteAt(--r,1),s=!0):([n]=i.scroll.descendant(Bt.BreakBlot,r-1),n&&(i.scroll.deleteAt(--r,1),s=!0)),[n]=i.scroll.descendant(jt.SingleLineBlot,r),n||s||!e?(i.insertText(r,"\n",Tt.Z.sources.USER),i.setSelection(++r,0,Tt.Z.sources.USER),(o.format.blockHeader||o.format.blockSubheader||o.format.blockBlockquote||o.format.blockPullquote)&&l&&i.formatLine(r,1,{blockHeader:!1,blockSubheader:!1,blockBlockquote:!1,blockPullquote:!1},Tt.Z.sources.USER)):(i.insertEmbed(r,"textBreak",!0,Tt.Z.sources.USER),[n]=i.scroll.descendant(Bt.BreakBlot,r),!n||n.next||n.prev&&n.prev instanceof Bt.BreakBlot||(i.insertEmbed(++r,"textBreak",!0,Tt.Z.sources.SILENT),i.setSelection(r,0,Tt.Z.sources.SILENT))),!1}function s(e){let t;if((t=e.match(/^(https?):\/\/(www\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/i))||(t=e.match(/^(https?):\/\/(www\.)?youtu\.be\/([a-zA-Z0-9_-]+)/i)))return{embed:"/embed/youtube?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(www\.)?vimeo\.com\/(\d+)/i))return{embed:"/embed/vimeo?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(www\.|mobile\.)?twitter\.com\/(.+)\/status\/(\d+)/i))return{embed:"/embed/twitter?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(t\.me|telegram\.me|telegram\.dog)\/([a-zA-Z0-9_]+)\/(\d+)/i))return{embed:"/embed/telegram?url="+encodeURIComponent(e)};if(t=e.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))return"video/"==t[1].substr(0,6)?{video:e}:{image:e};if(t=e.match(/^(https?):\/\/\S+/i)){let o=document.createElement("a");if(o.href=e,o.pathname.match(/\.(jpe?g|png|gif|mp4)$/i))return"mp4"==t[1]?{video:e}:{image:e}}return!1}function c(e){e.scroll.descendants(Pt.ZP,0,e.scroll.length()).forEach((e=>{if(e.domNode.hasAttribute("data-placeholder")){let t=e.domNode.textContent;e.domNode.classList.toggle("empty",!t)}}))}function d(e){if(o){let[t,o]=e.scroll.lines();if(t instanceof Pt.i2)e.updateContents((new($t())).insert("\n",{blockTitle:!0}).insert("\n",{blockDescription:!0}),Tt.Z.sources.SILENT);else if(t instanceof Rt.TitleBlot||e.formatLine(0,1,{blockTitle:!0},Tt.Z.sources.SILENT),o){if(o instanceof Pt.i2){let t=o.offset(e.scroll);e.updateContents((new($t())).retain(t).insert("\n",{blockDescription:!0}),Tt.Z.sources.SILENT)}else if(!(o instanceof Ft.DescriptionBlot)){let t=o.offset(e.scroll);e.formatLine(t,1,{blockDescription:!0},Tt.Z.sources.SILENT)}}else{let t=e.scroll.length();e.updateContents((new($t())).retain(t).insert("\n",{blockDescription:!0}),Tt.Z.sources.SILENT)}let[,,n]=e.scroll.lines();if(n){let t=n.offset(e.scroll),o=e.scroll.length()-t;e.scroll.descendants(zt.FieldBlot,t,o).forEach((t=>{let o=t.offset(e.scroll),n=t.length(),i=t.constructor.blotName;e.formatText(o,n,i,!1,Tt.Z.sources.SILENT)}))}else{let t=e.scroll.length();e.insertText(t,"\n",Tt.Z.sources.SILENT)}}const n=e.scroll.lines();t.querySelectorAll("[data-placeholder]").forEach((e=>e.removeAttribute("data-placeholder")));(o?3===n.length:1===n.length)&&n.forEach(((e,t)=>{if("P"==e.domNode.tagName){(o?2===t:0==t)&&e.domNode.setAttribute("data-placeholder","The page content...")}}))}function u(e){let t=e.querySelector(".prompt_input"),o=e.querySelector(".close");t.onkeydown=null,t.onblur=null,o.onclick=null,e.style.display="",e.classList.remove("tooltip_prompt"),i.focus()}return e&&i.addContainer(e),i.on(Tt.Z.events.TEXT_CHANGE,(function(){i.getSelection();d(i),c(i),io(),(0,Wt.draftSave)(n,i)})),i.on(Tt.Z.events.SCROLL_OPTIMIZE,(function(e){e.forEach((e=>{if("childList"==e.type&&!e.addedNodes.length&&e.removedNodes.length){let t=e.previousSibling,o=e.nextSibling;if(!o&&t&&"BR"==t.tagName&&"inline"==t.className){let t=document.createElement("br");t.className="inline",e.target.appendChild(t)}else!o||!t||"BR"==t.tagName&&"inline"==t.className||"BR"!=o.tagName||"inline"!=o.className||o.nextSibling||o.parentNode&&o.parentNode.removeChild(o)}}))})),i.scroll.domNode.setAttribute("dir","auto"),document.addEventListener("click touchstart",(function(t){let o=t.target;for(;o;){if(o===i.container)return;o=o.parentNode}e&&e.hideFormatTooltip(i),e&&e.hideBlocksTooltip()})),d(i),c(i),e&&(e.$bold_button.onclick=e=>{console.log("$bold_button.onclick");let t=e.target.classList.contains("active");e.preventDefault(),console.log("$bold_button.onclick",!t),i.format("bold",!t),console.log("$bold_button.onclick",i.getSelection(!0)),i.updateSelection(Tt.Z.sources.API)}),e&&(e.$italic_button.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault(),i.format("italic",!t),i.updateSelection(Tt.Z.sources.API)}),e&&(e.$link_button.onclick=t=>{let o=t.target.classList.contains("active");t.preventDefault();var n=i.getSelection(!0);if(o){i.scroll.descendants(Dt.LinkBlot,n.index,n.length).forEach((e=>{let t=e.offset(i.scroll),o=e.length();i.formatText(t,o,"link",!1)})),e&&no(n,i,e)}else e&&function(e,t,o){let n=e.querySelector(".prompt_input"),i=e.querySelector(".close");n.value="",n.setAttribute("placeholder",t),n.onkeydown=t=>{let i=t.which||t.keyCode;if(27==i)u(e);else if(13==i){let i=n.value;i&&(o&&o(i),t.preventDefault()),u(e)}},n.onblur=()=>{u(e)},i.onclick=()=>{u(e)},e.style.display="",e.classList.add("tooltip_prompt"),n.focus()}(e.$tl_tooltip,"Paste or type a link...",(function(t){"#"!=(t=t.trim()).substr(0,1)&&"/"!=t.substr(0,1)&&"http://"!=t.substr(0,7)&&"https://"!=t.substr(0,8)&&"tg://"!=t.substr(0,5)&&"mailto:"!=t.substr(0,7)&&(t=t.indexOf("@")>0?"mailto:"+t:"http://"+t),i.focus(),i.format("link",t),no(n,i,e)}))}),e&&(e.$header_button.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault();let o=i.getSelection(!0);i.format("blockHeader",!t),i.scroll.descendants(Ut.HeaderBlot,o.index,o.length).forEach((e=>{let t=e.offset(i.scroll),o=e.length();i.formatText(t,o,{bold:!1,italic:!1,code:!1},Tt.Z.sources.SILENT)})),i.updateSelection(Tt.Z.sources.API)}),e&&(e.$subheader_button.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault();let o=i.getSelection(!0);i.format("blockSubheader",!t),i.scroll.descendants(Vt.SubheaderBlot,o.index,o.length).forEach((e=>{let t=e.offset(i.scroll),o=e.length();i.formatText(t,o,{bold:!1,italic:!1,code:!1},Tt.Z.sources.SILENT)})),i.updateSelection(Tt.Z.sources.API)}),e&&(e.$quote_button.onclick=e=>{let t=e.target,o=t.classList.contains("active"),n=t.classList.contains("pullquote");e.preventDefault();i.getSelection(!0);o?i.format("blockPullquote",!n):i.format("blockBlockquote",!0),i.updateSelection(Tt.Z.sources.API)}),e&&(e.$strikeButton.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault(),i.format("strike",!t),i.updateSelection(Tt.Z.sources.API)}),e&&(e.$image_button.onclick=()=>{let e=i.container.querySelector("input.ql-image[type=file][data-status=ready]");null==e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",to?"image/gif, image/jpeg, image/jpg, image/png":"image/gif, image/jpeg, image/jpg, image/png, video/mp4"),e.classList.add("ql-image"),e.addEventListener("change",(()=>{if(e&&null!=e.files&&null!=e.files[0]){var t=e.files[0];const o=function(){(0,Wt.showError)("File too big (up to 5 MB allowed)")},n=5242880;!function(e,t){if("image/jpg"==e.type||"image/jpeg"==e.type)return Et()(e,(o=>{if("error"===o.type)t(e);else if(o.toBlob)o.toBlob((function(e){t(e)}),e.type);else{var n=o.toDataURL(e.type),i={type:e.type,base64_data:n.split(",")[1]};t((0,Wt.uploadDataToBlob)(i))}}),{canvas:!0,orientation:!0});t(e)}(t,(t=>{if(t.size>n)return o&&o();var r=new FileReader;r.onload=function(t){if(t&&null!==t.target){let o=s(t.target.result);if(o){let e=i.getSelection(!0);i.updateContents((new($t())).retain(e.index).delete(e.length).insert({blockFigure:o}),Tt.Z.sources.USER)}else(0,Wt.showError)("Invalid file format");e.value="",e.setAttribute("data-status","ready")}},r.readAsDataURL(t)}))}})),i.container.appendChild(e)),e.setAttribute("data-status","busy"),e.click()}),e&&(e.$embed_button.onclick=t=>{let o=i.getSelection(!0),[n]=i.scroll.line(o.index);const r=n.domNode;if(n){r.textContent||(r.setAttribute("data-placeholder","Paste a YouTube, Vimeo or Twitter link, and press Enter"),r.classList.add("placeholder_once","empty"),e.hideBlocksTooltip())}}),window.addEventListener("scroll resize",(()=>{e&&e.tooltipUpdatePosition(e.$tl_tooltip,null,e.formatTTOptions,i),e&&e.tooltipUpdatePosition(e.$tl_link_tooltip,null,e.linkTTOptions,i)})),i}function no(e,t,o){let n=null==e?{}:t.getFormat(e),i=!!n.blockDescription,r=!(!n.blockHeader&&!n.blockSubheader),a=!!n["code-block"];if(o.$bold_button.classList.toggle("active",!!n.bold),o.$bold_button.classList.toggle("disabled",i||r||a),o.$italic_button.classList.toggle("active",!!n.italic),o.$italic_button.classList.toggle("disabled",i||r||a),o.$header_button.classList.toggle("active",!!n.blockHeader),o.$header_button.classList.toggle("disabled",i),o.$subheader_button.classList.toggle("active",!!n.blockSubheader),o.$subheader_button.classList.toggle("disabled",i),o.$quote_button.classList.toggle("active",!(!n.blockBlockquote&&!n.blockPullquote)),o.$quote_button.classList.toggle("pullquote",!!n.blockPullquote),o.$quote_button.classList.toggle("disabled",i),o.$strikeButton.classList.toggle("active",!!n.strike),o.$strikeButton.classList.toggle("disabled",i),null!=e){let n=t.scroll.descendants(Dt.LinkBlot,e.index,e.length);o.$link_button.classList.toggle("active",!!n.length)}else o.$link_button.classList.toggle("active",!1);o.$link_button.classList.toggle("disabled",a)}function io(){const e=document.querySelector(".placeholder_once");null!==e&&(e.removeAttribute("data-placeholder"),e.classList.remove("placeholder_once","empty"))}var ro=o(8079),ao=o(9691);_t("inscriptum-redactor-bubble-menu");const lo=(0,i.EG)({props:{content:{type:{},default:null},cbOnUpdateContent:{type:{},default:()=>{}},isTitle:Boolean},render:n.sY})((function(e){const[t,r]=(0,i.eJ)(0),[a,l]=(0,i.eJ)(),s=yt();return(0,i.d4)((()=>(cancelAnimationFrame(t),r(requestAnimationFrame((()=>{const t=s.current;if(null!=t){let o=null;o=null!=e.content&&"object"==typeof e.content&&"ops"in e.content?function(e){const t=document.createElement("div"),o=document.createElement("template");o.append(t),document.body.append(o);const n=oo(null,t);zt.FieldBlot,ro.BlockquoteBlot,ao.PullquoteBlot,Jt.dn,Mt.H,Rt.TitleBlot,Pt.ZP,n.setContents(e);const i=n.root.innerHTML;return t.remove(),o.remove(),"function"==typeof n.destroy&&n.destroy(),i}(e.content):e.content,l(function(e,t,o=!1,n){return new _.ML({element:e,content:t,onUpdate:null==n?void 0:n.onUpdate,extensions:ve(o)})}(t,o,e.isTitle,{onUpdate:({editor:t})=>{e.cbOnUpdateContent(t.getJSON())}}))}}))),()=>{var e,o;console.log("DESTROY redactorElement"),null===(o=null===(e=s.current)||void 0===e?void 0:e.firstChild)||void 0===o||o.remove(),cancelAnimationFrame(t),null!=a&&a.destroy()})),[s.current,e.content,e.isTitle,e.cbOnUpdateContent]),n.dy`<div class="redactor">
      <style>${o(5257)}</style>
      <article .ref=${s.ref()} class="redactor__article"></article>
      ${null!=a&&n.dy`<inscriptum-redactor-bubble-menu .editor=${a}></inscriptum-redactor-bubble-menu>`}
    </div>`})),so=String.raw,co=(lo("inscriptum-redactor"),Je("inscriptum-margin"),Ke("inscriptum-folding"),Xe()),uo=et(),po=bt(),ho=(0,i.EG)({props:{page:{type:{}}},render:n.sY})((function(e){const[t,o]=(0,i._Y)(gt,{data:e.page,isLoading:!1});let[r,a]=(0,i.eJ)(e.page.content);const[l,s]=(0,i.eJ)(e.page.isFolded),[c,d]=mt(dt),[u,p]=mt(ut),[h,f]=mt(pt);(0,i.d4)((()=>{const n=function(e){const t=new ht.xQ;return(0,ft.T)(t)}(e.page.id).subscribe((e=>o(e)));return n.add(c.subscribe((e=>{null!=t.data&&(t.data.content=e.content)}))),n.add(u.subscribe()),n.add(h.subscribe()),()=>{n.unsubscribe()}}),[]),(0,i.d4)((()=>{var e;null!=(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.content)&&(null==r&&null!=t.data.content&&a(t.data.content),null!=t.data.isFolded&&l!==t.data.isFolded&&(t.data.isFolded||a(t.data.content)))}),[t,r,l,a,s]);const g=(0,i.I4)((e=>{null!=t.data&&(d({pageId:t.data.id,draftId:t.data.draftId,content:e}),null!=r?r.content=e.content:r=e)}),[t,d,r]),b=(0,i.I4)((e=>()=>{var o;null!=(null===(o=t.data)||void 0===o?void 0:o.draftId)&&p({draftId:t.data.draftId,order:e})}),[t.data,d]),y=(0,i.I4)((()=>{null!=t.data&&f({draftId:t.data.draftId,pageId:t.data.id,order:t.data.order})}),[t.data]),v=(0,i.I4)((()=>{var e;null!=(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.id)&&function(e,t){ct(this,void 0,void 0,(function*(){return yield(0,xe.G)((()=>ct(this,void 0,void 0,(function*(){const{insert_margin_one:o}=yield(0,m.S)().createMargin({page_id:e,created_at:(new Date).toISOString()});if(null!=(null==o?void 0:o.id))return t({type:tt.CREATE_MARGIN_DONE,payload:{pageId:e,marginId:o.id}}),o;t({type:tt.CREATE_MARGIN_FAIL,payload:{pageId:e,error:{massage:`Can not create a new Margin for Page ${e}!`}}})}))))}))}(t.data.id,o)}),[t]);if(null!=(null==t?void 0:t.data)){const e=n.dy`<div class="page__controls">
        <div>
          <button class="btn btn_icon" title="add a new page" @click=${b(t.data.order+1)}>
            ${co({})}
          </button>
          ${t.data.order>0?n.dy`<button class="btn btn_icon" title="delete this page" @click=${y}>
              ${uo({})}
            </button>`:null}
        </div>
        <div>
          ${l?null:n.dy`<button class="btn btn_icon" title="create new margin" @click=${v}>
              ${po({})}
            </button>`}
        </div>
      </div>`;return n.dy`
        <inscriptum-folding .label=${t.data.order>0?String(t.data.order):""} .value=${t.data.id} .isFolded=${l} .change=${(e,t)=>s(t)}></inscriptum-folding>
        ${l?n.dy`
            <span style=${so`
                display: flex;
                justify-content: center;
                font-size: 1.6rem;
                cursor: pointer;
              `} @click=${()=>s(!1)}>
              ...
            </span>
            ${e}
          `:n.dy`<div class="row" style=${so`
              display: flex;
              width: 100%;
              min-height: ${t.data.margins.length>0?"100vh":"auto"};
            `}>
            <div style=${so`
                min-width: 732px;
                padding: 1rem 0 0 0;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
              `}>
              
              <inscriptum-redactor .content=${r} .cbOnUpdateContent=${g} .isTitle=${0===t.data.order}></inscriptum-redactor>
              ${e}
            </div>
            ${t.data.margins.length>0?n.dy`<inscriptum-margin .marginId=${t.data.margins[0].id}></inscriptum-margin>`:null}
          </div>`}
      `}})),fo=(0,d.EG)({props:{items:d.p.req()}})((function*(e){var t,i;for(;;)e=yield(0,n.sY)(n.dy`
        <style>${o(7135)}</style>
        <nav class="toc-panel">
          <ul class="toc-panel__list">
            <li class="toc-panel__title">${null!==(i=null===(t=e.items[0])||void 0===t?void 0:t.header)&&void 0!==i?i:"In this article"}</li>
            ${e.items.slice(1).map(((e,t)=>{var o;return n.dy`<li class="toc-panel__item">
                <span class="toc-panel__page-numb">${t+1}</span>
                <a class=${"toc-panel__header "+(t+1===0?"toc-panel__header_selected":"")}>${null!==(o=null==e?void 0:e.header)&&void 0!==o?o:"..."}</a>
              </li>`}))}

            
          </ul>
        </nav>
      `,this)}));function go(e,t){var o,n,i,r,l,s,c,d;switch(t.type){case v.LOAD:case v.LOADING:return Object.assign(Object.assign({},e),{isLoading:!0});case v.LOAD_DONE:if((null===(o=t.payload.pages)||void 0===o?void 0:o.length)!==t.payload.table_of_contents.length){t.payload.table_of_contents=[];for(const e of null!==(n=t.payload.pages)&&void 0!==n?n:[])t.payload.table_of_contents.push({header:bo(e.content),pageId:e.id});ke(t.payload.table_of_contents,t.payload.id)}return Object.assign(Object.assign({},e),{data:t.payload,isLoading:!1});case a.DRAFT_ADD_PAGE_DONE:if(null!=e.data&&null!=t.payload.newPage){const o=null!==(i=e.data.pages)&&void 0!==i?i:[];for(const e of o){const o=t.payload.updatedPages.find((t=>t.id===e.id));null!=o&&(e.order=o.order)}o.push(t.payload.newPage);const n=e.data.table_of_contents;return ke([...n.slice(0,t.payload.newPage.order),{header:"...",pageId:t.payload.newPage.id},...n.slice(t.payload.newPage.order)],e.data.id),Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{pages:o.sort(((e,t)=>e.order-t.order))})})}return e;case a.DRAFT_DELETE_PAGE_DONE:if(null!=e.data){const o=(null!==(r=e.data.pages)&&void 0!==r?r:[]).filter((e=>e.id!==t.payload.deletedPage.id));for(const e of o){const o=t.payload.updatedPages.find((t=>t.id===e.id));null!=o&&(e.order=o.order)}const n=e.data.table_of_contents;return ke([...n.slice(0,t.payload.deletedPage.order),...n.slice(t.payload.deletedPage.order+1)],e.data.id),Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{pages:o.sort(((e,t)=>e.order-t.order))})})}return e;case v.UPDATE_TOC_DONE:return null!=e.data?Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{table_of_contents:t.payload.toc})}):e;case v.UPDATE_TOC_ERROR:return console.warn(t.payload.error),e;case a.PAGE_SAVE_DONE:if(null!=e.data){const o=null!==(c=null===(s=null===(l=e.data.pages)||void 0===l?void 0:l.find((e=>e.id===t.payload.pageId)))||void 0===s?void 0:s.order)&&void 0!==c?c:-1,n=e.data.table_of_contents;let i=bo(t.payload.content);n[o]=null!==(d=n[o])&&void 0!==d?d:{},o>-1&&n[o].header!==String(i)&&(n[o]={header:String(i),pageId:t.payload.pageId},ke(n,e.data.id))}return e;case a.DRAFT_PUBLISH:return null!=e.data?Ae(e.data):alert("Error: the draft cannot be published. The draft state is null."),e;default:return e}}function bo(e){var t;let o="...";return null==e||("ops"in e&&(o=e.ops[0].insert),"type"in e&&Array.isArray(e.content)&&Array.isArray(e.content[0].content)&&"text"===e.content[0].content[0].type&&(o=null!==(t=e.content[0].content[0].text)&&void 0!==t?t:o)),o}const mo=String.raw,yo=(ho("inscriptum-page"),(0,s.s)("loading-progress-bar"),fo("inscriptum-table-of-content"),f("inscriptum-controls-panel"),(0,i.EG)({props:{id:{type:String,attribute:"data-id"}},render:n.sY})((function(e){var t,s,c,d;const[u,p]=(0,i._Y)(go,{isLoading:!1}),[h,f]=(0,i.eJ)(new g.w),[y,_]=(0,i.eJ)(0),x=(0,i.sO)(null);return(0,i.d4)((()=>{const t=function(e){const t=r.Z.$.pipe(),o=r.Z.$.pipe((0,b.h)((t=>t.type===a.PAGE_SAVE_DONE&&t.payload.draftId===e)));return(0,ft.T)(t,o)}(e.id).subscribe((e=>p(e)));return()=>{t.unsubscribe()}}),[]),(0,i.d4)((()=>{!function(e){we(this,void 0,void 0,(function*(){return r.Z.dispatch({type:v.LOADING,payload:{id:e}}),(0,xe.G)((()=>we(this,void 0,void 0,(function*(){const{draft:t}=yield(0,m.S)().getDraftById({id:e});null!=t&&r.Z.dispatch({type:v.LOAD_DONE,payload:{id:t.id,created_at:t.created_at,updated_at:t.updated_at,table_of_contents:t.table_of_contents,notes:t.notes,pages:t.pages.sort(((e,t)=>e.order-t.order)).map(((t,o)=>{var n;return Object.assign(Object.assign({},t),{content:t.content,draftId:e,isFolded:0!==o,margins:null!==(n=t.margins)&&void 0!==n?n:[]})}))}})}))))}))}(e.id)}),[e.id]),(0,i.d4)((()=>(cancelAnimationFrame(y),_(requestAnimationFrame((()=>{null!=x.current&&(h.unsubscribe(),f(function(e){var t,o;const n=new g.w;let i=document.title;const l=null===(t=e.current)||void 0===t?void 0:t.togglePause,s=null===(o=e.current)||void 0===o?void 0:o.generateProgress;if(null!=l&&null!=s){let e=2e3,t=!1,o=!1;n.add(r.Z.$.pipe((0,b.h)((e=>e.type===a.PAGE_SAVE))).subscribe((()=>{o||(i=document.title,document.title=`*${i}`,o=!0)}))),n.add(r.Z.$.pipe((0,b.h)((e=>e.type===a.PAGE_SAVING))).subscribe((()=>{t&&s.next(),e=2e3,t=!0;const o=s.next();void 0!==o&&1===o.value&&(setTimeout((()=>{t&&(l(!0),e-=300)}),300),setTimeout((()=>{t&&l(!1)}),1e3),setTimeout((()=>{t&&(l(!0),e-=1e3)}),2e3),setTimeout((()=>{t&&(e-=1e3)}),3e3))}))),n.add(r.Z.$.pipe((0,b.h)((e=>e.type===a.PAGE_SAVE_DONE))).subscribe((n=>{t=!1,l(!1),setTimeout((()=>{s.next()}),e>0?e:0),document.title=i,o=!1}))),n.add(r.Z.$.pipe((0,b.h)((e=>e.type===a.PAGE_SAVE_FAIL))).subscribe((()=>{t=!1,l(!1),setTimeout((()=>{s.next()}),e>0?e:0)})))}return n}(x)))}))),()=>{cancelAnimationFrame(y),h.unsubscribe()})),[x.current]),(0,i.d4)((()=>{var e;const t=null===(e=u.data)||void 0===e?void 0:e.table_of_contents[0];null!=t&&(document.title=t.header)}),[u]),n.dy`
      <style>${o(6061)}</style>
      <loading-progress-bar .ref=${x}></loading-progress-bar>

      <um-preloader .loading=${u.isLoading}>
        <div class="draft-content">
          <div style=${mo`
              display: flex;
              flex-direction: column;
              margin-right: 7rem;
              margin-left: 3rem;
              min-width: 15rem;
            `}>
            <inscriptum-controls-panel .draftId=${e.id}></inscriptum-controls-panel>
            <inscriptum-table-of-content .items=${null!==(s=null===(t=u.data)||void 0===t?void 0:t.table_of_contents)&&void 0!==s?s:[]}></inscriptum-table-of-content>
          </div>

          <div style=${mo`
              width: 100%;
            `}>
            ${(0,l.r)(null!==(d=null===(c=u.data)||void 0===c?void 0:c.pages)&&void 0!==d?d:[],(e=>`${e.id}_${e.order}`),(e=>n.dy`<inscriptum-page .page=${e} style=${mo`
                    position: relative;
                    display: block;
                    border-bottom: 1px solid #eee;
                  `}></inscriptum-page>`))}
          </div>
        </div>
      </um-preloader>
    `})))},6061:e=>{e.exports='/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--font-family: Inter, sans-serif}.container{position:relative;width:100%;max-width:960px;margin:0 auto;padding:0 20px;box-sizing:border-box}.column,.columns{width:100%;float:left;box-sizing:border-box}@media(min-width: 400px){.container{width:85%;padding:0}}@media(min-width: 550px){.container{width:80%}.column,.columns{margin-left:4%}.column:first-child,.columns:first-child{margin-left:0}.one.column,.one.columns{width:grid-column-width(1)}.two.columns{width:grid-column-width(2)}.three.columns{width:grid-column-width(3)}.four.columns{width:grid-column-width(4)}.five.columns{width:grid-column-width(5)}.six.columns{width:grid-column-width(6)}.seven.columns{width:grid-column-width(7)}.eight.columns{width:grid-column-width(8)}.nine.columns{width:grid-column-width(9)}.ten.columns{width:grid-column-width(10)}.eleven.columns{width:grid-column-width(11)}.twelve.columns{width:100%;margin-left:0}.one-third.column{width:grid-column-width(4)}.two-thirds.column{width:grid-column-width(8)}.one-half.column{width:grid-column-width(6)}.offset-by-one.column,.offset-by-one.columns{margin-left:grid-offset-length(1)}.offset-by-two.column,.offset-by-two.columns{margin-left:grid-offset-length(2)}.offset-by-three.column,.offset-by-three.columns{margin-left:grid-offset-length(3)}.offset-by-four.column,.offset-by-four.columns{margin-left:grid-offset-length(4)}.offset-by-five.column,.offset-by-five.columns{margin-left:grid-offset-length(5)}.offset-by-six.column,.offset-by-six.columns{margin-left:grid-offset-length(6)}.offset-by-seven.column,.offset-by-seven.columns{margin-left:grid-offset-length(7)}.offset-by-eight.column,.offset-by-eight.columns{margin-left:grid-offset-length(8)}.offset-by-nine.column,.offset-by-nine.columns{margin-left:grid-offset-length(9)}.offset-by-ten.column,.offset-by-ten.columns{margin-left:grid-offset-length(10)}.offset-by-eleven.column,.offset-by-eleven.columns{margin-left:grid-offset-length(11)}.offset-by-one-third.column,.offset-by-one-third.columns{margin-left:grid-offset-length(4)}.offset-by-two-thirds.column,.offset-by-two-thirds.columns{margin-left:grid-offset-length(8)}.offset-by-one-half.column,.offset-by-one-half.column{margin-left:grid-offset-length(6)}}.container:after,.row:after,.u-cf{content:"";display:table;clear:both}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--font-family: Inter, sans-serif}.btn{cursor:pointer}.btn.btn_icon{background:transparent;border:none}.btn.btn_icon .icon-tabler{transition:.2s;stroke:#bbb;stroke:var(--border-color);color:#bbb;color:var(--border-color)}.btn.btn_icon .icon-tabler:hover{stroke:#333;stroke:var(--dark-grey)}.um-drafts__submenu{display:flex;flex-direction:row-reverse;padding-top:10px;border-bottom:1px solid #eee}.um-drafts__export-all{margin:0 0 10px 10px;stroke:#fff;stroke-width:30px;color:#bbb}.um-drafts__export-all:hover{color:#888;cursor:pointer}.draft-content{display:flex;flex-direction:column}@media(min-width: 400px){.draft-content{flex-direction:row}}.page__controls{display:flex;justify-content:space-between;align-items:start;opacity:.3;transition:.2s}.page__controls:hover{opacity:1}'},8608:e=>{e.exports=":root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--font-family: Inter, sans-serif}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--font-family: Inter, sans-serif}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--font-family: Inter, sans-serif}.btn{cursor:pointer}.btn.btn_icon{background:transparent;border:none}.btn.btn_icon .icon-tabler{transition:.2s;stroke:#bbb;stroke:var(--border-color);color:#bbb;color:var(--border-color)}.btn.btn_icon .icon-tabler:hover{stroke:#333;stroke:var(--dark-grey)}:host{position:relative;width:100%;user-select:none;display:flex;flex-direction:row;border-left:solid 1px #e1e1e1}sketch-pad{width:100%;display:block}.sketch-pad_frame{flex-grow:1;position:absolute;height:100%;width:100%;overflow:auto}.signature-pad{position:absolute}.fab-container{display:inline-flex;align-items:flex-end;justify-content:flex-end}.fab-container_main{position:sticky;top:calc(100vh - 20px);left:20px;display:flex;margin:1em;flex-direction:row;height:0}.fab-container_main>*:not(:last-child){opacity:0;margin-left:0;transform:translateX(10px)}.fab-container_main:hover{height:50px;top:calc(100vh - 70px)}.fab-container_main:hover>*{display:flex;opacity:1;transform:none;margin-left:10px}.fab-container [tooltip]:before{bottom:115%;border-radius:2px;background:rgba(88,88,88,.16);content:attr(tooltip);font-size:12px;visibility:hidden;opacity:0;padding:5px 7px;margin-right:12px;position:absolute;white-space:nowrap}.fab-container [tooltip]:hover:before,.fab-container [tooltip]:hover:after{visibility:visible;opacity:1}.fab-container_horizontal{flex-direction:row;position:relative;margin:0;display:none}.fab-container_horizontal>*:not(:last-child){opacity:0;margin-left:0;transform:translateX(10px)}.fab-container_horizontal:hover>*{display:inherit;opacity:1;transform:none;margin-left:10px}.fab-container_vertical{flex-direction:column;position:relative;margin:0;display:none}.fab-container_vertical>*:not(:last-child){opacity:0;margin-top:0;transform:translateY(10px)}.fab-container_vertical:hover>*{opacity:1;margin-top:10px;transform:none}.fab-container:nth-last-child(1){transition-delay:25ms;background-size:contain}.fab-container:not(:last-child):nth-last-child(2){transition-delay:20ms;background-size:contain}.fab-container:not(:last-child):nth-last-child(3){transition-delay:40ms;background-size:contain}.fab-container:not(:last-child):nth-last-child(4){transition-delay:60ms;background-size:contain}.fab-button{border:none;background-color:#fff;cursor:pointer;box-shadow:2px 2px 2px 0px rgba(0,0,0,.18),0px 4px 7px -7px rgba(0,0,0,.15);border-radius:50%;display:block;width:40px;height:40px;margin:5px;position:relative;transition:all .1s ease-out;text-decoration:none;display:flex;justify-content:center;align-items:center;color:#bbb}.fab-button:active,.fab-button:focus,.fab-button:hover{box-shadow:3px 2px 2px rgba(0,0,0,.14),0 4px 8px rgba(0,0,0,.28);color:#bbb}.fab-button_lg{width:50px;height:50px;margin:0}.btn__expand{position:absolute;z-index:2;left:2rem}.btn__show{position:absolute;z-index:2}.alpha-setter{display:block;position:absolute;background:#fff;border:1px solid #eee;border-radius:4px;filter:drop-shadow(0 0 6px rgba(0, 0, 0, 0.1))}.alpha-setter__back{position:relative;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)}"},5257:e=>{e.exports='pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{background:#23241f;color:#f8f8f2}.hljs-subst,.hljs-tag{color:#f8f8f2}.hljs-emphasis,.hljs-strong{color:#a8a8a2}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ae81ff}.hljs-code,.hljs-section,.hljs-selector-class,.hljs-title{color:#a6e22e}.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}.hljs-attr,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#f92672}.hljs-attribute,.hljs-symbol{color:#66d9ef}.hljs-class .hljs-title,.hljs-params,.hljs-title.class_{color:#f8f8f2}.hljs-addition,.hljs-built_in,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-string,.hljs-template-variable,.hljs-type,.hljs-variable{color:#e6db74}.hljs-comment,.hljs-deletion,.hljs-meta{color:#75715e}.redactor{max-width:732px;margin:0 auto}.redactor__article{font-family:Georgia,Times,Times New Roman,serif;font-weight:400;font-style:normal;font-size:18px;line-height:1.58;color:rgba(12,10,10,.8);padding:0;margin:0}.redactor__article .ProseMirror{outline:0}.redactor__article .ProseMirror>*+*{margin-top:.75em}.redactor__article .ProseMirror>::selection,.redactor__article .ProseMirror>:not(pre) ::selection{background:#5f5f5f2f}.redactor__article .ProseMirror h1,.redactor__article .ProseMirror h2,.redactor__article .ProseMirror h3,.redactor__article .ProseMirror h4{font-family:Inter,sans-serif;font-weight:600;font-style:normal;letter-spacing:initial}.redactor__article .ProseMirror h1{font-size:32px;margin:21px 21px 12px;line-height:34px}.redactor__article .ProseMirror h2{font-size:30px;margin:21px 21px 12px;line-height:34px}.redactor__article .ProseMirror h3{font-size:28px;margin:18px 21px 9px}.redactor__article .ProseMirror h4{font-size:24px;margin:18px 21px 7px}.redactor__article .ProseMirror p{margin:0 21px 12px;word-wrap:break-word;white-space:pre-wrap}.redactor__article .ProseMirror blockquote{margin:18px 21px 16px 0;padding-left:15px;position:relative;font-style:italic;word-wrap:break-word;border-left:3px solid #000}.redactor__article .ProseMirror aside{font-size:21px;color:rgba(0,0,0,.6);margin:18px 21px 16px;padding:0 18px;text-align:center;font-style:italic}.redactor__article .ProseMirror hr{width:50%;margin:30px auto;border:none;font-size:2px;text-align:right;overflow:visible}.redactor__article .ProseMirror hr:after{content:"";display:block;border-top:1px solid #c9cdd1;margin:0 3px;position:relative;top:1px}.redactor__article .ProseMirror [contenteditable=false]{white-space:normal}.redactor__article .ProseMirror ul[data-type=taskList]{list-style:none;padding:0;margin:0 21px 12px}.redactor__article .ProseMirror ul[data-type=taskList] li{display:block}.redactor__article .ProseMirror ul[data-type=taskList] li>label{float:left;margin-right:.5rem}.redactor__article .ProseMirror ul[data-type=taskList] li>div{display:contents}.redactor__article .ProseMirror ul[data-type=taskList] li p{margin:0}.redactor__article .ProseMirror mark{background-color:#faf594b4}.redactor__article .ProseMirror :not(pre)>code{background-color:rgba(97,97,97,.1);color:#616161;font-family:JetBrainsMono,monospace;font-variant-ligatures:normal;padding:.1rem .3rem;border-radius:.4rem;font-size:.9rem}.redactor__article .ProseMirror a[href]{text-decoration:none;transition:all .2s ease-in-out;color:rgba(0,0,0,.8);border-bottom:.1rem rgba(0,0,0,.425) solid}.redactor__article .ProseMirror a[href]:hover,.redactor__article .ProseMirror a[href]:focus{border-bottom:.1rem rgba(0,0,0,.8) solid}.redactor__article .ProseMirror *[data-placeholder].empty{position:relative}.redactor__article .ProseMirror *[data-placeholder].empty:before{position:absolute;left:0;right:0;content:attr(data-placeholder);color:rgba(0,0,0,.44);font-weight:normal;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;pointer-events:none}.redactor__article .ProseMirror *[data-label]{position:relative}.redactor__article .ProseMirror *[data-label]:after{position:absolute;content:attr(data-label);color:rgba(0,0,0,.44);border-right:1px solid rgba(0,0,0,.15);right:100%;top:-6px;bottom:-6px;padding:6px 12px;font-weight:normal;margin:0 21px;opacity:0;visibility:hidden;transition:opacity .15s ease}.redactor__article .ProseMirror .focused *[data-label].empty:after{position:absolute;content:attr(data-label);color:rgba(0,0,0,.44);border-right:1px solid rgba(0,0,0,.15);right:100%;top:-6px;bottom:-6px;padding:6px 12px;font-weight:normal;margin:0 21px;opacity:0;visibility:hidden;transition:opacity .15s ease}.redactor__article .ProseMirror *[data-label].focused:after{opacity:1;visibility:visible}.redactor__article .ProseMirror *[role=definition]{font-family:Inter,sans-serif;font-size:15px;line-height:18px;color:#79828b;margin:12px 21px;font-style:normal}.redactor__article .ProseMirror *[role=definition] a{color:#79828b}.redactor__article .ProseMirror *[role=definition] a[href]{border-bottom:none;border-bottom:.1em solid rgba(0,0,0,.4)}.redactor__article .ProseMirror *[role=definition].empty{display:block}.redactor__article .ProseMirror *[role=definition] time:before{content:"•";padding:0 7px}.redactor__article .ProseMirror img{max-width:100%;vertical-align:top}.redactor__article .ProseMirror .iframe_wrap{max-width:100%;vertical-align:top;max-width:100%;vertical-align:top;position:relative}.redactor__article .ProseMirror .iframe_wrap iframe{position:absolute;width:1px;height:1px;min-width:100%;min-height:100%;*width:100%;*height:100%;top:0;left:0}.redactor__article .ProseMirror figure{margin:0 21px 16px;padding:0;text-align:center;position:relative;user-select:inherit}.redactor__article .ProseMirror figure.ProseMirror-selectednode img{box-shadow:0 0 0 3px rgba(0,0,0,.4)}.redactor__article .ProseMirror figure.ProseMirror-selectednode img:hover{box-shadow:0 0 0 3px rgba(0,0,0,.4)}.redactor__article .ProseMirror figure img:hover{box-shadow:0 0 0 3px rgba(0,0,0,.2)}.redactor__article .ProseMirror figcaption{font-family:Inter,sans-serif;font-size:15px;color:#79828b;padding:12px 21px 0;line-height:18px;vertical-align:top;text-align:center}.redactor__article .ProseMirror .figure_wrapper{position:relative}.redactor__article .ProseMirror .figure_wrapper img{opacity:1;transition:opacity .15s ease;max-height:690px}.redactor__article .ProseMirror .figure_wrapper.loading img{opacity:.3}.redactor__article .ProseMirror .figure_wrapper .file_progress{position:absolute;z-index:1;bottom:0;left:0;right:0;padding:3px;background-color:rgba(255,255,255,.7);transition:opacity .15s ease;visibility:hidden;opacity:0}.redactor__article .ProseMirror .figure_wrapper.loading .file_progress{visibility:visible;opacity:1}.redactor__article .ProseMirror .figure_wrapper .file_progress_bar{height:2px;background-color:#333;transition:width .1s linear;width:0}.redactor__article .ProseMirror figcaption[data-placeholder].empty{position:relative;overflow:hidden;width:calc(100% - 170px)}.redactor__article .ProseMirror figcaption[data-placeholder].empty:before{display:none}.redactor__article .ProseMirror figcaption[data-placeholder].empty:after{position:absolute;content:attr(data-placeholder);color:rgba(0,0,0,.44);font-weight:normal;font-style:italic;top:0px;padding-top:12px}.redactor__article .ProseMirror pre{background:#232b2b;border-radius:.3rem;box-shadow:0 .5rem 1rem rgba(0,0,0,.4);border-left:6px solid #516363;margin:1rem auto;white-space:pre-wrap;color:#c7d3de;counter-reset:step;counter-increment:step 0;position:relative;font-family:JetBrainsMono,monospace;font-variant-ligatures:normal;font-size:.9rem;padding:.75rem 1rem}.redactor__article .ProseMirror pre code{font-family:JetBrainsMono,monospace;font-variant-ligatures:normal;white-space:pre-wrap;margin-left:2.5rem;display:block}.redactor__article .ProseMirror pre ::selection{background:#dbdbdb2d}.redactor__article .ProseMirror pre div.l:before{color:#516363;position:absolute;left:15px;content:counter(step);counter-increment:step}@media(max-width: 960px){.redactor__article .ProseMirror *[data-label]:after{display:none}}.is-active{background:#000;color:#fff}'},7135:e=>{e.exports='/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--font-family: Inter, sans-serif}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:2rem;font-weight:300}h1{font-size:4rem;line-height:1.2;letter-spacing:-0.1rem}h2{font-size:3.6rem;line-height:1.25;letter-spacing:-0.1rem}h3{font-size:3rem;line-height:1.3;letter-spacing:-0.1rem}h4{font-size:2.4rem;line-height:1.35;letter-spacing:-0.08rem}h5{font-size:1.8rem;line-height:1.5;letter-spacing:-0.05rem}h6{font-size:1.5rem;line-height:1.6;letter-spacing:0}@media(min-width: 550px){h1{font-size:5rem}h2{font-size:4.2rem}h3{font-size:3.6rem}h4{font-size:3rem}h5{font-size:2.4rem}h6{font-size:1.5rem}}p{margin-top:0}.toc-panel{--toc-border-width: 1px;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--text-unit: 1em;--text-scale-ratio: 1.2;--text-xs: calc((1em / 1.2) / 1.2);--text-xs: calc((var(--text-unit) / var(--text-scale-ratio)) / var(--text-scale-ratio));--text-sm: calc(calc((1em / 1.2) / 1.2) * 1.2);--text-sm: calc(var(--text-xs) * var(--text-scale-ratio));box-shadow:inset 1px 0 0 hsl(240, 1%, 83%);box-shadow:inset var(--toc-border-width) 0 0 var(--color-contrast-low);font-family:"Inter",sans-serif;position:sticky;top:1.25rem;max-height:calc(100vh - 1.25rem);overflow:visible}.toc-panel ol,.toc-panel ul{list-style:none;margin:0;padding:0;border:0}.toc-panel .toc-panel__list{position:relative}.toc-panel .toc-panel__list .toc-panel__list .toc-panel__header{padding-left:calc(1.25rem * 2)}.toc-panel .toc-panel__title{padding:.25rem 1.25rem;text-transform:uppercase;letter-spacing:.1em;font-size:calc(calc((1em / 1.2) / 1.2) * 1.2);font-size:var(--text-sm)}.toc-panel .toc-panel__header{padding:.25rem 1.25rem;position:relative;display:inline-flex;color:hsl(240, 1%, 48%);color:var(--color-contrast-medium);text-decoration:none;overflow:hidden;text-overflow:ellipsis}.toc-panel .toc-panel__header::before{content:"";width:1px;width:var(--toc-border-width);height:100%;position:absolute;left:0;top:0}.toc-panel .toc-panel__header:hover{color:hsl(240, 4%, 20%);color:var(--color-contrast-high)}.toc-panel .toc-panel__header_selected{color:#2a6df4}.toc-panel .toc-panel__header_selected::before{background-color:#2a6df4}.toc-panel .toc-panel__page-numb{width:2rem;text-align:right;padding-top:.25rem;padding-right:.5rem;flex-shrink:0;white-space:nowrap}.toc-panel .toc-panel__item{display:flex;margin-left:-2.5rem;color:hsl(240, 1%, 48%);color:var(--color-contrast-medium)}.toc-panel .toc-panel__item:hover{color:hsl(240, 4%, 20%);color:var(--color-contrast-high)}'}}]);