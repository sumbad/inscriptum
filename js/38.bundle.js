(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{556:function(e,t,o){var i;!function(n){"use strict";function a(e,t,o){var i,n=document.createElement("img");return n.onerror=function(i){return a.onerror(n,i,e,t,o)},n.onload=function(i){return a.onload(n,i,e,t,o)},"string"==typeof e?(a.fetchBlob(e,function(t){t?(e=t,i=a.createObjectURL(e)):(i=e,o&&o.crossOrigin&&(n.crossOrigin=o.crossOrigin)),n.src=i},o),n):a.isInstanceOf("Blob",e)||a.isInstanceOf("File",e)?(i=n._objectURL=a.createObjectURL(e))?(n.src=i,n):a.readFile(e,function(e){var o=e.target;o&&o.result?n.src=o.result:t&&t(e)}):void 0}var r=n.createObjectURL&&n||n.URL&&URL.revokeObjectURL&&URL||n.webkitURL&&webkitURL;function l(e,t){!e._objectURL||t&&t.noRevoke||(a.revokeObjectURL(e._objectURL),delete e._objectURL)}a.fetchBlob=function(e,t){t()},a.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},a.transform=function(e,t,o,i,n){o(e,n)},a.onerror=function(e,t,o,i,n){l(e,n),i&&i.call(e,t)},a.onload=function(e,t,o,i,n){l(e,n),i&&a.transform(e,n,i,o,{originalWidth:e.naturalWidth||e.width,originalHeight:e.naturalHeight||e.height})},a.createObjectURL=function(e){return!!r&&r.createObjectURL(e)},a.revokeObjectURL=function(e){return!!r&&r.revokeObjectURL(e)},a.readFile=function(e,t,o){if(n.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,i[o=o||"readAsDataURL"])return i[o](e),i}return!1},void 0===(i=function(){return a}.call(t,o,t,e))||(e.exports=i)}("undefined"!=typeof window&&window||this)},566:function(e,t,o){"use strict";o.r(t);o(608),o(535),o(687),o(644),o(214);var i=o(688),n=o.n(i),a=o(553),r=o.n(a),l=o(551),s=o(552),c=o(587),d=o(611),u=o(550),f=o.n(u);let g=new class extends f.a.Attributor.Class{add(e,t){if("+1"===t||"-1"===t){let o=this.value(e)||0;t="+1"===t?o+1:o-1}return 0===t?(this.remove(e),!0):super.add(e,t)}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t))}value(e){return parseInt(super.value(e))||void 0}}("indent","ql-indent",{scope:f.a.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});var p=o(560),h=o(574),m=o(612),b=o(575),v=o(576),y=o(613),S=o(614),k=o(615),x=o(577),E=o(588),T=o(616),L=o(618),C=o(589),w=o(619),I=o(590),P=o(620),R=o(591),_=o(621),B=o(564),O=o(622);o.d(t,"browser",function(){return U}),o.d(t,"editor",function(){return F});var D=navigator.userAgent.toLowerCase(),U={opera:/opera/i.test(D)||/opr/i.test(D),msie:/msie/i.test(D)&&!/opera/i.test(D)||/trident\//i.test(D)||/edge/i.test(D),msie_edge:/edge/i.test(D)&&!/opera/i.test(D),mozilla:/firefox/i.test(D),chrome:/chrome/i.test(D)&&!/edge/i.test(D),safari:!/chrome/i.test(D)&&/webkit|safari|khtml/i.test(D),iphone:/iphone/i.test(D),ipod:/ipod/i.test(D),ipad:/ipad/i.test(D),android:/android/i.test(D),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(D),safari_mobile:/iphone|ipod|ipad/i.test(D),opera_mobile:/opera mini|opera mobi/i.test(D),opera_mini:/opera mini/i.test(D),mac:/mac/i.test(D)};function F(e,t){console.log(S.MyQuill.length),console.log(S.MyQuill.imports["formats/"]),y.LinkBlot.blotName="link",y.LinkBlot.tagName="a",y.LinkBlot.showLinkTooltip=t=>{e.showLinkTooltip(t,t.value,Object(B.isEdit)(),G)},y.LinkBlot.hideLinkTooltip=()=>e.hideLinkTooltip(G),S.MyQuill.register(y.LinkBlot,!0),T.FigureBlot.blotName="blockFigure",T.FigureBlot.tagName="figure",T.FigureBlot.quillSetSelection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return G.setSelection(e,t,s.a.sources.USER)},T.FigureBlot.quillDeleteText=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a.sources.USER;return G.deleteText(e,t,o)},T.FigureBlot.quillInsertText=(e,t)=>G.insertText(e,t,s.a.sources.USER),T.FigureBlot.draftSave=()=>Object(B.draftSave)(o,G),S.MyQuill.register(T.FigureBlot,!0),S.MyQuill.register({"modules/syntax":R.InsSyntaxModule,"formats/bold":C.a,"formats/italic":w.a,"formats/indent":g,"formats/list":d.ListContinuer,"formats/list-item":c.a,"formats/code":p.a},!0);var o=!1;U.mobile&&document.body.classList.add("mobile");var i=document.querySelector(".tl_article"),a=document.querySelector(".tl_article_header"),u=document.querySelector(".tl_article_content"),f=document.querySelector("#_bold_button"),D=document.querySelector("#_italic_button"),F=document.querySelector("#_link_button"),N=document.querySelector("#_header_button"),q=document.querySelector("#_subheader_button"),M=document.querySelector("#_quote_button"),A=document.querySelector("#_image_button"),j=document.querySelector("#_embed_button"),G=(document.querySelector(".account"),new S.MyQuill(t,{scrollingContainer:"html, body",readOnly:!0,modules:{syntax:{highlight:e=>O.default.highlightAuto(e).value},clipboard:{matchers:[H("h2",{blockHeader:!0}),H("h5",{blockSubheader:!0}),H("h6",{blockSubheader:!0}),["img",function(e,t){return e.src&&Object(B.sanitize)(e.src,["http","https","data"])?(new r.a).insert({blockFigure:{image:e.src,caption:e.alt||""}}):new r.a}],["video",function(e,t){return e.src&&Object(B.sanitize)(e.src,["http","https","data"])?(new r.a).insert({blockFigure:{video:e.src}}):new r.a}],["br",function(e,t){return console.log("modules.clipboard.matchers.br"),e.classList.contains("inline")?(new r.a).insert({textBreak:!0}):t}]]},keyboard:{bindings:{"required enter":{key:h.a.keys.ENTER,collapsed:!0,shiftKey:null,format:["blockTitle","blockDescription"],suffix:/^$/,handler:function(e,t){console.log("keyboard.bindings.required_enter.handler");var[o]=this.quill.scroll.descendant(v.FieldBlot,e.index);return!(o&&o.next&&o.next.domNode&&!o.next.domNode.textContent)||(this.quill.setSelection(o.next.offset(this.quill.scroll),0,s.a.sources.USER),!1)}},"required tab prev":{key:h.a.keys.TAB,shiftKey:!0,handler:function(e,t){console.log("keyboard.bindings.required_tab_prev.handler");var o=null;if(e.length>0){var i=G.scroll.descendants(l.c,e.index,e.length);if(1!=i.length)return!0;o=i[0]}else[o]=G.scroll.descendant(l.c,e.index);if(null!=o&&null!=o.prev&&o.prev instanceof v.FieldBlot){var n=o.prev.offset(G.scroll),a=o.prev.length();return G.setSelection(n,a>1?a:0,s.a.sources.USER),!1}return!0}},"required tab next":{key:h.a.keys.TAB,shiftKey:!1,handler:function(e,t){console.log("keyboard.bindings.required_tab_next.handler");var o=null;if(e.length>0){var i=G.scroll.descendants(l.c,e.index,e.length);if(1!=i.length)return!0;o=i[0]}else[o]=G.scroll.descendant(l.c,e.index);if(null!=o&&o instanceof v.FieldBlot&&null!=o.next){var n=o.next.offset(G.scroll);if(o.next instanceof v.FieldBlot){var a=o.next.length();G.setSelection(n,a>1?a:0,s.a.sources.USER)}else G.setSelection(n,0,s.a.sources.USER);return!1}return!0}},"no tab":{key:h.a.keys.TAB,shiftKey:null,handler:function(e,t){return console.log("keyboard.bindings.no_tab.handler"),!1}},"detect embed":{key:h.a.keys.ENTER,collapsed:!0,handler:function(t,o){console.log("keyboard.bindings.detect_embed.handler");var[i,n]=G.scroll.line(t.index);if(i){var a,l=i.domNode.textContent.substr(0,n);if(a=l.match(/(^|\s)(https?:\/\/\S+)$/)){var c=a[2];if(G.scroll.descendants(y.LinkBlot,t.index-c.length,c.length).length||G.formatText(t.index-c.length,c.length,"link",c,s.a.sources.USER),!l.substr(0,n-c.length).trim().length&&"P"==i.domNode.tagName){var d=$(c);if(d){var u=i.offset(G.scroll);return G.updateContents((new r.a).retain(u).delete(l.length).insert({blockFigure:d}),s.a.sources.USER),e.hideBlocksTooltip(),!1}}}}return!0}},"divider autofill":{key:h.a.keys.ENTER,collapsed:!0,prefix:/^([-*])\1{2,}$/,handler:function(e,t){console.log("keyboard.bindings.divider_autofill.handler");var[o,i]=G.scroll.line(e.index);if(o&&"P"==o.domNode.tagName){var n=o.offset(G.scroll),a=(new r.a).retain(n).delete(o.length()).insert({blockDivider:!0});return o.next||a.insert("\n"),G.updateContents(a,s.a.sources.USER),!1}return!0}},break:{key:h.a.keys.ENTER,shiftKey:!0,handler:z.bind(null,!0)},enter:{key:h.a.keys.ENTER,handler:z.bind(null,!1)},"detect link":{key:" ",collapsed:!0,handler:function(e){console.log("detectLinkHandler",e);var[t,o]=G.scroll.line(e.index);if(t){var i,n=t.domNode.textContent.substr(0,o);if(i=n.match(/(^|\s)((?:https?|tg):\/\/\S+|www\.\S+)$/)){var a=i[2],r=a.length;"www."==a.substr(0,4)&&(a="http://"+a),G.scroll.descendants(y.LinkBlot,e.index-r,r).length||G.formatText(e.index-r,r,"link",a,s.a.sources.USER)}}return!0}},"cancel placeholder":{key:h.a.keys.ESCAPE,handler:function(e,t){return console.log("keyboard.bindings.cancel_placeholder.handler"),K(),this.quill.updateSelection(s.a.sources.USER),!0}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{list:!1,"code-block":!1,blockquote:!1,header:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query&&null==this.quill.scroll.query("list"))return!0;var o,{length:i}=t.prefix,[n,a]=this.quill.getLine(e.index);if(a>i)return!0;switch(t.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o={type:"ordered",start:Number(t.prefix.slice(0,-1))-1}}this.quill.insertText(e.index," ",s.a.sources.USER),this.quill.history.cutoff(),console.log("keyboard.bindings.list_autofill.handler",e,t);var l=(new r.a).retain(e.index-a).delete(i+1).retain(n.length()-2-a).retain(1,{list:o,start:o.start});console.log("keyboard.bindings.list_autofill.handler",l);var c=this.quill.updateContents(l,s.a.sources.USER);return console.log("keyboard.bindings.list_autofill.handler",c),this.quill.history.cutoff(),this.quill.setSelection(e.index-i,s.a.sources.SILENT),!1}},"pre wrap":{key:192,collapsed:!0,format:{"code-block":!1},prefix:/^``$/,offset:2,handler:function(e,t){console.log("keyboard.bindings.pre_wrap.handler");var o=t.prefix.length,i=e.index-o;this.quill.scroll.deleteAt(i,o),this.quill.formatLine(i,1,"code-block",!0,s.a.sources.USER),this.quill.setSelection(i,s.a.sources.SILENT)}},code:{key:192,handler:function(e,t){if(console.log("keyboard.bindings.code.handler",!t.format),!t.collapsed){var o=G.scroll.descendants(l.c,e.index,e.length);if(o.length>1||1==o.length&&o[0]instanceof _.a)return this.quill.format("code-block",!t.format["code-block"],s.a.sources.USER),!1;if(G.scroll.descendants(b.BreakBlot,e.index,e.length).length)return this.quill.format("code-block",!t.format["code-block"],s.a.sources.USER),!1}if(t.collapsed&&!t.format.code&&!/\s$/.test(t.prefix))return!0;this.quill.format("code",!t.format.code,s.a.sources.USER)}},"figure delete":{key:h.a.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(e,t){console.log("keyboard.bindings.figure_delete.handler");var[o,i]=G.scroll.line(e.index);return!(o&&o.prev&&o.prev instanceof T.FigureBlot)||(t.empty&&G.deleteText(e.index,1,s.a.sources.USER),G.setSelection(o.prev.offset(G.scroll)),!1)}},"field backspace":{key:h.a.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(e,t){console.log("keyboard.bindings.field_backspace.handler");var[o,i]=G.scroll.line(e.index);return!(o&&o.prev&&o.prev instanceof v.FieldBlot&&o.domNode.textContent.length>0)}}}}}}));function H(e,t){return[e,function(e,o){return o.compose((new r.a).retain(o.length(),t))}]}function V(e){var t=function(e){var[t,o]=G.scroll.line(e);return G.getText(e,t.length()-o)}(e);return!t||"\n"==t}function z(e,t,o){console.log("breakHandler",e,t,o);var i,n=t.index;t.length>0&&G.scroll.deleteAt(n,t.length);var a=V(n),r=!1;return[i]=G.scroll.descendant(b.BreakBlot,n),i?(!i.prev||i.prev instanceof b.BreakBlot)&&(G.scroll.deleteAt(--n,1),r=!0):([i]=G.scroll.descendant(b.BreakBlot,n-1),i&&(G.scroll.deleteAt(--n,1),r=!0)),[i]=G.scroll.descendant(x.SingleLineBlot,n),i||r||!e?(G.insertText(n,"\n",s.a.sources.USER),G.setSelection(++n,0,s.a.sources.USER),(o.format.blockHeader||o.format.blockSubheader||o.format.blockBlockquote||o.format.blockPullquote)&&a&&G.formatLine(n,1,{blockHeader:!1,blockSubheader:!1,blockBlockquote:!1,blockPullquote:!1},s.a.sources.USER)):(G.insertEmbed(n,"textBreak",!0,s.a.sources.USER),[i]=G.scroll.descendant(b.BreakBlot,n),!i||i.next||i.prev&&i.prev instanceof b.BreakBlot||(G.insertEmbed(++n,"textBreak",!0,s.a.sources.SILENT),G.setSelection(n,0,s.a.sources.SILENT))),!1}function W(e){var t=null==e?{}:G.getFormat(e),o=!!t.blockDescription,i=!(!t.blockHeader&&!t.blockSubheader),n=!!t["code-block"];if(f.classList.toggle("active",!!t.bold),f.classList.toggle("disabled",o||i||n),D.classList.toggle("active",!!t.italic),D.classList.toggle("disabled",o||i||n),N.classList.toggle("active",!!t.blockHeader),N.classList.toggle("disabled",o),q.classList.toggle("active",!!t.blockSubheader),q.classList.toggle("disabled",o),M.classList.toggle("active",!(!t.blockBlockquote&&!t.blockPullquote)),M.classList.toggle("pullquote",!!t.blockPullquote),M.classList.toggle("disabled",o),null!=e){var a=G.scroll.descendants(y.LinkBlot,e.index,e.length);F.classList.toggle("active",!!a.length)}else F.classList.toggle("active",!1);F.classList.toggle("disabled",n)}function $(e){var t;if((t=e.match(/^(https?):\/\/(www\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/i))||(t=e.match(/^(https?):\/\/(www\.)?youtu\.be\/([a-zA-Z0-9_-]+)/i)))return{embed:"/embed/youtube?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(www\.)?vimeo\.com\/(\d+)/i))return{embed:"/embed/vimeo?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(www\.|mobile\.)?twitter\.com\/(.+)\/status\/(\d+)/i))return{embed:"/embed/twitter?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(t\.me|telegram\.me|telegram\.dog)\/([a-zA-Z0-9_]+)\/(\d+)/i))return{embed:"/embed/telegram?url="+encodeURIComponent(e)};if(t=e.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))return"video/"==t[1].substr(0,6)?{video:e}:{image:e};if(t=e.match(/^(https?):\/\/\S+/i)){var o=document.createElement("a");if(o.href=e,o.pathname.match(/\.(jpe?g|png|gif|mp4)$/i))return"mp4"==t[1]?{video:e}:{image:e}}return!1}function K(){var e=document.querySelector(".placeholder_once");null!==e&&(e.removeAttribute("data-placeholder"),e.classList.remove("placeholder_once","empty"))}function Y(e){e.scroll.descendants(l.c,0,e.scroll.length()).forEach(e=>{if(e.domNode.hasAttribute("data-placeholder")){var t=e.domNode.textContent;e.domNode.classList.toggle("empty",!t)}})}function J(e){var[t,o]=e.scroll.lines();if(t instanceof l.a)e.updateContents((new r.a).insert("\n",{blockTitle:!0}).insert("\n",{blockDescription:!0}),s.a.sources.SILENT);else if(t instanceof E.TitleBlot||e.formatLine(0,1,{blockTitle:!0},s.a.sources.SILENT),o){if(o instanceof l.a){var i=o.offset(e.scroll);e.updateContents((new r.a).retain(i).insert("\n",{blockDescription:!0}),s.a.sources.SILENT)}else if(!(o instanceof L.DescriptionBlot)){var n=o.offset(e.scroll);e.formatLine(n,1,{blockDescription:!0},s.a.sources.SILENT)}}else{var a=e.scroll.length();e.updateContents((new r.a).retain(a).insert("\n",{blockDescription:!0}),s.a.sources.SILENT)}var[,,c]=e.scroll.lines();if(c){var d=c.offset(e.scroll),u=e.scroll.length()-d;e.scroll.descendants(v.FieldBlot,d,u).forEach(t=>{var o=t.offset(e.scroll),i=t.length(),n=t.constructor.blotName;e.formatText(o,i,n,!1,s.a.sources.SILENT)})}else{var f=e.scroll.length();e.insertText(f,"\n",s.a.sources.SILENT)}var g=e.scroll.lines();g.forEach((e,t)=>{"P"==e.domNode.tagName&&(3==g.length&&2==t?e.domNode.setAttribute("data-placeholder","Your story..."):e.domNode.removeAttribute("data-placeholder"))})}function Q(e,t){(t=t||{}).close_btn=t.close_btn||"OK",t.submit_btn=t.submit_btn||!1,t.close=t.close||X,t.submit=t.submit||t.close,X();var o=document.createElement("div");o.classList.add("tl_alert"),o.innerHTML='<main class="tl_alert_message"><section></section><aside class="tl_message_buttons"></aside></main>',o.querySelector("section").innerHTML=e;var i=o.querySelector("aside");if(t.close_btn){var n=document.createElement("button");n.classList.add("button"),n.innerHTML=t.close_btn,n.addEventListener("click",t.close),n.append(i)}if(t.submit_btn){var a=document.createElement("button");a.classList.add("button"),a.innerHTML=t.submit_btn,a.addEventListener("click",function(){o.classList.add("tl_alert_loading"),t.submit()}),a.append(i)}o.append("body")}function X(){var e=document.querySelector(".tl_alert");e&&e.remove()}function Z(e){console.log(Z)}function ee(e){var t=e.querySelector(".prompt_input"),o=e.querySelector(".close");t.onkeydown=null,t.onblur=null,o.onclick=null,e.style.display="",e.classList.remove("tooltip_prompt"),G.focus()}return G.addContainer(e.$tl_link_tooltip),G.addContainer(e.$tl_tooltip),G.addContainer(e.$tl_blocks),G.on(s.a.events.EDITOR_CHANGE,function(t,o){if(t===s.a.events.SELECTION_CHANGE&&G.isEnabled()&&null!=o){!function(t){var[o]=G.scroll.descendant(T.FigureBlot,t.index);G.scroll.descendants(T["FigureBlot"],0,G.scroll.length()).forEach(e=>{o!==e&&e.blur()}),o&&(o.focus(),e.hideFormatTooltip(G),e.hideBlocksTooltip())}(o);var[n,a]=G.scroll.descendant(l.c,o.index);0===o.length?(e.hideFormatTooltip(G),null==n||n instanceof v.FieldBlot||n instanceof m.BlockquoteBlot||n instanceof k.PullquoteBlot||n instanceof _.a||n instanceof c.a||""!==n.domNode.textContent?e.hideBlocksTooltip():e.showBlocksTooltip(o,Object(B.isEdit)(),G)):(null==n||n instanceof E.TitleBlot?e.hideFormatTooltip(G):(e.showFormatTooltip(o,G,Object(B.isEdit)()),W(o)),e.hideBlocksTooltip());var r=G.getFormat(o);i&&i.classList.toggle("title_focused",!(!r.blockTitle&&!r.blockDescription)),K()}}),G.on(s.a.events.TEXT_CHANGE,function(){G.getSelection();J(G),Y(G),K(),Object(B.draftSave)(o,G)}),G.on(s.a.events.SCROLL_OPTIMIZE,function(e){e.forEach(e=>{if("childList"==e.type&&!e.addedNodes.length&&e.removedNodes.length){var t=e.previousSibling,o=e.nextSibling;if(!o&&t&&"BR"==t.tagName&&"inline"==t.className){var i=document.createElement("br");i.className="inline",e.target.appendChild(i)}else!o||!t||"BR"==t.tagName&&"inline"==t.className||"BR"!=o.tagName||"inline"!=o.className||o.nextSibling||o.parentNode&&o.parentNode.removeChild(o)}})}),G.scroll.domNode.setAttribute("dir","auto"),document.addEventListener("click touchstart",function(t){for(var o=t.target;o;){if(o===G.container)return;o=o.parentNode}e.hideFormatTooltip(G),e.hideBlocksTooltip()}),J(G),Y(G),function(){var t={page_id:B.T.pageId};t.save_hash&&(B.T.saveHash=t.save_hash);if(!B.T.pageId&&(i&&i.classList.add("tl_article_edit"),!function(){if(!B.T.pageId)return function(e){try{return localStorage.getItem(e)}catch(e){return!1}}("draft");return!1}()&&t.author_name)){var n;n=t.author_url?{link:t.author_url}:{};var[l]=G.scroll.descendants(L.DescriptionBlot);l&&G.updateContents((new r.a).retain(l.offset()).delete(l.length()).insert(t.author_name,n),s.a.sources.USER)}if(t.auth_alert&&t.short_name){var c="Success! You are now logged in as <b>"+t.short_name.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;").replace(/%/g,"&#37;")+"</b> in this browser.";t.migrate_count>0&&t.migrate_hash?(c+="<br/><br/>",Q(c+="We can also add "+t.migrate_count+" Telegraph page"+(t.migrate_count>1?"s":"")+" from this browser to your account.",{close_btn:"Skip",submit_btn:"Add",submit:function(){Z(t.migrate_hash)}})):Q(c)}o=Object(B.getPageContent)(!0,G),Object(B.updateEditable)(Object(B.isEdit)(),G,e,i,u,a)}(),f.onclick=e=>{console.log("$bold_button.onclick");var t=e.target.classList.contains("active");e.preventDefault(),console.log("$bold_button.onclick",!t),G.format("bold",!t),console.log("$bold_button.onclick",G.getSelection(!0)),G.updateSelection(s.a.sources.API)},D.onclick=e=>{var t=e.target.classList.contains("active");e.preventDefault(),G.format("italic",!t),G.updateSelection(s.a.sources.API)},F.onclick=t=>{var o=t.target.classList.contains("active");t.preventDefault();var i=G.getSelection(!0);o?(G.scroll.descendants(y.LinkBlot,i.index,i.length).forEach(e=>{var t=e.offset(G.scroll),o=e.length();G.formatText(t,o,"link",!1)}),W(i)):function(e,t,o){var i=e.querySelector(".prompt_input"),n=e.querySelector(".close");i.value="",i.setAttribute("placeholder",t),i.onkeydown=t=>{var n=t.which||t.keyCode;if(27==n)ee(e);else if(13==n){var a=i.value;a&&(o&&o(a),t.preventDefault()),ee(e)}},i.onblur=()=>{ee(e)},n.onclick=()=>{ee(e)},e.style.display="",e.classList.add("tooltip_prompt"),i.focus()}(e.$tl_tooltip,"Paste or type a link...",function(e){"#"!=(e=e.trim()).substr(0,1)&&"/"!=e.substr(0,1)&&"http://"!=e.substr(0,7)&&"https://"!=e.substr(0,8)&&"tg://"!=e.substr(0,5)&&"mailto:"!=e.substr(0,7)&&(e=e.indexOf("@")>0?"mailto:"+e:"http://"+e),G.focus(),G.format("link",e),W(i)})},N.onclick=e=>{var t=e.target.classList.contains("active");e.preventDefault();var o=G.getSelection(!0);G.format("blockHeader",!t),G.scroll.descendants(I.HeaderBlot,o.index,o.length).forEach(e=>{var t=e.offset(G.scroll),o=e.length();G.formatText(t,o,{bold:!1,italic:!1,code:!1},s.a.sources.SILENT)}),G.updateSelection(s.a.sources.API)},q.onclick=e=>{var t=e.target.classList.contains("active");e.preventDefault();var o=G.getSelection(!0);G.format("blockSubheader",!t),G.scroll.descendants(P.SubheaderBlot,o.index,o.length).forEach(e=>{var t=e.offset(G.scroll),o=e.length();G.formatText(t,o,{bold:!1,italic:!1,code:!1},s.a.sources.SILENT)}),G.updateSelection(s.a.sources.API)},M.onclick=e=>{var t=e.target,o=t.classList.contains("active"),i=t.classList.contains("pullquote");e.preventDefault();G.getSelection(!0);o?G.format("blockPullquote",!i):G.format("blockBlockquote",!0),G.updateSelection(s.a.sources.API)},A.onclick=()=>{var e=G.container.querySelector("input.ql-image[type=file][data-status=ready]");null==e&&((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("accept",U.safari_mobile?"image/gif, image/jpeg, image/jpg, image/png":"image/gif, image/jpeg, image/jpg, image/png, video/mp4"),e.classList.add("ql-image"),e.addEventListener("change",()=>{if(e&&null!=e.files&&null!=e.files[0]){var t=e.files[0],o=function(){Object(B.showError)("File too big (up to 5 MB allowed)")};!function(e,t){if("image/jpg"==e.type||"image/jpeg"==e.type)return n()(e,o=>{if("error"===o.type)t(e);else if(o.toBlob)o.toBlob(function(e){t(e)},e.type);else{var i=o.toDataURL(e.type),n={type:e.type,base64_data:i.split(",")[1]};t(Object(B.uploadDataToBlob)(n))}},{canvas:!0,orientation:!0});t(e)}(t,t=>{if(t.size>5242880)return o&&o();var i=new FileReader;i.onload=function(t){if(t&&null!==t.target){var o=$(t.target.result);if(o){var i=G.getSelection(!0);G.updateContents((new r.a).retain(i.index).delete(i.length).insert({blockFigure:o}),s.a.sources.USER)}else Object(B.showError)("Invalid file format");e.value="",e.setAttribute("data-status","ready")}},i.readAsDataURL(t)})}}),G.container.appendChild(e)),e.setAttribute("data-status","busy"),e.click()},j.onclick=t=>{var o=G.getSelection(!0),[i]=G.scroll.line(o.index),n=i.domNode;i&&(n.textContent||(n.setAttribute("data-placeholder","Paste a YouTube, Vimeo or Twitter link, and press Enter"),n.classList.add("placeholder_once","empty"),e.hideBlocksTooltip()))},window.addEventListener("scroll resize",()=>{e.tooltipUpdatePosition(e.$tl_tooltip,null,e.formatTTOptions,G),e.tooltipUpdatePosition(e.$tl_link_tooltip,null,e.linkTTOptions,G)}),G}},572:function(e,t,o){var i,n,a;!function(r){"use strict";n=[o(556)],void 0===(a="function"==typeof(i=function(e){var t="undefined"!=typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[],65517:[]}},e.parseMetaData=function(t,o,i,n){n=n||{};var a=this,r=(i=i||{}).maxMetaDataSize||262144;!!("undefined"!=typeof DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice)&&e.readFile(e.blobSlice.call(t,0,r),function(t){if(t.target.error)return console.log(t.target.error),void o(n);var r,l,s,c,d=t.target.result,u=new DataView(d),f=2,g=u.byteLength-4,p=f;if(65496===u.getUint16(0)){for(;f<g&&((r=u.getUint16(f))>=65504&&r<=65519||65534===r);){if(f+(l=u.getUint16(f+2)+2)>u.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(s=e.metaDataParsers.jpeg[r])for(c=0;c<s.length;c+=1)s[c].call(a,u,f,l,n,i);p=f+=l}!i.disableImageHead&&p>6&&(d.slice?n.imageHead=d.slice(0,p):n.imageHead=new Uint8Array(d).subarray(0,p))}else console.log("Invalid JPEG file: Missing JPEG marker.");o(n)},"readAsArrayBuffer")||o(n)},e.hasMetaOption=function(e){return e&&e.meta};var o=e.transform;e.transform=function(t,i,n,a,r){e.hasMetaOption(i)?e.parseMetaData(a,function(r){o.call(e,t,i,n,a,r)},i,r):o.apply(e,arguments)}})?i.apply(t,n):i)||(e.exports=a)}()},645:function(e,t,o){var i,n,a;!function(r){"use strict";n=[o(556)],void 0===(a="function"==typeof(i=function(e){var t=e.transform;e.transform=function(o,i,n,a,r){t.call(e,e.scale(o,i,r),i,n,a,r)},e.transformCoordinates=function(){},e.getTransformedOptions=function(e,t){var o,i,n,a,r=t.aspectRatio;if(!r)return t;for(i in o={},t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i]);return o.crop=!0,(n=e.naturalWidth||e.width)/(a=e.naturalHeight||e.height)>r?(o.maxWidth=a*r,o.maxHeight=a):(o.maxWidth=n,o.maxHeight=n/r),o},e.renderImageToCanvas=function(e,t,o,i,n,a,r,l,s,c){return e.getContext("2d").drawImage(t,o,i,n,a,r,l,s,c),e},e.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},e.scale=function(t,o,i){o=o||{};var n,a,r,l,s,c,d,u,f,g,p,h=document.createElement("canvas"),m=t.getContext||e.hasCanvasOption(o)&&h.getContext,b=t.naturalWidth||t.width,v=t.naturalHeight||t.height,y=b,S=v;function k(){var e=Math.max((r||y)/y,(l||S)/S);e>1&&(y*=e,S*=e)}function x(){var e=Math.min((n||y)/y,(a||S)/S);e<1&&(y*=e,S*=e)}if(m&&(d=(o=e.getTransformedOptions(t,o,i)).left||0,u=o.top||0,o.sourceWidth?(s=o.sourceWidth,void 0!==o.right&&void 0===o.left&&(d=b-s-o.right)):s=b-d-(o.right||0),o.sourceHeight?(c=o.sourceHeight,void 0!==o.bottom&&void 0===o.top&&(u=v-c-o.bottom)):c=v-u-(o.bottom||0),y=s,S=c),n=o.maxWidth,a=o.maxHeight,r=o.minWidth,l=o.minHeight,m&&n&&a&&o.crop?(y=n,S=a,(p=s/c-n/a)<0?(c=a*s/n,void 0===o.top&&void 0===o.bottom&&(u=(v-c)/2)):p>0&&(s=n*c/a,void 0===o.left&&void 0===o.right&&(d=(b-s)/2))):((o.contain||o.cover)&&(r=n=n||r,l=a=a||l),o.cover?(x(),k()):(k(),x())),m){if((f=o.pixelRatio)>1&&(h.style.width=y+"px",h.style.height=S+"px",y*=f,S*=f,h.getContext("2d").scale(f,f)),(g=o.downsamplingRatio)>0&&g<1&&y<s&&S<c)for(;s*g>y;)h.width=s*g,h.height=c*g,e.renderImageToCanvas(h,t,d,u,s,c,0,0,h.width,h.height),d=0,u=0,s=h.width,c=h.height,(t=document.createElement("canvas")).width=s,t.height=c,e.renderImageToCanvas(t,h,0,0,s,c,0,0,s,c);return h.width=y,h.height=S,e.transformCoordinates(h,o),e.renderImageToCanvas(h,t,d,u,s,c,0,0,y,S)}return t.width=y,t.height=S,t}})?i.apply(t,n):i)||(e.exports=a)}()},646:function(e,t,o){var i,n,a;!function(r){"use strict";n=[o(556),o(572)],void 0===(a="function"==typeof(i=function(e){e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(t,o,i){if(i&&!(o+i>t.byteLength))return e.createObjectURL(new Blob([t.buffer.slice(o,o+i)]));console.log("Invalid Exif data: Invalid thumbnail data.")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,o){return e.getUint16(t,o)},size:2},4:{getValue:function(e,t,o){return e.getUint32(t,o)},size:4},5:{getValue:function(e,t,o){return e.getUint32(t,o)/e.getUint32(t+4,o)},size:8},9:{getValue:function(e,t,o){return e.getInt32(t,o)},size:4},10:{getValue:function(e,t,o){return e.getInt32(t,o)/e.getInt32(t+4,o)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,o,i,n,a,r){var l,s,c,d,u,f,g=e.exifTagTypes[n];if(g){if(!((s=(l=g.size*a)>4?o+t.getUint32(i+8,r):i+8)+l>t.byteLength)){if(1===a)return g.getValue(t,s,r);for(c=[],d=0;d<a;d+=1)c[d]=g.getValue(t,s+d*g.size,r);if(g.ascii){for(u="",d=0;d<c.length&&"\0"!==(f=c[d]);d+=1)u+=f;return u}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},e.parseExifTag=function(t,o,i,n,a){var r=t.getUint16(i,n);a.exif[r]=e.getExifValue(t,o,i,t.getUint16(i+2,n),t.getUint32(i+4,n),n)},e.parseExifTags=function(e,t,o,i,n){var a,r,l;if(o+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((r=o+2+12*(a=e.getUint16(o,i)))+4>e.byteLength)){for(l=0;l<a;l+=1)this.parseExifTag(e,t,o+2+12*l,i,n);return e.getUint32(r,i)}console.log("Invalid Exif data: Invalid directory size.")}},e.parseExifData=function(t,o,i,n,a){if(!a.disableExif){var r,l,s,c=o+10;if(1165519206===t.getUint32(o+4))if(c+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(o+8)){switch(t.getUint16(c)){case 18761:r=!0;break;case 19789:r=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(c+2,r)?(l=t.getUint32(c+4,r),n.exif=new e.ExifMap,(l=e.parseExifTags(t,c,c+l,r,n))&&!a.disableExifThumbnail&&(s={exif:{}},l=e.parseExifTags(t,c,c+l,r,s),s.exif[513]&&(n.exif.Thumbnail=e.getExifThumbnail(t,c+s.exif[513],s.exif[514]))),n.exif[34665]&&!a.disableExifSub&&e.parseExifTags(t,c,c+n.exif[34665],r,n),n.exif[34853]&&!a.disableExifGps&&e.parseExifTags(t,c,c+n.exif[34853],r,n)):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)})?i.apply(t,n):i)||(e.exports=a)}()},647:function(e,t,o){var i,n,a;!function(r){"use strict";n=[o(556),o(572)],void 0===(a="function"==typeof(i=function(e){e.IptcMap=function(){return this},e.IptcMap.prototype.map={ObjectName:5},e.IptcMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.parseIptcTags=function(e,t,o,i){function n(e,t,o){for(var i="",n=t;n<t+o;n++)i+=String.fromCharCode(e.getUint8(n));return i}for(var a,r,l,s=t;s<t+o;)28===e.getUint8(s)&&2===e.getUint8(s+1)&&(l=e.getUint8(s+2))in i.iptc.tags&&(r=e.getInt16(s+3),a=n(e,s+5,r),Object.prototype.hasOwnProperty.call(i.iptc,l)?i.iptc[l]instanceof Array?i.iptc[l].push(a):i.iptc[l]=[i.iptc[l],a]:i.iptc[l]=a),s++},e.parseIptcData=function(t,o,i,n,a){if(!a.disableIptc){for(var r=o+i,l=function(e,t){return 943868237===e.getUint32(t)&&1028===e.getUint16(t+4)};o+8<r;){if(l(t,o)){var s=t.getUint8(o+7);s%2!=0&&(s+=1),0===s&&(s=4);var c=o+8+s;if(c>r){console.log("Invalid IPTC data: Invalid segment offset.");break}var d=t.getUint16(o+6+s);if(o+d>r){console.log("Invalid IPTC data: Invalid segment size.");break}return n.iptc=new e.IptcMap,e.parseIptcTags(t,c,d,n)}o++}console.log("No IPTC data at this offset - could be XMP")}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData)})?i.apply(t,n):i)||(e.exports=a)}()},687:function(e,t,o){"use strict";o(641)("bold",function(e){return function(){return e(this,"b","","")}})},688:function(e,t,o){e.exports=o(556),o(645),o(572),o(689),o(646),o(690),o(647),o(691),o(692)},689:function(e,t,o){var i,n,a;!function(r){"use strict";n=[o(556),o(572)],void 0===(a="function"==typeof(i=function(e){"undefined"!=typeof fetch&&"undefined"!=typeof Request&&(e.fetchBlob=function(t,o,i){if(e.hasMetaOption(i))return fetch(new Request(t,i)).then(function(e){return e.blob()}).then(o).catch(function(e){console.log(e),o()});o()})})?i.apply(t,n):i)||(e.exports=a)}()},690:function(e,t,o){var i,n,a;!function(r){"use strict";n=[o(556),o(646)],void 0===(a="function"==typeof(i=function(e){e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t)return;return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t)return;return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t)return;return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,o=e.tags,i=e.map;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[o[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,o={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this.tags[e])&&(o[t]=this.getText(t));return o}})?i.apply(t,n):i)||(e.exports=a)}()},691:function(e,t,o){var i,n,a;!function(r){"use strict";n=[o(556),o(647)],void 0===(a="function"==typeof(i=function(e){e.IptcMap.prototype.tags={3:"ObjectType",4:"ObjectAttribute",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectRef",15:"Category",20:"SupplCategory",22:"FixtureID",25:"Keywords",26:"ContentLocCode",27:"ContentLocName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"RefService",47:"RefDate",50:"RefNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"CountryName",103:"OrigTransRef",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",122:"WriterEditor",130:"ImageType",131:"ImageOrientation",135:"LanguageID"},e.IptcMap.prototype.getText=function(e){var t=this.get(e);return String(t)},function(e){var t,o=e.tags,i=e.map||{};for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[o[t]]=t)}(e.IptcMap.prototype),e.IptcMap.prototype.getAll=function(){var e,t,o={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this.tags[e])&&(o[t]=this.getText(t));return o}})?i.apply(t,n):i)||(e.exports=a)}()},692:function(e,t,o){var i,n,a;!function(r){"use strict";n=[o(556),o(645),o(572)],void 0===(a="function"==typeof(i=function(e){var t=e.hasCanvasOption,o=e.hasMetaOption,i=e.transformCoordinates,n=e.getTransformedOptions;e.hasCanvasOption=function(o){return!!o.orientation||t.call(e,o)},e.hasMetaOption=function(t){return t&&!0===t.orientation||o.call(e,t)},e.transformCoordinates=function(t,o){i.call(e,t,o);var n=t.getContext("2d"),a=t.width,r=t.height,l=t.style.width,s=t.style.height,c=o.orientation;if(c&&!(c>8))switch(c>4&&(t.width=r,t.height=a,t.style.width=s,t.style.height=l),c){case 2:n.translate(a,0),n.scale(-1,1);break;case 3:n.translate(a,r),n.rotate(Math.PI);break;case 4:n.translate(0,r),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-r);break;case 7:n.rotate(.5*Math.PI),n.translate(a,-r),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-a,0)}},e.getTransformedOptions=function(t,o,i){var a,r,l=n.call(e,t,o),s=l.orientation;if(!0===s&&i&&i.exif&&(s=i.exif.get("Orientation")),!s||s>8||1===s)return l;for(r in a={},l)Object.prototype.hasOwnProperty.call(l,r)&&(a[r]=l[r]);switch(a.orientation=s,s){case 2:a.left=l.right,a.right=l.left;break;case 3:a.left=l.right,a.top=l.bottom,a.right=l.left,a.bottom=l.top;break;case 4:a.top=l.bottom,a.bottom=l.top;break;case 5:a.left=l.top,a.top=l.left,a.right=l.bottom,a.bottom=l.right;break;case 6:a.left=l.top,a.top=l.right,a.right=l.bottom,a.bottom=l.left;break;case 7:a.left=l.bottom,a.top=l.right,a.right=l.top,a.bottom=l.left;break;case 8:a.left=l.bottom,a.top=l.left,a.right=l.top,a.bottom=l.right}return a.orientation>4&&(a.maxWidth=l.maxHeight,a.maxHeight=l.maxWidth,a.minWidth=l.minHeight,a.minHeight=l.minWidth,a.sourceWidth=l.sourceHeight,a.sourceHeight=l.sourceWidth),a}})?i.apply(t,n):i)||(e.exports=a)}()}}]);