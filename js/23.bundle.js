(window.webpackJsonp=window.webpackJsonp||[]).push([[23,9,30,31,32,33,34,37,38,39,40,41,45,46,47,48,50,51,52],{102:function(e,t,o){"use strict";var i=o(78);class n extends i.a{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}n.blotName="bold",n.tagName=["STRONG","B"],t.a=n},115:function(e,t,o){"use strict";o.r(t),o.d(t,"EditorTooltipComponent",(function(){return l}));var i=o(32),n=o(13),r=o(51),a=o(68),s=function(e,t,o,i){var n,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,o,a):n(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};let l=class extends i.a{constructor(){super(r.a,!1),this.html=n.e,this.linkTTOptions={padding:7,position:"bottom",depend:this.$tl_tooltip,dependPadding:10},this.formatTTOptions={padding:10,position:a.browser.mobile?"bottom":"top",minDelta:5}}connectedCallback(){super.connectedCallback(),this.$tl_link_tooltip=this.querySelector("#_tl_link_tooltip")||document.createElement("div"),this.$tl_tooltip=this.querySelector("#_tl_tooltip")||document.createElement("div"),this.$tl_blocks=this.querySelector("#_tl_blocks")||document.createElement("div"),this.$bold_button=this.querySelector("#_bold_button")||document.createElement("div"),this.$italic_button=this.querySelector("#_italic_button")||document.createElement("div"),this.$link_button=this.querySelector("#_link_button")||document.createElement("div"),this.$header_button=this.querySelector("#_header_button")||document.createElement("div"),this.$subheader_button=this.querySelector("#_subheader_button")||document.createElement("div"),this.$quote_button=this.querySelector("#_quote_button")||document.createElement("div"),this.$strikeButton=this.querySelector("#_strike_button")||document.createElement("div"),this.$image_button=this.querySelector("#_image_button")||document.createElement("div"),this.$embed_button=this.querySelector("#_embed_button")||document.createElement("div")}render(){return this.html`
      <div id="_tl_link_tooltip" class="tl_link_tooltip"></div>
      <div id="_tl_tooltip" class="tl_tooltip" @mouseover=${this.handleMouseover.bind(this)} @mouseout=${this.handleMouseout.bind(this)}>
        <div class="buttons">
          <span class="button_hover"></span>
          <div class="button_group">
            <button id="_bold_button"></button>
            <button id="_italic_button"></button>
            <button id="_link_button"></button>
          </div>
          <div class="button_group">
            <button id="_header_button"></button>
            <button id="_subheader_button"></button>
            <button id="_quote_button"></button>
          </div>
          <div class="button_group">
            <button id="_strike_button" class="tt-icon-btn">
            ${n.i`
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-strikethrough" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
              <line x1="5" y1="12" x2="19" y2="12" />
              <path d="M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7" />
              <path d="M16.5 16a3.5 3.5 0 0 1 -3.5 3h-1.5a4 2 0 0 1 -4 -1.5" />
            </svg>
              `}
            </button>
          </div>
        </div>
        <div class="prompt">
          <span class="close"></span>
          <div class="prompt_input_wrap"><input type="url" class="prompt_input" /></div>
        </div>
      </div>
      <div id="_tl_blocks" class="tl_blocks">
        <div class="buttons">
          <button id="_image_button"></button>
          <button id="_embed_button"></button>
        </div>
      </div>
    `}handleMouseover(e){let t=e.target;e instanceof MouseEvent&&"BUTTON"==(null==t?void 0:t.tagName)&&!t.classList.contains("disabled")&&(this.$tl_tooltip.setAttribute("data-hover",t.id),this.$tl_tooltip.classList.add("hover"),setTimeout(()=>{this.$tl_tooltip.classList.add("hover_anim")},1),clearTimeout(this.$tl_tooltip.to))}handleMouseout(e){"BUTTON"==e.target.tagName&&(this.$tl_tooltip.classList.remove("hover"),this.$tl_tooltip.to=setTimeout(()=>{this.$tl_tooltip.classList.remove("hover_anim")},70))}tooltipUpdatePosition(e,t,o,i){if(o=o||{padding:10,position:"top"},null==(t=t||e._range||null))return;let n=i.getBounds(t),r=i.container.getBoundingClientRect(),a={width:e.offsetWidth,height:e.offsetHeight},s=window.outerWidth,l=window.outerHeight,c=document.body.scrollTop,d=9,u=c+9,h=s-a.width-9,p=c+l-a.height-9;a.left=n.left+n.width/2-a.width/2;let f,g=r.left+a.left;if(g<d?a.left=d-r.left:g>h&&(a.left=h-r.left),"top"==o.position){a.top=n.top-a.height-o.padding,f=!1,r.top+a.top<u&&(a.top=n.bottom+o.padding,f=!0)}else if("bottom"==o.position){let e=!1;a.top=n.bottom+o.padding,(e=this.isOverElement(a,o.depend,o.dependPadding))&&(a.top=e.bottom+o.dependPadding),f=!0,r.top+(a.top||0)>p&&(a.top=n.top-a.height-o.padding,(e=this.isOverElement(a,o.depend,o.dependPadding))&&(a.top=e.top-a.height-o.dependPadding),f=!1)}a.left=Math.round(a.left),a.top=Math.round(a.top||0),e._range=t,o.minDelta&&Math.abs(a.left-e._left)<o.minDelta&&Math.abs(a.top-e._top)<o.minDelta||(e._left=a.left,e._top=a.top,e.style.left=a.left+"px",e.style.top=a.top+"px",e.classList.toggle("bottom",f))}isOverElement(e,t,o){if(!t||!t.classList.contains("shown"))return!1;e.bottom=e.top+e.height,e.right=e.left+e.width;let i={_left:t.offsetLeft,_top:t.offsetTop},n={top:i._top,bottom:i._top+t.offsetHeight,left:i._left,right:i._left+t.offsetWidth};return!(e.left-n.right>=o||n.left-e.right>=o||e.top-n.bottom>=o||n.top-e.bottom>=o)&&n}hideBlocksTooltip(){this.$tl_blocks.classList.remove("shown")}showFormatTooltip(e,t,o){o&&(this.$tl_tooltip.classList.remove("tooltip_prompt"),this.tooltipUpdatePosition(this.$tl_tooltip,e,this.formatTTOptions,t),this.$tl_tooltip.classList.contains("move_anim")||setTimeout(()=>{this.$tl_tooltip.classList.add("move_anim")},10),this.$tl_tooltip.classList.contains("shown")?this.tooltipUpdatePosition(this.$tl_link_tooltip,null,this.linkTTOptions,t):setTimeout(()=>{this.$tl_tooltip.classList.add("shown"),this.tooltipUpdatePosition(this.$tl_link_tooltip,null,this.linkTTOptions,t)},10))}hideFormatTooltip(e){this.$tl_tooltip.classList.remove("move_anim","shown"),this.tooltipUpdatePosition(this.$tl_link_tooltip,null,this.linkTTOptions,e)}showBlocksTooltip(e,t,o){t&&(this.$tl_blocks.classList.add("shown"),this.blocksUpdatePosition(e,o))}blocksUpdatePosition(e,t){if(void 0===e&&(e=t.getSelection()),null==e||!t)return;let o=t.getBounds(e);this.$tl_blocks.style.top=o.top+o.height/2+"px"}showLinkTooltip(e,t,o,i){if(!o)return;let n={index:e.offset(i.scroll),length:e.length()};this.$tl_link_tooltip.textContent=t,this.tooltipUpdatePosition(this.$tl_link_tooltip,n,this.linkTTOptions,i),this.$tl_link_tooltip.classList.contains("move_anim")||setTimeout(()=>{this.$tl_link_tooltip.classList.add("move_anim")},1),this.$tl_link_tooltip.classList.contains("shown")||setTimeout(()=>{this.$tl_link_tooltip.classList.add("shown")},10)}hideLinkTooltip(e){this.$tl_link_tooltip.classList.remove("move_anim","shown")}};l=s([Object(i.b)("inscriptum-editor-tooltip")],l)},117:function(e,t,o){var i,n,r;!function(a){"use strict";n=[o(62)],void 0===(r="function"==typeof(i=function(e){var t=e.transform;e.transform=function(o,i,n,r,a){t.call(e,e.scale(o,i,a),i,n,r,a)},e.transformCoordinates=function(){},e.getTransformedOptions=function(e,t){var o,i,n,r,a=t.aspectRatio;if(!a)return t;for(i in o={},t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i]);return o.crop=!0,(n=e.naturalWidth||e.width)/(r=e.naturalHeight||e.height)>a?(o.maxWidth=r*a,o.maxHeight=r):(o.maxWidth=n,o.maxHeight=n/a),o},e.renderImageToCanvas=function(e,t,o,i,n,r,a,s,l,c,d){var u=e.getContext("2d");return!1===d.imageSmoothingEnabled?u.imageSmoothingEnabled=!1:d.imageSmoothingQuality&&(u.imageSmoothingQuality=d.imageSmoothingQuality),u.drawImage(t,o,i,n,r,a,s,l,c),e},e.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},e.scale=function(t,o,i){o=o||{};var n,r,a,s,l,c,d,u,h,p,f,g=document.createElement("canvas"),m=t.getContext||e.hasCanvasOption(o)&&g.getContext,b=t.naturalWidth||t.width,v=t.naturalHeight||t.height,y=b,S=v;function E(){var e=Math.max((a||y)/y,(s||S)/S);e>1&&(y*=e,S*=e)}function A(){var e=Math.min((n||y)/y,(r||S)/S);e<1&&(y*=e,S*=e)}if(m&&(d=(o=e.getTransformedOptions(t,o,i)).left||0,u=o.top||0,o.sourceWidth?(l=o.sourceWidth,void 0!==o.right&&void 0===o.left&&(d=b-l-o.right)):l=b-d-(o.right||0),o.sourceHeight?(c=o.sourceHeight,void 0!==o.bottom&&void 0===o.top&&(u=v-c-o.bottom)):c=v-u-(o.bottom||0),y=l,S=c),n=o.maxWidth,r=o.maxHeight,a=o.minWidth,s=o.minHeight,m&&n&&r&&o.crop?(y=n,S=r,(f=l/c-n/r)<0?(c=r*l/n,void 0===o.top&&void 0===o.bottom&&(u=(v-c)/2)):f>0&&(l=n*c/r,void 0===o.left&&void 0===o.right&&(d=(b-l)/2))):((o.contain||o.cover)&&(a=n=n||a,s=r=r||s),o.cover?(A(),E()):(E(),A())),m){if((h=o.pixelRatio)>1&&(g.style.width=y+"px",g.style.height=S+"px",y*=h,S*=h,g.getContext("2d").scale(h,h)),(p=o.downsamplingRatio)>0&&p<1&&y<l&&S<c)for(;l*p>y;)g.width=l*p,g.height=c*p,e.renderImageToCanvas(g,t,d,u,l,c,0,0,g.width,g.height,o),d=0,u=0,l=g.width,c=g.height,(t=document.createElement("canvas")).width=l,t.height=c,e.renderImageToCanvas(t,g,0,0,l,c,0,0,l,c,o);return g.width=y,g.height=S,e.transformCoordinates(g,o),e.renderImageToCanvas(g,t,d,u,l,c,0,0,y,S,o)}return t.width=y,t.height=S,t}})?i.apply(t,n):i)||(e.exports=r)}()},118:function(e,t,o){var i,n,r;!function(a){"use strict";n=[o(62),o(77)],void 0===(r="function"==typeof(i=function(e){e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(t,o,i){if(i&&!(o+i>t.byteLength))return e.createObjectURL(new Blob([t.buffer.slice(o,o+i)]));console.log("Invalid Exif data: Invalid thumbnail data.")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,o){return e.getUint16(t,o)},size:2},4:{getValue:function(e,t,o){return e.getUint32(t,o)},size:4},5:{getValue:function(e,t,o){return e.getUint32(t,o)/e.getUint32(t+4,o)},size:8},9:{getValue:function(e,t,o){return e.getInt32(t,o)},size:4},10:{getValue:function(e,t,o){return e.getInt32(t,o)/e.getInt32(t+4,o)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,o,i,n,r,a){var s,l,c,d,u,h,p=e.exifTagTypes[n];if(p){if(!((l=(s=p.size*r)>4?o+t.getUint32(i+8,a):i+8)+s>t.byteLength)){if(1===r)return p.getValue(t,l,a);for(c=[],d=0;d<r;d+=1)c[d]=p.getValue(t,l+d*p.size,a);if(p.ascii){for(u="",d=0;d<c.length&&"\0"!==(h=c[d]);d+=1)u+=h;return u}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},e.parseExifTag=function(t,o,i,n){return{number:t.getUint16(i,n),value:e.getExifValue(t,o,i,t.getUint16(i+2,n),t.getUint32(i+4,n),n)}},e.parseExifTags=function(e,t,o,i,n){var r,a,s,l,c;if(o+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((a=o+2+12*(r=e.getUint16(o,i)))+4>e.byteLength)){for(s=0;s<r;s+=1)l=o+2+12*s,c=this.parseExifTag(e,t,l,i,n),n.exif[c.number]=c.value,n.exifOffsets&&(n.exifOffsets[c.number]=l);return e.getUint32(a,i)}console.log("Invalid Exif data: Invalid directory size.")}},e.parseExifData=function(t,o,i,n,r){if(!r.disableExif){var a,s,l,c=o+10;if(1165519206===t.getUint32(o+4))if(c+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(o+8)){switch(t.getUint16(c)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(c+2,a)?(s=t.getUint32(c+4,a),n.exif=new e.ExifMap,r.disableExifOffsets||(n.exifOffsets=new e.ExifMap,n.exifTiffOffset=c,n.exifLittleEndian=a),(s=e.parseExifTags(t,c,c+s,a,n))&&!r.disableExifThumbnail&&(l={exif:{}},s=e.parseExifTags(t,c,c+s,a,l),l.exif[513]&&(n.exif.Thumbnail=e.getExifThumbnail(t,c+l.exif[513],l.exif[514]))),n.exif[34665]&&!r.disableExifSub&&e.parseExifTags(t,c,c+n.exif[34665],a,n),n.exif[34853]&&!r.disableExifGps&&e.parseExifTags(t,c,c+n.exif[34853],a,n)):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.exifWriters={274:function(e,t,o){return new DataView(e,t.exifOffsets[274]+8,2).setUint16(0,o,t.exifLittleEndian),e}},e.writeExifData=function(t,o,i,n){e.exifWriters[o.exif.map[i]](t,o,n)}})?i.apply(t,n):i)||(e.exports=r)}()},119:function(e,t,o){var i,n,r;!function(a){"use strict";n=[o(62),o(77)],void 0===(r="function"==typeof(i=function(e){e.IptcMap=function(){return this},e.IptcMap.prototype.map={ObjectName:5},e.IptcMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.parseIptcTags=function(e,t,o,i){function n(e,t,o){for(var i="",n=t;n<t+o;n++)i+=String.fromCharCode(e.getUint8(n));return i}for(var r,a,s,l=t;l<t+o;)28===e.getUint8(l)&&2===e.getUint8(l+1)&&(s=e.getUint8(l+2))in i.iptc.tags&&(a=e.getInt16(l+3),r=n(e,l+5,a),Object.prototype.hasOwnProperty.call(i.iptc,s)?i.iptc[s]instanceof Array?i.iptc[s].push(r):i.iptc[s]=[i.iptc[s],r]:i.iptc[s]=r),l++},e.parseIptcData=function(t,o,i,n,r){if(!r.disableIptc){for(var a=o+i,s=function(e,t){return 943868237===e.getUint32(t)&&1028===e.getUint16(t+4)};o+8<a;){if(s(t,o)){var l=t.getUint8(o+7);l%2!=0&&(l+=1),0===l&&(l=4);var c=o+8+l;if(c>a){console.log("Invalid IPTC data: Invalid segment offset.");break}var d=t.getUint16(o+6+l);if(o+d>a){console.log("Invalid IPTC data: Invalid segment size.");break}return n.iptc=new e.IptcMap,e.parseIptcTags(t,c,d,n)}o++}console.log("No IPTC data at this offset - could be XMP")}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData)})?i.apply(t,n):i)||(e.exports=r)}()},129:function(e,t,o){"use strict";var i=o(102);class n extends i.a{}n.blotName="italic",n.tagName=["EM","I"],t.a=n},141:function(e,t,o){e.exports=o(62),o(117),o(77),o(154),o(118),o(155),o(119),o(156),o(157)},142:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(61),n=o.n(i);class r extends n.a.Attributor.Class{add(e,t){if("+1"===t||"-1"===t){let o=this.value(e)||0;t="+1"===t?o+1:o-1}return 0===t?(this.remove(e),!0):super.add(e,t)}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t))}value(e){return parseInt(super.value(e))||void 0}}let a=new r("indent","ql-indent",{scope:n.a.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]})},143:function(e,t,o){"use strict";var i=o(78);class n extends i.a{}n.blotName="strike",n.tagName="S",t.a=n},154:function(e,t,o){var i,n,r;!function(a){"use strict";n=[o(62),o(77)],void 0===(r="function"==typeof(i=function(e){"undefined"!=typeof fetch&&"undefined"!=typeof Request?e.fetchBlob=function(t,o,i){e.hasMetaOption(i)?fetch(new Request(t,i)).then((function(e){return e.blob()})).then(o).catch((function(e){console.log(e),o()})):o()}:"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof ProgressEvent&&(e.fetchBlob=function(t,o,i){if(e.hasMetaOption(i)){i=i||{};var n=new XMLHttpRequest;n.open(i.method||"GET",t),i.headers&&Object.keys(i.headers).forEach((function(e){n.setRequestHeader(e,i.headers[e])})),n.withCredentials="include"===i.credentials,n.responseType="blob",n.onload=function(){o(n.response)},n.onerror=n.onabort=n.ontimeout=function(e){console.log(e),o()},n.send(i.body)}else o()})})?i.apply(t,n):i)||(e.exports=r)}()},155:function(e,t,o){var i,n,r;!function(a){"use strict";n=[o(62),o(118)],void 0===(r="function"==typeof(i=function(e){e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t)return;return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t)return;return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t)return;return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,o=e.tags,i=e.map;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[o[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,o={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this.tags[e])&&(o[t]=this.getText(t));return o}})?i.apply(t,n):i)||(e.exports=r)}()},156:function(e,t,o){var i,n,r;!function(a){"use strict";n=[o(62),o(119)],void 0===(r="function"==typeof(i=function(e){e.IptcMap.prototype.tags={3:"ObjectType",4:"ObjectAttribute",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectRef",15:"Category",20:"SupplCategory",22:"FixtureID",25:"Keywords",26:"ContentLocCode",27:"ContentLocName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"RefService",47:"RefDate",50:"RefNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"CountryName",103:"OrigTransRef",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",122:"WriterEditor",130:"ImageType",131:"ImageOrientation",135:"LanguageID"},e.IptcMap.prototype.getText=function(e){var t=this.get(e);return String(t)},function(e){var t,o=e.tags,i=e.map||{};for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[o[t]]=t)}(e.IptcMap.prototype),e.IptcMap.prototype.getAll=function(){var e,t,o={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this.tags[e])&&(o[t]=this.getText(t));return o}})?i.apply(t,n):i)||(e.exports=r)}()},157:function(e,t,o){var i,n,r;!function(a){"use strict";n=[o(62),o(117),o(77)],void 0===(r="function"==typeof(i=function(e){var t=e.hasCanvasOption,o=e.hasMetaOption,i=e.transformCoordinates,n=e.getTransformedOptions;r=document.createElement("img"),r.onload=function(){e.orientation=1===r.width&&2===r.height},r.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",e.hasCanvasOption=function(o){return!0==!!o.orientation&&!e.orientation||o.orientation>1&&o.orientation<9||t.call(e,o)},e.hasMetaOption=function(t){return t&&!0===t.orientation&&!e.orientation||o.call(e,t)},e.transformCoordinates=function(t,o){i.call(e,t,o);var n=t.getContext("2d"),r=t.width,a=t.height,s=t.style.width,l=t.style.height,c=o.orientation;if(c>1&&c<9)switch(c>4&&(t.width=a,t.height=r,t.style.width=l,t.style.height=s),c){case 2:n.translate(r,0),n.scale(-1,1);break;case 3:n.translate(r,a),n.rotate(Math.PI);break;case 4:n.translate(0,a),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-a);break;case 7:n.rotate(.5*Math.PI),n.translate(r,-a),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-r,0)}},e.getTransformedOptions=function(t,o,i){var r,a,s=n.call(e,t,o),l=s.orientation;if(!0===l){if(e.orientation)return s;l=i&&i.exif&&i.exif.get("Orientation")}if(!(l>1&&l<9))return s;for(a in r={},s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a]);switch(r.orientation=l,l){case 2:r.left=s.right,r.right=s.left;break;case 3:r.left=s.right,r.top=s.bottom,r.right=s.left,r.bottom=s.top;break;case 4:r.top=s.bottom,r.bottom=s.top;break;case 5:r.left=s.top,r.top=s.left,r.right=s.bottom,r.bottom=s.right;break;case 6:r.left=s.top,r.top=s.right,r.right=s.bottom,r.bottom=s.left;break;case 7:r.left=s.bottom,r.top=s.right,r.right=s.top,r.bottom=s.left;break;case 8:r.left=s.bottom,r.top=s.left,r.right=s.top,r.bottom=s.right}return r.orientation>4&&(r.maxWidth=s.maxHeight,r.maxHeight=s.maxWidth,r.minWidth=s.minHeight,r.minHeight=s.minWidth,r.sourceWidth=s.sourceHeight,r.sourceHeight=s.sourceWidth),r};var r})?i.apply(t,n):i)||(e.exports=r)}()},62:function(e,t,o){var i;!function(n){"use strict";function r(e,t,o){var i,n=document.createElement("img");return n.onerror=function(i){return r.onerror(n,i,e,t,o)},n.onload=function(i){return r.onload(n,i,e,t,o)},"string"==typeof e?(r.fetchBlob(e,(function(t){t&&r.isInstanceOf("Blob",t)?(e=t,i=r.createObjectURL(e)):(i=e,o&&o.crossOrigin&&(n.crossOrigin=o.crossOrigin)),n.src=i}),o),n):r.isInstanceOf("Blob",e)||r.isInstanceOf("File",e)?(i=n._objectURL=r.createObjectURL(e))?(n.src=i,n):r.readFile(e,(function(e){var o=e.target;o&&o.result?n.src=o.result:t&&t(e)})):void 0}var a=n.createObjectURL&&n||n.URL&&URL.revokeObjectURL&&URL||n.webkitURL&&webkitURL;function s(e,t){!e._objectURL||t&&t.noRevoke||(r.revokeObjectURL(e._objectURL),delete e._objectURL)}r.fetchBlob=function(e,t){t()},r.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},r.transform=function(e,t,o,i,n){o(e,n)},r.onerror=function(e,t,o,i,n){s(e,n),i&&i.call(e,t)},r.onload=function(e,t,o,i,n){s(e,n),i&&r.transform(e,n,i,o,{originalWidth:e.naturalWidth||e.width,originalHeight:e.naturalHeight||e.height})},r.createObjectURL=function(e){return!!a&&a.createObjectURL(e)},r.revokeObjectURL=function(e){return!!a&&a.revokeObjectURL(e)},r.readFile=function(e,t,o){if(n.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,i[o=o||"readAsDataURL"])return i[o](e),i}return!1},void 0===(i=function(){return r}.call(t,o,t,e))||(e.exports=i)}("undefined"!=typeof window&&window||this)},63:function(e,t,o){"use strict";o.r(t),o.d(t,"SingleLineBlot",(function(){return s}));var i=o(60),n=o(64),r=o(61),a=o.n(r);class s extends i.c{replace(e){e.children.forEach(e=>{e instanceof n.BreakBlot&&e.replaceWith(a.a.create("text"," "))}),super.replace(e)}insertAt(e,t,o){void 0!==o&&"textBreak"==t?super.insertAt(e,"\n"):super.insertAt(e,t,o)}}},64:function(e,t,o){"use strict";o.r(t),o.d(t,"BreakBlot",(function(){return r}));var i=o(59),n=o(60);class r extends n.a{}r.blotName="textBreak",r.tagName="br",r.className="inline",i.a.register(r)},65:function(e,t,o){"use strict";o.r(t),o.d(t,"T",(function(){return r})),o.d(t,"draftSave",(function(){return a})),o.d(t,"getPageContent",(function(){return s})),o.d(t,"isEdit",(function(){return l})),o.d(t,"updateEditableText",(function(){return c})),o.d(t,"sanitize",(function(){return u})),o.d(t,"uploadDataToBlob",(function(){return h})),o.d(t,"showError",(function(){return p})),o.d(t,"updateEditable",(function(){return f})),o.d(t,"transliterate",(function(){return g})),o.d(t,"storageDelete",(function(){return m})),o.d(t,"draftClear",(function(){return b}));var i=o(90),n=o.n(i);let r={apiUrl:"https://inscriptum.js.org",datetime:0,pageId:0};function a(e,t){if(!e)return!1;if(!r.pageId){var o=s(!0,t);if(e!=o)return e=o,function(e,t){try{return localStorage.setItem(e,t),!!localStorage.getItem(e)}catch(e){return!1}}("draft",o)}return!1}function s(e,t){let o=t.scroll.domNode;o.querySelectorAll("textarea,input").forEach(e=>{e.setAttribute("data-value",e.value)});let i=o.cloneNode(!0);o.querySelectorAll("textarea,input").forEach(e=>{e.removeAttribute("data-value")}),i.querySelectorAll("textarea,input").forEach(e=>{e.value=e.getAttribute("data-value")||"",e.removeAttribute("data-value")}),c(i,!1);i.querySelectorAll("[contenteditable]").forEach(e=>e.removeAttribute("contenteditable"));i.querySelectorAll("[data-placeholder]").forEach(e=>e.removeAttribute("data-placeholder"));i.querySelectorAll("[data-label]").forEach(e=>e.removeAttribute("data-label"));i.querySelectorAll("[data-title]").forEach(e=>e.removeAttribute("data-title"));i.querySelectorAll(".editable_text").forEach(e=>e.classList.remove("editable_text"));i.querySelectorAll(".focus").forEach(e=>e.classList.remove("focus"));i.querySelectorAll(".empty").forEach(e=>e.classList.remove("empty"));i.querySelectorAll('[class=""]').forEach(e=>e.removeAttribute("class"));i.querySelectorAll(".file_progress").forEach(e=>e.remove());if(i.querySelectorAll(".cursor_wrapper").forEach(e=>e.remove()),!e){const e=i.querySelector("h1,address");e&&e.remove();const t=i.querySelector("br.inline");return t&&t.replaceWith("\n"),{data:JSON.stringify(d(i).children),length:i.innerHTML.length}}return i.querySelectorAll("h1").forEach(e=>{e.querySelector("br")||e.append(document.createElement("br"))}),i.querySelectorAll("address").forEach(e=>{e.querySelector("br")||e.append(document.createElement("br"))}),i.innerHTML}function l(){return document.getElementsByClassName("tl_article_edit").length>0}function c(e,t){void 0===t&&(t=l()),t?e.querySelectorAll(".editable_text").forEach(e=>{let t=!1;if(e.childNodes.forEach(e=>{!t&&e&&e.classList&&(t=e.classList.contains("editable_input"))}),!t){let t=e.textContent||"",o=document.createElement("textarea");o.classList.add("editable_input"),o.setAttribute("tabindex","-1"),o.setAttribute("rows","1"),o.value=t,t||e.classList.add("empty"),e.innerHTML="",e.append(o),n()(o)}}):e.querySelectorAll(".editable_text > .editable_input").forEach(e=>{let t=e.value,o=e.parentNode;o.innerHTML="",o.textContent=t})}function d(e){if(!e.tagName)return e.data;let t={tag:e.tagName.toLowerCase()};if(e.attributes.length){t.attrs={};for(var o=0;o<e.attributes.length;o++){let i=e.attributes[o];t.attrs[i.name]=i.value}}if(e.childNodes.length){t.children=[];for(o=0;o<e.childNodes.length;o++)t.children.push(d(e.childNodes[o]))}return t}function u(e,t){let o=document.createElement("a");o.href=e;let i=o.href.slice(0,o.href.indexOf(":"));return t.indexOf(i)>-1}function h(e){for(var t=atob(e.base64_data),o=[],i=0;i<t.length;i++)o.push(t.charCodeAt(i));return new Blob([new Uint8Array(o)],{type:e.type})}function p(e){let t=document.querySelector("#_error_msg");t.textContent=e,clearTimeout(t.to),t.classList.add("shown"),t.to=setTimeout(()=>{t.classList.remove("shown")},3e3)}function f(e,t,o,i,n,r){if(i&&i.classList.toggle("tl_article_edit",e),c(document.body),t&&(t.enable(e),e&&t.focus()),!e&&n&&r){const e=n.querySelector("h1"),i=e?e.textContent:"",a=n.querySelector("address"),s=a?a.textContent:"",l=n.querySelector("address a"),c=l&&l.getAttribute("href");r.querySelector("h1").textContent=i,r.querySelector("address a").textContent=s,c?r.querySelector("address a").setAttribute("href",c):r.querySelector("address a").removeAttribute("href"),o.hideFormatTooltip(t),o.hideBlocksTooltip()}}function g(e,t=!1){const o="щ   ш  ч  ц  ю  я  ё  ж  ъ  ы  э  а б в г д е з и й к л м н о п р с т у ф х ь".split(/ +/g),i="shh sh ch cz yu ya yo zh `` y' e` a b v g d e z i j k l m n o p r s t u f x `".split(/ +/g);for(let n=0;n<o.length;n++)e=(e=e.split(t?i[n]:o[n]).join(t?o[n]:i[n])).split(t?i[n].toUpperCase():o[n].toUpperCase()).join(t?o[n].toUpperCase():i[n].toUpperCase());return e}function m(e){try{return localStorage.removeItem(e),!0}catch(e){return!1}}function b(){m("draft")}!function(){var e=document.querySelector("time");if(e&&r.datetime){var t=new Date(1e3*r.datetime);let o="January February March April May June July August September October November December".split(" ")[t.getMonth()],i=t.getDate();e.textContent=o+" "+(10>i?"0":"")+i+", "+t.getFullYear()}}()},66:function(e,t,o){"use strict";o.r(t),o.d(t,"FieldBlot",(function(){return n}));var i=o(63);class n extends i.SingleLineBlot{}},68:function(e,t,o){"use strict";o.r(t),o.d(t,"browser",(function(){return O})),o.d(t,"editor",(function(){return D}));var i=o(141),n=o.n(i),r=o(114),a=o.n(r),s=o(60),l=o(59),c=o(98),d=o(87),u=o(142),h=o(101),p=o(143),f=o(120),g=o(88),m=o(64),b=o(66),v=o(89),y=o(91),S=o(92),E=o(63),A=o(83),k=o(85),x=o(93),_=o(102),L=o(129),T=o(74),w=o(94),C=o(84),B=o(99),N=o(65),q=o(95),P=o(96);let I=navigator.userAgent.toLowerCase(),O={opera:/opera/i.test(I)||/opr/i.test(I),msie:/msie/i.test(I)&&!/opera/i.test(I)||/trident\//i.test(I)||/edge/i.test(I),msie_edge:/edge/i.test(I)&&!/opera/i.test(I),mozilla:/firefox/i.test(I),chrome:/chrome/i.test(I)&&!/edge/i.test(I),safari:!/chrome/i.test(I)&&/webkit|safari|khtml/i.test(I),iphone:/iphone/i.test(I),ipod:/ipod/i.test(I),ipad:/ipad/i.test(I),android:/android/i.test(I),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(I),safari_mobile:/iphone|ipod|ipad/i.test(I),opera_mobile:/opera mini|opera mobi/i.test(I),opera_mini:/opera mini/i.test(I),mac:/mac/i.test(I)};function D(e,t){console.log(y.MyQuill.length),console.log(y.MyQuill.imports["formats/"]),v.LinkBlot.blotName="link",v.LinkBlot.tagName="a",v.LinkBlot.showLinkTooltip=t=>{e.showLinkTooltip(t,t.value,Object(N.isEdit)(),W)},v.LinkBlot.hideLinkTooltip=()=>e.hideLinkTooltip(W),y.MyQuill.register(v.LinkBlot,!0),k.FigureBlot.blotName="blockFigure",k.FigureBlot.tagName="figure",k.FigureBlot.quillSetSelection=(e,t=0)=>W.setSelection(e,t,l.a.sources.USER),k.FigureBlot.quillDeleteText=(e,t,o=l.a.sources.USER)=>W.deleteText(e,t,o),k.FigureBlot.quillInsertText=(e,t)=>W.insertText(e,t,l.a.sources.USER),k.FigureBlot.draftSave=()=>Object(N.draftSave)(o,W),y.MyQuill.register(k.FigureBlot,!0),y.MyQuill.register(P.DividerBlot),y.MyQuill.register({"modules/syntax":C.InsSyntaxModule,"formats/bold":_.a,"formats/italic":L.a,"formats/indent":u.a,"formats/list":d.ListContinuer,"formats/list-item":c.a,"formats/code":h.a,"formats/strike":p.a},!0);var o=!1;O.mobile&&document.body.classList.add("mobile");let i=document.querySelector(".tl_article"),r=document.querySelector(".tl_article_header"),I=document.querySelector(".tl_article_content"),D=document.querySelector("#_bold_button"),R=document.querySelector("#_italic_button"),M=document.querySelector("#_link_button"),U=document.querySelector("#_header_button"),F=document.querySelector("#_subheader_button"),j=document.querySelector("#_quote_button"),H=document.querySelector("#_strike_button"),z=document.querySelector("#_image_button"),$=document.querySelector("#_embed_button");document.querySelector(".account");var W=new y.MyQuill(t,{scrollingContainer:"html, body",readOnly:!0,modules:{syntax:{highlight:e=>q.default.highlightAuto(e).value},clipboard:{matchers:[Q("h2",{blockHeader:!0}),Q("h5",{blockSubheader:!0}),Q("h6",{blockSubheader:!0}),["img",function(e,t){return e.src&&Object(N.sanitize)(e.src,["http","https","data"])?(new a.a).insert({blockFigure:{image:e.src,caption:e.alt||""}}):new a.a}],["video",function(e,t){return e.src&&Object(N.sanitize)(e.src,["http","https","data"])?(new a.a).insert({blockFigure:{video:e.src}}):new a.a}],["br",function(e,t){return console.log("modules.clipboard.matchers.br"),e.classList.contains("inline")?(new a.a).insert({textBreak:!0}):t}]]},keyboard:{bindings:{"required enter":{key:f.a.keys.ENTER,collapsed:!0,shiftKey:null,format:["blockTitle","blockDescription"],suffix:/^$/,handler:function(e,t){console.log("keyboard.bindings.required_enter.handler");let[o]=this.quill.scroll.descendant(b.FieldBlot,e.index);return!(o&&o.next&&o.next.domNode&&!o.next.domNode.textContent)||(this.quill.setSelection(o.next.offset(this.quill.scroll),0,l.a.sources.USER),!1)}},"required tab prev":{key:f.a.keys.TAB,shiftKey:!0,handler:function(e,t){console.log("keyboard.bindings.required_tab_prev.handler");let o=null;if(e.length>0){let t=W.scroll.descendants(s.c,e.index,e.length);if(1!=t.length)return!0;o=t[0]}else[o]=W.scroll.descendant(s.c,e.index);if(null!=o&&null!=o.prev&&o.prev instanceof b.FieldBlot){let e=o.prev.offset(W.scroll),t=o.prev.length();return W.setSelection(e,t>1?t:0,l.a.sources.USER),!1}return!0}},"required tab next":{key:f.a.keys.TAB,shiftKey:!1,handler:function(e,t){console.log("keyboard.bindings.required_tab_next.handler");let o=null;if(e.length>0){let t=W.scroll.descendants(s.c,e.index,e.length);if(1!=t.length)return!0;o=t[0]}else[o]=W.scroll.descendant(s.c,e.index);if(null!=o&&o instanceof b.FieldBlot&&null!=o.next){let e=o.next.offset(W.scroll);if(o.next instanceof b.FieldBlot){let t=o.next.length();W.setSelection(e,t>1?t:0,l.a.sources.USER)}else W.setSelection(e,0,l.a.sources.USER);return!1}return!0}},"no tab":{key:f.a.keys.TAB,shiftKey:null,handler:function(e,t){return console.log("keyboard.bindings.no_tab.handler"),!1}},"detect embed":{key:f.a.keys.ENTER,collapsed:!0,handler:function(t,o){console.log("keyboard.bindings.detect_embed.handler");let[i,n]=W.scroll.line(t.index);if(i){let o,r=i.domNode.textContent.substr(0,n);if(o=r.match(/(^|\s)(https?:\/\/\S+)$/)){let s=o[2];if(W.scroll.descendants(v.LinkBlot,t.index-s.length,s.length).length||W.formatText(t.index-s.length,s.length,"link",s,l.a.sources.USER),!r.substr(0,n-s.length).trim().length&&"P"==i.domNode.tagName){let t=X(s);if(t){let o=i.offset(W.scroll);return W.updateContents((new a.a).retain(o).delete(r.length).insert({blockFigure:t}),l.a.sources.USER),e.hideBlocksTooltip(),!1}}}}return!0}},"divider autofill":{key:f.a.keys.ENTER,collapsed:!0,prefix:/^([-*])\1{2,}$/,handler:function(e,t){console.log("keyboard.bindings.divider_autofill.handler");let[o,i]=W.scroll.line(e.index);if(o&&"P"==o.domNode.tagName){let e=o.offset(W.scroll),t=(new a.a).retain(e).delete(o.length()).insert({blockDivider:!0});return o.next||t.insert("\n"),W.updateContents(t,l.a.sources.USER),!1}return!0}},break:{key:f.a.keys.ENTER,shiftKey:!0,handler:V.bind(null,!0)},enter:{key:f.a.keys.ENTER,handler:V.bind(null,!1)},"detect link":{key:" ",collapsed:!0,handler:function(e){console.log("detectLinkHandler",e);let[t,o]=W.scroll.line(e.index);if(t){let i,n=t.domNode.textContent.substr(0,o);if(i=n.match(/(^|\s)((?:https?|tg):\/\/\S+|www\.\S+)$/)){let t=i[2],o=t.length;"www."==t.substr(0,4)&&(t="http://"+t),W.scroll.descendants(v.LinkBlot,e.index-o,o).length||W.formatText(e.index-o,o,"link",t,l.a.sources.USER)}}return!0}},"cancel placeholder":{key:f.a.keys.ESCAPE,handler:function(e,t){return console.log("keyboard.bindings.cancel_placeholder.handler"),Y(),this.quill.updateSelection(l.a.sources.USER),!0}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{list:!1,"code-block":!1,blockquote:!1,header:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query&&null==this.quill.scroll.query("list"))return!0;const{length:o}=t.prefix,[i,n]=this.quill.getLine(e.index);if(n>o)return!0;let r;switch(t.prefix.trim()){case"[]":case"[ ]":r="unchecked";break;case"[x]":r="checked";break;case"-":case"*":r="bullet";break;default:r={type:"ordered",start:Number(t.prefix.slice(0,-1))-1}}this.quill.insertText(e.index," ",l.a.sources.USER),this.quill.history.cutoff(),console.log("keyboard.bindings.list_autofill.handler",e,t);const s=(new a.a).retain(e.index-n).delete(o+1).retain(i.length()-2-n).retain(1,{list:r,start:r.start});console.log("keyboard.bindings.list_autofill.handler",s);const c=this.quill.updateContents(s,l.a.sources.USER);return console.log("keyboard.bindings.list_autofill.handler",c),this.quill.history.cutoff(),this.quill.setSelection(e.index-o,l.a.sources.SILENT),!1}},"pre wrap":{key:192,collapsed:!0,format:{"code-block":!1},prefix:/^``$/,offset:2,handler:function(e,t){console.log("keyboard.bindings.pre_wrap.handler");let o=t.prefix.length,i=e.index-o;this.quill.scroll.deleteAt(i,o),this.quill.formatLine(i,1,"code-block",!0,l.a.sources.USER),this.quill.setSelection(i,l.a.sources.SILENT)}},code:{key:192,handler:function(e,t){if(console.log("keyboard.bindings.code.handler",!t.format),!t.collapsed){let o=W.scroll.descendants(s.c,e.index,e.length);if(o.length>1||1==o.length&&o[0]instanceof B.a)return this.quill.format("code-block",!t.format["code-block"],l.a.sources.USER),!1;if(W.scroll.descendants(m.BreakBlot,e.index,e.length).length)return this.quill.format("code-block",!t.format["code-block"],l.a.sources.USER),!1}if(t.collapsed&&!t.format.code&&!/\s$/.test(t.prefix))return!0;this.quill.format("code",!t.format.code,l.a.sources.USER)}},"figure delete":{key:f.a.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(e,t){console.log("keyboard.bindings.figure_delete.handler");let[o,i]=W.scroll.line(e.index);return!(o&&o.prev&&o.prev instanceof k.FigureBlot)||(t.empty&&W.deleteText(e.index,1,l.a.sources.USER),W.setSelection(o.prev.offset(W.scroll)),!1)}},"field backspace":{key:f.a.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(e,t){console.log("keyboard.bindings.field_backspace.handler");let[o,i]=W.scroll.line(e.index);return!(o&&o.prev&&o.prev instanceof b.FieldBlot&&o.domNode.textContent.length>0)}},strikethrough:{key:"X",shortKey:!0,shiftKey:!0,handler:function(e,t){W.formatText(e,"strike",!t.format.strike)}}}}}});function Q(e,t){return[e,function(e,o){return o.compose((new a.a).retain(o.length(),t))}]}function G(e){let t=function(e){let[t,o]=W.scroll.line(e);return W.getText(e,t.length()-o)}(e);return!t||"\n"==t}function V(e,t,o){console.log("breakHandler",e,t,o);let i,n=t.index;t.length>0&&W.scroll.deleteAt(n,t.length);let r=G(n),a=!1;return[i]=W.scroll.descendant(m.BreakBlot,n),i?(!i.prev||i.prev instanceof m.BreakBlot)&&(W.scroll.deleteAt(--n,1),a=!0):([i]=W.scroll.descendant(m.BreakBlot,n-1),i&&(W.scroll.deleteAt(--n,1),a=!0)),[i]=W.scroll.descendant(E.SingleLineBlot,n),i||a||!e?(W.insertText(n,"\n",l.a.sources.USER),W.setSelection(++n,0,l.a.sources.USER),(o.format.blockHeader||o.format.blockSubheader||o.format.blockBlockquote||o.format.blockPullquote)&&r&&W.formatLine(n,1,{blockHeader:!1,blockSubheader:!1,blockBlockquote:!1,blockPullquote:!1},l.a.sources.USER)):(W.insertEmbed(n,"textBreak",!0,l.a.sources.USER),[i]=W.scroll.descendant(m.BreakBlot,n),!i||i.next||i.prev&&i.prev instanceof m.BreakBlot||(W.insertEmbed(++n,"textBreak",!0,l.a.sources.SILENT),W.setSelection(n,0,l.a.sources.SILENT))),!1}function K(e){let t=null==e?{}:W.getFormat(e),o=!!t.blockDescription,i=!(!t.blockHeader&&!t.blockSubheader),n=!!t["code-block"];if(D.classList.toggle("active",!!t.bold),D.classList.toggle("disabled",o||i||n),R.classList.toggle("active",!!t.italic),R.classList.toggle("disabled",o||i||n),U.classList.toggle("active",!!t.blockHeader),U.classList.toggle("disabled",o),F.classList.toggle("active",!!t.blockSubheader),F.classList.toggle("disabled",o),j.classList.toggle("active",!(!t.blockBlockquote&&!t.blockPullquote)),j.classList.toggle("pullquote",!!t.blockPullquote),j.classList.toggle("disabled",o),H.classList.toggle("active",!!t.strike),H.classList.toggle("disabled",o),null!=e){let t=W.scroll.descendants(v.LinkBlot,e.index,e.length);M.classList.toggle("active",!!t.length)}else M.classList.toggle("active",!1);M.classList.toggle("disabled",n)}function X(e){let t;if((t=e.match(/^(https?):\/\/(www\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/i))||(t=e.match(/^(https?):\/\/(www\.)?youtu\.be\/([a-zA-Z0-9_-]+)/i)))return{embed:"/embed/youtube?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(www\.)?vimeo\.com\/(\d+)/i))return{embed:"/embed/vimeo?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(www\.|mobile\.)?twitter\.com\/(.+)\/status\/(\d+)/i))return{embed:"/embed/twitter?url="+encodeURIComponent(e)};if(t=e.match(/^(https?):\/\/(t\.me|telegram\.me|telegram\.dog)\/([a-zA-Z0-9_]+)\/(\d+)/i))return{embed:"/embed/telegram?url="+encodeURIComponent(e)};if(t=e.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))return"video/"==t[1].substr(0,6)?{video:e}:{image:e};if(t=e.match(/^(https?):\/\/\S+/i)){let o=document.createElement("a");if(o.href=e,o.pathname.match(/\.(jpe?g|png|gif|mp4)$/i))return"mp4"==t[1]?{video:e}:{image:e}}return!1}function Y(){const e=document.querySelector(".placeholder_once");null!==e&&(e.removeAttribute("data-placeholder"),e.classList.remove("placeholder_once","empty"))}function J(e){e.scroll.descendants(s.c,0,e.scroll.length()).forEach(e=>{if(e.domNode.hasAttribute("data-placeholder")){let t=e.domNode.textContent;e.domNode.classList.toggle("empty",!t)}})}function Z(e){let[t,o]=e.scroll.lines();if(t instanceof s.a)e.updateContents((new a.a).insert("\n",{blockTitle:!0}).insert("\n",{blockDescription:!0}),l.a.sources.SILENT);else if(t instanceof A.TitleBlot||e.formatLine(0,1,{blockTitle:!0},l.a.sources.SILENT),o){if(o instanceof s.a){let t=o.offset(e.scroll);e.updateContents((new a.a).retain(t).insert("\n",{blockDescription:!0}),l.a.sources.SILENT)}else if(!(o instanceof x.DescriptionBlot)){let t=o.offset(e.scroll);e.formatLine(t,1,{blockDescription:!0},l.a.sources.SILENT)}}else{let t=e.scroll.length();e.updateContents((new a.a).retain(t).insert("\n",{blockDescription:!0}),l.a.sources.SILENT)}let[,,i]=e.scroll.lines();if(i){let t=i.offset(e.scroll),o=e.scroll.length()-t;e.scroll.descendants(b.FieldBlot,t,o).forEach(t=>{let o=t.offset(e.scroll),i=t.length(),n=t.constructor.blotName;e.formatText(o,i,n,!1,l.a.sources.SILENT)})}else{let t=e.scroll.length();e.insertText(t,"\n",l.a.sources.SILENT)}let n=e.scroll.lines();n.forEach((e,t)=>{"P"==e.domNode.tagName&&(3==n.length&&2==t?e.domNode.setAttribute("data-placeholder","Your story..."):e.domNode.removeAttribute("data-placeholder"))})}function ee(e,t){(t=t||{}).close_btn=t.close_btn||"OK",t.submit_btn=t.submit_btn||!1,t.close=t.close||te,t.submit=t.submit||t.close,te();var o=document.createElement("div");o.classList.add("tl_alert"),o.innerHTML='<main class="tl_alert_message"><section></section><aside class="tl_message_buttons"></aside></main>',o.querySelector("section").innerHTML=e;var i=o.querySelector("aside");if(t.close_btn){var n=document.createElement("button");n.classList.add("button"),n.innerHTML=t.close_btn,n.addEventListener("click",t.close),n.append(i)}if(t.submit_btn){var r=document.createElement("button");r.classList.add("button"),r.innerHTML=t.submit_btn,r.addEventListener("click",(function(){o.classList.add("tl_alert_loading"),t.submit()})),r.append(i)}o.append("body")}function te(){const e=document.querySelector(".tl_alert");e&&e.remove()}function oe(e){let t=e.querySelector(".prompt_input"),o=e.querySelector(".close");t.onkeydown=null,t.onblur=null,o.onclick=null,e.style.display="",e.classList.remove("tooltip_prompt"),W.focus()}return W.addContainer(e.$tl_link_tooltip),W.addContainer(e.$tl_tooltip),W.addContainer(e.$tl_blocks),W.on(l.a.events.EDITOR_CHANGE,(function(t,o){if(t!==l.a.events.SELECTION_CHANGE)return;if(!W.isEnabled())return;if(null==o)return;!function(t){let[o]=W.scroll.descendant(k.FigureBlot,t.index);W.scroll.descendants(k["FigureBlot"],0,W.scroll.length()).forEach(e=>{o!==e&&e.blur()}),o&&(o.focus(),e.hideFormatTooltip(W),e.hideBlocksTooltip())}(o);let[n,r]=W.scroll.descendant(s.c,o.index);0===o.length?(e.hideFormatTooltip(W),null==n||n instanceof b.FieldBlot||n instanceof g.BlockquoteBlot||n instanceof S.PullquoteBlot||n instanceof B.a||n instanceof c.a||""!==n.domNode.textContent?e.hideBlocksTooltip():e.showBlocksTooltip(o,Object(N.isEdit)(),W)):(null==n||n instanceof A.TitleBlot?e.hideFormatTooltip(W):(e.showFormatTooltip(o,W,Object(N.isEdit)()),K(o)),e.hideBlocksTooltip());let a=W.getFormat(o);i&&i.classList.toggle("title_focused",!(!a.blockTitle&&!a.blockDescription)),Y()})),W.on(l.a.events.TEXT_CHANGE,(function(){W.getSelection();Z(W),J(W),Y(),Object(N.draftSave)(o,W)})),W.on(l.a.events.SCROLL_OPTIMIZE,(function(e){e.forEach(e=>{if("childList"==e.type&&!e.addedNodes.length&&e.removedNodes.length){let t=e.previousSibling,o=e.nextSibling;if(!o&&t&&"BR"==t.tagName&&"inline"==t.className){let t=document.createElement("br");t.className="inline",e.target.appendChild(t)}else!o||!t||"BR"==t.tagName&&"inline"==t.className||"BR"!=o.tagName||"inline"!=o.className||o.nextSibling||o.parentNode&&o.parentNode.removeChild(o)}})})),W.scroll.domNode.setAttribute("dir","auto"),document.addEventListener("click touchstart",(function(t){let o=t.target;for(;o;){if(o===W.container)return;o=o.parentNode}e.hideFormatTooltip(W),e.hideBlocksTooltip()})),Z(W),J(W),function(){const t={page_id:N.T.pageId};t.save_hash&&(N.T.saveHash=t.save_hash);if(!N.T.pageId&&(i&&i.classList.add("tl_article_edit"),!function(){if(!N.T.pageId)return function(e){try{return localStorage.getItem(e)}catch(e){return!1}}("draft");return!1}()&&t.author_name)){let e;e=t.author_url?{link:t.author_url}:{};let[o]=W.scroll.descendants(x.DescriptionBlot);o&&W.updateContents((new a.a).retain(o.offset()).delete(o.length()).insert(t.author_name,e),l.a.sources.USER)}if(t.auth_alert&&t.short_name){var n="Success! You are now logged in as <b>"+(t.short_name.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;").replace(/%/g,"&#37;")+"</b> in this browser.");t.migrate_count>0&&t.migrate_hash?(n+="<br/><br/>",ee(n+="We can also add "+t.migrate_count+" Telegraph page"+(t.migrate_count>1?"s":"")+" from this browser to your account.",{close_btn:"Skip",submit_btn:"Add",submit:function(){var e;e=t.migrate_hash,console.log(e)}})):ee(n)}o=Object(N.getPageContent)(!0,W),Object(N.updateEditable)(Object(N.isEdit)(),W,e,i,I,r)}(),D.onclick=e=>{console.log("$bold_button.onclick");let t=e.target.classList.contains("active");e.preventDefault(),console.log("$bold_button.onclick",!t),W.format("bold",!t),console.log("$bold_button.onclick",W.getSelection(!0)),W.updateSelection(l.a.sources.API)},R.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault(),W.format("italic",!t),W.updateSelection(l.a.sources.API)},M.onclick=t=>{let o=t.target.classList.contains("active");t.preventDefault();var i=W.getSelection(!0);if(o){W.scroll.descendants(v.LinkBlot,i.index,i.length).forEach(e=>{let t=e.offset(W.scroll),o=e.length();W.formatText(t,o,"link",!1)}),K(i)}else!function(e,t,o){let i=e.querySelector(".prompt_input"),n=e.querySelector(".close");i.value="",i.setAttribute("placeholder",t),i.onkeydown=t=>{let n=t.which||t.keyCode;if(27==n)oe(e);else if(13==n){let n=i.value;n&&(o&&o(n),t.preventDefault()),oe(e)}},i.onblur=()=>{oe(e)},n.onclick=()=>{oe(e)},e.style.display="",e.classList.add("tooltip_prompt"),i.focus()}(e.$tl_tooltip,"Paste or type a link...",(function(e){"#"!=(e=e.trim()).substr(0,1)&&"/"!=e.substr(0,1)&&"http://"!=e.substr(0,7)&&"https://"!=e.substr(0,8)&&"tg://"!=e.substr(0,5)&&"mailto:"!=e.substr(0,7)&&(e=e.indexOf("@")>0?"mailto:"+e:"http://"+e),W.focus(),W.format("link",e),K(i)}))},U.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault();let o=W.getSelection(!0);W.format("blockHeader",!t),W.scroll.descendants(T.HeaderBlot,o.index,o.length).forEach(e=>{let t=e.offset(W.scroll),o=e.length();W.formatText(t,o,{bold:!1,italic:!1,code:!1},l.a.sources.SILENT)}),W.updateSelection(l.a.sources.API)},F.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault();let o=W.getSelection(!0);W.format("blockSubheader",!t),W.scroll.descendants(w.SubheaderBlot,o.index,o.length).forEach(e=>{let t=e.offset(W.scroll),o=e.length();W.formatText(t,o,{bold:!1,italic:!1,code:!1},l.a.sources.SILENT)}),W.updateSelection(l.a.sources.API)},j.onclick=e=>{let t=e.target,o=t.classList.contains("active"),i=t.classList.contains("pullquote");e.preventDefault();W.getSelection(!0);o?W.format("blockPullquote",!i):W.format("blockBlockquote",!0),W.updateSelection(l.a.sources.API)},H.onclick=e=>{let t=e.target.classList.contains("active");e.preventDefault(),W.format("strike",!t),W.updateSelection(l.a.sources.API)},z.onclick=()=>{let e=W.container.querySelector("input.ql-image[type=file][data-status=ready]");null==e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",O.safari_mobile?"image/gif, image/jpeg, image/jpg, image/png":"image/gif, image/jpeg, image/jpg, image/png, video/mp4"),e.classList.add("ql-image"),e.addEventListener("change",()=>{if(e&&null!=e.files&&null!=e.files[0]){var t=e.files[0];const o=function(){Object(N.showError)("File too big (up to 5 MB allowed)")},i=5242880;!function(e,t){if("image/jpg"==e.type||"image/jpeg"==e.type)return n()(e,o=>{if("error"===o.type)t(e);else if(o.toBlob)o.toBlob((function(e){t(e)}),e.type);else{var i=o.toDataURL(e.type),n={type:e.type,base64_data:i.split(",")[1]};t(Object(N.uploadDataToBlob)(n))}},{canvas:!0,orientation:!0});t(e)}(t,t=>{if(t.size>i)return o&&o();var n=new FileReader;n.onload=function(t){if(t&&null!==t.target){let o=X(t.target.result);if(o){let e=W.getSelection(!0);W.updateContents((new a.a).retain(e.index).delete(e.length).insert({blockFigure:o}),l.a.sources.USER)}else Object(N.showError)("Invalid file format");e.value="",e.setAttribute("data-status","ready")}},n.readAsDataURL(t)})}}),W.container.appendChild(e)),e.setAttribute("data-status","busy"),e.click()},$.onclick=t=>{let o=W.getSelection(!0),[i]=W.scroll.line(o.index);const n=i.domNode;if(i){n.textContent||(n.setAttribute("data-placeholder","Paste a YouTube, Vimeo or Twitter link, and press Enter"),n.classList.add("placeholder_once","empty"),e.hideBlocksTooltip())}},window.addEventListener("scroll resize",()=>{e.tooltipUpdatePosition(e.$tl_tooltip,null,e.formatTTOptions,W),e.tooltipUpdatePosition(e.$tl_link_tooltip,null,e.linkTTOptions,W)}),W}},74:function(e,t,o){"use strict";o.r(t),o.d(t,"HeaderBlot",(function(){return r}));var i=o(59),n=o(63);class r extends n.SingleLineBlot{optimize(e){super.optimize(e);let t=this.domNode.innerText;t=t.replace(/[\s_]+/g,"-"),t=t.replace(/(^-+|-+$)/g,""),this.domNode.id!==t&&this.domNode.setAttribute("id",t)}formatAt(e,t,o,i){("bold"!==o&&"italic"!==o&&"code"!==o||!i)&&super.formatAt(e,t,o,i)}}r.blotName="blockHeader",r.tagName="h3",i.a.register(r)},77:function(e,t,o){var i,n,r;!function(a){"use strict";n=[o(62)],void 0===(r="function"==typeof(i=function(e){var t="undefined"!=typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[],65517:[]}},e.parseMetaData=function(t,o,i,n){n=n||{};var r=this,a=(i=i||{}).maxMetaDataSize||262144;!!("undefined"!=typeof DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice)&&e.readFile(e.blobSlice.call(t,0,a),(function(t){if(t.target.error)return console.log(t.target.error),void o(n);var a,s,l,c,d=t.target.result,u=new DataView(d),h=2,p=u.byteLength-4,f=h;if(65496===u.getUint16(0)){for(;h<p&&((a=u.getUint16(h))>=65504&&a<=65519||65534===a);){if(h+(s=u.getUint16(h+2)+2)>u.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if((l=e.metaDataParsers.jpeg[a])&&!i.disableMetaDataParsers)for(c=0;c<l.length;c+=1)l[c].call(r,u,h,s,n,i);f=h+=s}!i.disableImageHead&&f>6&&(d.slice?n.imageHead=d.slice(0,f):n.imageHead=new Uint8Array(d).subarray(0,f))}else console.log("Invalid JPEG file: Missing JPEG marker.");o(n)}),"readAsArrayBuffer")||o(n)},e.replaceHead=function(t,o,i){e.parseMetaData(t,(function(n){i(new Blob([o,e.blobSlice.call(t,n.imageHead.byteLength)],{type:"image/jpeg"}))}),{maxMetaDataSize:256,disableMetaDataParsers:!0})},e.hasMetaOption=function(e){return e&&e.meta};var o=e.transform;e.transform=function(t,i,n,r,a){e.hasMetaOption(i)?e.parseMetaData(r,(function(a){o.call(e,t,i,n,r,a)}),i,a):o.apply(e,arguments)}})?i.apply(t,n):i)||(e.exports=r)}()},83:function(e,t,o){"use strict";o.r(t),o.d(t,"TitleBlot",(function(){return r}));var i=o(59),n=o(66);class r extends n.FieldBlot{static create(e){let t=super.create(e);return t.setAttribute("data-placeholder","Title"),t.setAttribute("data-label","Title"),t}formatAt(e,t,o,i){o===r.blotName&&super.formatAt(e,t,o,i)}}r.blotName="blockTitle",r.tagName="h1",i.a.register(r)},84:function(e,t,o){"use strict";o.r(t),o.d(t,"CodeEndLineFlag",(function(){return a})),o.d(t,"InsSyntaxCodeBlock",(function(){return s})),o.d(t,"InsSyntaxModule",(function(){return l}));var i=o(59),n=o(78),r=o(99);class a extends n.a{static formats(){return{}}}a.blotName="code-end",a.className="l",a.tagName="SPAN",i.a.register(a);class s extends r.a{highlight(e){let t=this.domNode.textContent||"";if(this.cachedText!==t){if(t.trim().length>0||null==this.cachedText){let o="";const i=e(t).split("\n");for(let e=0;e<i.length-1;e++)o+=`<span class="l">${i[e]||" "}</span>\n`;o+=`<span class="l">${i[i.length-1]}</span>`,this.domNode.innerHTML=`<code class="hljs">${o}</code>`}this.cachedText=t}}}class l extends r.c{static register(){i.a.register(r.b,!0),i.a.register(s,!0)}highlight(){if(this.quill.selection.composing)return;this.quill.update(i.a.sources.USER);let e=this.quill.getSelection();this.quill.scroll.descendants(s).forEach(e=>{e.highlight(this.options.highlight)}),this.quill.update(i.a.sources.SILENT),null!=e&&document.activeElement===this.quill.container.querySelector("[contenteditable]")&&this.quill.setSelection(e,i.a.sources.SILENT)}}},85:function(e,t,o){"use strict";o.r(t),o.d(t,"FigureBlot",(function(){return u}));var i=o(59),n=o(60),r=o(120),a=o(90),s=o.n(a),l=o(86),c=o(65),d=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class u extends n.a{constructor(e,t){super(e),this.domNode=e,this.domWrapper=document.createElement("div"),this.domCursor=document.createElement("span"),this.domCaption=document.createElement("figcaption"),this.domWrapper.classList.add("figure_wrapper"),this.domCursor.classList.add("cursor_wrapper"),this.domCursor.setAttribute("contenteditable","true"),this.domCaption.classList.add("editable_text"),this.domCaption.setAttribute("data-placeholder","Caption (optional)"),t.caption&&(this.domCaption.innerText=t.caption),this.domNode.appendChild(this.domWrapper),this.domNode.appendChild(this.domCursor),this.domNode.appendChild(this.domCaption),setTimeout(()=>{Object(c.updateEditableText)(this.domNode)},1);let o=!1;t.image?(this.appendImgNode(t.image),o=this.uploadData(t.image)):t.video?(this.appendVideoNode(t.video),o=this.uploadData(t.video)):t.embed&&this.appendIframeNode(t.embed),o&&(this.domProgress=document.createElement("div"),this.domProgressBar=document.createElement("div"),this.domProgress.classList.add("file_progress"),this.domProgressBar.classList.add("file_progress_bar"),this.domWrapper.classList.add("loading"),this.domProgress.appendChild(this.domProgressBar),this.domWrapper.appendChild(this.domProgress),this.uploadFile(o)),this.domWrapper.onclick=()=>{if(!this.domNode.classList.contains("focus")){let e=this.offset(this.scroll);this.focus(),u.quillSetSelection(e)}},this.domCursor.onkeydown=e=>{let t=e.which||e.keyCode;if(t==r.a.keys.BACKSPACE){let t=this.offset(this.scroll);u.quillDeleteText(t,this.length()),u.quillSetSelection(t-1),e.preventDefault()}else if(t==r.a.keys.ENTER){let t=this.offset(this.scroll)+this.length();this.focus(),u.quillInsertText(t,"\n"),u.quillSetSelection(t),e.preventDefault()}},this.domCursor.onpaste=e=>{e.stopPropagation(),e.preventDefault()},this.domCaption.onkeydown=e=>{let t=e.which||e.keyCode,o=e.target;if(t==r.a.keys.ENTER){if(e.shiftKey)return;let t={start:o.selectionStart,end:o.selectionEnd},i=o.value;if(t.start!=t.end)i=i.substr(0,t.start)+i.substr(t.end),o.setSelectionRange(i.length,i.length);else if(t.end==i.length){let e=this.offset(this.scroll)+this.length();this.focus(),u.quillInsertText(e,"\n"),u.quillSetSelection(e)}e.preventDefault()}else if(t==r.a.keys.DOWN||t==r.a.keys.TAB||t==r.a.keys.RIGHT){let t={start:o.selectionStart,end:o.selectionEnd},i=o.value;if(t.start==t.end&&t.end==i.length){let t=this.offset(this.scroll)+this.length();this.focus(),u.quillSetSelection(t,0),e.preventDefault()}}else if(t==r.a.keys.LEFT||t==r.a.keys.UP){let t={start:o.selectionStart,end:o.selectionEnd};if(t.start==t.end&&0===t.start){let t=this.offset(this.scroll)-1;this.focus(),u.quillSetSelection(t,0),e.preventDefault()}}};const i=e=>{null!==e&&null!==e.target&&(this.domCaption.classList.toggle("empty",!e.target.value),s.a.update(e.target),u.draftSave())};this.domCaption.onpaste=e=>{e.stopPropagation(),i(e)},this.domCaption.onkeyup=i,this.domCaption.ondrop=i,this.domCaption.onchange=i,this.domCaption.oninput=i,this.domCaption.oncut=i,this.domCaption.onclick=e=>{e.target&&e.target.focus()}}static create(e){let t=super.create(e);return t.setAttribute("contenteditable","false"),t}appendImgNode(e){let t=document.createElement("img");return t.setAttribute("src",this.sanitize(e)),this.domWrapper.appendChild(t),t}appendVideoNode(e){let t=document.createElement("video");return t.setAttribute("src",this.sanitize(e)),t.setAttribute("preload","auto"),t.setAttribute("controls","controls"),t.addEventListener("loadeddata",(function(){this.mozHasAudio||this.webkitAudioDecodedByteCount||this.audioTracks&&this.audioTracks.length||(this.setAttribute("autoplay","autoplay"),this.setAttribute("loop","loop"),this.setAttribute("muted","muted"),this.removeAttribute("controls"),this.play())})),this.domWrapper.appendChild(t),t}appendIframeNode(e){let t=document.createElement("div"),o=document.createElement("div"),i=document.createElement("iframe");return t.classList.add("iframe_wrap"),t.appendChild(o),o.classList.add("iframe_helper"),o.style.paddingTop="56.25%",o.appendChild(i),i.setAttribute("src",this.sanitize(e)),i.setAttribute("width","640"),i.setAttribute("height","360"),i.setAttribute("frameborder","0"),i.setAttribute("allowtransparency","true"),i.setAttribute("allowfullscreen","true"),i.setAttribute("scrolling","no"),this.domWrapper.appendChild(t),t}uploadFile(e){this.uploadFileStart(e,(e,t)=>{let o=0;t&&e&&(o=100*e/t,o=Math.min(100,o)),this.domProgressBar.style.width=o+"%"},t=>{if(t){let o=this.sanitize(t.src);if("video/"==e.type.substr(0,6)){let e=this.domWrapper.querySelector("video");e&&e.setAttribute("src",o)}else{let e=this.domWrapper.querySelector("img");e&&e.setAttribute("src",o)}this.domWrapper.classList.remove("loading"),u.draftSave()}},e=>(u.quillDeleteText(this.offset(this.scroll),this.length(),i.a.sources.SILENT),u.draftSave(),Object(c.showError)(e)))}uploadData(e){let t=null;return!!(t=e.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))&&{type:t[1],base64_data:t[2]}}sanitize(e){return Object(c.sanitize)(e,["http","https","data"])?e:"//:0"}static value(e){let t={caption:""},o=e.querySelector("img");o&&(t.image=o.src);let i=e.querySelector("video");i&&(t.video=i.src);let n=e.querySelector("iframe");n&&(t.embed=n.src);let r=e.querySelector("figcaption");if(r){let e=r.querySelector(".editable_input");t.caption=e?e.value:r.innerText}return t}focus(){this.domNode.classList.add("focus")}blur(){this.domNode.classList.remove("focus")}_index(e,t){if(e===this.domCaption)return 0;let o=0;return e.nodeType==e.TEXT_NODE&&(o+=t>=0?t:e.data.length),e.previousSibling?o+this._index(e.previousSibling,-1):e.parentNode?o+this._index(e.parentNode,-1):0}_position(e,t){if(e.nodeType==e.TEXT_NODE)return t<=e.data.length?[e,t]:[null,t-=e.data.length];{let o=e.firstChild;for(;o;){let e=null;if([e,t]=this._position(o,t),e)return[e,t];o=o.nextSibling}return[e,t]}}update(e){this.domCursor.innerHTML=""}index(e,t){return 0}position(e,t){return[this.domCursor,0]}uploadFileStart(e,t,o,i){return d(this,void 0,void 0,(function*(){try{const i=yield Object(l.uploadFileService)(Object(c.uploadDataToBlob)(e),t);o&&o(i)}catch(e){i&&i("Network error")}}))}}},86:function(e,t,o){"use strict";o.r(t),o.d(t,"uploadFileService",(function(){return i}));function i(e,t){return new Promise((o,i)=>{var n=new XMLHttpRequest,r=new FormData;n.open("POST","https://api.cloudinary.com/v1_1/inscriptum/upload",!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.upload.addEventListener("progress",(function(e){e.lengthComputable&&t&&t(e.loaded,e.total)})),t&&t(0,1),r.append("upload_preset","cz5pibn5"),r.append("tags","browser_upload"),r.append("file",e),n.send(r),n.onreadystatechange=e=>{if(4==n.readyState&&200==n.status){var t=JSON.parse(n.responseText);console.log(1111,t),t.src=t.secure_url,o(t)}},n.onerror=function(){i(new Error("Network Error"))}})}},87:function(e,t,o){"use strict";o.r(t),o.d(t,"ListContinuer",(function(){return n}));var i=o(98);class n extends i.b{static create(e){let t;return"string"==typeof e?t=super.create(e):(t=super.create(e.type),void 0!==e.start&&(t.setAttribute("start",e.start),t.style["counter-reset"]="list-0 "+e.start)),t}static formats(e){let t=super.formats(e);return console.log("MyList-static.formats",t,e.getAttribute("start")),{type:t,start:e.getAttribute("start")}}}},88:function(e,t,o){"use strict";o.r(t),o.d(t,"BlockquoteBlot",(function(){return r}));var i=o(59),n=o(60);class r extends n.c{}r.blotName="blockBlockquote",r.tagName="blockquote",i.a.register(r)},89:function(e,t,o){"use strict";o.r(t),o.d(t,"LinkBlot",(function(){return r}));var i=o(78),n=o(65);class r extends i.a{constructor(e,t){super(e),this.value=t,e.addEventListener("mouseover",r.showLinkTooltip.bind(this,this),!1),e.addEventListener("mouseout",r.hideLinkTooltip,!1)}static create(e){let t=super.create(e);e=this.sanitize(e),t.setAttribute("href",e);var o=e.substr(0,1);return"/"!=o&&"#"!=o&&"tg://"!=e.substr(0,5)&&"mailto:"!=e.substr(0,7)&&t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){const t=r.relativeUrl(e);return Object(n.sanitize)(e,["http","https","tg","mailto"])?t:"about:blank"}detach(){this.domNode.removeEventListener("mouseover",r.showLinkTooltip.bind(this,this),!1),this.domNode.removeEventListener("mouseout",r.hideLinkTooltip,!1),super.detach(),r.hideLinkTooltip()}format(e,t){if(e!==this.statics.blotName||!t)return super.format(e,t);t=r.sanitize(t),this.domNode.setAttribute("href",t),this.domNode.setAttribute("data-title",t)}static relativeUrl(e){let t=location,o=document.createElement("a");return o.href=e,t.origin!==o.origin?o.href:t.pathname!==o.pathname||t.search!==o.search?o.pathname+o.search+o.hash:t.href===o.href?o.hash||o.pathname+o.search+o.hash:o.hash}}},90:function(e,t,o){var i,n,r;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/n=[e,t],void 0===(r="function"==typeof(i=function(e,t){"use strict";var o,i,n="function"==typeof Map?new Map:(o=[],i=[],{has:function(e){return o.indexOf(e)>-1},get:function(e){return i[o.indexOf(e)]},set:function(e,t){-1===o.indexOf(e)&&(o.push(e),i.push(t))},delete:function(e){var t=o.indexOf(e);t>-1&&(o.splice(t,1),i.splice(t,1))}}),r=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){r=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function a(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!n.has(e)){var t,o=null,i=null,a=null,s=function(){e.clientWidth!==i&&u()},l=function(t){window.removeEventListener("resize",s,!1),e.removeEventListener("input",u,!1),e.removeEventListener("keyup",u,!1),e.removeEventListener("autosize:destroy",l,!1),e.removeEventListener("autosize:update",u,!1),Object.keys(t).forEach((function(o){e.style[o]=t[o]})),n.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",l,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",u,!1),window.addEventListener("resize",s,!1),e.addEventListener("input",u,!1),e.addEventListener("autosize:update",u,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",n.set(e,{destroy:l,update:u}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),o="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(o)&&(o=0),u()}function c(t){var o=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=o,e.style.overflowY=t}function d(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),n=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+o+"px",i=e.clientWidth,t.forEach((function(e){e.node.scrollTop=e.scrollTop})),n&&(document.documentElement.scrollTop=n)}}function u(){d();var t=Math.round(parseFloat(e.style.height)),o=window.getComputedStyle(e,null),i="content-box"===o.boxSizing?Math.round(parseFloat(o.height)):e.offsetHeight;if(i<t?"hidden"===o.overflowY&&(c("scroll"),d(),i="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==o.overflowY&&(c("hidden"),d(),i="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),a!==i){a=i;var n=r("autosize:resized");try{e.dispatchEvent(n)}catch(e){}}}}function s(e){var t=n.get(e);t&&t.destroy()}function l(e){var t=n.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return a(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],l),e}),t.default=c,e.exports=t.default})?i.apply(t,n):i)||(e.exports=r)},91:function(e,t,o){"use strict";o.r(t),o.d(t,"MyQuill",(function(){return n}));var i=o(59);class n extends i.a{formatLine(...e){super.formatLine(...e),this.updateSelection()}formatText(...e){super.formatText(...e),this.updateSelection()}updateSelection(e){if(this.hasFocus()){e=e||n.sources.SILENT;let t=this.getSelection(!0);this.setSelection(++t.index,t.length,e),this.setSelection(--t.index,t.length,e)}}}},92:function(e,t,o){"use strict";o.r(t),o.d(t,"PullquoteBlot",(function(){return r}));var i=o(59),n=o(60);class r extends n.c{}r.blotName="blockPullquote",r.tagName="aside",i.a.register(r)},93:function(e,t,o){"use strict";o.r(t),o.d(t,"DescriptionBlot",(function(){return r}));var i=o(59),n=o(66);class r extends n.FieldBlot{static create(e){console.log("DescriptionBlot create ",e);let t=super.create(e);return t.setAttribute("data-placeholder","Summary of the text"),t.setAttribute("data-label","Description"),t}formatAt(e,t,o,i){console.log("DescriptionBlot formatAt ",e,t,o,i),o===r.blotName?super.formatAt(e,t,o,i):"link"===o&&super.formatAt(0,this.length(),o,i)}format(e,t){console.log("DescriptionBlot format ",e,t),super.format(e,t)}replace(e){console.log("DescriptionBlot replace ",e),super.replace(e)}insertAt(e,t,o){console.log("DescriptionBlot insertAt ",e,t,o),super.insertAt(e,t,o)}}r.blotName="blockDescription",r.tagName="address",i.a.register(r)},94:function(e,t,o){"use strict";o.r(t),o.d(t,"SubheaderBlot",(function(){return r}));var i=o(59),n=o(74);class r extends n.HeaderBlot{}r.blotName="blockSubheader",r.tagName="h4",i.a.register(r)},95:function(e,t,o){"use strict";o.r(t);var i=o(160),n=o.n(i),r=o(148),a=o.n(r),s=o(151),l=o.n(s),c=o(147),d=o.n(c),u=o(149),h=o.n(u),p=o(144),f=o.n(p),g=o(146),m=o.n(g),b=o(145),v=o.n(b),y=o(150),S=o.n(y);n.a.registerLanguage("javascript",a.a),n.a.registerLanguage("typescript",l.a),n.a.registerLanguage("sql",h.a),n.a.registerLanguage("html",d.a),n.a.registerLanguage("xml",f.a),n.a.registerLanguage("css",m.a),n.a.registerLanguage("bash",v.a),n.a.registerLanguage("yaml",S.a),t.default=n.a},96:function(e,t,o){"use strict";o.r(t),o.d(t,"DividerBlot",(function(){return n}));var i=o(60);class n extends i.a{}n.blotName="blockDivider",n.tagName="hr"},98:function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return l}));var i=o(61),n=o.n(i),r=o(60),a=o(133);class s extends r.c{static formats(e){return e.tagName===this.tagName?void 0:super.formats(e)}format(e,t){e!==l.blotName||t?super.format(e,t):this.replaceWith(n.a.create(this.statics.scope))}remove(){null==this.prev&&null==this.next?this.parent.remove():super.remove()}replaceWith(e,t){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,t),this):(this.parent.unwrap(),super.replaceWith(e,t))}}s.blotName="list-item",s.tagName="LI";class l extends a.a{static create(e){let t="ordered"===e?"OL":"UL",o=super.create(t);return"checked"!==e&&"unchecked"!==e||o.setAttribute("data-checked","checked"===e),o}static formats(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}constructor(e){super(e);const t=t=>{if(t.target.parentNode!==e)return;let o=this.statics.formats(e),i=n.a.find(t.target);"checked"===o?i.format("list","unchecked"):"unchecked"===o&&i.format("list","checked")};e.addEventListener("touchstart",t),e.addEventListener("mousedown",t)}format(e,t){this.children.length>0&&this.children.tail.format(e,t)}formats(){return{[this.statics.blotName]:this.statics.formats(this.domNode)}}insertBefore(e,t){if(e instanceof s)super.insertBefore(e,t);else{let o=null==t?this.length():t.offset(this),i=this.split(o);i.parent.insertBefore(e,i)}}optimize(e){super.optimize(e);let t=this.next;null!=t&&t.prev===this&&t.statics.blotName===this.statics.blotName&&t.domNode.tagName===this.domNode.tagName&&t.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(t.moveChildren(this),t.remove())}replace(e){if(e.statics.blotName!==this.statics.blotName){let t=n.a.create(this.statics.defaultChild);e.moveChildren(t),this.appendChild(t)}super.replace(e)}}l.blotName="list",l.scope=n.a.Scope.BLOCK_BLOT,l.tagName=["OL","UL"],l.defaultChild="list-item",l.allowedChildren=[s]},99:function(e,t,o){"use strict";o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return d}));var i=o(61),n=o.n(i),r=o(131),a=o(128),s=o(101);class l extends s.b{replaceWith(e){this.domNode.textContent=this.domNode.textContent,this.attach(),super.replaceWith(e)}highlight(e){let t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}l.className="ql-syntax";let c=new n.a.Attributor.Class("token","hljs",{scope:n.a.Scope.INLINE});class d extends a.a{static register(){r.a.register(c,!0),r.a.register(l,!0)}constructor(e,t){if(super(e,t),"function"!=typeof this.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");let o=null;this.quill.on(r.a.events.SCROLL_OPTIMIZE,()=>{clearTimeout(o),o=setTimeout(()=>{this.highlight(),o=null},this.options.interval)}),this.highlight()}highlight(){if(this.quill.selection.composing)return;this.quill.update(r.a.sources.USER);let e=this.quill.getSelection();this.quill.scroll.descendants(l).forEach(e=>{e.highlight(this.options.highlight)}),this.quill.update(r.a.sources.SILENT),null!=e&&this.quill.setSelection(e,r.a.sources.SILENT)}}d.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3}}}]);