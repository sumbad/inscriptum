(window.webpackJsonp=window.webpackJsonp||[]).push([[67,25,32,33,34,35,36,39,40,41,42,43,47,48,49,50,52,53,54],{100:function(t,e,n){"use strict";n.r(e),n.d(e,"DescriptionBlot",(function(){return i}));var r=n(60),o=n(69);class i extends o.FieldBlot{static create(t){console.log("DescriptionBlot create ",t);let e=super.create(t);return e.setAttribute("data-placeholder","Summary of the text"),e.setAttribute("data-label","Description"),e}formatAt(t,e,n,r){console.log("DescriptionBlot formatAt ",t,e,n,r),n===i.blotName?super.formatAt(t,e,n,r):"link"===n&&super.formatAt(0,this.length(),n,r)}format(t,e){console.log("DescriptionBlot format ",t,e),super.format(t,e)}replace(t){console.log("DescriptionBlot replace ",t),super.replace(t)}insertAt(t,e,n){console.log("DescriptionBlot insertAt ",t,e,n),super.insertAt(t,e,n)}}i.blotName="blockDescription",i.tagName="address",r.a.register(i)},101:function(t,e,n){"use strict";n.r(e),n.d(e,"SubheaderBlot",(function(){return i}));var r=n(60),o=n(83);class i extends o.HeaderBlot{}i.blotName="blockSubheader",i.tagName="h4",r.a.register(i)},102:function(t,e,n){"use strict";n.r(e);var r=n(175),o=n.n(r),i=n(159),s=n.n(i),a=n(162),c=n.n(a),l=n(158),u=n.n(l),d=n(160),p=n.n(d),h=n(155),f=n.n(h),m=n(157),g=n.n(m),v=n(156),y=n.n(v),b=n(161),w=n.n(b);o.a.registerLanguage("javascript",s.a),o.a.registerLanguage("typescript",c.a),o.a.registerLanguage("sql",p.a),o.a.registerLanguage("html",u.a),o.a.registerLanguage("xml",f.a),o.a.registerLanguage("css",g.a),o.a.registerLanguage("bash",y.a),o.a.registerLanguage("yaml",w.a),e.default=o.a},103:function(t,e,n){"use strict";n.r(e),n.d(e,"DividerBlot",(function(){return o}));var r=n(61);class o extends r.a{}o.blotName="blockDivider",o.tagName="hr"},105:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var r=n(62),o=n.n(r),i=n(61),s=n(146);class a extends i.c{static formats(t){return t.tagName===this.tagName?void 0:super.formats(t)}format(t,e){t!==c.blotName||e?super.format(t,e):this.replaceWith(o.a.create(this.statics.scope))}remove(){null==this.prev&&null==this.next?this.parent.remove():super.remove()}replaceWith(t,e){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,e),this):(this.parent.unwrap(),super.replaceWith(t,e))}}a.blotName="list-item",a.tagName="LI";class c extends s.a{static create(t){let e="ordered"===t?"OL":"UL",n=super.create(e);return"checked"!==t&&"unchecked"!==t||n.setAttribute("data-checked","checked"===t),n}static formats(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}constructor(t){super(t);const e=e=>{if(e.target.parentNode!==t)return;let n=this.statics.formats(t),r=o.a.find(e.target);"checked"===n?r.format("list","unchecked"):"unchecked"===n&&r.format("list","checked")};t.addEventListener("touchstart",e),t.addEventListener("mousedown",e)}format(t,e){this.children.length>0&&this.children.tail.format(t,e)}formats(){return{[this.statics.blotName]:this.statics.formats(this.domNode)}}insertBefore(t,e){if(t instanceof a)super.insertBefore(t,e);else{let n=null==e?this.length():e.offset(this),r=this.split(n);r.parent.insertBefore(t,r)}}optimize(t){super.optimize(t);let e=this.next;null!=e&&e.prev===this&&e.statics.blotName===this.statics.blotName&&e.domNode.tagName===this.domNode.tagName&&e.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(e.moveChildren(this),e.remove())}replace(t){if(t.statics.blotName!==this.statics.blotName){let e=o.a.create(this.statics.defaultChild);t.moveChildren(e),this.appendChild(e)}super.replace(t)}}c.blotName="list",c.scope=o.a.Scope.BLOCK_BLOT,c.tagName=["OL","UL"],c.defaultChild="list-item",c.allowedChildren=[a]},106:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return u}));var r=n(62),o=n.n(r),i=n(141),s=n(139),a=n(118);class c extends a.b{replaceWith(t){this.domNode.textContent=this.domNode.textContent,this.attach(),super.replaceWith(t)}highlight(t){let e=this.domNode.textContent;this.cachedText!==e&&((e.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}c.className="ql-syntax";let l=new o.a.Attributor.Class("token","hljs",{scope:o.a.Scope.INLINE});class u extends s.a{static register(){i.a.register(l,!0),i.a.register(c,!0)}constructor(t,e){if(super(t,e),"function"!=typeof this.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");let n=null;this.quill.on(i.a.events.SCROLL_OPTIMIZE,()=>{clearTimeout(n),n=setTimeout(()=>{this.highlight(),n=null},this.options.interval)}),this.highlight()}highlight(){if(this.quill.selection.composing)return;this.quill.update(i.a.sources.USER);let t=this.quill.getSelection();this.quill.scroll.descendants(c).forEach(t=>{t.highlight(this.options.highlight)}),this.quill.update(i.a.sources.SILENT),null!=t&&this.quill.setSelection(t,i.a.sources.SILENT)}}u.DEFAULTS={highlight:null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value},interval:1e3}},114:function(t,e,n){(function(t,n){var r="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",s="[object Map]",a="[object Set]",c=/\w*$/,l=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,d={};d[r]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object DataView]"]=d["[object Boolean]"]=d["[object Date]"]=d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d[s]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d[a]=d["[object String]"]=d["[object Symbol]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Error]"]=d[o]=d["[object WeakMap]"]=!1;var p="object"==typeof t&&t&&t.Object===Object&&t,h="object"==typeof self&&self&&self.Object===Object&&self,f=p||h||Function("return this")(),m=e&&!e.nodeType&&e,g=m&&"object"==typeof n&&n&&!n.nodeType&&n,v=g&&g.exports===m;function y(t,e){return t.set(e[0],e[1]),t}function b(t,e){return t.add(e),t}function w(t,e,n,r){var o=-1,i=t?t.length:0;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function x(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function _(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function k(t,e){return function(n){return t(e(n))}}function O(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var S,A=Array.prototype,E=Function.prototype,T=Object.prototype,M=f["__core-js_shared__"],N=(S=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",C=E.toString,I=T.hasOwnProperty,D=T.toString,j=RegExp("^"+C.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=v?f.Buffer:void 0,P=f.Symbol,R=f.Uint8Array,B=k(Object.getPrototypeOf,Object),z=Object.create,F=T.propertyIsEnumerable,$=A.splice,V=Object.getOwnPropertySymbols,H=L?L.isBuffer:void 0,U=k(Object.keys,Object),q=gt(f,"DataView"),W=gt(f,"Map"),G=gt(f,"Promise"),K=gt(f,"Set"),J=gt(f,"WeakMap"),Q=gt(Object,"create"),Y=xt(q),X=xt(W),Z=xt(G),tt=xt(K),et=xt(J),nt=P?P.prototype:void 0,rt=nt?nt.valueOf:void 0;function ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function it(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function st(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function at(t){this.__data__=new it(t)}function ct(t,e){var n=kt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ot(t)}(t)&&I.call(t,"callee")&&(!F.call(t,"callee")||D.call(t)==r)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],o=n.length,i=!!o;for(var s in t)!e&&!I.call(t,s)||i&&("length"==s||bt(s,o))||n.push(s);return n}function lt(t,e,n){var r=t[e];I.call(t,e)&&_t(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function ut(t,e){for(var n=t.length;n--;)if(_t(t[n][0],e))return n;return-1}function dt(t,e,n,l,u,p,h){var f;if(l&&(f=p?l(t,u,p,h):l(t)),void 0!==f)return f;if(!Et(t))return t;var m=kt(t);if(m){if(f=function(t){var e=t.length,n=t.constructor(e);e&&"string"==typeof t[0]&&I.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!e)return function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(t,f)}else{var g=yt(t),v=g==o||g==i;if(St(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if("[object Object]"==g||g==r||v&&!p){if(x(t))return p?t:{};if(f=function(t){return"function"!=typeof t.constructor||wt(t)?{}:(e=B(t),Et(e)?z(e):{});var e}(v?{}:t),!e)return function(t,e){return ft(t,vt(t),e)}(t,function(t,e){return t&&ft(e,Tt(e),t)}(f,t))}else{if(!d[g])return p?t:{};f=function(t,e,n,r){var o=t.constructor;switch(e){case"[object ArrayBuffer]":return ht(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return function(t,e){var n=e?ht(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?ht(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,r);case s:return function(t,e,n){return w(e?n(_(t),!0):_(t),y,new t.constructor)}(t,r,n);case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,c.exec(t));return e.lastIndex=t.lastIndex,e}(t);case a:return function(t,e,n){return w(e?n(O(t),!0):O(t),b,new t.constructor)}(t,r,n);case"[object Symbol]":return i=t,rt?Object(rt.call(i)):{}}var i}(t,g,dt,e)}}h||(h=new at);var k=h.get(t);if(k)return k;if(h.set(t,f),!m)var S=n?function(t){return function(t,e,n){var r=e(t);return kt(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,Tt,vt)}(t):Tt(t);return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););}(S||t,(function(r,o){S&&(r=t[o=r]),lt(f,o,dt(r,e,n,l,o,t,h))})),f}function pt(t){return!(!Et(t)||(e=t,N&&N in e))&&(At(t)||x(t)?j:l).test(xt(t));var e}function ht(t){var e=new t.constructor(t.byteLength);return new R(e).set(new R(t)),e}function ft(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var s=e[o],a=r?r(n[s],t[s],s,n,t):void 0;lt(n,s,void 0===a?t[s]:a)}return n}function mt(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function gt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return pt(n)?n:void 0}ot.prototype.clear=function(){this.__data__=Q?Q(null):{}},ot.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},ot.prototype.get=function(t){var e=this.__data__;if(Q){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return I.call(e,t)?e[t]:void 0},ot.prototype.has=function(t){var e=this.__data__;return Q?void 0!==e[t]:I.call(e,t)},ot.prototype.set=function(t,e){return this.__data__[t]=Q&&void 0===e?"__lodash_hash_undefined__":e,this},it.prototype.clear=function(){this.__data__=[]},it.prototype.delete=function(t){var e=this.__data__,n=ut(e,t);return!(n<0)&&(n==e.length-1?e.pop():$.call(e,n,1),!0)},it.prototype.get=function(t){var e=this.__data__,n=ut(e,t);return n<0?void 0:e[n][1]},it.prototype.has=function(t){return ut(this.__data__,t)>-1},it.prototype.set=function(t,e){var n=this.__data__,r=ut(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},st.prototype.clear=function(){this.__data__={hash:new ot,map:new(W||it),string:new ot}},st.prototype.delete=function(t){return mt(this,t).delete(t)},st.prototype.get=function(t){return mt(this,t).get(t)},st.prototype.has=function(t){return mt(this,t).has(t)},st.prototype.set=function(t,e){return mt(this,t).set(t,e),this},at.prototype.clear=function(){this.__data__=new it},at.prototype.delete=function(t){return this.__data__.delete(t)},at.prototype.get=function(t){return this.__data__.get(t)},at.prototype.has=function(t){return this.__data__.has(t)},at.prototype.set=function(t,e){var n=this.__data__;if(n instanceof it){var r=n.__data__;if(!W||r.length<199)return r.push([t,e]),this;n=this.__data__=new st(r)}return n.set(t,e),this};var vt=V?k(V,Object):function(){return[]},yt=function(t){return D.call(t)};function bt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||u.test(t))&&t>-1&&t%1==0&&t<e}function wt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||T)}function xt(t){if(null!=t){try{return C.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function _t(t,e){return t===e||t!=t&&e!=e}(q&&"[object DataView]"!=yt(new q(new ArrayBuffer(1)))||W&&yt(new W)!=s||G&&"[object Promise]"!=yt(G.resolve())||K&&yt(new K)!=a||J&&"[object WeakMap]"!=yt(new J))&&(yt=function(t){var e=D.call(t),n="[object Object]"==e?t.constructor:void 0,r=n?xt(n):void 0;if(r)switch(r){case Y:return"[object DataView]";case X:return s;case Z:return"[object Promise]";case tt:return a;case et:return"[object WeakMap]"}return e});var kt=Array.isArray;function Ot(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!At(t)}var St=H||function(){return!1};function At(t){var e=Et(t)?D.call(t):"";return e==o||e==i}function Et(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Tt(t){return Ot(t)?ct(t):function(t){if(!wt(t))return U(t);var e=[];for(var n in Object(t))I.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}n.exports=function(t){return dt(t,!0,!0)}}).call(this,n(36),n(115)(t))},115:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},116:function(t,e,n){(function(t,n){var r="[object Arguments]",o="[object Map]",i="[object Object]",s="[object Set]",a=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[r]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l[o]=l["[object Number]"]=l[i]=l["[object RegExp]"]=l[s]=l["[object String]"]=l["[object WeakMap]"]=!1;var u="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,p=u||d||Function("return this")(),h=e&&!e.nodeType&&e,f=h&&"object"==typeof n&&n&&!n.nodeType&&n,m=f&&f.exports===h,g=m&&u.process,v=function(){try{return g&&g.binding&&g.binding("util")}catch(t){}}(),y=v&&v.isTypedArray;function b(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function w(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function x(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var _,k,O,S=Array.prototype,A=Function.prototype,E=Object.prototype,T=p["__core-js_shared__"],M=A.toString,N=E.hasOwnProperty,C=(_=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",I=E.toString,D=RegExp("^"+M.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=m?p.Buffer:void 0,L=p.Symbol,P=p.Uint8Array,R=E.propertyIsEnumerable,B=S.splice,z=L?L.toStringTag:void 0,F=Object.getOwnPropertySymbols,$=j?j.isBuffer:void 0,V=(k=Object.keys,O=Object,function(t){return k(O(t))}),H=vt(p,"DataView"),U=vt(p,"Map"),q=vt(p,"Promise"),W=vt(p,"Set"),G=vt(p,"WeakMap"),K=vt(Object,"create"),J=xt(H),Q=xt(U),Y=xt(q),X=xt(W),Z=xt(G),tt=L?L.prototype:void 0,et=tt?tt.valueOf:void 0;function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ot(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function it(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ot;++e<n;)this.add(t[e])}function st(t){var e=this.__data__=new rt(t);this.size=e.size}function at(t,e){var n=Ot(t),r=!n&&kt(t),o=!n&&!r&&St(t),i=!n&&!r&&!o&&Nt(t),s=n||r||o||i,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=a.length;for(var l in t)!e&&!N.call(t,l)||s&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||wt(l,c))||a.push(l);return a}function ct(t,e){for(var n=t.length;n--;)if(_t(t[n][0],e))return n;return-1}function lt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":z&&z in Object(t)?function(t){var e=N.call(t,z),n=t[z];try{t[z]=void 0;var r=!0}catch(t){}var o=I.call(t);r&&(e?t[z]=n:delete t[z]);return o}(t):function(t){return I.call(t)}(t)}function ut(t){return Mt(t)&&lt(t)==r}function dt(t,e,n,a,c){return t===e||(null==t||null==e||!Mt(t)&&!Mt(e)?t!=t&&e!=e:function(t,e,n,a,c,l){var u=Ot(t),d=Ot(e),p=u?"[object Array]":bt(t),h=d?"[object Array]":bt(e),f=(p=p==r?i:p)==i,m=(h=h==r?i:h)==i,g=p==h;if(g&&St(t)){if(!St(e))return!1;u=!0,f=!1}if(g&&!f)return l||(l=new st),u||Nt(t)?ft(t,e,n,a,c,l):function(t,e,n,r,i,a,c){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new P(t),new P(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _t(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case o:var l=w;case s:var u=1&r;if(l||(l=x),t.size!=e.size&&!u)return!1;var d=c.get(t);if(d)return d==e;r|=2,c.set(t,e);var p=ft(l(t),l(e),r,i,a,c);return c.delete(t),p;case"[object Symbol]":if(et)return et.call(t)==et.call(e)}return!1}(t,e,p,n,a,c,l);if(!(1&n)){var v=f&&N.call(t,"__wrapped__"),y=m&&N.call(e,"__wrapped__");if(v||y){var b=v?t.value():t,_=y?e.value():e;return l||(l=new st),c(b,_,n,a,l)}}if(!g)return!1;return l||(l=new st),function(t,e,n,r,o,i){var s=1&n,a=mt(t),c=a.length,l=mt(e).length;if(c!=l&&!s)return!1;var u=c;for(;u--;){var d=a[u];if(!(s?d in e:N.call(e,d)))return!1}var p=i.get(t);if(p&&i.get(e))return p==e;var h=!0;i.set(t,e),i.set(e,t);var f=s;for(;++u<c;){d=a[u];var m=t[d],g=e[d];if(r)var v=s?r(g,m,d,e,t,i):r(m,g,d,t,e,i);if(!(void 0===v?m===g||o(m,g,n,r,i):v)){h=!1;break}f||(f="constructor"==d)}if(h&&!f){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(h=!1)}return i.delete(t),i.delete(e),h}(t,e,n,a,c,l)}(t,e,n,a,dt,c))}function pt(t){return!(!Tt(t)||function(t){return!!C&&C in t}(t))&&(At(t)?D:a).test(xt(t))}function ht(t){if(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||E,e!==r)return V(t);var e,n,r,o=[];for(var i in Object(t))N.call(t,i)&&"constructor"!=i&&o.push(i);return o}function ft(t,e,n,r,o,i){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var l=i.get(t);if(l&&i.get(e))return l==e;var u=-1,d=!0,p=2&n?new it:void 0;for(i.set(t,e),i.set(e,t);++u<a;){var h=t[u],f=e[u];if(r)var m=s?r(f,h,u,e,t,i):r(h,f,u,t,e,i);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!b(e,(function(t,e){if(s=e,!p.has(s)&&(h===t||o(h,t,n,r,i)))return p.push(e);var s}))){d=!1;break}}else if(h!==f&&!o(h,f,n,r,i)){d=!1;break}}return i.delete(t),i.delete(e),d}function mt(t){return function(t,e,n){var r=e(t);return Ot(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,Ct,yt)}function gt(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function vt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return pt(n)?n:void 0}nt.prototype.clear=function(){this.__data__=K?K(null):{},this.size=0},nt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},nt.prototype.get=function(t){var e=this.__data__;if(K){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return N.call(e,t)?e[t]:void 0},nt.prototype.has=function(t){var e=this.__data__;return K?void 0!==e[t]:N.call(e,t)},nt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=K&&void 0===e?"__lodash_hash_undefined__":e,this},rt.prototype.clear=function(){this.__data__=[],this.size=0},rt.prototype.delete=function(t){var e=this.__data__,n=ct(e,t);return!(n<0)&&(n==e.length-1?e.pop():B.call(e,n,1),--this.size,!0)},rt.prototype.get=function(t){var e=this.__data__,n=ct(e,t);return n<0?void 0:e[n][1]},rt.prototype.has=function(t){return ct(this.__data__,t)>-1},rt.prototype.set=function(t,e){var n=this.__data__,r=ct(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},ot.prototype.clear=function(){this.size=0,this.__data__={hash:new nt,map:new(U||rt),string:new nt}},ot.prototype.delete=function(t){var e=gt(this,t).delete(t);return this.size-=e?1:0,e},ot.prototype.get=function(t){return gt(this,t).get(t)},ot.prototype.has=function(t){return gt(this,t).has(t)},ot.prototype.set=function(t,e){var n=gt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},it.prototype.add=it.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},it.prototype.has=function(t){return this.__data__.has(t)},st.prototype.clear=function(){this.__data__=new rt,this.size=0},st.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},st.prototype.get=function(t){return this.__data__.get(t)},st.prototype.has=function(t){return this.__data__.has(t)},st.prototype.set=function(t,e){var n=this.__data__;if(n instanceof rt){var r=n.__data__;if(!U||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ot(r)}return n.set(t,e),this.size=n.size,this};var yt=F?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}(F(t),(function(e){return R.call(t,e)})))}:function(){return[]},bt=lt;function wt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||c.test(t))&&t>-1&&t%1==0&&t<e}function xt(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function _t(t,e){return t===e||t!=t&&e!=e}(H&&"[object DataView]"!=bt(new H(new ArrayBuffer(1)))||U&&bt(new U)!=o||q&&"[object Promise]"!=bt(q.resolve())||W&&bt(new W)!=s||G&&"[object WeakMap]"!=bt(new G))&&(bt=function(t){var e=lt(t),n=e==i?t.constructor:void 0,r=n?xt(n):"";if(r)switch(r){case J:return"[object DataView]";case Q:return o;case Y:return"[object Promise]";case X:return s;case Z:return"[object WeakMap]"}return e});var kt=ut(function(){return arguments}())?ut:function(t){return Mt(t)&&N.call(t,"callee")&&!R.call(t,"callee")},Ot=Array.isArray;var St=$||function(){return!1};function At(t){if(!Tt(t))return!1;var e=lt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Et(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Tt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Mt(t){return null!=t&&"object"==typeof t}var Nt=y?function(t){return function(e){return t(e)}}(y):function(t){return Mt(t)&&Et(t.length)&&!!l[lt(t)]};function Ct(t){return null!=(e=t)&&Et(e.length)&&!At(e)?at(t):ht(t);var e}n.exports=function(t,e){return dt(t,e)}}).call(this,n(36),n(115)(t))},117:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,i=r(n(145));!function(t){t.iterator=function(t){return new i.default(t)},t.length=function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}}(o||(o={})),e.default=o},119:function(t,e,n){"use strict";var r=n(81);class o extends r.a{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}o.blotName="bold",o.tagName=["STRONG","B"],e.a=o},126:function(t,e,n){var r,o,i;!function(s){"use strict";o=[n(63)],void 0===(i="function"==typeof(r=function(t){var e=t.transform;t.transform=function(n,r,o,i,s){e.call(t,t.scale(n,r,s),r,o,i,s)},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var n,r,o,i,s=e.aspectRatio;if(!s)return e;for(r in n={},e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n.crop=!0,(o=t.naturalWidth||t.width)/(i=t.naturalHeight||t.height)>s?(n.maxWidth=i*s,n.maxHeight=i):(n.maxWidth=o,n.maxHeight=o/s),n},t.renderImageToCanvas=function(t,e,n,r,o,i,s,a,c,l,u){var d=t.getContext("2d");return!1===u.imageSmoothingEnabled?d.imageSmoothingEnabled=!1:u.imageSmoothingQuality&&(d.imageSmoothingQuality=u.imageSmoothingQuality),d.drawImage(e,n,r,o,i,s,a,c,l),t},t.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,n,r){n=n||{};var o,i,s,a,c,l,u,d,p,h,f,m=document.createElement("canvas"),g=e.getContext||t.hasCanvasOption(n)&&m.getContext,v=e.naturalWidth||e.width,y=e.naturalHeight||e.height,b=v,w=y;function x(){var t=Math.max((s||b)/b,(a||w)/w);t>1&&(b*=t,w*=t)}function _(){var t=Math.min((o||b)/b,(i||w)/w);t<1&&(b*=t,w*=t)}if(g&&(u=(n=t.getTransformedOptions(e,n,r)).left||0,d=n.top||0,n.sourceWidth?(c=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(u=v-c-n.right)):c=v-u-(n.right||0),n.sourceHeight?(l=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(d=y-l-n.bottom)):l=y-d-(n.bottom||0),b=c,w=l),o=n.maxWidth,i=n.maxHeight,s=n.minWidth,a=n.minHeight,g&&o&&i&&n.crop?(b=o,w=i,(f=c/l-o/i)<0?(l=i*c/o,void 0===n.top&&void 0===n.bottom&&(d=(y-l)/2)):f>0&&(c=o*l/i,void 0===n.left&&void 0===n.right&&(u=(v-c)/2))):((n.contain||n.cover)&&(s=o=o||s,a=i=i||a),n.cover?(_(),x()):(x(),_())),g){if((p=n.pixelRatio)>1&&(m.style.width=b+"px",m.style.height=w+"px",b*=p,w*=p,m.getContext("2d").scale(p,p)),(h=n.downsamplingRatio)>0&&h<1&&b<c&&w<l)for(;c*h>b;)m.width=c*h,m.height=l*h,t.renderImageToCanvas(m,e,u,d,c,l,0,0,m.width,m.height,n),u=0,d=0,c=m.width,l=m.height,(e=document.createElement("canvas")).width=c,e.height=l,t.renderImageToCanvas(e,m,0,0,c,l,0,0,c,l,n);return m.width=b,m.height=w,t.transformCoordinates(m,n),t.renderImageToCanvas(m,e,u,d,c,l,0,0,b,w,n)}return e.width=b,e.height=w,e}})?r.apply(e,o):r)||(t.exports=i)}()},127:function(t,e,n){var r,o,i;!function(s){"use strict";o=[n(63),n(80)],void 0===(i="function"==typeof(r=function(t){t.ExifMap=function(){return this},t.ExifMap.prototype.map={Orientation:274},t.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},t.getExifThumbnail=function(e,n,r){if(r&&!(n+r>e.byteLength))return t.createObjectURL(new Blob([e.buffer.slice(n,n+r)]));console.log("Invalid Exif data: Invalid thumbnail data.")},t.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,n){return t.getUint16(e,n)},size:2},4:{getValue:function(t,e,n){return t.getUint32(e,n)},size:4},5:{getValue:function(t,e,n){return t.getUint32(e,n)/t.getUint32(e+4,n)},size:8},9:{getValue:function(t,e,n){return t.getInt32(e,n)},size:4},10:{getValue:function(t,e,n){return t.getInt32(e,n)/t.getInt32(e+4,n)},size:8}},t.exifTagTypes[7]=t.exifTagTypes[1],t.getExifValue=function(e,n,r,o,i,s){var a,c,l,u,d,p,h=t.exifTagTypes[o];if(h){if(!((c=(a=h.size*i)>4?n+e.getUint32(r+8,s):r+8)+a>e.byteLength)){if(1===i)return h.getValue(e,c,s);for(l=[],u=0;u<i;u+=1)l[u]=h.getValue(e,c+u*h.size,s);if(h.ascii){for(d="",u=0;u<l.length&&"\0"!==(p=l[u]);u+=1)d+=p;return d}return l}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},t.parseExifTag=function(e,n,r,o){return{number:e.getUint16(r,o),value:t.getExifValue(e,n,r,e.getUint16(r+2,o),e.getUint32(r+4,o),o)}},t.parseExifTags=function(t,e,n,r,o){var i,s,a,c,l;if(n+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((s=n+2+12*(i=t.getUint16(n,r)))+4>t.byteLength)){for(a=0;a<i;a+=1)c=n+2+12*a,l=this.parseExifTag(t,e,c,r,o),o.exif[l.number]=l.value,o.exifOffsets&&(o.exifOffsets[l.number]=c);return t.getUint32(s,r)}console.log("Invalid Exif data: Invalid directory size.")}},t.parseExifData=function(e,n,r,o,i){if(!i.disableExif){var s,a,c,l=n+10;if(1165519206===e.getUint32(n+4))if(l+8>e.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===e.getUint16(n+8)){switch(e.getUint16(l)){case 18761:s=!0;break;case 19789:s=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===e.getUint16(l+2,s)?(a=e.getUint32(l+4,s),o.exif=new t.ExifMap,i.disableExifOffsets||(o.exifOffsets=new t.ExifMap,o.exifTiffOffset=l,o.exifLittleEndian=s),(a=t.parseExifTags(e,l,l+a,s,o))&&!i.disableExifThumbnail&&(c={exif:{}},a=t.parseExifTags(e,l,l+a,s,c),c.exif[513]&&(o.exif.Thumbnail=t.getExifThumbnail(e,l+c.exif[513],c.exif[514]))),o.exif[34665]&&!i.disableExifSub&&t.parseExifTags(e,l,l+o.exif[34665],s,o),o.exif[34853]&&!i.disableExifGps&&t.parseExifTags(e,l,l+o.exif[34853],s,o)):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},t.metaDataParsers.jpeg[65505].push(t.parseExifData),t.exifWriters={274:function(t,e,n){return new DataView(t,e.exifOffsets[274]+8,2).setUint16(0,n,e.exifLittleEndian),t}},t.writeExifData=function(e,n,r,o){t.exifWriters[n.exif.map[r]](e,n,o)}})?r.apply(e,o):r)||(t.exports=i)}()},128:function(t,e,n){var r,o,i;!function(s){"use strict";o=[n(63),n(80)],void 0===(i="function"==typeof(r=function(t){t.IptcMap=function(){return this},t.IptcMap.prototype.map={ObjectName:5},t.IptcMap.prototype.get=function(t){return this[t]||this[this.map[t]]},t.parseIptcTags=function(t,e,n,r){function o(t,e,n){for(var r="",o=e;o<e+n;o++)r+=String.fromCharCode(t.getUint8(o));return r}for(var i,s,a,c=e;c<e+n;)28===t.getUint8(c)&&2===t.getUint8(c+1)&&(a=t.getUint8(c+2))in r.iptc.tags&&(s=t.getInt16(c+3),i=o(t,c+5,s),Object.prototype.hasOwnProperty.call(r.iptc,a)?r.iptc[a]instanceof Array?r.iptc[a].push(i):r.iptc[a]=[r.iptc[a],i]:r.iptc[a]=i),c++},t.parseIptcData=function(e,n,r,o,i){if(!i.disableIptc){for(var s=n+r,a=function(t,e){return 943868237===t.getUint32(e)&&1028===t.getUint16(e+4)};n+8<s;){if(a(e,n)){var c=e.getUint8(n+7);c%2!=0&&(c+=1),0===c&&(c=4);var l=n+8+c;if(l>s){console.log("Invalid IPTC data: Invalid segment offset.");break}var u=e.getUint16(n+6+c);if(n+u>s){console.log("Invalid IPTC data: Invalid segment size.");break}return o.iptc=new t.IptcMap,t.parseIptcTags(e,l,u,o)}n++}console.log("No IPTC data at this offset - could be XMP")}},t.metaDataParsers.jpeg[65517].push(t.parseIptcData)})?r.apply(e,o):r)||(t.exports=i)}()},131:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return l}));var r=n(74),o=n(84),i=function(t,e){var n;this.match=t,this.handler="string"==typeof e?(n=e,function(t,e,r,o){var i=n;if(e[1]){var s=e[0].lastIndexOf(e[1]);i+=e[0].slice(s+e[1].length);var a=(r+=s)-o;a>0&&(i=e[0].slice(s-a,s)+i,r=o)}return t.tr.insertText(i,r,o)}):e};function s(t){var e=t.rules,n=new r.d({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,r,o,i){return a(t,r,o,i,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r=t.state.selection.$cursor;r&&a(t,r.pos,r.pos,"",e,n)}))}}},isInputRules:!0});return n}function a(t,e,n,r,o,i){if(t.composing)return!1;var s=t.state,a=s.doc.resolve(e);if(a.parent.type.spec.code)return!1;for(var c=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"￼")+r,l=0;l<o.length;l++){var u=o[l].match.exec(c),d=u&&o[l].handler(s,u,e-(u[0].length-r.length),n);if(d)return t.dispatch(d.setMeta(i,{transform:d,from:e,to:n,text:r})),!0}return!1}function c(t,e){for(var n=t.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){for(var s=t.tr,a=i.transform,c=a.steps.length-1;c>=0;c--)s.step(a.steps[c].invert(a.docs[c]));if(i.text){var l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else s.delete(i.from,i.to);e(s)}return!0}}return!1}new i(/--$/,"—"),new i(/\.\.\.$/,"…"),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new i(/"$/,"”"),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new i(/'$/,"’");function l(t,e,n,r){return new i(t,(function(t,i,s,a){var c=n instanceof Function?n(i):n,l=t.tr.delete(s,a),u=l.doc.resolve(s).blockRange(),d=u&&Object(o.h)(u,e,c);if(!d)return null;l.wrap(u,d);var p=l.doc.resolve(s-1).nodeBefore;return p&&p.type==e&&Object(o.e)(l.doc,s-1)&&(!r||r(i,p))&&l.join(s-1),l}))}function u(t,e,n){return new i(t,(function(t,r,o,i){var s=t.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(o,i).setBlockType(o,o,e,a):null}))}},138:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=r(n(143)),i=r(n(114)),s=r(n(116)),a=r(n(144)),c=r(n(117)),l=String.fromCharCode(0),u=function(){function t(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}return t.prototype.insert=function(t,e){var n={};return"string"==typeof t&&0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))},t.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},t.prototype.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},t.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=i.default(t),"object"==typeof n){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,"object"!=typeof(n=this.ops[e-1])))return this.ops.unshift(t),this;if(s.default(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},t.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},t.prototype.filter=function(t){return this.ops.filter(t)},t.prototype.forEach=function(t){this.ops.forEach(t)},t.prototype.map=function(t){return this.ops.map(t)},t.prototype.partition=function(t){var e=[],n=[];return this.forEach((function(r){(t(r)?e:n).push(r)})),[e,n]},t.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},t.prototype.changeLength=function(){return this.reduce((function(t,e){return e.insert?t+c.default.length(e):e.delete?t-e.delete:t}),0)},t.prototype.length=function(){return this.reduce((function(t,e){return t+c.default.length(e)}),0)},t.prototype.slice=function(e,n){void 0===e&&(e=0),void 0===n&&(n=1/0);for(var r=[],o=c.default.iterator(this.ops),i=0;i<n&&o.hasNext();){var s=void 0;i<e?s=o.next(e-i):(s=o.next(n-i),r.push(s)),i+=c.default.length(s)}return new t(r)},t.prototype.compose=function(e){var n=c.default.iterator(this.ops),r=c.default.iterator(e.ops),o=[],i=r.peek();if(null!=i&&"number"==typeof i.retain&&null==i.attributes){for(var l=i.retain;"insert"===n.peekType()&&n.peekLength()<=l;)l-=n.peekLength(),o.push(n.next());i.retain-l>0&&r.next(i.retain-l)}for(var u=new t(o);n.hasNext()||r.hasNext();)if("insert"===r.peekType())u.push(r.next());else if("delete"===n.peekType())u.push(n.next());else{var d=Math.min(n.peekLength(),r.peekLength()),p=n.next(d),h=r.next(d);if("number"==typeof h.retain){var f={};"number"==typeof p.retain?f.retain=d:f.insert=p.insert;var m=a.default.compose(p.attributes,h.attributes,"number"==typeof p.retain);if(m&&(f.attributes=m),u.push(f),!r.hasNext()&&s.default(u.ops[u.ops.length-1],f)){var g=new t(n.rest());return u.concat(g).chop()}}else"number"==typeof h.delete&&"number"==typeof p.retain&&u.push(h)}return u.chop()},t.prototype.concat=function(e){var n=new t(this.ops.slice());return e.ops.length>0&&(n.push(e.ops[0]),n.ops=n.ops.concat(e.ops.slice(1))),n},t.prototype.diff=function(e,n){if(this.ops===e.ops)return new t;var r=[this,e].map((function(t){return t.map((function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:l;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),i=new t,u=o.default(r[0],r[1],n),d=c.default.iterator(this.ops),p=c.default.iterator(e.ops);return u.forEach((function(t){for(var e=t[1].length;e>0;){var n=0;switch(t[0]){case o.default.INSERT:n=Math.min(p.peekLength(),e),i.push(p.next(n));break;case o.default.DELETE:n=Math.min(e,d.peekLength()),d.next(n),i.delete(n);break;case o.default.EQUAL:n=Math.min(d.peekLength(),p.peekLength(),e);var r=d.next(n),c=p.next(n);s.default(r.insert,c.insert)?i.retain(n,a.default.diff(r.attributes,c.attributes)):i.push(c).delete(n)}e-=n}})),i.chop()},t.prototype.eachLine=function(e,n){void 0===n&&(n="\n");for(var r=c.default.iterator(this.ops),o=new t,i=0;r.hasNext();){if("insert"!==r.peekType())return;var s=r.peek(),a=c.default.length(s)-r.peekLength(),l="string"==typeof s.insert?s.insert.indexOf(n,a)-a:-1;if(l<0)o.push(r.next());else if(l>0)o.push(r.next(l));else{if(!1===e(o,r.next(1).attributes||{},i))return;i+=1,o=new t}}o.length()>0&&e(o,{},i)},t.prototype.invert=function(e){var n=new t;return this.reduce((function(t,r){if(r.insert)n.delete(c.default.length(r));else{if(r.retain&&null==r.attributes)return n.retain(r.retain),t+r.retain;if(r.delete||r.retain&&r.attributes){var o=r.delete||r.retain;return e.slice(t,t+o).forEach((function(t){r.delete?n.push(t):r.retain&&r.attributes&&n.retain(c.default.length(t),a.default.invert(r.attributes,t.attributes))})),t+o}}return t}),0),n.chop()},t.prototype.transform=function(e,n){if(void 0===n&&(n=!1),n=!!n,"number"==typeof e)return this.transformPosition(e,n);for(var r=e,o=c.default.iterator(this.ops),i=c.default.iterator(r.ops),s=new t;o.hasNext()||i.hasNext();)if("insert"!==o.peekType()||!n&&"insert"===i.peekType())if("insert"===i.peekType())s.push(i.next());else{var l=Math.min(o.peekLength(),i.peekLength()),u=o.next(l),d=i.next(l);if(u.delete)continue;d.delete?s.push(d):s.retain(l,a.default.transform(u.attributes,d.attributes,n))}else s.retain(c.default.length(o.next()));return s.chop()},t.prototype.transformPosition=function(t,e){void 0===e&&(e=!1),e=!!e;for(var n=c.default.iterator(this.ops),r=0;n.hasNext()&&r<=t;){var o=n.peekLength(),i=n.peekType();n.next(),"delete"!==i?("insert"===i&&(r<t||!e)&&(t+=o),r+=o):t-=Math.min(o,t-r)}return t},t.Op=c.default,t.AttributeMap=a.default,t}();t.exports=u},143:function(t,e){function n(t,e,s,a){if(t===e)return t?[[0,t]]:[];if(null!=s){var d=function(t,e,n){var r="number"==typeof n?{index:n,length:0}:n.oldRange,o="number"==typeof n?null:n.newRange,i=t.length,s=e.length;if(0===r.length&&(null===o||0===o.length)){var a=r.index,c=t.slice(0,a),l=t.slice(a),d=o?o.index:null,p=a+s-i;if((null===d||d===p)&&!(p<0||p>s)){var h=e.slice(0,p);if((w=e.slice(p))===l){var f=Math.min(a,p),m=c.slice(0,f),g=h.slice(0,f);if(m===g){var v=c.slice(f),y=h.slice(f);return u(m,v,y,l)}}}if(null===d||d===a){var b=a,w=(h=e.slice(0,b),e.slice(b));if(h===c){var x=Math.min(i-b,s-b),_=l.slice(l.length-x),k=w.slice(w.length-x);if(_===k){v=l.slice(0,l.length-x),y=w.slice(0,w.length-x);return u(c,v,y,_)}}}}if(r.length>0&&o&&0===o.length){m=t.slice(0,r.index),_=t.slice(r.index+r.length),f=m.length,x=_.length;if(!(s<f+x)){g=e.slice(0,f),k=e.slice(s-x);if(m===g&&_===k){v=t.slice(f,i-x),y=e.slice(f,s-x);return u(m,v,y,_)}}}return null}(t,e,s);if(d)return d}var p=o(t,e),h=t.substring(0,p);p=i(t=t.substring(p),e=e.substring(p));var f=t.substring(t.length-p),m=function(t,e){var s;if(!t)return[[1,e]];if(!e)return[[-1,t]];var a=t.length>e.length?t:e,c=t.length>e.length?e:t,l=a.indexOf(c);if(-1!==l)return s=[[1,a.substring(0,l)],[0,c],[1,a.substring(l+c.length)]],t.length>e.length&&(s[0][0]=s[2][0]=-1),s;if(1===c.length)return[[-1,t],[1,e]];var u=function(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;function s(t,e,n){for(var r,s,a,c,l=t.substring(n,n+Math.floor(t.length/4)),u=-1,d="";-1!==(u=e.indexOf(l,u+1));){var p=o(t.substring(n),e.substring(u)),h=i(t.substring(0,n),e.substring(0,u));d.length<h+p&&(d=e.substring(u-h,u)+e.substring(u,u+p),r=t.substring(0,n-h),s=t.substring(n+p),a=e.substring(0,u-h),c=e.substring(u+p))}return 2*d.length>=t.length?[r,s,a,c,d]:null}var a,c,l,u,d,p=s(n,r,Math.ceil(n.length/4)),h=s(n,r,Math.ceil(n.length/2));if(!p&&!h)return null;a=h?p&&p[4].length>h[4].length?p:h:p;t.length>e.length?(c=a[0],l=a[1],u=a[2],d=a[3]):(u=a[0],d=a[1],c=a[2],l=a[3]);var f=a[4];return[c,l,u,d,f]}(t,e);if(u){var d=u[0],p=u[1],h=u[2],f=u[3],m=u[4],g=n(d,h),v=n(p,f);return g.concat([[0,m]],v)}return function(t,e){for(var n=t.length,o=e.length,i=Math.ceil((n+o)/2),s=i,a=2*i,c=new Array(a),l=new Array(a),u=0;u<a;u++)c[u]=-1,l[u]=-1;c[s+1]=0,l[s+1]=0;for(var d=n-o,p=d%2!=0,h=0,f=0,m=0,g=0,v=0;v<i;v++){for(var y=-v+h;y<=v-f;y+=2){for(var b=s+y,w=(S=y===-v||y!==v&&c[b-1]<c[b+1]?c[b+1]:c[b-1]+1)-y;S<n&&w<o&&t.charAt(S)===e.charAt(w);)S++,w++;if(c[b]=S,S>n)f+=2;else if(w>o)h+=2;else if(p){if((k=s+d-y)>=0&&k<a&&-1!==l[k]){var x=n-l[k];if(S>=x)return r(t,e,S,w)}}}for(var _=-v+m;_<=v-g;_+=2){for(var k=s+_,O=(x=_===-v||_!==v&&l[k-1]<l[k+1]?l[k+1]:l[k-1]+1)-_;x<n&&O<o&&t.charAt(n-x-1)===e.charAt(o-O-1);)x++,O++;if(l[k]=x,x>n)g+=2;else if(O>o)m+=2;else if(!p){if((b=s+d-_)>=0&&b<a&&-1!==c[b]){var S=c[b];w=s+S-b;if(S>=(x=n-x))return r(t,e,S,w)}}}}return[[-1,t],[1,e]]}(t,e)}(t=t.substring(0,t.length-p),e=e.substring(0,e.length-p));return h&&m.unshift([0,h]),f&&m.push([0,f]),function t(e,n){e.push([0,""]);var r,s=0,a=0,u=0,d="",p="";for(;s<e.length;)if(s<e.length-1&&!e[s][1])e.splice(s,1);else switch(e[s][0]){case 1:u++,p+=e[s][1],s++;break;case-1:a++,d+=e[s][1],s++;break;case 0:var h=s-u-a-1;if(n){if(h>=0&&l(e[h][1])){var f=e[h][1].slice(-1);if(e[h][1]=e[h][1].slice(0,-1),d=f+d,p=f+p,!e[h][1]){e.splice(h,1),s--;var m=h-1;e[m]&&1===e[m][0]&&(u++,p=e[m][1]+p,m--),e[m]&&-1===e[m][0]&&(a++,d=e[m][1]+d,m--),h=m}}if(c(e[s][1])){f=e[s][1].charAt(0);e[s][1]=e[s][1].slice(1),d+=f,p+=f}}if(s<e.length-1&&!e[s][1]){e.splice(s,1);break}if(d.length>0||p.length>0){d.length>0&&p.length>0&&(0!==(r=o(p,d))&&(h>=0?e[h][1]+=p.substring(0,r):(e.splice(0,0,[0,p.substring(0,r)]),s++),p=p.substring(r),d=d.substring(r)),0!==(r=i(p,d))&&(e[s][1]=p.substring(p.length-r)+e[s][1],p=p.substring(0,p.length-r),d=d.substring(0,d.length-r)));var g=u+a;0===d.length&&0===p.length?(e.splice(s-g,g),s-=g):0===d.length?(e.splice(s-g,g,[1,p]),s=s-g+1):0===p.length?(e.splice(s-g,g,[-1,d]),s=s-g+1):(e.splice(s-g,g,[-1,d],[1,p]),s=s-g+2)}0!==s&&0===e[s-1][0]?(e[s-1][1]+=e[s][1],e.splice(s,1)):s++,u=0,a=0,d="",p=""}""===e[e.length-1][1]&&e.pop();var v=!1;s=1;for(;s<e.length-1;)0===e[s-1][0]&&0===e[s+1][0]&&(e[s][1].substring(e[s][1].length-e[s-1][1].length)===e[s-1][1]?(e[s][1]=e[s-1][1]+e[s][1].substring(0,e[s][1].length-e[s-1][1].length),e[s+1][1]=e[s-1][1]+e[s+1][1],e.splice(s-1,1),v=!0):e[s][1].substring(0,e[s+1][1].length)==e[s+1][1]&&(e[s-1][1]+=e[s+1][1],e[s][1]=e[s][1].substring(e[s+1][1].length)+e[s+1][1],e.splice(s+1,1),v=!0)),s++;v&&t(e,n)}(m,a),m}function r(t,e,r,o){var i=t.substring(0,r),s=e.substring(0,o),a=t.substring(r),c=e.substring(o),l=n(i,s),u=n(a,c);return l.concat(u)}function o(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(i,o)==e.substring(i,o)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return s(t.charCodeAt(o-1))&&o--,o}function i(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(t.length-o,t.length-i)==e.substring(e.length-o,e.length-i)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return a(t.charCodeAt(t.length-o))&&o--,o}function s(t){return t>=55296&&t<=56319}function a(t){return t>=56320&&t<=57343}function c(t){return a(t.charCodeAt(0))}function l(t){return s(t.charCodeAt(t.length-1))}function u(t,e,n,r){return l(t)||c(r)?null:function(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}([[0,t],[-1,e],[1,n],[0,r]])}function d(t,e,r){return n(t,e,r,!0)}d.INSERT=1,d.DELETE=-1,d.EQUAL=0,t.exports=d},144:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,i=r(n(114)),s=r(n(116));!function(t){t.compose=function(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var r=i.default(e);for(var o in n||(r=Object.keys(r).reduce((function(t,e){return null!=r[e]&&(t[e]=r[e]),t}),{})),t)void 0!==t[o]&&void 0===e[o]&&(r[o]=t[o]);return Object.keys(r).length>0?r:void 0},t.diff=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce((function(n,r){return s.default(t[r],e[r])||(n[r]=void 0===e[r]?null:e[r]),n}),{});return Object.keys(n).length>0?n:void 0},t.invert=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),t=t||{};var n=Object.keys(e).reduce((function(n,r){return e[r]!==t[r]&&void 0!==t[r]&&(n[r]=e[r]),n}),{});return Object.keys(t).reduce((function(n,r){return t[r]!==e[r]&&void 0===e[r]&&(n[r]=null),n}),n)},t.transform=function(t,e,n){if(void 0===n&&(n=!1),"object"!=typeof t)return e;if("object"==typeof e){if(!n)return e;var r=Object.keys(e).reduce((function(n,r){return void 0===t[r]&&(n[r]=e[r]),n}),{});return Object.keys(r).length>0?r:void 0}}}(o||(o={})),e.default=o},145:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(117)),i=function(){function t(t){this.ops=t,this.index=0,this.offset=0}return t.prototype.hasNext=function(){return this.peekLength()<1/0},t.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,r=o.default.length(e);if(t>=r-n?(t=r-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var i={};return e.attributes&&(i.attributes=e.attributes),"number"==typeof e.retain?i.retain=t:"string"==typeof e.insert?i.insert=e.insert.substr(n,t):i.insert=e.insert,i}return{retain:1/0}},t.prototype.peek=function(){return this.ops[this.index]},t.prototype.peekLength=function(){return this.ops[this.index]?o.default.length(this.ops[this.index])-this.offset:1/0},t.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},t.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(r)}return[]},t}();e.default=i},147:function(t,e,n){"use strict";var r=n(119);class o extends r.a{}o.blotName="italic",o.tagName=["EM","I"],e.a=o},163:function(t,e,n){t.exports=n(63),n(126),n(80),n(164),n(127),n(165),n(128),n(166),n(167)},164:function(t,e,n){var r,o,i;!function(s){"use strict";o=[n(63),n(80)],void 0===(i="function"==typeof(r=function(t){"undefined"!=typeof fetch&&"undefined"!=typeof Request?t.fetchBlob=function(e,n,r){t.hasMetaOption(r)?fetch(new Request(e,r)).then((function(t){return t.blob()})).then(n).catch((function(t){console.log(t),n()})):n()}:"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof ProgressEvent&&(t.fetchBlob=function(e,n,r){if(t.hasMetaOption(r)){r=r||{};var o=new XMLHttpRequest;o.open(r.method||"GET",e),r.headers&&Object.keys(r.headers).forEach((function(t){o.setRequestHeader(t,r.headers[t])})),o.withCredentials="include"===r.credentials,o.responseType="blob",o.onload=function(){n(o.response)},o.onerror=o.onabort=o.ontimeout=function(t){console.log(t),n()},o.send(r.body)}else n()})})?r.apply(e,o):r)||(t.exports=i)}()},165:function(t,e,n){var r,o,i;!function(s){"use strict";o=[n(63),n(127)],void 0===(i="function"==typeof(r=function(t){t.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},t.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},t.ExifMap.prototype.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},function(t){var e,n=t.tags,r=t.map;for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[n[e]]=e)}(t.ExifMap.prototype),t.ExifMap.prototype.getAll=function(){var t,e,n={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(e=this.tags[t])&&(n[e]=this.getText(e));return n}})?r.apply(e,o):r)||(t.exports=i)}()},166:function(t,e,n){var r,o,i;!function(s){"use strict";o=[n(63),n(128)],void 0===(i="function"==typeof(r=function(t){t.IptcMap.prototype.tags={3:"ObjectType",4:"ObjectAttribute",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectRef",15:"Category",20:"SupplCategory",22:"FixtureID",25:"Keywords",26:"ContentLocCode",27:"ContentLocName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"RefService",47:"RefDate",50:"RefNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"CountryName",103:"OrigTransRef",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",122:"WriterEditor",130:"ImageType",131:"ImageOrientation",135:"LanguageID"},t.IptcMap.prototype.getText=function(t){var e=this.get(t);return String(e)},function(t){var e,n=t.tags,r=t.map||{};for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[n[e]]=e)}(t.IptcMap.prototype),t.IptcMap.prototype.getAll=function(){var t,e,n={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(e=this.tags[t])&&(n[e]=this.getText(e));return n}})?r.apply(e,o):r)||(t.exports=i)}()},167:function(t,e,n){var r,o,i;!function(s){"use strict";o=[n(63),n(126),n(80)],void 0===(i="function"==typeof(r=function(t){var e=t.hasCanvasOption,n=t.hasMetaOption,r=t.transformCoordinates,o=t.getTransformedOptions;i=document.createElement("img"),i.onload=function(){t.orientation=1===i.width&&2===i.height},i.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",t.hasCanvasOption=function(n){return!0==!!n.orientation&&!t.orientation||n.orientation>1&&n.orientation<9||e.call(t,n)},t.hasMetaOption=function(e){return e&&!0===e.orientation&&!t.orientation||n.call(t,e)},t.transformCoordinates=function(e,n){r.call(t,e,n);var o=e.getContext("2d"),i=e.width,s=e.height,a=e.style.width,c=e.style.height,l=n.orientation;if(l>1&&l<9)switch(l>4&&(e.width=s,e.height=i,e.style.width=c,e.style.height=a),l){case 2:o.translate(i,0),o.scale(-1,1);break;case 3:o.translate(i,s),o.rotate(Math.PI);break;case 4:o.translate(0,s),o.scale(1,-1);break;case 5:o.rotate(.5*Math.PI),o.scale(1,-1);break;case 6:o.rotate(.5*Math.PI),o.translate(0,-s);break;case 7:o.rotate(.5*Math.PI),o.translate(i,-s),o.scale(-1,1);break;case 8:o.rotate(-.5*Math.PI),o.translate(-i,0)}},t.getTransformedOptions=function(e,n,r){var i,s,a=o.call(t,e,n),c=a.orientation;if(!0===c){if(t.orientation)return a;c=r&&r.exif&&r.exif.get("Orientation")}if(!(c>1&&c<9))return a;for(s in i={},a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s]);switch(i.orientation=c,c){case 2:i.left=a.right,i.right=a.left;break;case 3:i.left=a.right,i.top=a.bottom,i.right=a.left,i.bottom=a.top;break;case 4:i.top=a.bottom,i.bottom=a.top;break;case 5:i.left=a.top,i.top=a.left,i.right=a.bottom,i.bottom=a.right;break;case 6:i.left=a.top,i.top=a.right,i.right=a.bottom,i.bottom=a.left;break;case 7:i.left=a.bottom,i.top=a.right,i.right=a.top,i.bottom=a.left;break;case 8:i.left=a.bottom,i.top=a.left,i.right=a.top,i.bottom=a.right}return i.orientation>4&&(i.maxWidth=a.maxHeight,i.maxHeight=a.maxWidth,i.minWidth=a.minHeight,i.minHeight=a.minWidth,i.sourceWidth=a.sourceHeight,i.sourceHeight=a.sourceWidth),i};var i})?r.apply(e,o):r)||(t.exports=i)}()},169:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(62),o=n.n(r);class i extends o.a.Attributor.Class{add(t,e){if("+1"===e||"-1"===e){let n=this.value(t)||0;e="+1"===e?n+1:n-1}return 0===e?(this.remove(t),!0):super.add(t,e)}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e))}value(t){return parseInt(super.value(t))||void 0}}let s=new i("indent","ql-indent",{scope:o.a.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]})},170:function(t,e,n){"use strict";var r=n(81);class o extends r.a{}o.blotName="strike",o.tagName="S",e.a=o},171:function(t,e,n){"use strict";n.d(e,"a",(function(){return Ae})),n.d(e,"b",(function(){return Ne})),n.d(e,"c",(function(){return $e}));var r=n(74),o=n(79),i=n(84),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var u=s.ie=!!(c||l||a);s.ie_version=c?document.documentMode||6:l?+l[1]:a?+a[1]:null,s.gecko=!u&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var d=!u&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!d,s.chrome_version=d&&+d[1],s.safari=!u&&/Apple Computer/.test(navigator.vendor),s.ios=s.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var p=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},h=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},f=null,m=function(t,e,n){var r=f||(f=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},g=function(t,e,n,r){return n&&(y(t,e,n,r,-1)||y(t,e,n,r,1))},v=/^(img|br|input|textarea|hr)$/i;function y(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:b(t))){var i=t.parentNode;if(1!=i.nodeType||w(t)||v.test(t.nodeName)||"false"==t.contentEditable)return!1;e=p(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?b(t):0}}}function b(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function w(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var x=function(t){var e=t.isCollapsed;return e&&s.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function _(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function k(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function O(t,e){return"number"==typeof t?t:t[e]}function S(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function A(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=n||t.dom;s;s=h(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,c=a?k(i):S(s),l=0,u=0;if(e.top<c.top+O(r,"top")?u=-(c.top-e.top+O(o,"top")):e.bottom>c.bottom-O(r,"bottom")&&(u=e.bottom-c.bottom+O(o,"bottom")),e.left<c.left+O(r,"left")?l=-(c.left-e.left+O(o,"left")):e.right>c.right-O(r,"right")&&(l=e.right-c.right+O(o,"right")),l||u)if(a)i.defaultView.scrollBy(l,u);else{var d=s.scrollLeft,p=s.scrollTop;u&&(s.scrollTop+=u),l&&(s.scrollLeft+=l);var f=s.scrollLeft-d,m=s.scrollTop-p;e={left:e.left-f,top:e.top-m,right:e.right-f,bottom:e.bottom-m}}if(a)break}}function E(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=h(t));return e}function T(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var M=null;function N(t,e){for(var n,r,o=2e8,i=0,s=e.top,a=e.top,c=t.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=m(c).getClientRects()}for(var d=0;d<u.length;d++){var p=u[d];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var h=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(h<o){n=c,o=h,r=h&&3==n.nodeType?{left:p.right<e.left?p.right:p.left,top:e.top}:e,1==c.nodeType&&h&&(i=l+(e.left>=(p.left+p.right)/2?1:0));continue}}!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=l+1)}}return n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=D(r,1);if(i.top!=i.bottom&&C(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:N(n,r)}function C(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function I(t,e){var n,r,o,i,a=t.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(e.left,e.top);c&&(o=(n=c).offsetNode,i=n.offset)}catch(t){}if(!o&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(e.left,e.top);l&&(o=(r=l).startContainer,i=r.startOffset)}var u,d=a.elementFromPoint(e.left,e.top+1);if(!d||!t.dom.contains(1!=d.nodeType?d.parentNode:d)){var p=t.dom.getBoundingClientRect();if(!C(e,p))return null;if(!(d=function t(e,n,r){var o=e.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),s=i;;){var a=e.childNodes[s];if(1==a.nodeType)for(var c=a.getClientRects(),l=0;l<c.length;l++){var u=c[l];if(C(n,u))return t(a,n,u)}if((s=(s+1)%o)==i)break}return e}(t.dom,e,p)))return null}if(s.safari)for(var f=d;o&&f;f=h(f))f.draggable&&(o=i=null);if(d=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(d,e),o){if(s.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var m,g=o.childNodes[i];"IMG"==g.nodeName&&(m=g.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}o==t.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&e.top>o.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(u=function(t,e,n,r){for(var o=-1,i=e;i!=t.dom;){var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}(t,o,i,e))}null==u&&(u=function(t,e,n){var r=N(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}(t,d,e));var v=t.docView.nearestDesc(d,!0);return{pos:u,inside:v?v.posAtStart-v.border:-1}}function D(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}var j=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function L(t,e,n){var r=t.docView.domFromPos(e,n<0?-1:1),o=r.node,i=r.offset,a=s.webkit||s.gecko;if(3==o.nodeType){if(!a||!j.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var c=i,l=i,u=n<0?1:-1;return n<0&&!i?(l++,u=-1):n>=0&&i==o.nodeValue.length?(c--,u=1):n<0?c--:l++,P(D(m(o,c,l),u),u<0)}var d=D(m(o,i,i),n);if(s.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var p=D(m(o,i-1,i-1),-1);if(p.top==d.top){var h=D(m(o,i,i+1),-1);if(h.top!=d.top)return P(h,h.left<p.left)}}return d}if(!t.state.doc.resolve(e).parent.inlineContent){if(i&&(n<0||i==b(o))){var f=o.childNodes[i-1];if(1==f.nodeType)return R(f.getBoundingClientRect(),!1)}if(i<b(o)){var g=o.childNodes[i];if(1==g.nodeType)return R(g.getBoundingClientRect(),!0)}return R(o.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==b(o))){var v=o.childNodes[i-1],y=3==v.nodeType?m(v,b(v)-(a?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(y)return P(D(y,1),!1)}if(i<b(o)){var w=o.childNodes[i],x=3==w.nodeType?m(w,0,a?0:1):1==w.nodeType?w:null;if(x)return P(D(x,-1),!0)}return P(D(3==o.nodeType?m(o):o,-n),n>=0)}function P(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function R(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function B(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}var z=/[\u0590-\u08ac]/;var F=null,$=null,V=!1;function H(t,e,n){return F==e&&$==n?V:(F=e,$=n,V="up"==n||"down"==n?function(t,e,n){var r=e.selection,o="up"==n?r.$from:r.$to;return B(t,e,(function(){for(var e=t.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.dom;break}e=r.dom.parentNode}for(var i=L(t,o.pos,1),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=m(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==n?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0}))}(t,e,n):function(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return z.test(r.parent.textContent)&&a.modify?B(t,e,(function(){var e=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var c=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),c})):"left"==n||"backward"==n?i:s}(t,e,n))}var U=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},q={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};U.prototype.matchesWidget=function(){return!1},U.prototype.matchesMark=function(){return!1},U.prototype.matchesNode=function(){return!1},U.prototype.matchesHack=function(){return!1},q.beforePosition.get=function(){return!1},U.prototype.parseRule=function(){return null},U.prototype.stopEvent=function(){return!1},q.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},q.border.get=function(){return 0},U.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},U.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},q.posBefore.get=function(){return this.parent.posBeforeChild(this)},q.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},q.posAfter.get=function(){return this.posBefore+this.size},q.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},U.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(t==this.dom&&this.contentDOM)a=e>p(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},U.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;n=!1}}},U.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},U.prototype.posFromDOM=function(t,e,n){for(var r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}return-1},U.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},U.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,o=!0;;r++,o=!1){for(;r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM);)n+=this.children[r++].size;var i=r==this.children.length?null:this.children[r];if(n==t&&(0==e||!i||!i.size||i.border||e<0&&o)||i&&i.domAtom&&t<n+i.size)return{node:this.contentDOM,offset:i?p(i.dom):this.contentDOM.childNodes.length};if(!i)throw new Error("Invalid position "+t);var s=n+i.size;if(!i.domAtom&&(e<0&&!i.border?s>=t:s>t)&&(s>t||r+1>=this.children.length||!this.children[r+1].beforePosition))return i.domFromPos(t-n-i.border,e);n=s}},U.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==r&&t<=c){var l=i+a.border;if(t>=l&&e<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,l);t=i;for(var u=s;u>0;u--){var d=this.children[u-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=p(d.dom)+1;break}t-=d.size}-1==r&&(r=0)}if(r>-1&&(c>e||s==this.children.length-1)){e=c;for(var h=s+1;h<this.children.length;h++){var f=this.children[h];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=p(f.dom);break}e+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},U.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},U.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},U.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),a=0,c=0;a<this.children.length;a++){var l=this.children[a],u=c+l.size;if(o>c&&i<u)return l.setSelection(t-c-l.border,e-c-l.border,n,r);c=u}var d=this.domFromPos(t,t?-1:1),h=e==t?d:this.domFromPos(e,e?-1:1),f=n.getSelection(),m=!1;if((s.gecko||s.safari)&&t==e){var v=d.node,y=d.offset;if(3==v.nodeType)(m=y&&"\n"==v.nodeValue[y-1])&&y==v.nodeValue.length&&v.nextSibling&&"BR"==v.nextSibling.nodeName&&(d=h={node:v.parentNode,offset:p(v)+1});else{var b=v.childNodes[y-1];m=b&&("BR"==b.nodeName||"false"==b.contentEditable)}}if(s.gecko&&f.focusNode&&f.focusNode!=h.node&&1==f.focusNode.nodeType){var w=f.focusNode.childNodes[f.focusOffset];w&&"false"==w.contentEditable&&(r=!0)}if(r||m&&s.safari||!g(d.node,d.offset,f.anchorNode,f.anchorOffset)||!g(h.node,h.offset,f.focusNode,f.focusOffset)){var x=!1;if((f.extend||t==e)&&!m){f.collapse(d.node,d.offset);try{t!=e&&f.extend(h.node,h.offset),x=!0}catch(t){if(!(t instanceof DOMException))throw t}}if(!x){if(t>e){var _=d;d=h,h=_}var k=document.createRange();k.setEnd(h.node,h.offset),k.setStart(d.node,d.offset),f.removeAllRanges(),f.addRange(k)}}},U.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},q.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},U.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var s=n+o.border,a=i-o.border;if(t>=s&&e<=a)return this.dirty=t==n||e==i?2:1,void(t!=s||e!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-s,e-s):o.dirty=3);o.dirty=3}n=i}this.dirty=2},U.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?2:1;e.dirty<n&&(e.dirty=n)}},q.domAtom.get=function(){return!1},Object.defineProperties(U.prototype,q);var W=[],G=function(t){function e(e,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,W,s,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,n),e}(U),K=function(t){function e(e,n,r,o){t.call(this,e,W,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(U),J=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return a&&a.dom||(a=o.b.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,a.dom,a.contentDOM||a.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=dt(i,n,s,r)),t>0&&(i=dt(i,0,t,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},e}(U),Q=function(t){function e(e,n,r,o,i,s,a,c,l){t.call(this,e,n.isLeaf?W:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,l)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return e.create=function(t,n,r,i,s,a){var c,l,u=s.nodeViews[n.type.name],d=u&&u(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a}),r,i),p=d&&d.dom,h=d&&d.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(p=(c=o.b.renderSpec(document,n.type.spec.toDOM(n))).dom,h=c.contentDOM);h||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var f=p;return p=st(p,r,n),d?l=new tt(t,n,r,i,p,h,f,d,s,a+1):n.isText?new X(t,n,r,i,p,f,s):new e(t,n,r,i,p,h,f,s,a+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?o.c.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&at(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,i=e,a=r&&t.composing&&this.localCompositionNode(t,e),c=new lt(this,a&&a.node);!function(t,e,n,r){var o=e.locals(t),i=0;if(0==o.length){for(var s=0;s<t.childCount;s++){var a=t.child(s);r(a,o,e.forChild(i,a),s),i+=a.nodeSize}return}for(var c=0,l=[],u=null,d=0;;){if(c<o.length&&o[c].to==i){for(var p=o[c++],h=void 0;c<o.length&&o[c].to==i;)(h||(h=[p])).push(o[c++]);if(h){h.sort(ut);for(var f=0;f<h.length;f++)n(h[f],d,!!u)}else n(p,d,!!u)}var m=void 0,g=void 0;if(u)g=-1,m=u,u=null;else{if(!(d<t.childCount))break;g=d,m=t.child(d++)}for(var v=0;v<l.length;v++)l[v].to<=i&&l.splice(v--,1);for(;c<o.length&&o[c].from<=i&&o[c].to>i;)l.push(o[c++]);var y=i+m.nodeSize;if(m.isText){var b=y;c<o.length&&o[c].from<b&&(b=o[c].from);for(var w=0;w<l.length;w++)l[w].to<b&&(b=l[w].to);b<y&&(u=m.cut(b-i),m=m.cut(0,b-i),y=b,g=-1)}var x=l.length?m.isInline&&!m.isLeaf?l.filter((function(t){return!t.inline})):l.slice():W;r(m,x,e.forChild(i,m),g),i=y}}(this.node,this.innerDeco,(function(e,s,a){e.spec.marks?c.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&c.syncToMarks(s==n.node.childCount?o.d.none:n.node.child(s).marks,r,t),c.placeWidget(e,t,i)}),(function(e,n,o,s){c.syncToMarks(e.marks,r,t),c.findNodeMatch(e,n,o,s)||c.updateNextNode(e,n,o,t,s)||c.addNode(e,n,o,t,i),i+=e.nodeSize})),c.syncToMarks(W,r,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(a&&this.protectLocalComposition(t,a),function t(e,n,r){for(var o=e.firstChild,i=!1,s=0;s<n.length;s++){var a=n[s],c=a.dom;if(c.parentNode==e){for(;c!=o;)o=ct(o),i=!0;o=o.nextSibling}else i=!0,e.insertBefore(c,o);if(a instanceof J){var l=o?o.previousSibling:e.lastChild;t(a.contentDOM,a.children,r),o=l?l.nextSibling:e.firstChild}}for(;o;)o=ct(o),i=!0;i&&r.trackWrites==e&&(r.trackWrites=null)}(this.contentDOM,this.children,t),s.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,o=n.from,i=n.to;if(!(!(t.state.selection instanceof r.g)||o<e||i>e+this.node.content.size)){var s=t.root.getSelection(),a=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=b(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=function(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var s=t.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var c=s.text;o<t.childCount;){var l=t.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var u=c.lastIndexOf(e,r-a);if(u>=0&&u+e.length+a>=n)return a+u}}}return-1}(this.node.content,c,o-e,i-e);return l<0?null:{node:a,pos:l,text:c}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new K(this,i,n,o);t.compositionNodes.push(s),this.children=dt(this.children,r,r+o.length,t,s)}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!at(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ot(this.dom,this.nodeDOM,rt(this.outerDeco,this.node,e),rt(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(e.prototype,n),e}(U);function Y(t,e,n,r,o){return st(r,e,t),new Q(null,t,e,n,r,r,r,o,0)}var X=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},n.domAtom.get=function(){return!1},Object.defineProperties(e.prototype,n),e}(Q),Z=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return 0==this.dirty},n.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,n),e}(U),tt=function(t){function e(e,n,r,o,i,s,a,c,l,u){t.call(this,e,n,r,o,i,s,a,l,u),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(Q);function et(t){t&&(this.nodeName=t)}et.prototype=Object.create(null);var nt=[new et];function rt(t,e,n){if(0==t.length)return nt;for(var r=n?nt[0]:new et,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs;if(s)for(var a in s.nodeName&&o.push(r=new et(s.nodeName)),s){var c=s[a];null!=c&&(n&&1==o.length&&o.push(r=new et(e.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+c:"style"==a?r.style=(r.style?r.style+";":"")+c:"nodeName"!=a&&(r[a]=c))}}return o}function ot(t,e,n,r){if(n==nt&&r==nt)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName||((c=document.createElement(s.nodeName)).pmIsDeco=!0,c.appendChild(o),a=nt[0]),o=c}it(o,a||nt[0],s)}return o}function it(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" ").filter(Boolean):W,s=n.class?n.class.split(" ").filter(Boolean):W,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style)for(var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=u.exec(e.style);)t.style.removeProperty(l[1]);n.style&&(t.style.cssText+=n.style)}}function st(t,e,n){return ot(t,t,nt,rt(e,n,1!=t.nodeType))}function at(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ct(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var lt=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(t,e){for(var n=t.childCount,r=e.length,o=new Map;n>0&&r>0;r--){var i=e[r-1],s=i.node;if(s){if(s!=t.child(n-1))break;--n,o.set(i,n)}}return{index:n,matched:o}}(t.node.content,t.children)};function ut(t,e){return t.type.side-e.type.side}function dt(t,e,n,r,o){for(var i=[],s=0,a=0;s<t.length;s++){var c=t[s],l=a,u=a+=c.size;l>=n||u<=e?i.push(c):(l<e&&i.push(c.slice(0,e-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function pt(t,e){var n=t.root.getSelection(),o=t.state.doc;if(!n.focusNode)return null;var i=t.docView.nearestDesc(n.focusNode),s=i&&0==i.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,l,u=o.resolve(a);if(x(n)){for(c=u;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&r.c.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(t,e,n){for(var r=0==e,o=e==b(t);r||o;){if(t==n)return!0;var i=p(t);if(!(t=t.parentNode))return!1;r=r&&0==i,o=o&&i==b(t)}}(n.focusNode,n.focusOffset,i.dom))){var d=i.posBefore;l=new r.c(a==d?u:o.resolve(d))}}else{var h=t.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(h<0)return null;c=o.resolve(h)}l||(l=xt(t,c,u,"pointer"==e||t.state.selection.head<u.pos&&!s?1:-1));return l}function ht(t){return t.editable?t.hasFocus():_t(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ft(t,e){var n=t.state.selection;if(bt(t,n),ht(t)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,p(r)+1):n.setEnd(r,0);n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var o,i,a=n.anchor,c=n.head;!mt||n instanceof r.g||(n.$from.parent.inlineContent||(o=gt(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=gt(t,n.to))),t.docView.setSelection(a,c,t.root,e),mt&&(o&&yt(o),i&&yt(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),setTimeout((function(){ht(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}lt.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},lt.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},lt.prototype.syncToMarks=function(t,e,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=J.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},lt.prototype.findNodeMatch=function(t,e,n,r){var o=this.top.children,i=-1;if(r>=this.preMatch.index){for(var s=this.index;s<o.length;s++)if(o[s].matchesNode(t,e,n)){i=s;break}}else for(var a=this.index,c=Math.min(o.length,a+1);a<c;a++){var l=o[a];if(l.matchesNode(t,e,n)&&!this.preMatch.matched.has(l)){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},lt.prototype.updateNextNode=function(t,e,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof Q){var a=this.preMatch.matched.get(s);if(null!=a&&a!=o)return!1;var c=s.dom;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&at(e,s.outerDeco)))&&s.update(t,e,n,r))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},lt.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,Q.create(this.top,t,e,n,r,o)),this.changed=!0},lt.prototype.placeWidget=function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var o=new G(this.top,t,e,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},lt.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof J;)t=t.children[t.children.length-1];if(!t||!(t instanceof X)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new Z(this.top,W,e,null)),this.changed=!0}};var mt=s.safari||s.chrome&&s.chrome_version<63;function gt(t,e){var n=t.docView.domFromPos(e,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(s.safari&&i&&"false"==i.contentEditable)return vt(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return vt(i);if(a)return vt(a)}}function vt(t){return t.contentEditable="true",s.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function yt(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function bt(t,e){if(e instanceof r.c){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(wt(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else wt(t)}function wt(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function xt(t,e,n,o){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||r.g.between(e,n,o)}function _t(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function kt(t,e){var n=t.selection,o=n.$anchor,i=n.$head,s=e>0?o.max(i):o.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&r.f.findFrom(a,e)}function Ot(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function St(t,e,n){var o=t.state.selection;if(!(o instanceof r.g)){if(o instanceof r.c&&o.node.isInline)return Ot(t,new r.g(e>0?o.$to:o.$from));var i=kt(t.state,e);return!!i&&Ot(t,i)}if(!o.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var a=kt(t.state,e);return!!(a&&a instanceof r.c)&&Ot(t,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,l=o.$head,u=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!u||u.isText)return!1;var d=e<0?l.pos-u.nodeSize:l.pos;return!!(u.isAtom||(c=t.docView.descAt(d))&&!c.contentDOM)&&(r.c.isSelectable(u)?Ot(t,new r.c(e<0?t.state.doc.resolve(l.pos-u.nodeSize):l)):!!s.webkit&&Ot(t,new r.g(t.state.doc.resolve(e<0?d:d+u.nodeSize))))}}function At(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Et(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function Tt(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,a=!1;for(s.gecko&&1==n.nodeType&&r<At(n)&&Et(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(Et(c))o=n,i=--r;else{if(3!=c.nodeType)break;r=(n=c).nodeValue.length}}else{if(Nt(n))break;for(var l=n.previousSibling;l&&Et(l);)o=n.parentNode,i=p(l),l=l.previousSibling;if(l)r=At(n=l);else{if((n=n.parentNode)==t.dom)break;r=0}}a?Ct(t,e,n,r):o&&Ct(t,e,o,i)}}function Mt(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=At(n);;)if(r<s){if(1!=n.nodeType)break;if(!Et(n.childNodes[r]))break;o=n,i=++r}else{if(Nt(n))break;for(var a=n.nextSibling;a&&Et(a);)o=a.parentNode,i=p(a)+1,a=a.nextSibling;if(a)r=0,s=At(n=a);else{if((n=n.parentNode)==t.dom)break;r=s=0}}o&&Ct(t,e,o,i)}}function Nt(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Ct(t,e,n,r){if(x(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection();var i=t.state;setTimeout((function(){t.state==i&&ft(t)}),50)}function It(t,e,n){var o=t.state.selection;if(o instanceof r.g&&!o.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var i=o.$from,a=o.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var c=kt(t.state,e);if(c&&c instanceof r.c)return Ot(t,c)}if(!i.parent.inlineContent){var l=e<0?i:a,u=o instanceof r.a?r.f.near(l,e):r.f.findFrom(l,e);return!!u&&Ot(t,u)}return!1}function Dt(t,e){if(!(t.state.selection instanceof r.g))return!0;var n=t.state.selection,o=n.$head,i=n.$anchor,s=n.empty;if(!o.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return e<0?c.delete(o.pos-a.nodeSize,o.pos):c.delete(o.pos,o.pos+a.nodeSize),t.dispatch(c),!0}return!1}function jt(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Lt(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||s.mac&&72==n&&"c"==r?Dt(t,-1)||Tt(t):46==n||s.mac&&68==n&&"c"==r?Dt(t,1)||Mt(t):13==n||27==n||(37==n?St(t,-1,r)||Tt(t):39==n?St(t,1,r)||Mt(t):38==n?It(t,-1,r)||Tt(t):40==n?function(t){if(s.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;jt(t,o,!0),setTimeout((function(){return jt(t,o,!1)}),20)}}}(t)||It(t,1,r)||Mt(t):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Pt(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(s.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||s.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function Rt(t,e,n,i,a){if(e<0){var c=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,l=pt(t,c);if(l&&!t.state.selection.eq(l)){var u=t.state.tr.setSelection(l);"pointer"==c?u.setMeta("pointer",!0):"key"==c&&u.scrollIntoView(),t.dispatch(u)}}else{var d=t.state.doc.resolve(e),p=d.sharedDepth(n);e=d.before(p+1),n=t.state.doc.resolve(n).after(p+1);var h=t.state.selection,f=function(t,e,n){var r=t.docView.parseRange(e,n),i=r.node,a=r.fromOffset,c=r.toOffset,l=r.from,u=r.to,d=t.root.getSelection(),p=null,h=d.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(p=[{node:h,offset:d.anchorOffset}],x(d)||p.push({node:d.focusNode,offset:d.focusOffset})),s.chrome&&8===t.lastKeyCode)for(var f=c;f>a;f--){var m=i.childNodes[f-1],g=m.pmViewDesc;if("BR"==m.nodeName&&!g){c=f;break}if(!g||g.size)break}var v=t.state.doc,y=t.someProp("domParser")||o.a.fromSchema(t.state.schema),b=v.resolve(l),w=null,_=y.parse(i,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:Pt,context:b});if(p&&null!=p[0].pos){var k=p[0].pos,O=p[1]&&p[1].pos;null==O&&(O=k),w={anchor:k+l,head:O+l}}return{doc:_,sel:w,from:l,to:u}}(t,e,n);if(s.chrome&&t.cursorWrapper&&f.sel&&f.sel.anchor==t.cursorWrapper.deco.from){var m=t.cursorWrapper.deco.type.toDOM.nextSibling,g=m&&m.nodeValue?m.nodeValue.length:1;f.sel={anchor:f.sel.anchor+g,head:f.sel.anchor+g}}var v,y,b=t.state.doc,w=b.slice(f.from,f.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(v=t.state.selection.to,y="end"):(v=t.state.selection.from,y="start"),t.lastKeyCode=null;var k=function(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b;if("end"==o){var l=Math.max(0,i-Math.min(a,c));r-=a+l-i}if(a<i&&t.size<e.size){c=(i-=r<=i&&r>=a?i-r:0)+(c-a),a=i}else if(c<i){a=(i-=r<=i&&r>=c?i-r:0)+(a-c),c=i}return{start:i,endA:a,endB:c}}(w.content,f.doc.content,f.from,v,y);if(!k){if(!(i&&h instanceof r.g&&!h.empty&&h.$head.sameParent(h.$anchor))||t.composing||f.sel&&f.sel.anchor!=f.sel.head){if((s.ios&&t.lastIOSEnter>Date.now()-225||s.android)&&a.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName}))&&t.someProp("handleKeyDown",(function(e){return e(t,_(13,"Enter"))})))return void(t.lastIOSEnter=0);if(f.sel){var O=Bt(t,t.state.doc,f.sel);O&&!O.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(O))}return}k={start:h.from,endA:h.to,endB:h.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&k.start==k.endB&&t.state.selection instanceof r.g&&(k.start>t.state.selection.from&&k.start<=t.state.selection.from+2?k.start=t.state.selection.from:k.endA<t.state.selection.to&&k.endA>=t.state.selection.to-2&&(k.endB+=t.state.selection.to-k.endA,k.endA=t.state.selection.to)),s.ie&&s.ie_version<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>f.from&&"  "==f.doc.textBetween(k.start-f.from-1,k.start-f.from+1)&&(k.start--,k.endA--,k.endB--);var S,A=f.doc.resolveNoCache(k.start-f.from),E=f.doc.resolveNoCache(k.endB-f.from),T=A.sameParent(E)&&A.parent.inlineContent;if((s.ios&&t.lastIOSEnter>Date.now()-225&&(!T||a.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!T&&A.pos<f.doc.content.size&&(S=r.f.findFrom(f.doc.resolve(A.pos+1),1,!0))&&S.head==E.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,_(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>k.start&&function(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||zt(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve(zt(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||zt(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(b,k.start,k.endA,A,E)&&t.someProp("handleKeyDown",(function(e){return e(t,_(8,"Backspace"))})))s.android&&s.chrome&&t.domObserver.suppressSelectionUpdates();else{s.chrome&&s.android&&k.toB==k.from&&(t.lastAndroidDelete=Date.now()),s.android&&!T&&A.start()!=E.start()&&0==E.parentOffset&&A.depth==E.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==k.endA&&(k.endB-=2,E=f.doc.resolveNoCache(k.endB-f.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,_(13,"Enter"))}))}),20));var M,N,C,I,D=k.start,j=k.endA;if(T)if(A.pos==E.pos)s.ie&&s.ie_version<=11&&0==A.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return ft(t)}),20)),M=t.state.tr.delete(D,j),N=b.resolve(k.start).marksAcross(b.resolve(k.endA));else if(k.endA==k.endB&&(I=b.resolve(k.start))&&(C=function(t,e){for(var n,r,i,s=t.firstChild.marks,a=e.firstChild.marks,c=s,l=a,u=0;u<a.length;u++)c=a[u].removeFromSet(c);for(var d=0;d<s.length;d++)l=s[d].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",i=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",i=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var p=[],h=0;h<e.childCount;h++)p.push(i(e.child(h)));if(o.c.from(p).eq(t))return{mark:r,type:n}}(A.parent.content.cut(A.parentOffset,E.parentOffset),I.parent.content.cut(I.parentOffset,k.endA-I.start()))))M=t.state.tr,"add"==C.type?M.addMark(D,j,C.mark):M.removeMark(D,j,C.mark);else if(A.parent.child(A.index()).isText&&A.index()==E.index()-(E.textOffset?0:1)){var L=A.parent.textBetween(A.parentOffset,E.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,D,j,L)})))return;M=t.state.tr.insertText(L,D,j)}if(M||(M=t.state.tr.replace(D,j,f.doc.slice(k.start-f.from,k.endB-f.from))),f.sel){var P=Bt(t,M.doc,f.sel);P&&!(s.chrome&&s.android&&t.composing&&P.empty&&(k.start!=k.endB||t.lastAndroidDelete<Date.now()-100)&&(P.head==D||P.head==M.mapping.map(j)-1)||s.ie&&P.empty&&P.head==D)&&M.setSelection(P)}N&&M.ensureMarks(N),t.dispatch(M.scrollIntoView())}}}function Bt(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:xt(t,e.resolve(n.anchor),e.resolve(n.head))}function zt(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function Ft(t,e){for(var n=[],r=e.content,i=e.openStart,s=e.openEnd;i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,s--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var c=t.someProp("clipboardSerializer")||o.b.fromSchema(t.state.schema),l=Wt(),u=l.createElement("div");u.appendChild(c.serializeFragment(r,{document:l}));for(var d,p=u.firstChild;p&&1==p.nodeType&&(d=Ut[p.nodeName.toLowerCase()]);){for(var h=d.length-1;h>=0;h--){for(var f=l.createElement(d[h]);u.firstChild;)f.appendChild(u.firstChild);u.appendChild(f)}p=u.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:u,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function $t(t,e,n,r,i){var s,a,c=i.parent.type.spec.code;if(!n&&!e)return null;var l=e&&(r||c||!n);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e,c||r)})),c)return new o.j(o.c.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0);var u=t.someProp("clipboardTextParser",(function(t){return t(e,i,r)}));u?a=u:(s=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){s.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),s=function(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Wt().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(t);(n=o&&Ut[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""));if(r.innerHTML=t,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n);var d=s&&s.querySelector("[data-pm-slice]"),p=d&&/^(\d+) (\d+) (.*)/.exec(d.getAttribute("data-pm-slice"));if(!a){var h=t.someProp("clipboardParser")||t.someProp("domParser")||o.a.fromSchema(t.state.schema);a=h.parseSlice(s,{preserveWhitespace:!(!l&&!p),context:i})}return a=p?function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var i=t.content,s=t.openStart,a=t.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=o.c.from(l.create(n[c+1],i)),s++,a++}return new o.j(i,s,a)}(function(t,e,n){e<t.openStart&&(t=new o.j(Ht(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd));n<t.openEnd&&(t=new o.j(Ht(t.content,1,n,t.openEnd,0,0),t.openStart,n));return t}(a,+p[1],+p[2]),p[3]):o.j.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n).contentMatchAt(e.index(n)),i=void 0,s=[];if(t.forEach((function(t){if(s){var e,n=r.findWrapping(t.type);if(!n)return s=null;if(e=s.length&&i.length&&function t(e,n,r,i,s){if(s<e.length&&s<n.length&&e[s]==n[s]){var a=t(e,n,r,i.lastChild,s+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(s==e.length-1?r.type:e[s+1]))return i.copy(i.content.append(o.c.from(Vt(r,e,s+1))))}}(n,i,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=function t(e,n){if(0==n)return e;var r=e.content.replaceChild(e.childCount-1,t(e.lastChild,n-1)),i=e.contentMatchAt(e.childCount).fillBefore(o.c.empty,!0);return e.copy(r.append(i))}(s[s.length-1],i.length));var a=Vt(t,n);s.push(a),r=r.matchType(a.type,a.attrs),i=n}}})),s)return{v:o.c.from(s)}},r=e.depth;r>=0;r--){var i=n(r);if(i)return i.v}return t}(a.content,i),!1),t.someProp("transformPasted",(function(t){a=t(a)})),a}function Vt(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,o.c.from(t));return t}function Ht(t,e,n,r,i,s){var a=e<0?t.firstChild:t.lastChild,c=a.content;return i<r-1&&(c=Ht(c,e,n,r,i+1,s)),i>=n&&(c=e<0?a.contentMatchAt(0).fillBefore(c,t.childCount>1||s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(o.c.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(c))}var Ut={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},qt=null;function Wt(){return qt||(qt=document.implementation.createHTMLDocument("title"))}var Gt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Kt=s.ie&&s.ie_version<=11,Jt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Jt.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},Jt.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Qt=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);s.ie&&s.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Jt,Kt&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Qt.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},Qt.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Qt.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Gt),Kt&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Qt.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}Kt&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Qt.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Qt.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Qt.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},Qt.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&_t(t)){var t;if(this.suppressingSelectionUpdates)return ft(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&g(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Qt.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Qt.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},Qt.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&_t(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,i=!1,a=[];if(this.view.editable)for(var c=0;c<t.length;c++){var l=this.registerMutation(t[c],a);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&(i=!0))}if(s.gecko&&a.length>1){var u=a.filter((function(t){return"BR"==t.nodeName}));if(2==u.length){var d=u[0],p=u[1];d.parentNode&&d.parentNode.parentNode==p.parentNode?p.remove():d.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(t){if(Yt)return;Yt=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,o,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||ft(this.view),this.currentSelection.set(e))}},Qt.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(var r=0;r<t.addedNodes.length;r++)e.push(t.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};var o=t.previousSibling,i=t.nextSibling;if(s.ie&&s.ie_version<=11&&t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){var c=t.addedNodes[a],l=c.previousSibling,u=c.nextSibling;(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(o=l),(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(i=u)}var d=o&&o.parentNode==t.target?p(o)+1:0,h=n.localPosFromDOM(t.target,d,-1),f=i&&i.parentNode==t.target?p(i):t.target.childNodes.length;return{from:h,to:n.localPosFromDOM(t.target,f,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Yt=!1;var Xt={},Zt={};function te(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function ee(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return ne(t,e)})}))}function ne(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function re(t){return{left:t.clientX,top:t.clientY}}function oe(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function ie(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function se(t,e,n,o,i){return oe(t,"handleClickOn",e,n,o)||t.someProp("handleClick",(function(n){return n(t,e,o)}))||(i?function(t,e){if(-1==e)return!1;var n,o,i=t.state.selection;i instanceof r.c&&(n=i.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r.c.isSelectable(c)){o=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=o&&(ie(t,r.c.create(t.state.doc,o),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),o=n.nodeAfter;return!!(o&&o.isAtom&&r.c.isSelectable(o))&&(ie(t,new r.c(n),"pointer"),!0)}(t,n))}function ae(t,e,n,r){return oe(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function ce(t,e,n,o){return oe(t,"handleTripleClickOn",e,n,o)||t.someProp("handleTripleClick",(function(n){return n(t,e,o)}))||function(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(ie(t,r.g.create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(e),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)ie(t,r.g.create(n,a+1,a+1+s.content.size),"pointer");else{if(!r.c.isSelectable(s))continue;ie(t,r.c.create(n,a),"pointer")}return!0}}(t,n)}function le(t){return ge(t)}Zt.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!pe(t,e))if(t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!s.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||Lt(t,e)?e.preventDefault():te(t,"key");else{var n=Date.now();t.lastIOSEnter=n,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,_(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},Zt.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Zt.keypress=function(t,e){if(!(pe(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||s.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof r.g&&n.$from.sameParent(n.$to))){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var ue=s.mac?"metaKey":"ctrlKey";Xt.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=le(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(e,t.lastClick)&&!e[ue]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(re(e));i&&("singleClick"==o?(t.mouseDown&&t.mouseDown.done(),t.mouseDown=new de(t,i,e,n)):("doubleClick"==o?ae:ce)(t,i.pos,i.inside,e)?e.preventDefault():te(t,"pointer"))};var de=function(t,e,n,o){var i,a,c=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=o,this.selectNode=n[ue],this.allowDefault=n.shiftKey,e.inside>-1)i=t.state.doc.nodeAt(e.inside),a=e.inside;else{var l=t.state.doc.resolve(e.pos);i=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var u=o?null:n.target,d=u?t.docView.nearestDesc(u,!0):null;this.target=d?d.dom:null;var p=t.state.selection;(i.type.spec.draggable&&!1!==i.type.spec.selectable||p instanceof r.c&&p.from<=a&&p.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){c.view.mouseDown==c&&c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),te(t,"pointer")};function pe(t,e){return!!t.composing||!!(s.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}de.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},de.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(re(t))),this.allowDefault||!e?te(this.view,"pointer"):se(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r.g)&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2?(ie(this.view,r.f.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):te(this.view,"pointer")}},de.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),te(this.view,"pointer"),0==t.buttons&&this.done()},Xt.touchdown=function(t){le(t),te(t,"pointer")},Xt.contextmenu=function(t){return le(t)};var he=s.android?5e3:-1;function fe(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return ge(t)}),e))}function me(t){for(t.composing=!1;t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty()}function ge(t,e){if(t.domObserver.forceFlush(),me(t),e||t.docView.dirty){var n=pt(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}Zt.compositionstart=Zt.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),ge(t,!0),t.markCursor=null;else if(ge(t),s.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}o=a,i=-1}t.composing=!0}fe(t,he)},Zt.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,fe(t,20))};var ve=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function ye(t,e,n,r){var i=$t(t,e,n,t.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,r,i||o.j.empty)})))return!0;if(!i)return!1;var s=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(i),a=s?t.state.tr.replaceSelectionWith(s,t.shiftKey):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Xt.copy=Zt.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=ve?null:e.clipboardData,i=Ft(t,n.content()),s=i.dom,a=i.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}(t,s),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Zt.paste=function(t,e){var n=ve?null:e.clipboardData;n&&ye(t,n.getData("text/plain"),n.getData("text/html"),e)?e.preventDefault():function(t,e){if(t.dom.parentNode){var n=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ye(t,r.value,null,e):ye(t,r.textContent,r.innerHTML,e)}),50)}}(t,e)};var be=function(t,e){this.slice=t,this.move=e},we=s.mac?"altKey":"ctrlKey";for(var xe in Xt.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(re(e));if(i&&i.pos>=o.from&&i.pos<=(o instanceof r.c?o.to-1:o.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(r.c.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(r.c.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=Ft(t,a),l=c.dom,u=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(ve?"Text":"text/html",l.innerHTML),e.dataTransfer.effectAllowed="copyMove",ve||e.dataTransfer.setData("text/plain",u),t.dragging=new be(a,!e[we])}},Xt.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},Zt.dragover=Zt.dragenter=function(t,e){return e.preventDefault()},Zt.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var s=t.posAtCoords(re(e));if(s){var a=t.state.doc.resolve(s.pos);if(a){var c=n&&n.slice;c?t.someProp("transformPasted",(function(t){c=t(c)})):c=$t(t,e.dataTransfer.getData(ve?"Text":"text/plain"),ve?null:e.dataTransfer.getData("text/html"),!1,a);var l=n&&!e[we];if(t.someProp("handleDrop",(function(n){return n(t,e,c||o.j.empty,l)})))e.preventDefault();else if(c){e.preventDefault();var u=c?Object(i.g)(t.state.doc,a.pos,c):a.pos;null==u&&(u=a.pos);var d=t.state.tr;l&&d.deleteSelection();var p=d.mapping.map(u),h=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,f=d.doc;if(h?d.replaceRangeWith(p,p,c.content.firstChild):d.replaceRange(p,p,c),!d.doc.eq(f)){var m=d.doc.resolve(p);if(h&&r.c.isSelectable(c.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(c.content.firstChild))d.setSelection(new r.c(m));else{var g=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((function(t,e,n,r){return g=r})),d.setSelection(xt(t,m,d.doc.resolve(g)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}}}}}},Xt.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&ft(t)}),20))},Xt.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},Xt.beforeinput=function(t,e){if(s.chrome&&s.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,_(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},Zt)Xt[xe]=Zt[xe];function _e(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var ke=function(t,e){this.spec=e||Me,this.side=this.spec.side||0,this.toDOM=t};ke.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Ae(i-n,i-n,this)},ke.prototype.valid=function(){return!0},ke.prototype.eq=function(t){return this==t||t instanceof ke&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&_e(this.spec,t.spec))};var Oe=function(t,e){this.spec=e||Me,this.attrs=t};Oe.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Ae(o,i,this)},Oe.prototype.valid=function(t,e){return e.from<e.to},Oe.prototype.eq=function(t){return this==t||t instanceof Oe&&_e(this.attrs,t.attrs)&&_e(this.spec,t.spec)},Oe.is=function(t){return t.type instanceof Oe};var Se=function(t,e){this.spec=e||Me,this.attrs=t};Se.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Ae(o.pos-n,i.pos-n,this)},Se.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},Se.prototype.eq=function(t){return this==t||t instanceof Se&&_e(this.attrs,t.attrs)&&_e(this.spec,t.spec)};var Ae=function(t,e,n){this.from=t,this.to=e,this.type=n},Ee={spec:{configurable:!0},inline:{configurable:!0}};Ae.prototype.copy=function(t,e){return new Ae(t,e,this.type)},Ae.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},Ae.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},Ae.widget=function(t,e,n){return new Ae(t,t,new ke(e,n))},Ae.inline=function(t,e,n,r){return new Ae(t,e,new Oe(n,r))},Ae.node=function(t,e,n,r){return new Ae(t,e,new Se(n,r))},Ee.spec.get=function(){return this.type.spec},Ee.inline.get=function(){return this.type instanceof Oe},Object.defineProperties(Ae.prototype,Ee);var Te=[],Me={},Ne=function(t,e){this.local=t&&t.length?t:Te,this.children=e&&e.length?e:Te};Ne.create=function(t,e){return e.length?Pe(e,t,0,Me):Ce},Ne.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},Ne.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,r+c,o)}},Ne.prototype.map=function(t,e,n){return this==Ce||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Me)},Ne.prototype.mapInner=function(t,e,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,r,o,i,s){for(var a=t.slice(),c=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||t>c+i||(e>=a[s]+i?a[s+1]=-1:n>=o&&(l=r-n-(e-t))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,d=0;d<a.length;d+=3)if(-1==a[d+1]){var p=n.map(t[d]+i),h=p-o;if(h<0||h>=r.content.size){u=!0;continue}var f=n.map(t[d+1]+i,-1)-o,m=r.content.findIndex(h),g=m.index,v=m.offset,y=r.maybeChild(g);if(y&&v==h&&v+y.nodeSize==f){var b=a[d+2].mapInner(n,y,p+1,t[d]+i+1,s);b!=Ce?(a[d]=h,a[d+1]=f,a[d+2]=b):(a[d+1]=-2,u=!0)}else u=!0}if(u){var w=Pe(function(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[i].spec)}for(var l=0;l<t.children.length;l+=3)a(t.children[l+2],t.children[l]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+i+1);return n}(a,t,e||[],n,o,i,s),r,0,s);e=w.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var _=0,k=0;_<w.children.length;_+=3){for(var O=w.children[_];k<a.length&&a[k]<O;)k+=3;a.splice(k,0,w.children[_],w.children[_+1],w.children[_+2])}}return new Ne(e&&e.sort(Re),a)}(this.children,i,t,e,n,r,o):i?new Ne(i.sort(Re)):Ce},Ne.prototype.add=function(t,e){return e.length?this==Ce?Ne.create(t,e):this.addInner(t,e,0):this},Ne.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach((function(t,s){var a,c=s+n;if(a=je(e,t,c)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(t,a,c+1):r.splice(i,0,s,s+t.nodeSize,Pe(a,t,c+1,Me)),i+=3}}));for(var s=De(i?Le(e):e,-n),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new Ne(s.length?this.local.concat(s).sort(Re):this.local,r||this.children)},Ne.prototype.remove=function(t){return 0==t.length||this==Ce?this:this.removeInner(t,0)},Ne.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+e,a=n[o+1]+e,c=0,l=void 0;c<t.length;c++)(l=t[c])&&l.from>s&&l.to<a&&(t[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=Ce?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var d=0,p=void 0;d<t.length;d++)if(p=t[d])for(var h=0;h<r.length;h++)r[h].eq(p,e)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Ne(r,n):Ce},Ne.prototype.forChild=function(t,e){if(this==Ce)return this;if(e.isLeaf)return Ne.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,s=i+e.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof Oe){var l=Math.max(i,c.from)-i,u=Math.min(s,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var d=new Ne(r.sort(Re));return n?new Ie([d,n]):d}return n||Ce},Ne.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Ne)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},Ne.prototype.locals=function(t){return Be(this.localsInner(t))},Ne.prototype.localsInner=function(t){if(this==Ce)return Te;if(t.inlineContent||!this.local.some(Oe.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Oe||e.push(this.local[n]);return e};var Ce=new Ne;Ne.empty=Ce,Ne.removeOverlap=Be;var Ie=function(t){this.members=t};function De(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new Ae(o.from+e,o.to+e,o.type))}return n}function je(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Le(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Pe(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=je(t,e,s+n);if(a){i=!0;var c=Pe(a,e,n+s+1,r);c!=Ce&&o.push(s,s+e.nodeSize,c)}}));for(var s=De(i?Le(t):t,-n).sort(Re),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Ne(s,o):Ce}function Re(t,e){return t.from-e.from||t.to-e.to}function Be(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),ze(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),ze(e,o+1,i.copy(r.to,i.to)))}}return e}function ze(t,e,n){for(;e<t.length&&Re(n,t[e])>0;)e++;t.splice(e,0,n)}function Fe(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Ce&&e.push(r)})),t.cursorWrapper&&e.push(Ne.create(t.state.doc,[t.cursorWrapper.deco])),Ie.from(e)}Ie.prototype.forChild=function(t,e){if(e.isLeaf)return Ne.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=Ce&&(o instanceof Ie?n=n.concat(o.members):n.push(o))}return Ie.from(n)},Ie.prototype.eq=function(t){if(!(t instanceof Ie)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},Ie.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?Be(n?e:e.sort(Re)):Te},Ie.from=function(t){switch(t.length){case 0:return Ce;case 1:return t[0];default:return new Ie(t)}};var $e=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=qe(this),this.markCursor=null,this.cursorWrapper=null,Ue(this),this.nodeViews=We(this),this.docView=Y(this.state.doc,He(this),Fe(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.lastAndroidDelete=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new Qt(t,(function(e,n,r,o){return Rt(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=Xt[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||ne(t,e)||!t.editable&&e.type in Zt||n(t,e)})};for(var n in Xt)e(n);s.safari&&t.dom.addEventListener("input",(function(){return null})),ee(t)}(this),this.pluginViews=[],this.updatePluginViews()},Ve={props:{configurable:!0},root:{configurable:!0}};function He(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[Ae.node(0,t.state.doc.content.size,e)]}function Ue(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:Ae.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function qe(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function We(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}Ve.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},$e.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ee(this),this._props=t,this.updateStateInner(t.state,!0)},$e.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},$e.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},$e.prototype.updateStateInner=function(t,e){var n=this,o=this.state,i=!1,a=!1;if(t.storedMarks&&this.composing&&(me(this),a=!0),this.state=t,e){var c=We(this);(function(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r})(c,this.nodeViews)&&(this.nodeViews=c,i=!0),ee(this)}this.editable=qe(this),Ue(this);var l=Fe(this),u=He(this),d=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(t.doc,u,l);!p&&t.selection.eq(o.selection)||(a=!0);var h,f,m,v,y,b,w,x,_,k,O,S="preserve"==d&&a&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(a!=t.dom&&t.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=o-20){e=a,n=c.top;break}}}return{refDOM:e,refTop:n,stack:E(t.dom)}}(this);if(a){this.domObserver.stop();var M=p&&(s.ie||s.chrome)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&(v=o.selection,y=t.selection,b=Math.min(v.$anchor.sharedDepth(v.head),y.$anchor.sharedDepth(y.head)),v.$anchor.start(b)!=y.$anchor.start(b));if(p){var N=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(t.doc,u,l,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Y(t.doc,u,l,this.dom,this)),N&&!this.trackWrites&&(M=!0)}M||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(h=this,f=h.docView.domFromPos(h.state.selection.anchor,0),m=h.root.getSelection(),g(f.node,f.offset,m.anchorNode,m.anchorOffset)))?ft(this,M):(bt(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var C=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof r.c?A(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),C):A(this,this.coordsAtPos(t.selection.head,1),C))}else S&&(x=(w=S).refDOM,_=w.refTop,k=w.stack,O=x?x.getBoundingClientRect().top:0,T(k,0==O?0:O-_))},$e.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},$e.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},$e.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(n=e?e(s):s))return n}},$e.prototype.hasFocus=function(){return this.root.activeElement==this.dom},$e.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(M)return t.focus(M);var e=E(t);t.focus(null==M?{get preventScroll(){return M={preventScroll:!0},!0}}:void 0),M||(M=!1,T(e,0))}(this.dom),ft(this),this.domObserver.start()},Ve.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},$e.prototype.posAtCoords=function(t){return I(this,t)},$e.prototype.coordsAtPos=function(t,e){return void 0===e&&(e=1),L(this,t,e)},$e.prototype.domAtPos=function(t,e){return void 0===e&&(e=0),this.docView.domFromPos(t,e)},$e.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},$e.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},$e.prototype.endOfTextblock=function(t,e){return H(this,e||this.state,t)},$e.prototype.destroy=function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Fe(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},$e.prototype.dispatchEvent=function(t){return function(t,e){ne(t,e)||!Xt[e.type]||!t.editable&&e.type in Zt||Xt[e.type](t,e)}(this,t)},$e.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties($e.prototype,Ve)},176:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return d}));var r=n(177),o=n(178),i=n(179);function s(t){if(!document.getElementById(t)){var e=document.getElementsByTagName("head")[0],n=document.createElement("link");n.id=t,n.rel="stylesheet",n.type="text/css",n.href=document.location.origin+t,n.media="all",e.appendChild(n)}}function a(t){let e="<noname>",n="...",r="";if(Array.isArray(null==t?void 0:t.ops)&&t.ops.length>0){e=String(t.ops[0].insert),n=String(t.ops[2].insert);const o=t.ops.find(t=>void 0!==u(t,["insert","blockFigure","image"]));if(null!=o&&(r=u(o,["insert","blockFigure","image"])),n.length<3){for(const[e,o]of t.ops.entries())if(e>2){if(n.length>100)break;void 0!==u(o,["insert","blockFigure","image"])?r=u(o,["insert","blockFigure","image"]):n+=" "+o.insert}n+="..."}}return n=n.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/`/g,"&DiacriticalGrave;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),{title:e,description:n,image:r}}function c(t){var e,n,s;let a="<noname>",c="...",u="";const d=l(t,i.a);null!=(null==d?void 0:d.content)&&(a=null!==(e=d.content[0].text)&&void 0!==e?e:a);const p=l(t,o.a);null!=(null==p?void 0:p.content)&&(c=null!==(n=p.content[0].text)&&void 0!==n?n:c);const h=l(t,r.a);return null!=(null==h?void 0:h.attrs)&&(u=null!==(s=h.attrs.src)&&void 0!==s?s:u),c=c.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/`/g,"&DiacriticalGrave;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),{title:a,description:c,image:u}}function l(t,e){if(t.type===e)return t;if(Array.isArray(t.content))for(const n of t.content){const t=l(n,e);if(null!=t)return t}return null}function u(t,e){return e.reduce((t,e)=>t&&"undefined"!==t[e]?t[e]:void 0,t)}const d=String.raw},177:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return u}));var r=n(64),o=n(66),i=n(82),s=n(79),a=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))};const c=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,l="figure",u=r.d.create({name:l,draggable:!0,defining:!0,selectable:!0,content:()=>"text*",defaultOptions:{inline:!1,HTMLAttributes:{}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML:()=>[{tag:"figure",contentElement:"figcaption",getAttrs:t=>{const e=t.querySelector("img");return{src:null==e?void 0:e.getAttribute("src"),alt:null==e?void 0:e.getAttribute("alt"),title:null==e?void 0:e.getAttribute("title")}}},{tag:"img[src]",preserveWhitespace:!0,getContent:(t,e)=>s.c.from(e.text(t.alt.length>0?t.alt:" ")),getAttrs:t=>({src:t.getAttribute("src")})}],renderHTML({HTMLAttributes:t}){return["figure",["img",Object(r.j)(this.options.HTMLAttributes,t)],["figcaption",0]]},addCommands(){return{setFigure:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Object(r.k)(c,this.type,t=>{const[,e,n,r]=t;return{src:n,alt:e,title:r}})]},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("figure");s.setAttribute("draggable","true");const c=document.createElement("div"),l=document.createElement("figcaption");c.classList.add("figure_wrapper"),c.contentEditable="false",l.classList.add("editable_text"),l.classList.add("empty"),l.setAttribute("data-placeholder","Caption (optional)");const u=t.content.firstChild;(null==u?void 0:u.isText)&&null!=u.text&&u.text.trim().length>0&&l.classList.remove("empty"),s.appendChild(c),s.appendChild(l);const p=function(t,e){const n=document.createElement("img");return n.setAttribute("src",d(t)),e.appendChild(n),n}(t.attrs.src,c);t.attrs.alt&&p.setAttribute("alt",t.attrs.alt),t.attrs.title&&p.setAttribute("title",t.attrs.title);const h=function(t){const e=t.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/);if(null!=e)return{type:e[1],base64_data:e[2]}}(t.attrs.src);if(null!=h){const t=document.createElement("div"),e=document.createElement("div");t.classList.add("file_progress"),e.classList.add("file_progress_bar"),c.classList.add("loading"),t.appendChild(e),c.appendChild(t),function(t,e,n){!function(t,e,n,r){a(this,void 0,void 0,(function*(){try{const r=yield Object(i.uploadFileService)(Object(o.uploadDataToBlob)(t),e);n&&n(r)}catch(t){r&&r(t)}}))}(t,(t,e)=>{let r=0;e&&t&&(r=100*t/e,r=Math.min(100,r)),n.style.width=r+"%"},t=>{if(t){const n=d(t.src),r=e.querySelector("img");null!=r&&(r.src=n),e.classList.remove("loading")}},t=>Object(o.showError)(t))}(h,c,e)}return p.onclick=()=>{"function"==typeof n&&this.editor.commands.setNodeSelection(n())},{dom:s,contentDOM:l,ignoreMutation:e=>"attributes"===e.type&&null!=e.attributeName&&(["src","title","alt"].includes(e.attributeName)&&(t.attrs[e.attributeName]=e.target.getAttribute(e.attributeName)),!0),update:t=>t.type===this.type&&(l.classList.toggle("empty",0===t.content.size),!0)}}}});function d(t){return function(t,e){const n=document.createElement("a");n.href=t;const r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}(t,["http","https","data"])?t:"//:0"}},178:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(64);const o="topicSummary",i=r.d.create({name:o,group:"topicDoc",content:"inline*",addAttributes:()=>({"data-placeholder":{default:"Summary of the text"},"data-label":{default:"Summary"},role:{default:"definition"}}),parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:t}){return["p",Object(r.j)(this.options.HTMLAttributes,t),0]}})},179:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(64);const o="topicTitle",i=r.d.create({name:o,content:"inline*",group:"topicDoc",defining:!0,selectable:!0,addAttributes:()=>({"data-placeholder":{default:"Title"},"data-label":{default:"Title"}}),parseHTML:()=>[{tag:"h1"}],renderHTML({HTMLAttributes:t}){return["h1",Object(r.j)(this.options.HTMLAttributes,t),0]}})},180:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1),o=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),i=function(t){function e(n,r){void 0===r&&(r=o.now);var i=t.call(this,n,(function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r.a(e,t),e.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,o):t.prototype.schedule.call(this,n,r,o)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(o)},181:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1),o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.a(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(5).a))},182:function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return v}));for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),u=i&&(c||+i[1]<57)||a&&c,d=0;d<10;d++)r[48+d]=r[96+d]=String(d);for(d=1;d<=24;d++)r[d+111]="F"+d;for(d=65;d<=90;d++)r[d]=String.fromCharCode(d+32),o[d]=String.fromCharCode(d);for(var p in r)o.hasOwnProperty(p)||(o[p]=r[p]);var h=n(74),f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function m(t){var e,n,r,o,i=t.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var c=i[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))e=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);f?o=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function g(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function v(t){return new h.d({props:{handleKeyDown:y(t)}})}function y(t){var e=function(t){var e=Object.create(null);for(var n in t)e[m(n)]=t[n];return e}(t);return function(t,n){var i,a=function(t){var e=!(u&&(t.ctrlKey||t.altKey||t.metaKey)||(s||l)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?o:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),c=1==a.length&&" "!=a,d=e[g(a,n,!c)];if(d&&d(t.state,t.dispatch,t))return!0;if(c&&(n.shiftKey||n.altKey||n.metaKey||a.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=a){var p=e[g(i,n,!0)];if(p&&p(t.state,t.dispatch,t))return!0}else if(c&&n.shiftKey){var h=e[g(a,n,!0)];if(h&&h(t.state,t.dispatch,t))return!0}return!1}}},190:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(13);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const o=(t,e)=>{const n=t.startNode.parentNode,o=void 0===e?t.endNode:e.startNode,i=n.insertBefore(Object(r.c)(),o);n.insertBefore(Object(r.c)(),o);const s=new r.b(t.options);return s.insertAfterNode(i),s},i=(t,e)=>(t.setValue(e),t.commit(),t),s=(t,e,n)=>{const o=t.startNode.parentNode,i=n?n.startNode:t.endNode,s=e.endNode.nextSibling;s!==i&&Object(r.h)(o,e.startNode,s,i)},a=t=>{Object(r.f)(t.startNode.parentNode,t.startNode,t.endNode.nextSibling)},c=(t,e,n)=>{const r=new Map;for(let o=e;o<=n;o++)r.set(t[o],o);return r},l=new WeakMap,u=new WeakMap,d=Object(r.d)((t,e,n)=>{let d;return void 0===n?n=e:void 0!==e&&(d=e),e=>{if(!(e instanceof r.b))throw new Error("repeat can only be used in text bindings");const p=l.get(e)||[],h=u.get(e)||[],f=[],m=[],g=[];let v,y,b=0;for(const e of t)g[b]=d?d(e,b):b,m[b]=n(e,b),b++;let w=0,x=p.length-1,_=0,k=m.length-1;for(;w<=x&&_<=k;)if(null===p[w])w++;else if(null===p[x])x--;else if(h[w]===g[_])f[_]=i(p[w],m[_]),w++,_++;else if(h[x]===g[k])f[k]=i(p[x],m[k]),x--,k--;else if(h[w]===g[k])f[k]=i(p[w],m[k]),s(e,p[w],f[k+1]),w++,k--;else if(h[x]===g[_])f[_]=i(p[x],m[_]),s(e,p[x],p[w]),x--,_++;else if(void 0===v&&(v=c(g,_,k),y=c(h,w,x)),v.has(h[w]))if(v.has(h[x])){const t=y.get(g[_]),n=void 0!==t?p[t]:null;if(null===n){const t=o(e,p[w]);i(t,m[_]),f[_]=t}else f[_]=i(n,m[_]),s(e,n,p[w]),p[t]=null;_++}else a(p[x]),x--;else a(p[w]),w++;for(;_<=k;){const t=o(e,f[k+1]);i(t,m[_]),f[_++]=t}for(;w<=x;){const t=p[w++];null!==t&&a(t)}l.set(e,f),u.set(e,g)}})},387:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(92);const o=String.raw,i=String.raw,s=Object(r.a)({props:{config:{type:{},default:{duration:2e3,stepsCount:1}},color:{type:String,attribute:"color",default:"#ef534e"}},render:(t,e)=>{e.innerHTML!==t.template&&(e.innerHTML=t.template);const n=new CSSStyleSheet;n.replaceSync(t.style),e.adoptedStyleSheets=[n]},shadow:{mode:"open"}})((function(t){const[e,n]=Object(r.g)(!1),[s,a]=Object(r.g)(),[c,l]=Object(r.g)(),u=t.config.duration;return Object(r.d)(()=>{const e=t.config.stepsCount,r=100/e;let o="";for(let t=0;t<e;t++)o=o+" "+i`@keyframes${" loadingPB_"+t*r}{from{width:${t*r+"%"};}to{width:${(t+1)*r+"%"};}}`;a(o);let s=0;this.ref=this.ref||{},this.ref.current=this,this.generateProgress=function*(){for(;;)s<e?(l("loadingPB_"+s*r),yield++s):(n(!1),l(void 0),s=0,yield s)}(),this.togglePause=t=>n(e=>"boolean"==typeof t?t:!e)},[t.config]),{style:i`${s}.lpb{animation-timing-function:cubic-bezier(.55,0,1,.45);animation-fill-mode:both;background:${t.color};height:3px;left:0;top:0;width:0%;z-index:9999;position:fixed;animation-name:${c};animation-duration:${u+"ms"};animation-play-state:${e?"paused":"running"}}.lpb:after{display:${void 0!==c?"block":"none"};position:absolute;content:'';right:0;width:100px;height:100%;box-shadow:${`0 0 10px ${t.color}, 0 0 5px ${t.color}`};opacity:1;transform:rotate(3deg)translate(0,-4px)}`,template:o`<div class="lpb"></div>`}}))},408:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(1),o=n(4),i=n(181),s=new(n(180).a)(i.a);function a(t,e){return void 0===e&&(e=s),function(n){return n.lift(new c(t,e))}}var c=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.dueTime,this.scheduler))},t}(),l=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.dueTime=n,o.scheduler=r,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return r.a(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(o.a);function u(t){t.debouncedNext()}},429:function(t,e){t.exports=":root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--font-family: Raleway,HelveticaNeue,Helvetica Neue,Helvetica,Arial,sans-serif}:host{position:relative;width:100%;user-select:none;display:flex;flex-direction:row;border-left:solid 1px #e1e1e1}.fab-container{display:inline-flex;align-items:flex-end}.fab-container [tooltip]:before{bottom:115%;border-radius:2px;background:rgba(88,88,88,0.16);content:attr(tooltip);font-size:12px;visibility:hidden;opacity:0;padding:5px 7px;margin-right:12px;position:absolute;white-space:nowrap}.fab-container [tooltip]:hover:before,.fab-container [tooltip]:hover:after{visibility:visible;opacity:1}.fab-container_horizontal{flex-direction:row;position:relative;margin:0;display:none}.fab-container_horizontal>*:not(:last-child){opacity:0;margin-left:0;transform:translateX(10px)}.fab-container_horizontal:hover>*{display:inherit;opacity:1;transform:none;margin-left:10px}.fab-container_vertical{flex-direction:column;position:relative;margin:0;display:none}.fab-container_vertical>*:not(:last-child){opacity:0;margin-top:0;transform:translateY(10px)}.fab-container_vertical:hover>*{opacity:1;margin-top:10px;transform:none}.fab-container:nth-last-child(1){transition-delay:25ms;background-size:contain}.fab-container:not(:last-child):nth-last-child(2){transition-delay:20ms;background-size:contain}.fab-container:not(:last-child):nth-last-child(3){transition-delay:40ms;background-size:contain}.fab-container:not(:last-child):nth-last-child(4){transition-delay:60ms;background-size:contain}.fab-button{border:none;background-color:white;cursor:pointer;box-shadow:2px 2px 2px 0px rgba(0,0,0,0.18),0px 4px 7px -7px rgba(0,0,0,0.15);border-radius:50%;display:block;width:40px;height:40px;margin:5px;position:relative;transition:all 0.1s ease-out;text-decoration:none;display:flex;justify-content:center;align-items:center;color:#bbb}.fab-button:active,.fab-button:focus,.fab-button:hover{box-shadow:3px 2px 2px rgba(0,0,0,0.14),0 4px 8px rgba(0,0,0,0.28);color:#bbb}.fab-button_lg{width:50px;height:50px;margin:0}\n"},430:function(t,e){t.exports=".hljs{display:block;overflow-x:auto;padding:0.5em;background:#23241f}.hljs,.hljs-tag,.hljs-subst{color:#f8f8f2}.hljs-strong,.hljs-emphasis{color:#a8a8a2}.hljs-bullet,.hljs-quote,.hljs-number,.hljs-regexp,.hljs-literal,.hljs-link{color:#ae81ff}.hljs-code,.hljs-title,.hljs-section,.hljs-selector-class{color:#a6e22e}.hljs-strong{font-weight:bold}.hljs-emphasis{font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-name,.hljs-attr{color:#f92672}.hljs-symbol,.hljs-attribute{color:#66d9ef}.hljs-params,.hljs-class .hljs-title{color:#f8f8f2}.hljs-string,.hljs-type,.hljs-built_in,.hljs-builtin-name,.hljs-selector-id,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-addition,.hljs-variable,.hljs-template-variable{color:#e6db74}.hljs-comment,.hljs-deletion,.hljs-meta{color:#75715e}.redactor{max-width:732px;margin:0 auto}.redactor__article{font-family:CustomSerif, Georgia, Cambria, 'Times New Roman', serif;font-weight:400;font-style:normal;font-size:18px;line-height:1.58;padding:0;margin:0;color:rgba(0,0,0,0.8)}.redactor__article .ProseMirror{outline:0}.redactor__article .ProseMirror>*+*{margin-top:0.75em}.redactor__article .ProseMirror>::selection,.redactor__article .ProseMirror>:not(pre) ::selection{background:#5f5f5f2f}.redactor__article .ProseMirror h1{font-family:CustomSansSerif, 'Lucida Grande', Arial, sans-serif;font-weight:700;font-style:normal;font-size:32px;margin:21px 21px 12px;line-height:34px}.redactor__article .ProseMirror h2{font-family:CustomSansSerif, 'Lucida Grande', Arial, sans-serif;font-weight:700;font-style:normal;font-size:30px;margin:21px 21px 12px;line-height:34px}.redactor__article .ProseMirror h3{font-family:CustomSansSerif, 'Lucida Grande', Arial, sans-serif;font-weight:700;font-style:normal;font-size:28px;margin:18px 21px 9px}.redactor__article .ProseMirror h4{font-family:CustomSansSerif, 'Lucida Grande', Arial, sans-serif;font-weight:700;font-style:normal;font-size:24px;margin:18px 21px 7px}.redactor__article .ProseMirror p{margin:0 21px 12px;word-wrap:break-word}.redactor__article .ProseMirror blockquote{font-family:CustomSerif, Georgia, Cambria, 'Times New Roman', serif;margin:18px 21px 16px 0;padding-left:15px;position:relative;font-style:italic;word-wrap:break-word;border-left:3px solid #000}.redactor__article .ProseMirror aside{font-family:CustomSerif, Georgia, Cambria, 'Times New Roman', serif;font-size:21px;color:rgba(0,0,0,0.6);margin:18px 21px 16px;padding:0 18px;text-align:center;font-style:italic}.redactor__article .ProseMirror hr{width:50%;margin:30px auto;border:none;font-size:2px;text-align:right;overflow:visible}.redactor__article .ProseMirror hr:after{content:'';display:block;border-top:1px solid #c9cdd1;margin:0 3px;position:relative;top:1px}.redactor__article .ProseMirror [contenteditable='false']{white-space:normal}.redactor__article .ProseMirror ul[data-type='taskList']{list-style:none;padding:0}.redactor__article .ProseMirror ul[data-type='taskList'] li{display:flex;align-items:center}.redactor__article .ProseMirror ul[data-type='taskList'] li>label{flex:0 0 auto;margin-right:0.5rem}.redactor__article .ProseMirror ul[data-type='taskList'] li p{margin:0}.redactor__article .ProseMirror mark{background-color:#faf594b4}.redactor__article .ProseMirror :not(pre) code{background-color:rgba(97,97,97,0.1);color:#616161;font-family:JetBrainsMono, monospace;padding:0.1rem 0.3rem;border-radius:0.4rem;font-size:0.9rem}.redactor__article .ProseMirror a[href]{text-decoration:none;transition:all 0.2s ease-in-out;color:rgba(0,0,0,0.8);border-bottom:0.1rem rgba(0,0,0,0.425) solid}.redactor__article .ProseMirror a[href]:hover,.redactor__article .ProseMirror a[href]:focus{border-bottom:0.1rem rgba(0,0,0,0.8) solid}.redactor__article .ProseMirror *[data-placeholder].empty{position:relative}.redactor__article .ProseMirror *[data-placeholder].empty:before{position:absolute;left:0;right:0;content:attr(data-placeholder);color:rgba(0,0,0,0.44);font-weight:normal;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;pointer-events:none}.redactor__article .ProseMirror *[data-label]{position:relative}.redactor__article .ProseMirror *[data-label]:after{position:absolute;content:attr(data-label);color:rgba(0,0,0,0.44);border-right:1px solid rgba(0,0,0,0.15);right:100%;top:-6px;bottom:-6px;padding:6px 12px;font-weight:normal;margin:0 21px;opacity:0;visibility:hidden;transition:opacity 0.15s ease}.redactor__article .ProseMirror .focused *[data-label].empty:after{position:absolute;content:attr(data-label);color:rgba(0,0,0,0.44);border-right:1px solid rgba(0,0,0,0.15);right:100%;top:-6px;bottom:-6px;padding:6px 12px;font-weight:normal;margin:0 21px;opacity:0;visibility:hidden;transition:opacity 0.15s ease}.redactor__article .ProseMirror *[data-label].focused:after{opacity:1;visibility:visible}.redactor__article .ProseMirror *[role='definition']{font-family:CustomSansSerif, 'Lucida Grande', Arial, sans-serif;font-size:15px;line-height:18px;color:#79828b;margin:12px 21px;font-style:normal}.redactor__article .ProseMirror *[role='definition'] a{color:#79828b}.redactor__article .ProseMirror *[role='definition'] a[href]{border-bottom:none;border-bottom:0.1em solid rgba(0,0,0,0.4)}.redactor__article .ProseMirror *[role='definition'].empty{display:block}.redactor__article .ProseMirror *[role='definition'] time:before{content:'\\2022';padding:0 7px}.redactor__article .ProseMirror img{max-width:100%;vertical-align:top}.redactor__article .ProseMirror .iframe_wrap{max-width:100%;vertical-align:top;max-width:100%;vertical-align:top;position:relative}.redactor__article .ProseMirror .iframe_wrap iframe{position:absolute;width:1px;height:1px;min-width:100%;min-height:100%;*width:100%;*height:100%;top:0;left:0}.redactor__article .ProseMirror figure{margin:0 21px 16px;padding:0;text-align:center;position:relative;user-select:inherit}.redactor__article .ProseMirror figure.ProseMirror-selectednode img{box-shadow:0 0 0 3px rgba(0,0,0,0.4)}.redactor__article .ProseMirror figure.ProseMirror-selectednode img:hover{box-shadow:0 0 0 3px rgba(0,0,0,0.4)}.redactor__article .ProseMirror figure img:hover{box-shadow:0 0 0 3px rgba(0,0,0,0.2)}.redactor__article .ProseMirror figcaption{font-family:CustomSansSerif, 'Lucida Grande', Arial, sans-serif;font-size:15px;color:#79828b;padding:12px 21px 0;line-height:18px;vertical-align:top;text-align:center}.redactor__article .ProseMirror figcaption .editable_input{font-family:CustomSansSerif, 'Lucida Grande', Arial, sans-serif;font-size:15px;color:#79828b;padding:12px 21px 0;line-height:18px;vertical-align:top;text-align:center;width:100%;border:none;padding:0;margin:0}.redactor__article .ProseMirror .figure_wrapper{position:relative}.redactor__article .ProseMirror .figure_wrapper img{opacity:1;transition:opacity 0.15s ease;max-height:690px}.redactor__article .ProseMirror .figure_wrapper.loading img{opacity:0.3}.redactor__article .ProseMirror .figure_wrapper .file_progress{position:absolute;z-index:1;bottom:0;left:0;right:0;padding:3px;background-color:rgba(255,255,255,0.7);transition:opacity 0.15s ease;visibility:hidden;opacity:0}.redactor__article .ProseMirror .figure_wrapper.loading .file_progress{visibility:visible;opacity:1}.redactor__article .ProseMirror .figure_wrapper .file_progress_bar{height:2px;background-color:#333;transition:width 0.1s linear;width:0}.redactor__article .ProseMirror figcaption[data-placeholder].empty{position:relative;overflow:hidden;width:calc(100% - 170px)}.redactor__article .ProseMirror figcaption[data-placeholder].empty:before{display:none}.redactor__article .ProseMirror figcaption[data-placeholder].empty:after{position:absolute;content:attr(data-placeholder);color:rgba(0,0,0,0.44);font-weight:normal;font-style:italic;top:0px;padding-top:12px}.redactor__article .ProseMirror pre{background:#232b2b;border-radius:0.3rem;box-shadow:0 0.5rem 1rem rgba(0,0,0,0.4);border-left:6px solid #516363;margin:1rem auto;white-space:pre-wrap;color:#c7d3de;counter-reset:step;counter-increment:step 0;position:relative;font-family:Menlo, Monaco, 'Courier New', monospace;font-size:0.9rem;padding:0.75rem 1rem}.redactor__article .ProseMirror pre ::selection{background:#dbdbdb2d}.redactor__article .ProseMirror pre span.l:before{color:#516363;position:absolute;left:15px;content:counter(step);counter-increment:step}@media (max-width: 960px){.redactor__article .ProseMirror *[data-label]:after{display:none}}.is-active{background:#000;color:#fff}\n"},431:function(t,e){t.exports='/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:0.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace, monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace, monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:0.35em 0.75em 0.625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--font-family: Raleway,HelveticaNeue,Helvetica Neue,Helvetica,Arial,sans-serif}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:2rem;font-weight:300}h1{font-size:4.0rem;line-height:1.2;letter-spacing:-.1rem}h2{font-size:3.6rem;line-height:1.25;letter-spacing:-.1rem}h3{font-size:3.0rem;line-height:1.3;letter-spacing:-.1rem}h4{font-size:2.4rem;line-height:1.35;letter-spacing:-.08rem}h5{font-size:1.8rem;line-height:1.5;letter-spacing:-.05rem}h6{font-size:1.5rem;line-height:1.6;letter-spacing:0}@media (min-width: 550px){h1{font-size:5.0rem}h2{font-size:4.2rem}h3{font-size:3.6rem}h4{font-size:3.0rem}h5{font-size:2.4rem}h6{font-size:1.5rem}}p{margin-top:0}@media (min-width: 400px){.toc-stub{margin-bottom:3rem}}.toc-panel{--toc-border-width: 1px;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--text-unit: 1em;--text-scale-ratio: 1.2;--text-xs: calc((1em / 1.2) / 1.2);--text-xs: calc((var(--text-unit) / var(--text-scale-ratio)) / var(--text-scale-ratio));--text-sm: calc(calc((1em / 1.2) / 1.2) * 1.2);--text-sm: calc(var(--text-xs) * var(--text-scale-ratio));box-shadow:inset 1px 0 0 hsl(240, 1%, 83%);box-shadow:inset var(--toc-border-width) 0 0 var(--color-contrast-low);font-family:"Raleway","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;position:sticky;top:1.25rem;max-height:calc(100vh - 1.25rem);overflow:visible}.toc-panel ol,.toc-panel ul{list-style:none;margin:0;padding:0;border:0}.toc-panel .toc-panel__list{position:relative}.toc-panel .toc-panel__list .toc-panel__list .toc-panel__header{padding-left:calc(1.25rem * 2)}.toc-panel .toc-panel__title{padding:0.25rem 1.25rem;text-transform:uppercase;letter-spacing:0.1em;font-size:calc(calc((1em / 1.2) / 1.2) * 1.2);font-size:var(--text-sm)}.toc-panel .toc-panel__header{padding:0.25rem 1.25rem;position:relative;display:inline-flex;color:hsl(240, 1%, 48%);color:var(--color-contrast-medium);text-decoration:none;overflow:hidden;text-overflow:ellipsis}.toc-panel .toc-panel__header::before{content:\'\';width:1px;width:var(--toc-border-width);height:100%;position:absolute;left:0;top:0}.toc-panel .toc-panel__header:hover{color:hsl(240, 4%, 20%);color:var(--color-contrast-high)}.toc-panel .toc-panel__header_selected{color:#2a6df4}.toc-panel .toc-panel__header_selected::before{background-color:#2a6df4}.toc-panel .toc-panel__page-numb{width:2rem;text-align:right;padding-top:0.25rem;padding-right:0.5rem;flex-shrink:0;white-space:nowrap}.toc-panel .toc-panel__item{display:flex;margin-left:-2.5rem;color:hsl(240, 1%, 48%);color:var(--color-contrast-medium)}.toc-panel .toc-panel__item:hover{color:hsl(240, 4%, 20%);color:var(--color-contrast-high)}\n'},432:function(t,e){t.exports='/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:0.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace, monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace, monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:0.35em 0.75em 0.625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--font-family: Raleway,HelveticaNeue,Helvetica Neue,Helvetica,Arial,sans-serif}.container{position:relative;width:100%;max-width:960px;margin:0 auto;padding:0 20px;box-sizing:border-box}.column,.columns{width:100%;float:left;box-sizing:border-box}@media (min-width: 400px){.container{width:85%;padding:0}}@media (min-width: 550px){.container{width:80%}.column,.columns{margin-left:4%}.column:first-child,.columns:first-child{margin-left:0}.one.column,.one.columns{width:grid-column-width(1)}.two.columns{width:grid-column-width(2)}.three.columns{width:grid-column-width(3)}.four.columns{width:grid-column-width(4)}.five.columns{width:grid-column-width(5)}.six.columns{width:grid-column-width(6)}.seven.columns{width:grid-column-width(7)}.eight.columns{width:grid-column-width(8)}.nine.columns{width:grid-column-width(9)}.ten.columns{width:grid-column-width(10)}.eleven.columns{width:grid-column-width(11)}.twelve.columns{width:100%;margin-left:0}.one-third.column{width:grid-column-width(4)}.two-thirds.column{width:grid-column-width(8)}.one-half.column{width:grid-column-width(6)}.offset-by-one.column,.offset-by-one.columns{margin-left:grid-offset-length(1)}.offset-by-two.column,.offset-by-two.columns{margin-left:grid-offset-length(2)}.offset-by-three.column,.offset-by-three.columns{margin-left:grid-offset-length(3)}.offset-by-four.column,.offset-by-four.columns{margin-left:grid-offset-length(4)}.offset-by-five.column,.offset-by-five.columns{margin-left:grid-offset-length(5)}.offset-by-six.column,.offset-by-six.columns{margin-left:grid-offset-length(6)}.offset-by-seven.column,.offset-by-seven.columns{margin-left:grid-offset-length(7)}.offset-by-eight.column,.offset-by-eight.columns{margin-left:grid-offset-length(8)}.offset-by-nine.column,.offset-by-nine.columns{margin-left:grid-offset-length(9)}.offset-by-ten.column,.offset-by-ten.columns{margin-left:grid-offset-length(10)}.offset-by-eleven.column,.offset-by-eleven.columns{margin-left:grid-offset-length(11)}.offset-by-one-third.column,.offset-by-one-third.columns{margin-left:grid-offset-length(4)}.offset-by-two-thirds.column,.offset-by-two-thirds.columns{margin-left:grid-offset-length(8)}.offset-by-one-half.column,.offset-by-one-half.column{margin-left:grid-offset-length(6)}}.container:after,.row:after,.u-cf{content:"";display:table;clear:both}.um-drafts__submenu{display:flex;flex-direction:row-reverse;padding-top:10px;border-bottom:1px solid #eee}.um-drafts__export-all{margin:0 0 10px 10px;stroke:#ffffff;stroke-width:30px;color:#bbb}.um-drafts__export-all:hover{color:#888;cursor:pointer}.draft-content{display:flex;flex-direction:column}@media (min-width: 400px){.draft-content{flex-direction:row}}.page__controls{display:flex;justify-content:space-between;align-items:start;opacity:0.3;transition:0.2s}.page__controls:hover{opacity:1}.btn{cursor:pointer}.btn.btn_icon{background:transparent;border:none}.btn.btn_icon .icon-tabler{transition:0.2s;stroke:#bbb}.btn.btn_icon .icon-tabler:hover{stroke:#333}\n'},447:function(t,e,n){"use strict";n.r(e),n.d(e,"draftElement",(function(){return Ha}));var r=n(13),o=n(92),i=n(22);const s="AUTH_ACTION",a={AUTH:Symbol(`[${s}] AUTH`),AUTH_DONE:Symbol(`[${s}] AUTH_DONE`),AUTH_FAIL:Symbol(`[${s}] AUTH_FAIL`)};const c=new i.a;var l={$:c.asObservable(),dispatch:function(t){console.log(t),function(t){var e,n;"error"in t.payload&&Array.isArray(null===(n=null===(e=t.payload.error)||void 0===e?void 0:e.response)||void 0===n?void 0:n.errors)&&t.payload.error.response.errors.some(t=>{var e;return null===(e=t.message)||void 0===e?void 0:e.startWith("Could not verify JWT: JWTExpired")})&&l.dispatch({type:a.AUTH,payload:{redirectUri:document.location.origin+"/drafts"}})}(t),c.next(t)}};const u={PAGE_SAVE:Symbol("[HUB_ACTION] PAGE_SAVE"),PAGE_SAVING:Symbol("[HUB_ACTION] PAGE_SAVING"),PAGE_SAVE_DONE:Symbol("[HUB_ACTION] PAGE_SAVE_DONE"),PAGE_SAVE_FAIL:Symbol("[HUB_ACTION] PAGE_SAVE_FAIL"),DRAFT_ADD_PAGE_DONE:Symbol("[HUB_ACTION] DRAFT_ADD_PAGE_DONE"),DRAFT_DELETE_PAGE_DONE:Symbol("[HUB_ACTION] DRAFT_DELETE_PAGE_DONE")};var d=n(190),p=n(387),h=n(5),f=n(1),m=n(4);function g(t,e){return function(n){return n.lift(new v(t,e))}}var v=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new y(t,this.predicate,this.thisArg))},t}(),y=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.count=0,o}return f.a(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(m.a),b=n(31);function w(t){return t&&"function"==typeof t.schedule}var x=n(16),_=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}};function k(t,e){return new x.a((function(n){var r=new h.a,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function O(t,e){return e?k(t,e):new x.a(_(t))}function S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return w(n)?(t.pop(),k(t,n)):O(t)}var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f.a(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(m.a),E=function(t){function e(e,n,r){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=r,o.index=0,o}return f.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(m.a),T=n(9);function M(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var N=M(),C=n(19),I=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function D(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var j=n(27),L=function(t){if(t&&"function"==typeof t[C.a])return r=t,function(t){var e=r[C.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(I(t))return _(t);if(D(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,T.a),t};if(t&&"function"==typeof t[N])return e=t,function(t){for(var n=e[N]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,r,o=Object(j.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+o+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function P(t,e,n,r,o){if(void 0===o&&(o=new E(t,n,r)),!o.closed)return e instanceof x.a?e.subscribe(o):L(e)(o)}function R(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new B(t,e))}}var B=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new z(t,this.project,this.thisArg))},t}(),z=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return f.a(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(m.a);function F(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[C.a]}(t))return function(t,e){return new x.a((function(n){var r=new h.a;return r.add(e.schedule((function(){var o=t[C.a]();r.add(o.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(D(t))return function(t,e){return new x.a((function(n){var r=new h.a;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(I(t))return k(t,e);if(function(t){return t&&"function"==typeof t[N]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new x.a((function(n){var r,o=new h.a;return o.add((function(){r&&"function"==typeof r.return&&r.return()})),o.add(e.schedule((function(){r=t[N](),o.add(e.schedule((function(){if(!n.closed){var t,e;try{var o=r.next();t=o.value,e=o.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),o}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function $(t,e){return e?F(t,e):t instanceof x.a?t:new x.a(L(t))}function V(t,e){return"function"==typeof e?function(n){return n.pipe(V((function(n,r){return $(t(n,r)).pipe(R((function(t,o){return e(n,t,r,o)})))})))}:function(e){return e.lift(new H(t))}}var H=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new U(t,this.project))},t}(),U=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return f.a(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var o=new E(this,e,n),i=this.destination;i.add(o),this.innerSubscription=P(this,t,void 0,void 0,o),this.innerSubscription!==o&&i.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e}(A);function q(t){return function(e){var n=new W(t),r=e.lift(n);return n.caught=r}}var W=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new G(t,this.selector,this.caught))},t}(),G=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.selector=n,o.caught=r,o}return f.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new E(this,void 0,void 0);this.add(r);var o=P(this,n,void 0,void 0,r);o!==r&&this.add(o)}},e}(A),K=n(30);function J(t){var e;const n=new K.a.WebAuth({domain:"inscriptum.auth0.com",clientID:"sSGAFDwnRqJUsJw7v12KV8SAeuYtl3Cd",redirectUri:t,responseType:"token id_token",scope:"openid email",audience:"https://inscriptum.js.org"}),r=null!==(e=sessionStorage.windowLocationHash)&&void 0!==e?e:window.location.hash;return null!=r&&r.length>0?function(t){var e;const n=null!==(e=sessionStorage.windowLocationHash)&&void 0!==e?e:window.location.hash;return new x.a(e=>{t.parseHash({hash:n},(t,n)=>{const r=Q(t,n);e.next(r)})})}(n):function(t,e){return new x.a(n=>{t.checkSession({},(r,o)=>{try{const t=Q(r,o);n.next(t)}catch(r){t.authorize({redirectUri:e}),n.error(r)}})})}(n,t)}function Q(t,e){var n;if(null!=(null==e?void 0:e.accessToken)&&null!=(null==e?void 0:e.idToken)){localStorage.setItem("isLoggedIn","true");const t=Number(JSON.stringify(1e3*(null!==(n=e.expiresIn)&&void 0!==n?n:1)+(new Date).getTime()));return{accessToken:e.accessToken,expiresAt:t,idToken:e.idToken}}{let e="";throw t&&(e="Error: "+t.error+". Check the console for further details.",console.warn(e)),Error(e)}}const Y=l.$.pipe(g(t=>a.AUTH===t.type),V(t=>J(t.payload.redirectUri).pipe(R(t=>({type:a.AUTH_DONE,payload:t})),q(t=>S({type:a.AUTH_FAIL,payload:t})))));var X=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Z(t,this.project,this.concurrent))},t}(),Z=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return f.a(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new E(this,e,n),o=this.destination;o.add(r);var i=P(this,t,void 0,void 0,r);i!==r&&o.add(i)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(A);function tt(t){return t}function et(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(o){return o.pipe(t((function(t,r){return $(e(t,r)).pipe(R((function(e,o){return n(t,e,r,o)})))}),r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new X(e,r))})}(tt,t)}function nt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,o=t[t.length-1];return w(o)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof o&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof x.a?t[0]:et(n)(O(t,r))}function rt(){return et(1)}function ot(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return rt()(S.apply(void 0,t))}var it=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new st(t,this.accumulator,this.seed,this.hasSeed))},t}(),st=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.accumulator=n,i._seed=r,i.hasSeed=o,i.index=0,i}return f.a(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(m.a);var at,ct=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new lt(t,this.keySelector,this.flushes))},t}(),lt=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.keySelector=n,o.values=new Set,r&&o.add(P(o,r)),o}return f.a(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(A),ut=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return f.a(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(n(181).a),dt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f.a(e,t),e}(n(180).a))(ut),pt=new x.a((function(t){return t.complete()}));function ht(t){return t?function(t){return new x.a((function(e){return t.schedule((function(){return e.complete()}))}))}(t):pt}function ft(t){var e=t.error;t.subscriber.error(e)}at||(at={});var mt=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){var t,e;switch(this.kind){case"N":return S(this.value);case"E":return t=this.error,e?new x.a((function(n){return e.schedule(ft,0,{error:t,subscriber:n})})):new x.a((function(e){return e.error(t)}));case"C":return ht()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var gt=function(t){function e(e,n,r){void 0===r&&(r=0);var o=t.call(this,e)||this;return o.scheduler=n,o.delay=r,o}return f.a(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new vt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(mt.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(mt.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(mt.createComplete()),this.unsubscribe()},e}(m.a),vt=function(){return function(t,e){this.notification=t,this.destination=e}}(),yt=n(6),bt=n(28),wt=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var o=t.call(this)||this;return o.scheduler=r,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return f.a(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new xt(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=r.length;if(this.closed)throw new yt.a;if(this.isStopped||this.hasError?e=h.a.EMPTY:(this.observers.push(t),e=new bt.a(this,t)),o&&t.add(t=new gt(t,o)),n)for(var s=0;s<i&&!t.closed;s++)t.next(r[s]);else for(s=0;s<i&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||dt).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,o=r.length,i=0;i<o&&!(t-r[i].time<n);)i++;return o>e&&(i=Math.max(i,o-e)),i>0&&r.splice(0,i),r},e}(i.a),xt=function(){return function(t,e){this.time=t,this.value=e}}();function _t(){return function(t){return t.lift(new kt(t))}}var kt=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new Ot(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},t}(),Ot=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return f.a(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(m.a),St=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return f.a(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new h.a).add(this.source.subscribe(new Et(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.a.EMPTY)),t},e.prototype.refCount=function(){return _t()(this)},e}(x.a),At=function(){var t=St.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),Et=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return f.a(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b);m.a;var Tt=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),o=n(r).subscribe(t);return o.add(e.subscribe(r)),o},t}();function Mt(t){return g(e=>Object.values(t).includes(e.type))}const Nt=nt(l.$,Y).pipe(Mt(a),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return w(n)?(t.pop(),function(e){return ot(t,e,n)}):function(e){return ot(t,e)}}({isLoading:!1}),function(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new it(t,e,n))}}((function(t,e){switch(e.type){case a.AUTH:return Object.assign(Object.assign({},t),{error:null,isLoading:!0});case a.AUTH_DONE:return Object.assign(Object.assign({},t),{data:e.payload,isLoading:!1});case a.AUTH_FAIL:return Object.assign(Object.assign({},t),{error:e.payload,isLoading:!1});default:return t}})),(function(t){return t.lift(new ct(Ct,It))}),function(t,e,n,r){n&&"function"!=typeof n&&(r=n);var o="function"==typeof n?n:void 0,i=new wt(t,e,r);return function(t){return function(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new Tt(r,e));var o=Object.create(n,At);return o.source=n,o.subjectFactory=r,o}}((function(){return i}),o)(t)}}(1),_t());var Ct,It,Dt=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),jt=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}();function Lt(t){return function(e){return 0===t?ht():e.lift(new Pt(t))}}var Pt=function(){function t(t){if(this.total=t,this.total<0)throw new jt}return t.prototype.call=function(t,e){return e.subscribe(new Rt(t,this.total))},t}(),Rt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return f.a(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(m.a);function Bt(t){return void 0===t&&(t=null),function(e){return e.lift(new zt(t))}}var zt=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new Ft(t,this.defaultValue))},t}(),Ft=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return f.a(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(m.a);function $t(t){return void 0===t&&(t=Ut),function(e){return e.lift(new Vt(t))}}var Vt=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new Ht(t,this.errorFactory))},t}(),Ht=function(t){function e(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return f.a(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(m.a);function Ut(){return new Dt}function qt(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?g((function(e,n){return t(e,n,r)})):tt,Lt(1),n?Bt(e):$t((function(){return new Dt})))}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wt=function(){return(Wt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.create;Object.create;function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var Kt="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function Jt(t,e){for(var n,r=/\r\n|[\n\r]/g,o=1,i=e+1;(n=r.exec(t.body))&&n.index<e;)o+=1,i=e+1-(n.index+n[0].length);return{line:o,column:i}}function Qt(t){return Yt(t.source,Jt(t.source,t.start))}function Yt(t,e){var n=t.locationOffset.column-1,r=Zt(n)+t.body,o=e.line-1,i=t.locationOffset.line-1,s=e.line+i,a=1===e.line?n:0,c=e.column+a,l="".concat(t.name,":").concat(s,":").concat(c,"\n"),u=r.split(/\r\n|[\n\r]/g),d=u[o];if(d.length>120){for(var p=Math.floor(c/80),h=c%80,f=[],m=0;m<d.length;m+=80)f.push(d.slice(m,m+80));return l+Xt([["".concat(s),f[0]]].concat(f.slice(1,p+1).map((function(t){return["",t]})),[[" ",Zt(h-1)+"^"],["",f[p+1]]]))}return l+Xt([["".concat(s-1),u[o-1]],["".concat(s),d],["",Zt(c-1)+"^"],["".concat(s+1),u[o+1]]])}function Xt(t){var e=t.filter((function(t){t[0];return void 0!==t[1]})),n=Math.max.apply(Math,e.map((function(t){return t[0].length})));return e.map((function(t){var e,r=t[0],o=t[1];return Zt(n-(e=r).length)+e+(o?" | "+o:" |")})).join("\n")}function Zt(t){return Array(t+1).join(" ")}function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ne(t,e){return!e||"object"!==te(e)&&"function"!=typeof e?re(t):e}function re(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oe(t){var e="function"==typeof Map?new Map:void 0;return(oe=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return ie(t,arguments,ce(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ae(r,t)})(t)}function ie(t,e,n){return(ie=se()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&ae(o,n.prototype),o}).apply(null,arguments)}function se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(a,t);var e,n,r,o,i,s=(e=a,n=se(),function(){var t,r=ce(e);if(n){var o=ce(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return ne(this,t)});function a(t,e,n,r,o,i,c){var l,u,d,p,h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),h=s.call(this,t);var f,m=Array.isArray(e)?0!==e.length?e:void 0:e?[e]:void 0,g=n;!g&&m&&(g=null===(f=m[0].loc)||void 0===f?void 0:f.source);var v,y=r;!y&&m&&(y=m.reduce((function(t,e){return e.loc&&t.push(e.loc.start),t}),[])),y&&0===y.length&&(y=void 0),r&&n?v=r.map((function(t){return Jt(n,t)})):m&&(v=m.reduce((function(t,e){return e.loc&&t.push(Jt(e.loc.source,e.loc.start)),t}),[]));var b,w=c;if(null==w&&null!=i){var x=i.extensions;"object"==Gt(b=x)&&null!==b&&(w=x)}return Object.defineProperties(re(h),{name:{value:"GraphQLError"},message:{value:t,enumerable:!0,writable:!0},locations:{value:null!==(l=v)&&void 0!==l?l:void 0,enumerable:null!=v},path:{value:null!=o?o:void 0,enumerable:null!=o},nodes:{value:null!=m?m:void 0},source:{value:null!==(u=g)&&void 0!==u?u:void 0},positions:{value:null!==(d=y)&&void 0!==d?d:void 0},originalError:{value:i},extensions:{value:null!==(p=w)&&void 0!==p?p:void 0,enumerable:null!=w}}),null!=i&&i.stack?(Object.defineProperty(re(h),"stack",{value:i.stack,writable:!0,configurable:!0}),ne(h)):(Error.captureStackTrace?Error.captureStackTrace(re(h),a):Object.defineProperty(re(h),"stack",{value:Error().stack,writable:!0,configurable:!0}),h)}return r=a,(o=[{key:"toString",value:function(){return function(t){var e=t.message;if(t.nodes)for(var n=0,r=t.nodes;n<r.length;n++){var o=r[n];o.loc&&(e+="\n\n"+Qt(o.loc))}else if(t.source&&t.locations)for(var i=0,s=t.locations;i<s.length;i++){var a=s[i];e+="\n\n"+Yt(t.source,a)}return e}(this)}},{key:Kt,get:function(){return"Object"}}])&&ee(r.prototype,o),i&&ee(r,i),a}(oe(Error));function ue(t,e,n){return new le("Syntax Error: ".concat(n),void 0,t,[e])}var de=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});var pe="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function he(t){var e=t.prototype.toJSON;"function"==typeof e||function(t,e){if(!Boolean(t))throw new Error(null!=e?e:"Unexpected invariant triggered.")}(0),t.prototype.inspect=e,pe&&(t.prototype[pe]=e)}var fe=function(){function t(t,e,n){this.start=t.start,this.end=e.end,this.startToken=t,this.endToken=e,this.source=n}return t.prototype.toJSON=function(){return{start:this.start,end:this.end}},t}();he(fe);var me=function(){function t(t,e,n,r,o,i,s){this.kind=t,this.start=e,this.end=n,this.line=r,this.column=o,this.value=s,this.prev=i,this.next=null}return t.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();he(me);var ge=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function ve(t){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t){return be(t,[])}function be(t,e){switch(ve(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return null===t?"null":function(t,e){if(-1!==e.indexOf(t))return"[Circular]";var n=[].concat(e,[t]),r=function(t){var e=t[String(pe)];if("function"==typeof e)return e;if("function"==typeof t.inspect)return t.inspect}(t);if(void 0!==r){var o=r.call(t);if(o!==t)return"string"==typeof o?o:be(o,n)}else if(Array.isArray(t))return function(t,e){if(0===t.length)return"[]";if(e.length>2)return"[Array]";for(var n=Math.min(10,t.length),r=t.length-n,o=[],i=0;i<n;++i)o.push(be(t[i],e));1===r?o.push("... 1 more item"):r>1&&o.push("... ".concat(r," more items"));return"["+o.join(", ")+"]"}(t,n);return function(t,e){var n=Object.keys(t);if(0===n.length)return"{}";if(e.length>2)return"["+function(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if("Object"===e&&"function"==typeof t.constructor){var n=t.constructor.name;if("string"==typeof n&&""!==n)return n}return e}(t)+"]";return"{ "+n.map((function(n){return n+": "+be(t[n],e)})).join(", ")+" }"}(t,n)}(t,e);default:return String(t)}}function we(t,e){if(!Boolean(t))throw new Error(e)}var xe=function(t,e){return t instanceof e};function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ke=function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof t||we(0,"Body must be a string. Received: ".concat(ye(t),".")),this.body=t,this.name=e,this.locationOffset=n,this.locationOffset.line>0||we(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||we(0,"column in locationOffset is 1-indexed and must be positive.")}var e,n,r;return e=t,(n=[{key:Kt,get:function(){return"Source"}}])&&_e(e.prototype,n),r&&_e(e,r),t}();var Oe=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Se(t){var e=t.split(/\r\n|[\n\r]/g),n=function(t){for(var e,n=!0,r=!0,o=0,i=null,s=0;s<t.length;++s)switch(t.charCodeAt(s)){case 13:10===t.charCodeAt(s+1)&&++s;case 10:n=!1,r=!0,o=0;break;case 9:case 32:++o;break;default:r&&!n&&(null===i||o<i)&&(i=o),r=!1}return null!==(e=i)&&void 0!==e?e:0}(t);if(0!==n)for(var r=1;r<e.length;r++)e[r]=e[r].slice(n);for(var o=0;o<e.length&&Ae(e[o]);)++o;for(var i=e.length;i>o&&Ae(e[i-1]);)--i;return e.slice(o,i).join("\n")}function Ae(t){for(var e=0;e<t.length;++e)if(" "!==t[e]&&"\t"!==t[e])return!1;return!0}var Ee=function(){function t(t){var e=new me(ge.SOF,0,0,0,0,null);this.source=t,this.lastToken=e,this.token=e,this.line=1,this.lineStart=0}var e=t.prototype;return e.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},e.lookahead=function(){var t=this.token;if(t.kind!==ge.EOF)do{var e;t=null!==(e=t.next)&&void 0!==e?e:t.next=Me(this,t)}while(t.kind===ge.COMMENT);return t},t}();function Te(t){return isNaN(t)?ge.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function Me(t,e){for(var n=t.source,r=n.body,o=r.length,i=e.end;i<o;){var s=r.charCodeAt(i),a=t.line,c=1+i-t.lineStart;switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++t.line,t.lineStart=i;continue;case 13:10===r.charCodeAt(i+1)?i+=2:++i,++t.line,t.lineStart=i;continue;case 33:return new me(ge.BANG,i,i+1,a,c,e);case 35:return Ce(n,i,a,c,e);case 36:return new me(ge.DOLLAR,i,i+1,a,c,e);case 38:return new me(ge.AMP,i,i+1,a,c,e);case 40:return new me(ge.PAREN_L,i,i+1,a,c,e);case 41:return new me(ge.PAREN_R,i,i+1,a,c,e);case 46:if(46===r.charCodeAt(i+1)&&46===r.charCodeAt(i+2))return new me(ge.SPREAD,i,i+3,a,c,e);break;case 58:return new me(ge.COLON,i,i+1,a,c,e);case 61:return new me(ge.EQUALS,i,i+1,a,c,e);case 64:return new me(ge.AT,i,i+1,a,c,e);case 91:return new me(ge.BRACKET_L,i,i+1,a,c,e);case 93:return new me(ge.BRACKET_R,i,i+1,a,c,e);case 123:return new me(ge.BRACE_L,i,i+1,a,c,e);case 124:return new me(ge.PIPE,i,i+1,a,c,e);case 125:return new me(ge.BRACE_R,i,i+1,a,c,e);case 34:return 34===r.charCodeAt(i+1)&&34===r.charCodeAt(i+2)?Le(n,i,a,c,e,t):je(n,i,a,c,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Ie(n,i,s,a,c,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return Re(n,i,a,c,e)}throw ue(n,i,Ne(s))}var l=t.line,u=1+i-t.lineStart;return new me(ge.EOF,o,o,l,u,e)}function Ne(t){return t<32&&9!==t&&10!==t&&13!==t?"Cannot contain the invalid character ".concat(Te(t),"."):39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(Te(t),".")}function Ce(t,e,n,r,o){var i,s=t.body,a=e;do{i=s.charCodeAt(++a)}while(!isNaN(i)&&(i>31||9===i));return new me(ge.COMMENT,e,a,n,r,o,s.slice(e+1,a))}function Ie(t,e,n,r,o,i){var s=t.body,a=n,c=e,l=!1;if(45===a&&(a=s.charCodeAt(++c)),48===a){if((a=s.charCodeAt(++c))>=48&&a<=57)throw ue(t,c,"Invalid number, unexpected digit after 0: ".concat(Te(a),"."))}else c=De(t,c,a),a=s.charCodeAt(c);if(46===a&&(l=!0,a=s.charCodeAt(++c),c=De(t,c,a),a=s.charCodeAt(c)),69!==a&&101!==a||(l=!0,43!==(a=s.charCodeAt(++c))&&45!==a||(a=s.charCodeAt(++c)),c=De(t,c,a),a=s.charCodeAt(c)),46===a||function(t){return 95===t||t>=65&&t<=90||t>=97&&t<=122}(a))throw ue(t,c,"Invalid number, expected digit but got: ".concat(Te(a),"."));return new me(l?ge.FLOAT:ge.INT,e,c,r,o,i,s.slice(e,c))}function De(t,e,n){var r=t.body,o=e,i=n;if(i>=48&&i<=57){do{i=r.charCodeAt(++o)}while(i>=48&&i<=57);return o}throw ue(t,o,"Invalid number, expected digit but got: ".concat(Te(i),"."))}function je(t,e,n,r,o){for(var i,s,a,c,l=t.body,u=e+1,d=u,p=0,h="";u<l.length&&!isNaN(p=l.charCodeAt(u))&&10!==p&&13!==p;){if(34===p)return h+=l.slice(d,u),new me(ge.STRING,e,u+1,n,r,o,h);if(p<32&&9!==p)throw ue(t,u,"Invalid character within String: ".concat(Te(p),"."));if(++u,92===p){switch(h+=l.slice(d,u-1),p=l.charCodeAt(u)){case 34:h+='"';break;case 47:h+="/";break;case 92:h+="\\";break;case 98:h+="\b";break;case 102:h+="\f";break;case 110:h+="\n";break;case 114:h+="\r";break;case 116:h+="\t";break;case 117:var f=(i=l.charCodeAt(u+1),s=l.charCodeAt(u+2),a=l.charCodeAt(u+3),c=l.charCodeAt(u+4),Pe(i)<<12|Pe(s)<<8|Pe(a)<<4|Pe(c));if(f<0){var m=l.slice(u+1,u+5);throw ue(t,u,"Invalid character escape sequence: \\u".concat(m,"."))}h+=String.fromCharCode(f),u+=4;break;default:throw ue(t,u,"Invalid character escape sequence: \\".concat(String.fromCharCode(p),"."))}d=++u}}throw ue(t,u,"Unterminated string.")}function Le(t,e,n,r,o,i){for(var s=t.body,a=e+3,c=a,l=0,u="";a<s.length&&!isNaN(l=s.charCodeAt(a));){if(34===l&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2))return u+=s.slice(c,a),new me(ge.BLOCK_STRING,e,a+3,n,r,o,Se(u));if(l<32&&9!==l&&10!==l&&13!==l)throw ue(t,a,"Invalid character within String: ".concat(Te(l),"."));10===l?(++a,++i.line,i.lineStart=a):13===l?(10===s.charCodeAt(a+1)?a+=2:++a,++i.line,i.lineStart=a):92===l&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2)&&34===s.charCodeAt(a+3)?(u+=s.slice(c,a)+'"""',c=a+=4):++a}throw ue(t,a,"Unterminated string.")}function Pe(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function Re(t,e,n,r,o){for(var i=t.body,s=i.length,a=e+1,c=0;a!==s&&!isNaN(c=i.charCodeAt(a))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new me(ge.NAME,e,a,n,r,o,i.slice(e,a))}var Be=function(){function t(t,e){var n=function(t){return xe(t,ke)}(t)?t:new ke(t);this._lexer=new Ee(n),this._options=e}var e=t.prototype;return e.parseName=function(){var t=this.expectToken(ge.NAME);return{kind:de.NAME,value:t.value,loc:this.loc(t)}},e.parseDocument=function(){var t=this._lexer.token;return{kind:de.DOCUMENT,definitions:this.many(ge.SOF,this.parseDefinition,ge.EOF),loc:this.loc(t)}},e.parseDefinition=function(){if(this.peek(ge.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(ge.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var t=this._lexer.token;if(this.peek(ge.BRACE_L))return{kind:de.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var e,n=this.parseOperationType();return this.peek(ge.NAME)&&(e=this.parseName()),{kind:de.OPERATION_DEFINITION,operation:n,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},e.parseOperationType=function(){var t=this.expectToken(ge.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(t)},e.parseVariableDefinitions=function(){return this.optionalMany(ge.PAREN_L,this.parseVariableDefinition,ge.PAREN_R)},e.parseVariableDefinition=function(){var t=this._lexer.token;return{kind:de.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(ge.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(ge.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(t)}},e.parseVariable=function(){var t=this._lexer.token;return this.expectToken(ge.DOLLAR),{kind:de.VARIABLE,name:this.parseName(),loc:this.loc(t)}},e.parseSelectionSet=function(){var t=this._lexer.token;return{kind:de.SELECTION_SET,selections:this.many(ge.BRACE_L,this.parseSelection,ge.BRACE_R),loc:this.loc(t)}},e.parseSelection=function(){return this.peek(ge.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var t,e,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(ge.COLON)?(t=r,e=this.parseName()):e=r,{kind:de.FIELD,alias:t,name:e,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(ge.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},e.parseArguments=function(t){var e=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(ge.PAREN_L,e,ge.PAREN_R)},e.parseArgument=function(){var t=this._lexer.token,e=this.parseName();return this.expectToken(ge.COLON),{kind:de.ARGUMENT,name:e,value:this.parseValueLiteral(!1),loc:this.loc(t)}},e.parseConstArgument=function(){var t=this._lexer.token;return{kind:de.ARGUMENT,name:this.parseName(),value:(this.expectToken(ge.COLON),this.parseValueLiteral(!0)),loc:this.loc(t)}},e.parseFragment=function(){var t=this._lexer.token;this.expectToken(ge.SPREAD);var e=this.expectOptionalKeyword("on");return!e&&this.peek(ge.NAME)?{kind:de.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(t)}:{kind:de.INLINE_FRAGMENT,typeCondition:e?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},e.parseFragmentDefinition=function(){var t,e=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(t=this._options)||void 0===t?void 0:t.experimentalFragmentVariables)?{kind:de.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}:{kind:de.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},e.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(t){var e=this._lexer.token;switch(e.kind){case ge.BRACKET_L:return this.parseList(t);case ge.BRACE_L:return this.parseObject(t);case ge.INT:return this._lexer.advance(),{kind:de.INT,value:e.value,loc:this.loc(e)};case ge.FLOAT:return this._lexer.advance(),{kind:de.FLOAT,value:e.value,loc:this.loc(e)};case ge.STRING:case ge.BLOCK_STRING:return this.parseStringLiteral();case ge.NAME:switch(this._lexer.advance(),e.value){case"true":return{kind:de.BOOLEAN,value:!0,loc:this.loc(e)};case"false":return{kind:de.BOOLEAN,value:!1,loc:this.loc(e)};case"null":return{kind:de.NULL,loc:this.loc(e)};default:return{kind:de.ENUM,value:e.value,loc:this.loc(e)}}case ge.DOLLAR:if(!t)return this.parseVariable()}throw this.unexpected()},e.parseStringLiteral=function(){var t=this._lexer.token;return this._lexer.advance(),{kind:de.STRING,value:t.value,block:t.kind===ge.BLOCK_STRING,loc:this.loc(t)}},e.parseList=function(t){var e=this,n=this._lexer.token;return{kind:de.LIST,values:this.any(ge.BRACKET_L,(function(){return e.parseValueLiteral(t)}),ge.BRACKET_R),loc:this.loc(n)}},e.parseObject=function(t){var e=this,n=this._lexer.token;return{kind:de.OBJECT,fields:this.any(ge.BRACE_L,(function(){return e.parseObjectField(t)}),ge.BRACE_R),loc:this.loc(n)}},e.parseObjectField=function(t){var e=this._lexer.token,n=this.parseName();return this.expectToken(ge.COLON),{kind:de.OBJECT_FIELD,name:n,value:this.parseValueLiteral(t),loc:this.loc(e)}},e.parseDirectives=function(t){for(var e=[];this.peek(ge.AT);)e.push(this.parseDirective(t));return e},e.parseDirective=function(t){var e=this._lexer.token;return this.expectToken(ge.AT),{kind:de.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t),loc:this.loc(e)}},e.parseTypeReference=function(){var t,e=this._lexer.token;return this.expectOptionalToken(ge.BRACKET_L)?(t=this.parseTypeReference(),this.expectToken(ge.BRACKET_R),t={kind:de.LIST_TYPE,type:t,loc:this.loc(e)}):t=this.parseNamedType(),this.expectOptionalToken(ge.BANG)?{kind:de.NON_NULL_TYPE,type:t,loc:this.loc(e)}:t},e.parseNamedType=function(){var t=this._lexer.token;return{kind:de.NAMED_TYPE,name:this.parseName(),loc:this.loc(t)}},e.parseTypeSystemDefinition=function(){var t=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(t.kind===ge.NAME)switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(t)},e.peekDescription=function(){return this.peek(ge.STRING)||this.peek(ge.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(ge.BRACE_L,this.parseOperationTypeDefinition,ge.BRACE_R);return{kind:de.SCHEMA_DEFINITION,description:e,directives:n,operationTypes:r,loc:this.loc(t)}},e.parseOperationTypeDefinition=function(){var t=this._lexer.token,e=this.parseOperationType();this.expectToken(ge.COLON);var n=this.parseNamedType();return{kind:de.OPERATION_TYPE_DEFINITION,operation:e,type:n,loc:this.loc(t)}},e.parseScalarTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:de.SCALAR_TYPE_DEFINITION,description:e,name:n,directives:r,loc:this.loc(t)}},e.parseObjectTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),i=this.parseFieldsDefinition();return{kind:de.OBJECT_TYPE_DEFINITION,description:e,name:n,interfaces:r,directives:o,fields:i,loc:this.loc(t)}},e.parseImplementsInterfaces=function(){var t;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(t=this._options)||void 0===t?void 0:t.allowLegacySDLImplementsInterfaces)){var e=[];this.expectOptionalToken(ge.AMP);do{e.push(this.parseNamedType())}while(this.expectOptionalToken(ge.AMP)||this.peek(ge.NAME));return e}return this.delimitedMany(ge.AMP,this.parseNamedType)},e.parseFieldsDefinition=function(){var t;return!0===(null===(t=this._options)||void 0===t?void 0:t.allowLegacySDLEmptyFields)&&this.peek(ge.BRACE_L)&&this._lexer.lookahead().kind===ge.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(ge.BRACE_L,this.parseFieldDefinition,ge.BRACE_R)},e.parseFieldDefinition=function(){var t=this._lexer.token,e=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(ge.COLON);var o=this.parseTypeReference(),i=this.parseDirectives(!0);return{kind:de.FIELD_DEFINITION,description:e,name:n,arguments:r,type:o,directives:i,loc:this.loc(t)}},e.parseArgumentDefs=function(){return this.optionalMany(ge.PAREN_L,this.parseInputValueDef,ge.PAREN_R)},e.parseInputValueDef=function(){var t=this._lexer.token,e=this.parseDescription(),n=this.parseName();this.expectToken(ge.COLON);var r,o=this.parseTypeReference();this.expectOptionalToken(ge.EQUALS)&&(r=this.parseValueLiteral(!0));var i=this.parseDirectives(!0);return{kind:de.INPUT_VALUE_DEFINITION,description:e,name:n,type:o,defaultValue:r,directives:i,loc:this.loc(t)}},e.parseInterfaceTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),i=this.parseFieldsDefinition();return{kind:de.INTERFACE_TYPE_DEFINITION,description:e,name:n,interfaces:r,directives:o,fields:i,loc:this.loc(t)}},e.parseUnionTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),o=this.parseUnionMemberTypes();return{kind:de.UNION_TYPE_DEFINITION,description:e,name:n,directives:r,types:o,loc:this.loc(t)}},e.parseUnionMemberTypes=function(){return this.expectOptionalToken(ge.EQUALS)?this.delimitedMany(ge.PIPE,this.parseNamedType):[]},e.parseEnumTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();return{kind:de.ENUM_TYPE_DEFINITION,description:e,name:n,directives:r,values:o,loc:this.loc(t)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(ge.BRACE_L,this.parseEnumValueDefinition,ge.BRACE_R)},e.parseEnumValueDefinition=function(){var t=this._lexer.token,e=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:de.ENUM_VALUE_DEFINITION,description:e,name:n,directives:r,loc:this.loc(t)}},e.parseInputObjectTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();return{kind:de.INPUT_OBJECT_TYPE_DEFINITION,description:e,name:n,directives:r,fields:o,loc:this.loc(t)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(ge.BRACE_L,this.parseInputValueDef,ge.BRACE_R)},e.parseTypeSystemExtension=function(){var t=this._lexer.lookahead();if(t.kind===ge.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)},e.parseSchemaExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var e=this.parseDirectives(!0),n=this.optionalMany(ge.BRACE_L,this.parseOperationTypeDefinition,ge.BRACE_R);if(0===e.length&&0===n.length)throw this.unexpected();return{kind:de.SCHEMA_EXTENSION,directives:e,operationTypes:n,loc:this.loc(t)}},e.parseScalarTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var e=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:de.SCALAR_TYPE_EXTENSION,name:e,directives:n,loc:this.loc(t)}},e.parseObjectTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var e=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===o.length)throw this.unexpected();return{kind:de.OBJECT_TYPE_EXTENSION,name:e,interfaces:n,directives:r,fields:o,loc:this.loc(t)}},e.parseInterfaceTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var e=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===o.length)throw this.unexpected();return{kind:de.INTERFACE_TYPE_EXTENSION,name:e,interfaces:n,directives:r,fields:o,loc:this.loc(t)}},e.parseUnionTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:de.UNION_TYPE_EXTENSION,name:e,directives:n,types:r,loc:this.loc(t)}},e.parseEnumTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:de.ENUM_TYPE_EXTENSION,name:e,directives:n,values:r,loc:this.loc(t)}},e.parseInputObjectTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:de.INPUT_OBJECT_TYPE_EXTENSION,name:e,directives:n,fields:r,loc:this.loc(t)}},e.parseDirectiveDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("directive"),this.expectToken(ge.AT);var n=this.parseName(),r=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var i=this.parseDirectiveLocations();return{kind:de.DIRECTIVE_DEFINITION,description:e,name:n,arguments:r,repeatable:o,locations:i,loc:this.loc(t)}},e.parseDirectiveLocations=function(){return this.delimitedMany(ge.PIPE,this.parseDirectiveLocation)},e.parseDirectiveLocation=function(){var t=this._lexer.token,e=this.parseName();if(void 0!==Oe[e.value])return e;throw this.unexpected(t)},e.loc=function(t){var e;if(!0!==(null===(e=this._options)||void 0===e?void 0:e.noLocation))return new fe(t,this._lexer.lastToken,this._lexer.source)},e.peek=function(t){return this._lexer.token.kind===t},e.expectToken=function(t){var e=this._lexer.token;if(e.kind===t)return this._lexer.advance(),e;throw ue(this._lexer.source,e.start,"Expected ".concat(Fe(t),", found ").concat(ze(e),"."))},e.expectOptionalToken=function(t){var e=this._lexer.token;if(e.kind===t)return this._lexer.advance(),e},e.expectKeyword=function(t){var e=this._lexer.token;if(e.kind!==ge.NAME||e.value!==t)throw ue(this._lexer.source,e.start,'Expected "'.concat(t,'", found ').concat(ze(e),"."));this._lexer.advance()},e.expectOptionalKeyword=function(t){var e=this._lexer.token;return e.kind===ge.NAME&&e.value===t&&(this._lexer.advance(),!0)},e.unexpected=function(t){var e=null!=t?t:this._lexer.token;return ue(this._lexer.source,e.start,"Unexpected ".concat(ze(e),"."))},e.any=function(t,e,n){this.expectToken(t);for(var r=[];!this.expectOptionalToken(n);)r.push(e.call(this));return r},e.optionalMany=function(t,e,n){if(this.expectOptionalToken(t)){var r=[];do{r.push(e.call(this))}while(!this.expectOptionalToken(n));return r}return[]},e.many=function(t,e,n){this.expectToken(t);var r=[];do{r.push(e.call(this))}while(!this.expectOptionalToken(n));return r},e.delimitedMany=function(t,e){this.expectOptionalToken(t);var n=[];do{n.push(e.call(this))}while(this.expectOptionalToken(t));return n},t}();function ze(t){var e=t.value;return Fe(t.kind)+(null!=e?' "'.concat(e,'"'):"")}function Fe(t){return function(t){return t===ge.BANG||t===ge.DOLLAR||t===ge.AMP||t===ge.PAREN_L||t===ge.PAREN_R||t===ge.SPREAD||t===ge.COLON||t===ge.EQUALS||t===ge.AT||t===ge.BRACKET_L||t===ge.BRACKET_R||t===ge.BRACE_L||t===ge.PIPE||t===ge.BRACE_R}(t)?'"'.concat(t,'"'):t}var $e=new Map,Ve=new Map,He=!0,Ue=!1;function qe(t){return t.replace(/[\s,]+/g," ").trim()}function We(t){var e=new Set,n=[];return t.definitions.forEach((function(t){if("FragmentDefinition"===t.kind){var r=t.name.value,o=qe((s=t.loc).source.body.substring(s.start,s.end)),i=Ve.get(r);i&&!i.has(o)?He&&console.warn("Warning: fragment with name "+r+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):i||Ve.set(r,i=new Set),i.add(o),e.has(o)||(e.add(o),n.push(t))}else n.push(t);var s})),Wt(Wt({},t),{definitions:n})}function Ge(t){var e=qe(t);if(!$e.has(e)){var n=function(t,e){return new Be(t,e).parseDocument()}(t,{experimentalFragmentVariables:Ue});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");$e.set(e,function(t){var e=new Set(t.definitions);e.forEach((function(t){t.loc&&delete t.loc,Object.keys(t).forEach((function(n){var r=t[n];r&&"object"==typeof r&&e.add(r)}))}));var n=t.loc;return n&&(delete n.startToken,delete n.endToken),t}(We(n)))}return $e.get(e)}function Ke(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];"string"==typeof t&&(t=[t]);var r=t[0];return e.forEach((function(e,n){e&&"Document"===e.kind?r+=e.loc.source.body:r+=e,r+=t[n+1]})),Ge(r)}var Je,Qe={gql:Ke,resetCaches:function(){$e.clear(),Ve.clear()},disableFragmentWarnings:function(){He=!1},enableExperimentalFragmentVariables:function(){Ue=!0},disableExperimentalFragmentVariables:function(){Ue=!1}};(Je=Ke||(Ke={})).gql=Qe.gql,Je.resetCaches=Qe.resetCaches,Je.disableFragmentWarnings=Qe.disableFragmentWarnings,Je.enableExperimentalFragmentVariables=Qe.enableExperimentalFragmentVariables,Je.disableExperimentalFragmentVariables=Qe.disableExperimentalFragmentVariables,Ke.default=Ke;var Ye,Xe,Ze,tn,en,nn,rn,on,sn,an,cn,ln,un,dn,pn,hn,fn,mn=Ke;!function(t){t.AuthorAuth0UserIdKey="author_auth0UserId_key",t.AuthorPkey="author_pkey"}(Ye||(Ye={})),function(t){t.Auth0Id="auth0_id",t.CreatedAt="created_at",t.Email="email",t.Id="id",t.LastSeen="last_seen",t.Name="name"}(Xe||(Xe={})),function(t){t.Auth0Id="auth0_id",t.CreatedAt="created_at",t.Email="email",t.Id="id",t.LastSeen="last_seen",t.Name="name"}(Ze||(Ze={})),function(t){t.DraftPkey="draft_pkey"}(tn||(tn={})),function(t){t.AuthorId="author_id",t.CreatedAt="created_at",t.EndedAt="ended_at",t.Id="id",t.TableOfContents="table_of_contents",t.UpdatedAt="updated_at"}(en||(en={})),function(t){t.AuthorId="author_id",t.CreatedAt="created_at",t.EndedAt="ended_at",t.Id="id",t.TableOfContents="table_of_contents",t.UpdatedAt="updated_at"}(nn||(nn={})),function(t){t.MarginPkey="margin_pkey"}(rn||(rn={})),function(t){t.CreatedAt="created_at",t.EndedAt="ended_at",t.Id="id",t.Img="img",t.Name="name",t.Options="options",t.PageId="page_id",t.UpdatedAt="updated_at"}(on||(on={})),function(t){t.CreatedAt="created_at",t.EndedAt="ended_at",t.Id="id",t.Img="img",t.Name="name",t.Options="options",t.PageId="page_id",t.UpdatedAt="updated_at"}(sn||(sn={})),function(t){t.NotePkey="note_pkey",t.UqNoteDraftIdEndedAt="uq_note_draft_id_ended_at"}(an||(an={})),function(t){t.AuthorId="author_id",t.CreatedAt="created_at",t.DraftId="draft_id",t.EndedAt="ended_at",t.Id="id",t.Name="name",t.Preview="preview",t.StaticLink="static_link",t.UpdatedAt="updated_at"}(cn||(cn={})),function(t){t.AuthorId="author_id",t.CreatedAt="created_at",t.DraftId="draft_id",t.EndedAt="ended_at",t.Id="id",t.Name="name",t.Preview="preview",t.StaticLink="static_link",t.UpdatedAt="updated_at"}(ln||(ln={})),function(t){t.LastSeen="last_seen",t.Name="name"}(un||(un={})),function(t){t.Asc="asc",t.AscNullsFirst="asc_nulls_first",t.AscNullsLast="asc_nulls_last",t.Desc="desc",t.DescNullsFirst="desc_nulls_first",t.DescNullsLast="desc_nulls_last"}(dn||(dn={})),function(t){t.PagePkey="page_pkey"}(pn||(pn={})),function(t){t.Content="content",t.CreatedAt="created_at",t.DraftId="draft_id",t.EndedAt="ended_at",t.Id="id",t.Order="order",t.UpdatedAt="updated_at"}(hn||(hn={})),function(t){t.Content="content",t.CreatedAt="created_at",t.DraftId="draft_id",t.EndedAt="ended_at",t.Id="id",t.Order="order",t.UpdatedAt="updated_at"}(fn||(fn={}));const gn=mn`
    query getDraftById($id: uuid!) {
  draft: draft_by_pk(id: $id) {
    id
    created_at
    updated_at
    table_of_contents
    notes(order_by: {created_at: asc}, where: {ended_at: {_is_null: true}}) {
      id
    }
    pages(order_by: {created_at: asc}, where: {ended_at: {_is_null: true}}) {
      id
      content
      order
      margins(order_by: {created_at: asc}, where: {ended_at: {_is_null: true}}) {
        id
        name
      }
    }
  }
}
    `,vn=mn`
    mutation updateDraftTOC($id: uuid!, $table_of_contents: jsonb!, $updated_at: timestamptz!) {
  update_draft_by_pk(
    pk_columns: {id: $id}
    _set: {table_of_contents: $table_of_contents, updated_at: $updated_at}
  ) {
    table_of_contents
    updated_at
    id
  }
}
    `,yn=mn`
    query getMarginById($id: uuid!) {
  margin: margin_by_pk(id: $id) {
    id
    pageId: page_id
    img
    imgBase64
    options
  }
}
    `,bn=mn`
    mutation createMargin($page_id: uuid!, $created_at: timestamptz!) {
  insert_margin_one(object: {page_id: $page_id, created_at: $created_at}) {
    id
  }
}
    `,wn=mn`
    mutation saveMargin($id: uuid!, $updated_at: timestamptz!, $options: jsonb!, $img: bytea!, $name: String) {
  update_margin_by_pk(
    pk_columns: {id: $id}
    _set: {updated_at: $updated_at, options: $options, img: $img, name: $name}
  ) {
    updated_at
    id
  }
}
    `,xn=mn`
    mutation updatePageById($id: uuid!, $content: jsonb!, $updated_at: timestamptz!) {
  update_page_by_pk(
    pk_columns: {id: $id}
    _set: {content: $content, updated_at: $updated_at}
  ) {
    id
  }
}
    `,_n=mn`
    mutation addPageToDraft($created_at: timestamptz!, $draft_id: uuid!, $order: Int!) {
  update_page(
    where: {draft_id: {_eq: $draft_id}, ended_at: {_is_null: true}, order: {_gte: $order}}
    _inc: {order: 1}
  ) {
    returning {
      id
      order
    }
  }
  insert_page_one(
    object: {created_at: $created_at, draft_id: $draft_id, order: $order}
  ) {
    id
    order
    content
    margins {
      id
    }
  }
}
    `,kn=mn`
    mutation deletePage($id: uuid!, $ended_at: timestamptz!, $draft_id: uuid!, $order: Int!) {
  update_page_by_pk(pk_columns: {id: $id}, _set: {ended_at: $ended_at}) {
    id
  }
  update_page(
    where: {draft_id: {_eq: $draft_id}, ended_at: {_is_null: true}, order: {_gte: $order}}
    _inc: {order: -1}
  ) {
    returning {
      id
      order
    }
  }
}
    `,On=(t,e)=>t();let Sn={credentials:"include",mode:"cors",cache:"no-cache",method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}},An=new b.GraphQLClient("https://inscriptum-hasura.herokuapp.com/v1/graphql",Sn);Nt.pipe(qt(t=>{var e;return null!=(null===(e=t.data)||void 0===e?void 0:e.idToken)&&!t.isLoading})).subscribe(t=>{var e;console.log("API AUTH_ACTION.AUTH_DONE"),Sn=Object.assign(Object.assign({},Sn),{headers:Object.assign(Object.assign({},Sn.headers),{Authorization:"Bearer "+(null===(e=t.data)||void 0===e?void 0:e.idToken)})}),An=new b.GraphQLClient("https://inscriptum-hasura.herokuapp.com/v1/graphql",Sn)});const En=()=>function(t,e=On){return{getDraftById:(n,r)=>e(e=>t.request(gn,n,Object.assign(Object.assign({},r),e)),"getDraftById"),updateDraftTOC:(n,r)=>e(e=>t.request(vn,n,Object.assign(Object.assign({},r),e)),"updateDraftTOC"),getMarginById:(n,r)=>e(e=>t.request(yn,n,Object.assign(Object.assign({},r),e)),"getMarginById"),createMargin:(n,r)=>e(e=>t.request(bn,n,Object.assign(Object.assign({},r),e)),"createMargin"),saveMargin:(n,r)=>e(e=>t.request(wn,n,Object.assign(Object.assign({},r),e)),"saveMargin"),updatePageById:(n,r)=>e(e=>t.request(xn,n,Object.assign(Object.assign({},r),e)),"updatePageById"),addPageToDraft:(n,r)=>e(e=>t.request(_n,n,Object.assign(Object.assign({},r),e)),"addPageToDraft"),deletePage:(n,r)=>e(e=>t.request(kn,n,Object.assign(Object.assign({},r),e)),"deletePage")}}(An),Tn={LOAD:Symbol("[DRAFT_ACTION] LOAD"),LOADING:Symbol("[DRAFT_ACTION] LOADING"),LOAD_DONE:Symbol("[DRAFT_ACTION] LOAD_DONE"),UPDATE_TOC_DONE:Symbol("[DRAFT_ACTION] UPDATE_TOC_DONE"),UPDATE_TOC_ERROR:Symbol("[DRAFT_ACTION] UPDATE_TOC_ERROR")};var Mn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))};function Nn(t,e=document.location.origin+"/drafts"){return Mn(this,void 0,void 0,(function*(){return new Promise(n=>{Nt.pipe(Lt(1)).subscribe(t=>{var n;null!=(null===(n=t.data)||void 0===n?void 0:n.idToken)||t.isLoading||l.dispatch({type:a.AUTH,payload:{redirectUri:e}})}),Nt.pipe(qt(t=>null!=t.data&&!t.isLoading)).subscribe(()=>{console.log("authorizedWork AUTH_ACTION.AUTH_DONE"),n(t())})})}))}var Cn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))};function In(t,e){return Cn(this,void 0,void 0,(function*(){return Nn(()=>Cn(this,void 0,void 0,(function*(){try{const{update_draft_by_pk:n}=yield En().updateDraftTOC({id:e,table_of_contents:t,updated_at:(new Date).toISOString()});null!=n&&l.dispatch({type:Tn.UPDATE_TOC_DONE,payload:{id:e,toc:n.table_of_contents}})}catch(t){l.dispatch({type:Tn.UPDATE_TOC_ERROR,payload:{id:e,error:t}})}})))}))}
/*!
 * Signature Pad v3.0.0-beta.4 | https://github.com/szimek/signature_pad
 * (c) 2020 Szymon Nowak | Released under the MIT license
 */class Dn{constructor(t,e,n){this.x=t,this.y=e,this.time=n||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}class jn{constructor(t,e,n,r,o,i){this.startPoint=t,this.control2=e,this.control1=n,this.endPoint=r,this.startWidth=o,this.endWidth=i}static fromPoints(t,e){const n=this.calculateControlPoints(t[0],t[1],t[2]).c2,r=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new jn(t[1],n,r,t[2],e.start,e.end)}static calculateControlPoints(t,e,n){const r=t.x-e.x,o=t.y-e.y,i=e.x-n.x,s=e.y-n.y,a=(t.x+e.x)/2,c=(t.y+e.y)/2,l=(e.x+n.x)/2,u=(e.y+n.y)/2,d=Math.sqrt(r*r+o*o),p=Math.sqrt(i*i+s*s),h=p/(d+p),f=l+(a-l)*h,m=u+(c-u)*h,g=e.x-f,v=e.y-m;return{c1:new Dn(a+g,c+v),c2:new Dn(l+g,u+v)}}length(){let t,e,n=0;for(let r=0;r<=10;r+=1){const o=r/10,i=this.point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),s=this.point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){const r=i-t,o=s-e;n+=Math.sqrt(r*r+o*o)}t=i,e=s}return n}point(t,e,n,r,o){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*r*(1-t)*t*t+o*t*t*t}}class Ln{constructor(t,e={}){this.canvas=t,this.options=e,this._handleMouseDown=t=>{1===t.which&&(this._mouseButtonDown=!0,this._strokeBegin(t))},this._handleMouseMove=t=>{this._mouseButtonDown&&this._strokeMoveUpdate(t)},this._handleMouseUp=t=>{1===t.which&&this._mouseButtonDown&&(this._mouseButtonDown=!1,this._strokeEnd(t))},this._handleTouchStart=t=>{if(t.preventDefault(),1===t.targetTouches.length){const e=t.changedTouches[0];this._strokeBegin(e)}},this._handleTouchMove=t=>{t.preventDefault();const e=t.targetTouches[0];this._strokeMoveUpdate(e)},this._handleTouchEnd=t=>{if(t.target===this.canvas){t.preventDefault();const e=t.changedTouches[0];this._strokeEnd(e)}},this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle="throttle"in e?e.throttle:16,this.minDistance="minDistance"in e?e.minDistance:5,this.dotSize=e.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.onBegin=e.onBegin,this.onEnd=e.onEnd,this._strokeMoveUpdate=this.throttle?function(t,e=250){let n,r,o,i=0,s=null;const a=()=>{i=Date.now(),s=null,n=t.apply(r,o),s||(r=null,o=[])};return function(...c){const l=Date.now(),u=e-(l-i);return r=this,o=c,u<=0||u>e?(s&&(clearTimeout(s),s=null),i=l,n=t.apply(r,o),s||(r=null,o=[])):s||(s=window.setTimeout(a,u)),n}}(Ln.prototype._strokeUpdate,this.throttle):Ln.prototype._strokeUpdate,this._ctx=t.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:t,canvas:e}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0}fromDataURL(t,e={},n){const r=new Image,o=e.ratio||window.devicePixelRatio||1,i=e.width||this.canvas.width/o,s=e.height||this.canvas.height/o;this._reset(),r.onload=()=>{this._ctx.drawImage(r,0,0,i,s),n&&n()},r.onerror=t=>{n&&n(t)},r.src=t,this._isEmpty=!1}toDataURL(t="image/png",e){switch(t){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(t,e)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t){this.clear(),this._fromData(t,({color:t,curve:e})=>this._drawCurve({color:t,curve:e}),({color:t,point:e})=>this._drawDot({color:t,point:e})),this._data=t}toData(){return this._data}_strokeBegin(t){const e={color:this.penColor,points:[]};"function"==typeof this.onBegin&&this.onBegin(t),this._data.push(e),this._reset(),this._strokeUpdate(t)}_strokeUpdate(t){if(0===this._data.length)return void this._strokeBegin(t);const e=t.clientX,n=t.clientY,r=this._createPoint(e,n),o=this._data[this._data.length-1],i=o.points,s=i.length>0&&i[i.length-1],a=!!s&&r.distanceTo(s)<=this.minDistance,c=o.color;if(!s||!s||!a){const t=this._addPoint(r);s?t&&this._drawCurve({color:c,curve:t}):this._drawDot({color:c,point:r}),i.push({time:r.time,x:r.x,y:r.y})}}_strokeEnd(t){this._strokeUpdate(t),"function"==typeof this.onEnd&&this.onEnd(t)}_handlePointerEvents(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)}_handleMouseEvents(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}_createPoint(t,e){const n=this.canvas.getBoundingClientRect();return new Dn(t-n.left,e-n.top,(new Date).getTime())}_addPoint(t){const{_lastPoints:e}=this;if(e.push(t),e.length>2){3===e.length&&e.unshift(e[0]);const t=this._calculateCurveWidths(e[1],e[2]),n=jn.fromPoints(e,t);return e.shift(),n}return null}_calculateCurveWidths(t,e){const n=this.velocityFilterWeight*e.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(n),o={end:r,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=r,o}_strokeWidth(t){return Math.max(this.maxWidth/(t+1),this.minWidth)}_drawCurveSegment(t,e,n){const r=this._ctx;r.moveTo(t,e),r.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve({color:t,curve:e}){const n=this._ctx,r=e.endWidth-e.startWidth,o=2*Math.floor(e.length());n.beginPath(),n.fillStyle=t;for(let t=0;t<o;t+=1){const n=t/o,i=n*n,s=i*n,a=1-n,c=a*a,l=c*a;let u=l*e.startPoint.x;u+=3*c*n*e.control1.x,u+=3*a*i*e.control2.x,u+=s*e.endPoint.x;let d=l*e.startPoint.y;d+=3*c*n*e.control1.y,d+=3*a*i*e.control2.y,d+=s*e.endPoint.y;const p=Math.min(e.startWidth+s*r,this.maxWidth);this._drawCurveSegment(u,d,p)}n.closePath(),n.fill()}_drawDot({color:t,point:e}){const n=this._ctx,r="function"==typeof this.dotSize?this.dotSize():this.dotSize;n.beginPath(),this._drawCurveSegment(e.x,e.y,r),n.closePath(),n.fillStyle=t,n.fill()}_fromData(t,e,n){for(const r of t){const{color:t,points:o}=r;if(o.length>1)for(let n=0;n<o.length;n+=1){const r=o[n],i=new Dn(r.x,r.y,r.time);this.penColor=t,0===n&&this._reset();const s=this._addPoint(i);s&&e({color:t,curve:s})}else this._reset(),n({color:t,point:o[0]})}}_toSVG(){const t=this._data,e=Math.max(window.devicePixelRatio||1,1),n=this.canvas.width/e,r=this.canvas.height/e,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width",this.canvas.width.toString()),o.setAttribute("height",this.canvas.height.toString()),this._fromData(t,({color:t,curve:e})=>{const n=document.createElement("path");if(!(isNaN(e.control1.x)||isNaN(e.control1.y)||isNaN(e.control2.x)||isNaN(e.control2.y))){const r=`M ${e.startPoint.x.toFixed(3)},${e.startPoint.y.toFixed(3)} C ${e.control1.x.toFixed(3)},${e.control1.y.toFixed(3)} ${e.control2.x.toFixed(3)},${e.control2.y.toFixed(3)} ${e.endPoint.x.toFixed(3)},${e.endPoint.y.toFixed(3)}`;n.setAttribute("d",r),n.setAttribute("stroke-width",(2.25*e.endWidth).toFixed(3)),n.setAttribute("stroke",t),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),o.appendChild(n)}},({color:t,point:e})=>{const n=document.createElement("circle"),r="function"==typeof this.dotSize?this.dotSize():this.dotSize;n.setAttribute("r",r.toString()),n.setAttribute("cx",e.x.toString()),n.setAttribute("cy",e.y.toString()),n.setAttribute("fill",t),o.appendChild(n)});const i=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 ${n} ${r}" width="${n}" height="${r}">`;let s=o.innerHTML;if(void 0===s){const t=document.createElement("dummy"),e=o.childNodes;t.innerHTML="";for(let n=0;n<e.length;n+=1)t.appendChild(e[n].cloneNode(!0));s=t.innerHTML}return"data:image/svg+xml;base64,"+btoa(i+s+"</svg>")}}var Pn=Ln,Rn=n(176);const Bn={LOAD_DONE:Symbol("[MARGIN_ACTION] LOAD_DONE"),LOAD_FAIL:Symbol("[MARGIN_ACTION] LOAD_FAIL"),SAVE_DONE:Symbol("[MARGIN_ACTION] SAVE_DONE"),SAVE_FAIL:Symbol("[MARGIN_ACTION] SAVE_FAIL")};var zn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))};const Fn=Object(r.d)((t,e)=>(null!=e.current&&(e.current.setValue(t),e.current.commit()),n=>{e.current=n,e.current.setValue(t)})),$n=Object(o.b)({render:Fn})(()=>r.i`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-eraser" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M19 19h-11l-4 -4a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9 9"></path>
      <line x1="18" y1="12.3" x2="11.7" y2="6"></line>
    </svg>
  `),Vn=Object(o.b)({render:Fn})(()=>r.i`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-download" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
      <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
      <line x1="12" y1="11" x2="12" y2="17"></line>
      <polyline points="9 14 12 17 15 14"></polyline>
    </svg>
  `),Hn=Object(o.b)({render:Fn})(()=>r.i`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-device-floppy" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"></path>
      <circle cx="12" cy="14" r="2"></circle>
      <polyline points="14 4 14 8 8 8 8 4"></polyline>
    </svg>
  `),Un={data:void 0,isLoading:!1};function qn(t,e){switch(e.type){case Bn.LOAD_DONE:return{data:e.payload,isLoading:!1,error:null};case Bn.LOAD_FAIL:return Object.assign(Object.assign({},t),{isLoading:!1,error:e.payload.error});case Bn.SAVE_FAIL:return Object.assign(Object.assign({},t),{error:e.payload.error});default:return t}}function Wn(){const[t]=Object(o.g)(()=>{let t;return{get current(){var e;return null===(e=null==t?void 0:t.committer)||void 0===e?void 0:e.element},ref:Object(r.d)(()=>e=>{t=e})}});return t}const Gn=Object(o.b)({render:Fn})(()=>r.i`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
      <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
    </svg>
  `),Kn=Object(o.b)({render:Fn})((t={strokeWidth:"1"})=>r.i`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-ripple" width="24" height="24" viewBox="0 0 24 24" stroke-width=${t.strokeWidth} stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3 12c3 -2 6 -2 9 0s6 2 9 0"></path>
    </svg>
  `),Jn=Vn(),Qn=Hn(),Yn=$n(),Xn=Gn(),Zn=Kn(),tr=Object(o.a)({props:{marginId:String,pageId:String},render:r.g,shadow:{mode:"open"}})((function(t){const[e,i]=Object(o.e)(qn,Un),s=Wn(),[a,c]=Object(o.g)(),[u,d]=Object(o.g)();Object(o.d)(()=>{const e=(n=t.marginId,l.$.pipe(Mt(Bn),g(t=>t.payload.id===n))).subscribe(t=>i(t));var n;return null!=t.marginId&&function(t){zn(this,void 0,void 0,(function*(){return yield Nn(()=>zn(this,void 0,void 0,(function*(){const{margin:e}=yield En().getMarginById({id:t});if(null!=e)return l.dispatch({type:Bn.LOAD_DONE,payload:e}),e;throw l.dispatch({type:Bn.LOAD_FAIL,payload:{id:t,error:{message:`The Margin ${t} not found!`}}}),new Error(`The Margin ${t} not found!`)})))}))}(t.marginId),()=>{e.unsubscribe()}},[t.marginId]),Object(o.d)(()=>{f()},[u]);const p=Object(o.c)(()=>{const t=this,e=s.current;if(null==t||null==e)return void console.warn("Can not find a canvas element!");const n=e.getContext("2d");if(null==u){const n=Math.max(window.devicePixelRatio||1,1);let o=t.getBoundingClientRect().height;o=o>window.innerHeight?o:window.innerHeight;const i=t.getBoundingClientRect().width;e.height=o,e.width=i,e.style.height=o+"px",e.style.width=i+"px",c({height:o,width:i,ratio:n});const s=new Pn(e,{backgroundColor:"rgb(255, 255, 255)",minDistance:1});function r(){var t;if(null!=e){var n=Math.max(window.devicePixelRatio||1,1);e.width=e.offsetWidth*n,e.height=e.offsetHeight*n,null===(t=e.getContext("2d"))||void 0===t||t.scale(n,n)}}window.onresize=r,r(),d(s)}else null!=n&&(console.log(n.globalCompositeOperation),n.globalCompositeOperation="source-over")},[u,s]),h=Object(o.c)(()=>{var t;if(null==u||u.isEmpty())return alert("Please provide a signature first.");null!=(null===(t=e.data)||void 0===t?void 0:t.id)&&null!=a&&function(t,e,n){zn(this,void 0,void 0,(function*(){const[r,o]=e.split(",");return yield Nn(()=>zn(this,void 0,void 0,(function*(){const{update_margin_by_pk:e}=yield En().saveMargin({id:t,options:Object.assign(Object.assign({},n),{type:r}),img:o,updated_at:(new Date).toISOString()});if(null!=e)return l.dispatch({type:Bn.SAVE_DONE,payload:e}),e;l.dispatch({type:Bn.SAVE_FAIL,payload:{id:t,error:{message:`The Margin ${t} has not been saved!`}}})})))}))}(e.data.id,u.toDataURL(),a)},[u]),f=Object(o.c)(()=>{var t,n;if(null!=u&&null!=a&&null!=(null===(t=e.data)||void 0===t?void 0:t.imgBase64)&&null!=(null===(n=e.data)||void 0===n?void 0:n.options)){const t=e.data.options,n=`${t.type},${e.data.imgBase64}`;a.width<t.width?u.fromDataURL(n,{height:t.height*a.width/t.width,width:a.width,ratio:a.ratio}):u.fromDataURL(n,{height:t.height,width:t.width,ratio:a.ratio})}},[u]),m=Object(o.c)(()=>{const t=s.current;if(null==this||null==t)return void console.warn("Can not find a canvas element!");const e=t.getContext("2d");null!=e&&(e.globalCompositeOperation="destination-out")},[u]),v=Object(o.c)(()=>{null!=u&&u.clear()},[u]),y=Object(o.c)((t,e)=>()=>{null!=u&&(u.minWidth=t,u.maxWidth=e,console.log(t,e))},[u]),b=Object(o.c)(t=>{if(null!=(null==t?void 0:t.currentTarget)&&null!=u){const e=t.currentTarget;console.log(e.value),u.penColor=e.value}},[u]);return r.e`
      <style>${n(429)}</style>

      <canvas .ref=${s.ref()} id="signature-pad" class="signature-pad"></canvas>

      <div class="fab-container fab-container_horizontal" style=${Rn.a`
          display: inherit;
          bottom: 0;
          margin: 1em;
          right: 0;
          position: absolute;
        `}>
        <button class="fab-button">
          <input type="color" id=${t.pageId+"_colorPicker"} name="colorPicker" style=${Rn.a`
              cursor: pointer;
            `} @change=${b}>
        </button>
        <div class="fab-container fab-container_vertical">
          <button class="fab-button" @click=${y(6,8)}>
            ${Zn({strokeWidth:"6"})}
          </button>
          <button class="fab-button" @click=${y(2.5,4)}>
            ${Zn({strokeWidth:"4"})}
          </button>
          <button class="fab-button" @click=${y(.3,1)}>
            ${Zn({strokeWidth:"1"})}
          </button>
          <button class="fab-button fab-button_lg" @click=${y(.5,2.5)}>
            ${Zn({strokeWidth:"2"})}
          </button>
        </div>
        <div class="fab-container fab-container_vertical">
          <button class="fab-button" @click=${v}>
            ${Xn({})}
          </button>
          <button class="fab-button fab-button_lg" @click=${m}>
            ${Yn({})}
          </button>
        </div>
        <div class="fab-container fab-container_vertical">
          <button class="fab-button" @click=${f}>
            ${Jn({})}
          </button>
          <button class="fab-button fab-button_lg" @click=${h}>
            ${Qn({})}
          </button>
        </div>
        <button class="fab-button fab-button_lg" @click=${p}>
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-pencil" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"></path>
            <line x1="13.5" y1="6.5" x2="17.5" y2="10.5"></line>
          </svg>
        </button>
      </div>
    `})),er=String.raw,nr=Object(o.a)({props:{label:String,value:String,isFolded:Boolean,change:{}},shadow:{mode:"open"},render:r.g})((function(t){const[e,n]=Object(o.g)(t.isFolded),i=Object(o.c)(()=>{n(t=>!t),t.change(t.value,!e)},[e,n,t]);return Object(o.d)(()=>{const t=er`
      :host {
        display: inline-flex;
        align-items: center;
        flex-direction: row;
        position: absolute;
        right: 100%;
        font-family: var(--font-family);
      }
      button,
      label {
        cursor: pointer;
        border: none;
        background-color: transparent;
      }
      button:focus {
        outline: 0;
      }
      .icon-tabler,
      label {
        stroke: var(--border-color);
        color: var(--border-color);
        transition: 0.2s;
      }

      :host(:hover) .icon-tabler {
        stroke: var(--dark-grey);
      }
      :host(:hover) label {
        color: var(--dark-grey);
      }
    `,e=null==this?void 0:this.shadowRoot;if(null!=e&&null!=e.adoptedStyleSheets){const n=new CSSStyleSheet;n.replaceSync(t),e.adoptedStyleSheets=[n]}},[]),r.e`
      <label for=${t.value}>${t.label}</label>
      <button id=${t.value} @click=${i}>
        ${r.i`
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="icon icon-tabler icon-tabler-chevron-left"
            width="44"
            height="44"
            viewBox="0 0 24 24"
            stroke-width="0.5"
            stroke="#9e9e9e"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <polyline points=${e?"9 6 15 12 9 18":"6 9 12 15 18 9"} />
          </svg>        
        `}
      </button>
    `})),rr=Object(o.b)({render:Fn})(()=>r.i`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
      <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
      <line x1="12" y1="11" x2="12" y2="17"></line>
      <line x1="9" y1="14" x2="15" y2="14"></line>
    </svg>
  `),or=Object(o.b)({render:Fn})(()=>r.i`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
      <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
      <path d="M10 12l4 4m0 -4l-4 4"></path>
    </svg>
  `),ir={CREATE_MARGIN:Symbol("[PAGE_ACTION] CREATE_MARGIN"),CREATE_MARGIN_DONE:Symbol("[PAGE_ACTION] CREATE_MARGIN_DONE"),CREATE_MARGIN_FAIL:Symbol("[PAGE_ACTION] CREATE_MARGIN_FAIL")};function sr(t){return new x.a((function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?$(n):ht()).subscribe(e)}))}var ar=n(29),cr=n(12);function lr(t,e,n){return function(r){return r.lift(new ur(t,e,n))}}var ur=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new dr(t,this.nextOrObserver,this.error,this.complete))},t}(),dr=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i._tapNext=ar.a,i._tapError=ar.a,i._tapComplete=ar.a,i._tapError=r||ar.a,i._tapComplete=o||ar.a,Object(cr.a)(n)?(i._context=i,i._tapNext=n):n&&(i._context=n,i._tapNext=n.next||ar.a,i._tapError=n.error||ar.a,i._tapComplete=n.complete||ar.a),i}return f.a(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(m.a),pr=n(408);const hr=Object.freeze({isDevMode:!1});var fr=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))};function mr(t){return t.pipe(lr(t=>{l.dispatch({type:u.PAGE_SAVE,payload:{pageId:t.pageId,draftId:t.draftId}})}),Object(pr.a)(hr.isDevMode?3e3:1e4),lr(t=>{l.dispatch({type:u.PAGE_SAVING,payload:{pageId:t.pageId,draftId:t.draftId}})}),V(t=>$(function(t,e,n){return fr(this,void 0,void 0,(function*(){return yield Nn(()=>fr(this,void 0,void 0,(function*(){try{return yield En().updatePageById({id:t,content:n,updated_at:(new Date).toISOString()}),{pageId:t,draftId:e,content:n}}catch(e){throw{pageId:t,error:e}}})))}))}(t.pageId,t.draftId,t.content)).pipe(lr(t=>{l.dispatch({type:u.PAGE_SAVE_DONE,payload:t})}),q(e=>(l.dispatch({type:u.PAGE_SAVE_FAIL,payload:{draftId:t.draftId,pageId:t.pageId,error:e}}),pt)))))}function gr(t){return t.pipe(V(t=>sr(()=>fr(this,void 0,void 0,(function*(){return Nn(()=>fr(this,void 0,void 0,(function*(){var e;const{insert_page_one:n,update_page:r}=yield En().addPageToDraft({draft_id:t.draftId,order:t.order,created_at:(new Date).toISOString()});if(null==n)throw new Error("newPage == null");const o=null!==(e=null==r?void 0:r.returning)&&void 0!==e?e:[];return{draftId:t.draftId,newPage:n,updatedPages:o}})))})))),lr(t=>{const{draftId:e,updatedPages:n,newPage:r}=t;l.dispatch({type:u.DRAFT_ADD_PAGE_DONE,payload:{draftId:e,newPage:Object.assign(Object.assign({},r),{content:null==r?void 0:r.content,draftId:e}),updatedPages:n}})}))}function vr(t){return t.pipe(V(t=>sr(()=>fr(this,void 0,void 0,(function*(){return Nn(()=>fr(this,void 0,void 0,(function*(){var e;const{update_page_by_pk:n,update_page:r}=yield En().deletePage({id:t.pageId,ended_at:(new Date).toISOString(),draft_id:t.draftId,order:t.order}),o=null!==(e=null==r?void 0:r.returning)&&void 0!==e?e:[],i={id:null==n?void 0:n.id,order:t.order};return{draftId:t.draftId,deletedPage:i,updatedPages:o}})))})))),lr(t=>{l.dispatch({type:u.DRAFT_DELETE_PAGE_DONE,payload:{draftId:t.draftId,deletedPage:t.deletedPage,updatedPages:t.updatedPages}})}))}function yr(t,e){switch(e.type){case ir.CREATE_MARGIN_DONE:return Object.assign(Object.assign({},t),{data:null!=t.data?Object.assign(Object.assign({},t.data),{margins:[{id:e.payload.marginId},...t.data.margins]}):void 0});default:return t}}const br=Object(o.b)({render:Fn})(()=>r.i`
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-writing" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"></path>
      <path d="M16 7h4"></path>
      <path d="M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"></path>
    </svg>
  `);function wr(t){const[e,n]=Object(o.g)();return Object(o.d)(()=>{const e=new i.a;return n([t(e),t=>e.next(t)]),()=>e.unsubscribe()},[]),e}var xr=n(64);var _r=xr.d.create({name:"doc",topNode:!0,content:"block+"}),kr=n(131);const Or=/^\s*>\s$/gm;var Sr=xr.d.create({name:"blockquote",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:t}){return["blockquote",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setBlockquote:()=>({commands:t})=>t.wrapIn("blockquote"),toggleBlockquote:()=>({commands:t})=>t.toggleWrap("blockquote"),unsetBlockquote:()=>({commands:t})=>t.lift("blockquote")}),addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Object(kr.e)(Or,this.type)]}});const Ar=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/gm,Er=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/gm,Tr=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/gm,Mr=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/gm;var Nr=xr.c.create({name:"bold",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],renderHTML({HTMLAttributes:t}){return["strong",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setBold:()=>({commands:t})=>t.setMark("bold"),toggleBold:()=>({commands:t})=>t.toggleMark("bold"),unsetBold:()=>({commands:t})=>t.unsetMark("bold")}),addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Object(xr.h)(Ar,this.type),Object(xr.h)(Tr,this.type)]},addPasteRules(){return[Object(xr.i)(Er,this.type),Object(xr.i)(Mr,this.type)]}});const Cr=/^\s*([-+*])\s$/;var Ir=xr.d.create({name:"bulletList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:t}){return["ul",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({toggleBulletList:()=>({commands:t})=>t.toggleList("bulletList","listItem")}),addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Object(kr.e)(Cr,this.type)]}});const Dr=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/gm;var jr=xr.c.create({name:"code",defaultOptions:{HTMLAttributes:{}},excludes:"_",parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:t}){return["code",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setCode:()=>({commands:t})=>t.setMark("code"),toggleCode:()=>({commands:t})=>t.toggleMark("code"),unsetCode:()=>({commands:t})=>t.unsetMark("code")}),addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Object(xr.h)(Dr,this.type)]},addPasteRules(){return[Object(xr.i)(Dr,this.type)]}});const Lr=/^```(?<language>[a-z]*)? $/,Pr=/^~~~(?<language>[a-z]*)? $/;var Rr=xr.d.create({name:"codeBlock",defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const n=null===(e=t.firstElementChild)||void 0===e?void 0:e.getAttribute("class");if(!n)return null;const r=new RegExp(`^(${this.options.languageClassPrefix})`);return{language:n.replace(r,"")}},renderHTML:t=>t.language?{class:this.options.languageClassPrefix+t.language}:null}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({HTMLAttributes:t}){return["pre",this.options.HTMLAttributes,["code",t,0]]},addCommands:()=>({setCodeBlock:t=>({commands:e})=>e.setNode("codeBlock",t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode("codeBlock","paragraph",t)}),addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=1===e.pos;return!(!t||e.parent.type.name!==this.name)&&(!(!n&&e.parent.textContent.length)&&this.editor.commands.clearNodes())}}},addInputRules(){return[Object(kr.c)(Lr,this.type,({groups:t})=>t),Object(kr.c)(Pr,this.type,({groups:t})=>t)]}}),Br=n(74),zr=n(84);var Fr=function(t,e){var n=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var r=function(t){return n[e](t)};return t.dom.addEventListener(e,r),{name:e,handler:r}}))};Fr.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var n=e.name,r=e.handler;return t.editorView.dom.removeEventListener(n,r)}))},Fr.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())},Fr.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},Fr.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var n=e.nodeBefore,r=e.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a,c,l=this.editorView.dom.offsetParent;if(this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!l||l==document.body&&"static"==getComputedStyle(l).position)a=-pageXOffset,c=-pageYOffset;else{var u=l.getBoundingClientRect();a=u.left-l.scrollLeft,c=u.top-l.scrollTop}this.element.style.left=t.left-a+"px",this.element.style.top=t.top-c+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},Fr.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},Fr.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var n=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=Object(zr.g)(this.editorView.state.doc,n,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(n),this.scheduleRemoval(5e3)}}},Fr.prototype.dragend=function(){this.scheduleRemoval(20)},Fr.prototype.drop=function(){this.scheduleRemoval(20)},Fr.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};var $r=xr.b.create({name:"dropCursor",defaultOptions:{color:"black",width:1,class:null},addProseMirrorPlugins(){return[(t=this.options,void 0===t&&(t={}),new Br.d({view:function(e){return new Fr(e,t)}}))];var t}}),Vr=n(182),Hr=n(171),Ur=n(79),qr=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return e.valid(o)?new e(o):t.near(o)},e.prototype.content=function(){return Ur.j.empty},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(n.pos))},e.prototype.getBookmark=function(){return new Wr(this.anchor)},e.valid=function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var n=t.index(e);if(0!=n)for(var r=t.node(e).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock},e.findFrom=function(t,n,r){t:for(;;){if(!r&&e.valid(t))return t;for(var o=t.pos,i=null,s=t.depth;;s--){var a=t.node(s);if(n>0?t.indexAfter(s)<a.childCount:t.index(s)>0){i=a.child(n>0?t.indexAfter(s):t.index(s)-1);break}if(0==s)return null;o+=n;var c=t.doc.resolve(o);if(e.valid(c))return c}for(;;){var l=n>0?i.firstChild:i.lastChild;if(!l){if(i.isAtom&&!i.isText&&!Br.c.isSelectable(i)){t=t.doc.resolve(o+i.nodeSize*n),r=!1;continue t}break}i=l,o+=n;var u=t.doc.resolve(o);if(e.valid(u))return u}return null}},e}(Br.f);qr.prototype.visible=!1,Br.f.jsonID("gapcursor",qr);var Wr=function(t){this.pos=t};Wr.prototype.map=function(t){return new Wr(t.map(this.pos))},Wr.prototype.resolve=function(t){var e=t.resolve(this.pos);return qr.valid(e)?new qr(e):Br.f.near(e)};var Gr=Object(Vr.a)({ArrowLeft:Kr("horiz",-1),ArrowRight:Kr("horiz",1),ArrowUp:Kr("vert",-1),ArrowDown:Kr("vert",1)});function Kr(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,o){var i=t.selection,s=e>0?i.$to:i.$from,a=i.empty;if(i instanceof Br.g){if(!o.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}var c=qr.findFrom(s,e,a);return!!c&&(r&&r(t.tr.setSelection(new qr(c))),!0)}}function Jr(t,e,n){if(!t.editable)return!1;var r=t.state.doc.resolve(e);if(!qr.valid(r))return!1;var o=t.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(o>-1&&Br.c.isSelectable(t.state.doc.nodeAt(o)))&&(t.dispatch(t.state.tr.setSelection(new qr(r))),!0)}function Qr(t){if(!(t.selection instanceof qr))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",Hr.b.create(t.doc,[Hr.a.widget(t.selection.head,e,{key:"gapcursor"})])}var Yr=xr.b.create({name:"gapCursor",addProseMirrorPlugins:()=>[new Br.d({props:{decorations:Qr,createSelectionBetween:function(t,e,n){if(e.pos==n.pos&&qr.valid(n))return new qr(n)},handleClick:Jr,handleKeyDown:Gr}})],extendNodeSchema(t){var e;const n={name:t.name,options:t.options};return{allowGapCursor:null!==(e=Object(xr.e)(Object(xr.f)(t,"allowGapCursor",n)))&&void 0!==e?e:null}}});var Xr=xr.d.create({name:"hardBreak",defaultOptions:{HTMLAttributes:{}},inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:t}){return["br",Object(xr.j)(this.options.HTMLAttributes,t)]},addCommands(){return{setHardBreak:()=>({commands:t})=>t.first([()=>t.exitCode(),()=>t.insertContent({type:this.name})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var Zr=xr.d.create({name:"heading",defaultOptions:{levels:[1,2,3,4,5,6],HTMLAttributes:{}},content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(t=>({tag:"h"+t,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return["h"+(this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]),Object(xr.j)(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode("heading",t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode("heading","paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,["Mod-Alt-"+e]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Object(kr.c)(new RegExp(`^(#{1,${t}})\\s$`),this.type,{level:t}))}}),to=function(){};to.prototype.append=function(t){return t.length?(t=to.from(t),!this.length&&t||t.length<200&&this.leafAppend(t)||this.length<200&&t.leafPrepend(this)||this.appendInner(t)):this},to.prototype.prepend=function(t){return t.length?to.from(t).append(this):this},to.prototype.appendInner=function(t){return new no(this,t)},to.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?to.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},to.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},to.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},to.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},to.from=function(t){return t instanceof to?t:t&&t.length?new eo(t):to.empty};var eo=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=200)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=200)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(to);to.empty=new eo([]);var no=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(to),ro=to,oo=function(t,e){this.items=t,this.eventCount=e};oo.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){if(this.items.get(i-1).selection){--i;break}}e&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,a,c=t.tr,l=[],u=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=n.remapping(i,e+1),o=r.maps.length),o--,void u.push(t);if(r){u.push(new io(t.map));var d,p=t.step.map(r.slice(o));p&&c.maybeStep(p).doc&&(d=c.mapping.maps[c.mapping.maps.length-1],l.push(new io(d,null,null,l.length+u.length))),o--,d&&r.appendMap(d,o)}else c.maybeStep(t.step);return t.selection?(s=r?t.selection.map(r.slice(o)):t.selection,a=new oo(n.items.slice(0,i).append(u.reverse().concat(l)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:c,selection:s}},oo.prototype.addTransform=function(t,e,n,r){for(var o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,c=0;c<t.steps.length;c++){var l,u=t.steps[c].invert(t.docs[c]),d=new io(t.mapping.maps[c],u,e);(l=a&&a.merge(d))&&(d=l,c?o.pop():s=s.slice(0,s.length-1)),o.push(d),e&&(i++,e=null),r||(a=d)}var p,h,f,m=i-n.depth;return m>ao&&(h=m,(p=s).forEach((function(t,e){if(t.selection&&0==h--)return f=e,!1})),s=p.slice(f),i-=m),new oo(s.append(o),i)},oo.prototype.remapping=function(t,e){var n=new zr.a;return this.items.forEach((function(e,r){var o=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,o)}),t,e),n},oo.prototype.addMaps=function(t){return 0==this.eventCount?this:new oo(this.items.append(t.map((function(t){return new io(t)}))),this.eventCount)},oo.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),o=t.mapping,i=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),r);var a=e;this.items.forEach((function(e){var r=o.getMirror(--a);if(null!=r){i=Math.min(i,r);var c=o.maps[r];if(e.step){var l=t.steps[r].invert(t.docs[r]),u=e.selection&&e.selection.map(o.slice(a+1,r));u&&s++,n.push(new io(c,l,u))}else n.push(new io(c))}}),r);for(var c=[],l=e;l<i;l++)c.push(new io(o.maps[l]));var u=this.items.slice(0,r).append(c).append(n),d=new oo(u,s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d},oo.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},oo.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach((function(i,s){if(s>=t)r.push(i),i.selection&&o++;else if(i.step){var a=i.step.map(e.slice(n)),c=a&&a.getMap();if(n--,c&&e.appendMap(c,n),a){var l=i.selection&&i.selection.map(e.slice(n));l&&o++;var u,d=new io(c.invert(),a,l),p=r.length-1;(u=r.length&&r[p].merge(d))?r[p]=u:r.push(d)}}else i.map&&n--}),this.items.length,0),new oo(ro.from(r.reverse()),o)},oo.empty=new oo(ro.empty,0);var io=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};io.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new io(e.getMap().invert(),e,this.selection)}};var so=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},ao=20;function co(t){var e=[];return t.forEach((function(t,n,r,o){return e.push(r,o)})),e}function lo(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function uo(t,e,n,r){var o=fo(e),i=mo.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,o);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),l=new so(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(mo,{redo:r,historyState:l}).scrollIntoView())}}var po=!1,ho=null;function fo(t){var e=t.plugins;if(ho!=e){po=!1,ho=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){po=!0;break}}return po}var mo=new Br.e("history"),go=new Br.e("closeHistory");function vo(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new Br.d({key:mo,state:{init:function(){return new so(oo.empty,oo.empty,null,0)},apply:function(e,n,r){return function(t,e,n,r){var o,i=n.getMeta(mo);if(i)return i.historyState;n.getMeta(go)&&(t=new so(t.done,t.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(mo))return s.getMeta(mo).redo?new so(t.done.addTransform(n,null,r,fo(e)),t.undone,co(n.mapping.maps[n.steps.length-1]),t.prevTime):new so(t.done,t.undone.addTransform(n,null,r,fo(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new so(t.done.rebased(n,o),t.undone.rebased(n,o),lo(t.prevRanges,n.mapping),t.prevTime):new so(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),lo(t.prevRanges,n.mapping),t.prevTime);var a=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}(n,t.prevRanges)),c=s?lo(t.prevRanges,n.mapping):co(n.mapping.maps[n.steps.length-1]);return new so(t.done.addTransform(n,a?e.selection.getBookmark():null,r,fo(e)),oo.empty,c,n.time)}(n,r,e,t)}},config:t})}var yo=xr.b.create({name:"history",defaultOptions:{depth:100,newGroupDelay:500},addCommands:()=>({undo:()=>({state:t,dispatch:e})=>function(t,e){var n=mo.getState(t);return!(!n||0==n.done.eventCount)&&(e&&uo(n,t,e,!1),!0)}(t,e),redo:()=>({state:t,dispatch:e})=>function(t,e){var n=mo.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&uo(n,t,e,!0),!0)}(t,e)}),addProseMirrorPlugins(){return[vo(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}}});var bo=xr.d.create({name:"horizontalRule",defaultOptions:{HTMLAttributes:{}},group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:t}){return["hr",Object(xr.j)(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().insertContent({type:this.name}).command(({tr:t,dispatch:e})=>{var n;if(e){const{parent:e,pos:r}=t.selection.$from,o=r+1;if(!t.doc.nodeAt(o)){const r=null===(n=e.type.contentMatch.defaultType)||void 0===n?void 0:n.create();r&&(t.insert(o,r),t.setSelection(Br.g.create(t.doc,o)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[Object(xr.k)(/^(?:---|—-|___\s|\*\*\*\s)$/,this.type)]}});const wo=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/gm,xo=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/gm,_o=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/gm,ko=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/gm;var Oo=xr.c.create({name:"italic",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:t}){return["em",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setItalic:()=>({commands:t})=>t.setMark("italic"),toggleItalic:()=>({commands:t})=>t.toggleMark("italic"),unsetItalic:()=>({commands:t})=>t.unsetMark("italic")}),addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Object(xr.h)(wo,this.type),Object(xr.h)(_o,this.type)]},addPasteRules(){return[Object(xr.i)(xo,this.type),Object(xr.i)(ko,this.type)]}});var So=xr.d.create({name:"listItem",defaultOptions:{HTMLAttributes:{}},content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",Object(xr.j)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem("listItem"),Tab:()=>this.editor.commands.sinkListItem("listItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("listItem")}}});const Ao=/^(\d+)\.\s$/;var Eo=xr.d.create({name:"orderedList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",addAttributes:()=>({start:{default:1,parseHTML:t=>({start:t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1})}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return 1===e?["ol",Object(xr.j)(this.options.HTMLAttributes,n),0]:["ol",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({toggleOrderedList:()=>({commands:t})=>t.toggleList("orderedList","listItem")}),addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Object(kr.e)(Ao,this.type,t=>({order:+t[1]}),(t,e)=>e.childCount+e.attrs.order===+t[1])]}});var To=xr.d.create({name:"paragraph",priority:1e3,defaultOptions:{HTMLAttributes:{}},group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:t}){return["p",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setParagraph:()=>({commands:t})=>t.toggleNode("paragraph","paragraph")}),addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});const Mo=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/gm,No=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/gm;var Co=xr.c.create({name:"strike",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}],renderHTML({HTMLAttributes:t}){return["s",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setStrike:()=>({commands:t})=>t.setMark("strike"),toggleStrike:()=>({commands:t})=>t.toggleMark("strike"),unsetStrike:()=>({commands:t})=>t.unsetMark("strike")}),addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Object(xr.h)(Mo,this.type)]},addPasteRules(){return[Object(xr.i)(No,this.type)]}});var Io=xr.d.create({name:"text",group:"inline"});var Do=xr.d.create({name:"taskList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"taskItem+",parseHTML:()=>[{tag:'ul[data-type="taskList"]',priority:51}],renderHTML:({HTMLAttributes:t})=>["ul",Object(xr.j)(t,{"data-type":"taskList"}),0],addCommands:()=>({toggleTaskList:()=>({commands:t})=>t.toggleList("taskList","taskItem")}),addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});const jo=/^\s*(\[([ |x])\])\s$/;var Lo=xr.d.create({name:"taskItem",defaultOptions:{nested:!1,HTMLAttributes:{}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes:()=>({checked:{default:!1,parseHTML:t=>({checked:"true"===t.getAttribute("data-checked")}),renderHTML:t=>({"data-checked":t.checked}),keepOnSplit:!1}}),parseHTML:()=>[{tag:'li[data-type="taskItem"]',priority:51}],renderHTML({HTMLAttributes:t}){return["li",Object(xr.j)(this.options.HTMLAttributes,t,{"data-type":"taskItem"}),0]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem("taskItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("taskItem")};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem("taskItem")}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const o=document.createElement("li"),i=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div");return i.contentEditable="false",a.type="checkbox",a.addEventListener("change",t=>{if(!r.isEditable)return void(a.checked=!a.checked);const{checked:e}=t.target;r.isEditable&&"function"==typeof n&&r.chain().focus().command(({tr:t})=>(t.setNodeMarkup(n(),void 0,{checked:e}),!0)).run()}),t.attrs.checked&&a.setAttribute("checked","checked"),i.append(a,s),o.append(i,c),Object.entries(e).forEach(([t,e])=>{o.setAttribute(t,e)}),{dom:o,contentDOM:c,update:t=>t.type===this.type&&(t.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[Object(kr.e)(jo,this.type,t=>({checked:"x"===t[t.length-1]}))]}});const Po=/(?:^|\s)((?:==)((?:[^~]+))(?:==))$/gm;var Ro=xr.c.create({name:"highlight",defaultOptions:{multicolor:!1,HTMLAttributes:{}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>({color:t.getAttribute("data-color")||t.style.backgroundColor}),renderHTML:t=>t.color?{"data-color":t.color,style:"background-color: "+t.color}:{}}}:{}},parseHTML:()=>[{tag:"mark"}],renderHTML({HTMLAttributes:t}){return["mark",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setHighlight:t=>({commands:e})=>e.setMark("highlight",t),toggleHighlight:t=>({commands:e})=>e.toggleMark("highlight",t),unsetHighlight:()=>({commands:t})=>t.unsetMark("highlight")}),addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Object(xr.h)(Po,this.type)]},addPasteRules(){return[Object(xr.i)(Po,this.type)]}}),Bo=n(177);const zo=xr.d.create({name:"topicDoc",topNode:!0,content:"topicTitle topicSummary topicFirstLine block*",addProseMirrorPlugins:()=>[new Br.d({key:new Br.e("TopicDoc Decorations"),props:{decorations:({doc:t,selection:e})=>{const n=[],r=t.content.child(0),o=t.content.child(1),i=t.content.child(2);return 0===r.content.size?n.push(Hr.a.node(0,r.nodeSize,{class:"empty"})):e.to<=r.nodeSize+o.nodeSize&&n.push(Hr.a.node(0,r.nodeSize,{class:"focused"})),0===o.content.size?n.push(Hr.a.node(r.nodeSize,r.nodeSize+o.nodeSize,{class:"empty"})):e.to<=r.nodeSize+o.nodeSize&&n.push(Hr.a.node(r.nodeSize,r.nodeSize+o.nodeSize,{class:"focused"})),t.content.lastChild===i&&0===i.content.size&&n.push(Hr.a.node(r.nodeSize+o.nodeSize,r.nodeSize+o.nodeSize+i.nodeSize,{class:"empty"})),Hr.b.create(t,n)}}})]});var Fo=n(179),$o=n(178);const Vo=xr.d.create({name:"topicFirstLine",group:"topicDoc",content:"inline*",priority:1e3,addAttributes:()=>({"data-placeholder":{default:"Take a notes"}}),parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:t}){return["p",Object(xr.j)(this.options.HTMLAttributes,t),0]}}),Ho=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)/gi,Uo=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)$/gi,qo=xr.c.create({name:"link",priority:1e3,inclusive:!1,defaultOptions:{openOnClick:!0,linkOnPaste:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow"}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target}}},parseHTML:()=>[{tag:"a[href]"}],renderHTML({HTMLAttributes:t}){return["a",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setLink:t=>({commands:e})=>e.setMark("link",t),toggleLink:t=>({commands:e})=>e.toggleMark("link",t),unsetLink:()=>({commands:t})=>t.unsetMark("link")}),addPasteRules(){return[Object(xr.i)(Ho,this.type,t=>({href:t[0]}))]},addProseMirrorPlugins(){const t=[];return this.options.openOnClick&&t.push(new Br.d({key:new Br.e("handleClickLink"),props:{handleClick:(t,e,n)=>{var r;const o=this.editor.getAttributes("link");return!(!(null===(r=n.target)||void 0===r?void 0:r.closest("a"))||!o.href)&&(window.open(o.href,o.target),!0)}}})),this.options.linkOnPaste&&t.push(new Br.d({key:new Br.e("handlePasteLink"),props:{handlePaste:(t,e,n)=>{const{state:r}=t,{selection:o}=r,{empty:i}=o;if(i)return!1;let s="";return n.content.forEach(t=>{s+=t.textContent}),!(!s||!s.match(Uo))&&(this.editor.commands.setMark(this.type,{href:s}),!0)}}})),t}});const Wo=qo.extend({renderHTML(t){return"function"==typeof this.options.onRenderHTML&&this.options.onRenderHTML(t),["a",Object(xr.j)(this.options.HTMLAttributes,t.HTMLAttributes),0]}});function Go(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function Ko(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Jo(t){var e=Ko(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Qo(t){return t instanceof Ko(t).Element||t instanceof Element}function Yo(t){return t instanceof Ko(t).HTMLElement||t instanceof HTMLElement}function Xo(t){return"undefined"!=typeof ShadowRoot&&(t instanceof Ko(t).ShadowRoot||t instanceof ShadowRoot)}function Zo(t){return t?(t.nodeName||"").toLowerCase():null}function ti(t){return((Qo(t)?t.ownerDocument:t.document)||window.document).documentElement}function ei(t){return Go(ti(t)).left+Jo(t).scrollLeft}function ni(t){return Ko(t).getComputedStyle(t)}function ri(t){var e=ni(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function oi(t,e,n){void 0===n&&(n=!1);var r,o,i=ti(e),s=Go(t),a=Yo(e),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(a||!a&&!n)&&(("body"!==Zo(e)||ri(i))&&(c=(r=e)!==Ko(r)&&Yo(r)?{scrollLeft:(o=r).scrollLeft,scrollTop:o.scrollTop}:Jo(r)),Yo(e)?((l=Go(e)).x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=ei(i))),{x:s.left+c.scrollLeft-l.x,y:s.top+c.scrollTop-l.y,width:s.width,height:s.height}}function ii(t){var e=Go(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function si(t){return"html"===Zo(t)?t:t.assignedSlot||t.parentNode||(Xo(t)?t.host:null)||ti(t)}function ai(t,e){var n;void 0===e&&(e=[]);var r=function t(e){return["html","body","#document"].indexOf(Zo(e))>=0?e.ownerDocument.body:Yo(e)&&ri(e)?e:t(si(e))}(t),o=r===(null==(n=t.ownerDocument)?void 0:n.body),i=Ko(r),s=o?[i].concat(i.visualViewport||[],ri(r)?r:[]):r,a=e.concat(s);return o?a:a.concat(ai(si(s)))}function ci(t){return["table","td","th"].indexOf(Zo(t))>=0}function li(t){return Yo(t)&&"fixed"!==ni(t).position?t.offsetParent:null}function ui(t){for(var e=Ko(t),n=li(t);n&&ci(n)&&"static"===ni(n).position;)n=li(n);return n&&("html"===Zo(n)||"body"===Zo(n)&&"static"===ni(n).position)?e:n||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Yo(t)&&"fixed"===ni(t).position)return null;for(var n=si(t);Yo(n)&&["html","body"].indexOf(Zo(n))<0;){var r=ni(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var di="top",pi="bottom",hi="right",fi="left",mi=[di,pi,hi,fi],gi=mi.reduce((function(t,e){return t.concat([e+"-start",e+"-end"])}),[]),vi=[].concat(mi,["auto"]).reduce((function(t,e){return t.concat([e,e+"-start",e+"-end"])}),[]),yi=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function bi(t){var e=new Map,n=new Set,r=[];return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||function t(o){n.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach((function(r){if(!n.has(r)){var o=e.get(r);o&&t(o)}})),r.push(o)}(t)})),r}var wi={placement:"bottom",modifiers:[],strategy:"absolute"};function xi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function _i(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,o=e.defaultOptions,i=void 0===o?wi:o;return function(t,e,n){void 0===n&&(n=i);var o,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},wi,i),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],l=!1,u={state:a,setOptions:function(n){d(),a.options=Object.assign({},i,a.options,n),a.scrollParents={reference:Qo(t)?ai(t):t.contextElement?ai(t.contextElement):[],popper:ai(e)};var o=function(t){var e=bi(t);return yi.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=o.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"==typeof o){var i=o({state:a,name:e,instance:u,options:r});c.push(i||function(){})}})),u.update()},forceUpdate:function(){if(!l){var t=a.elements,e=t.reference,n=t.popper;if(xi(e,n)){a.rects={reference:oi(e,ui(n),"fixed"===a.options.strategy),popper:ii(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var o=a.orderedModifiers[r],i=o.fn,s=o.options,c=void 0===s?{}:s,d=o.name;"function"==typeof i&&(a=i({state:a,options:c,name:d,instance:u})||a)}else a.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(t){u.forceUpdate(),t(a)}))},function(){return s||(s=new Promise((function(t){Promise.resolve().then((function(){s=void 0,t(o())}))}))),s}),destroy:function(){d(),l=!0}};if(!xi(t,e))return u;function d(){c.forEach((function(t){return t()})),c=[]}return u.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var ki={passive:!0};var Oi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,i=void 0===o||o,s=r.resize,a=void 0===s||s,c=Ko(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&l.forEach((function(t){t.addEventListener("scroll",n.update,ki)})),a&&c.addEventListener("resize",n.update,ki),function(){i&&l.forEach((function(t){t.removeEventListener("scroll",n.update,ki)})),a&&c.removeEventListener("resize",n.update,ki)}},data:{}};function Si(t){return t.split("-")[0]}function Ai(t){return t.split("-")[1]}function Ei(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ti(t){var e,n=t.reference,r=t.element,o=t.placement,i=o?Si(o):null,s=o?Ai(o):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(i){case di:e={x:a,y:n.y-r.height};break;case pi:e={x:a,y:n.y+n.height};break;case hi:e={x:n.x+n.width,y:c};break;case fi:e={x:n.x-r.width,y:c};break;default:e={x:n.x,y:n.y}}var l=i?Ei(i):null;if(null!=l){var u="y"===l?"height":"width";switch(s){case"start":e[l]=e[l]-(n[u]/2-r[u]/2);break;case"end":e[l]=e[l]+(n[u]/2-r[u]/2)}}return e}var Mi={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Ti({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},Ni=Math.max,Ci=Math.min,Ii=Math.round,Di={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ji(t){var e,n=t.popper,r=t.popperRect,o=t.placement,i=t.offsets,s=t.position,a=t.gpuAcceleration,c=t.adaptive,l=t.roundOffsets,u=!0===l?function(t){var e=t.x,n=t.y,r=window.devicePixelRatio||1;return{x:Ii(Ii(e*r)/r)||0,y:Ii(Ii(n*r)/r)||0}}(i):"function"==typeof l?l(i):i,d=u.x,p=void 0===d?0:d,h=u.y,f=void 0===h?0:h,m=i.hasOwnProperty("x"),g=i.hasOwnProperty("y"),v=fi,y=di,b=window;if(c){var w=ui(n),x="clientHeight",_="clientWidth";w===Ko(n)&&"static"!==ni(w=ti(n)).position&&(x="scrollHeight",_="scrollWidth"),w=w,o===di&&(y=pi,f-=w[x]-r.height,f*=a?1:-1),o===fi&&(v=hi,p-=w[_]-r.width,p*=a?1:-1)}var k,O=Object.assign({position:s},c&&Di);return a?Object.assign({},O,((k={})[y]=g?"0":"",k[v]=m?"0":"",k.transform=(b.devicePixelRatio||1)<2?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",k)):Object.assign({},O,((e={})[y]=g?f+"px":"",e[v]=m?p+"px":"",e.transform="",e))}var Li={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},o=e.elements[t];Yo(o)&&Zo(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?o.removeAttribute(t):o.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],o=e.attributes[t]||{},i=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});Yo(r)&&Zo(r)&&(Object.assign(r.style,i),Object.keys(o).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]};var Pi={left:"right",right:"left",bottom:"top",top:"bottom"};function Ri(t){return t.replace(/left|right|bottom|top/g,(function(t){return Pi[t]}))}var Bi={start:"end",end:"start"};function zi(t){return t.replace(/start|end/g,(function(t){return Bi[t]}))}function Fi(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Xo(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function $i(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Vi(t,e){return"viewport"===e?$i(function(t){var e=Ko(t),n=ti(t),r=e.visualViewport,o=n.clientWidth,i=n.clientHeight,s=0,a=0;return r&&(o=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,a=r.offsetTop)),{width:o,height:i,x:s+ei(t),y:a}}(t)):Yo(e)?function(t){var e=Go(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):$i(function(t){var e,n=ti(t),r=Jo(t),o=null==(e=t.ownerDocument)?void 0:e.body,i=Ni(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=Ni(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-r.scrollLeft+ei(t),c=-r.scrollTop;return"rtl"===ni(o||n).direction&&(a+=Ni(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:s,x:a,y:c}}(ti(t)))}function Hi(t,e,n){var r="clippingParents"===e?function(t){var e=ai(si(t)),n=["absolute","fixed"].indexOf(ni(t).position)>=0&&Yo(t)?ui(t):t;return Qo(n)?e.filter((function(t){return Qo(t)&&Fi(t,n)&&"body"!==Zo(t)})):[]}(t):[].concat(e),o=[].concat(r,[n]),i=o[0],s=o.reduce((function(e,n){var r=Vi(t,n);return e.top=Ni(r.top,e.top),e.right=Ci(r.right,e.right),e.bottom=Ci(r.bottom,e.bottom),e.left=Ni(r.left,e.left),e}),Vi(t,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Ui(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function qi(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function Wi(t,e){void 0===e&&(e={});var n=e,r=n.placement,o=void 0===r?t.placement:r,i=n.boundary,s=void 0===i?"clippingParents":i,a=n.rootBoundary,c=void 0===a?"viewport":a,l=n.elementContext,u=void 0===l?"popper":l,d=n.altBoundary,p=void 0!==d&&d,h=n.padding,f=void 0===h?0:h,m=Ui("number"!=typeof f?f:qi(f,mi)),g="popper"===u?"reference":"popper",v=t.elements.reference,y=t.rects.popper,b=t.elements[p?g:u],w=Hi(Qo(b)?b:b.contextElement||ti(t.elements.popper),s,c),x=Go(v),_=Ti({reference:x,element:y,strategy:"absolute",placement:o}),k=$i(Object.assign({},y,_)),O="popper"===u?k:x,S={top:w.top-O.top+m.top,bottom:O.bottom-w.bottom+m.bottom,left:w.left-O.left+m.left,right:O.right-w.right+m.right},A=t.modifiersData.offset;if("popper"===u&&A){var E=A[o];Object.keys(S).forEach((function(t){var e=[hi,pi].indexOf(t)>=0?1:-1,n=[di,pi].indexOf(t)>=0?"y":"x";S[t]+=E[n]*e}))}return S}function Gi(t,e,n){return Ni(t,Ci(e,n))}function Ki(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Ji(t){return[di,hi,pi,fi].some((function(e){return t[e]>=0}))}var Qi=_i({defaultModifiers:[Oi,Mi,{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,s=void 0===i||i,a=n.roundOffsets,c=void 0===a||a,l={placement:Si(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,ji(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,ji(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},Li,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,o=n.offset,i=void 0===o?[0,0]:o,s=vi.reduce((function(t,n){return t[n]=function(t,e,n){var r=Si(t),o=[fi,di].indexOf(r)>=0?-1:1,i="function"==typeof n?n(Object.assign({},e,{placement:t})):n,s=i[0],a=i[1];return s=s||0,a=(a||0)*o,[fi,hi].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,e.rects,i),t}),{}),a=s[e.placement],c=a.x,l=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,i=void 0===o||o,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,m=n.allowedAutoPlacements,g=e.options.placement,v=Si(g),y=c||(v===g||!f?[Ri(g)]:function(t){if("auto"===Si(t))return[];var e=Ri(t);return[zi(t),e,zi(e)]}(g)),b=[g].concat(y).reduce((function(t,n){return t.concat("auto"===Si(n)?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,o=n.boundary,i=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?vi:c,u=Ai(r),d=u?a?gi:gi.filter((function(t){return Ai(t)===u})):mi,p=d.filter((function(t){return l.indexOf(t)>=0}));0===p.length&&(p=d);var h=p.reduce((function(e,n){return e[n]=Wi(t,{placement:n,boundary:o,rootBoundary:i,padding:s})[Si(n)],e}),{});return Object.keys(h).sort((function(t,e){return h[t]-h[e]}))}(e,{placement:n,boundary:u,rootBoundary:d,padding:l,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),w=e.rects.reference,x=e.rects.popper,_=new Map,k=!0,O=b[0],S=0;S<b.length;S++){var A=b[S],E=Si(A),T="start"===Ai(A),M=[di,pi].indexOf(E)>=0,N=M?"width":"height",C=Wi(e,{placement:A,boundary:u,rootBoundary:d,altBoundary:p,padding:l}),I=M?T?hi:fi:T?pi:di;w[N]>x[N]&&(I=Ri(I));var D=Ri(I),j=[];if(i&&j.push(C[E]<=0),a&&j.push(C[I]<=0,C[D]<=0),j.every((function(t){return t}))){O=A,k=!1;break}_.set(A,j)}if(k)for(var L=function(t){var e=b.find((function(e){var n=_.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return O=e,"break"},P=f?3:1;P>0;P--){if("break"===L(P))break}e.placement!==O&&(e.modifiersData[r]._skip=!0,e.placement=O,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,i=void 0===o||o,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,h=void 0===p||p,f=n.tetherOffset,m=void 0===f?0:f,g=Wi(e,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),v=Si(e.placement),y=Ai(e.placement),b=!y,w=Ei(v),x="x"===w?"y":"x",_=e.modifiersData.popperOffsets,k=e.rects.reference,O=e.rects.popper,S="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,A={x:0,y:0};if(_){if(i||a){var E="y"===w?di:fi,T="y"===w?pi:hi,M="y"===w?"height":"width",N=_[w],C=_[w]+g[E],I=_[w]-g[T],D=h?-O[M]/2:0,j="start"===y?k[M]:O[M],L="start"===y?-O[M]:-k[M],P=e.elements.arrow,R=h&&P?ii(P):{width:0,height:0},B=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=B[E],F=B[T],$=Gi(0,k[M],R[M]),V=b?k[M]/2-D-$-z-S:j-$-z-S,H=b?-k[M]/2+D+$+F+S:L+$+F+S,U=e.elements.arrow&&ui(e.elements.arrow),q=U?"y"===w?U.clientTop||0:U.clientLeft||0:0,W=e.modifiersData.offset?e.modifiersData.offset[e.placement][w]:0,G=_[w]+V-W-q,K=_[w]+H-W;if(i){var J=Gi(h?Ci(C,G):C,N,h?Ni(I,K):I);_[w]=J,A[w]=J-N}if(a){var Q="x"===w?di:fi,Y="x"===w?pi:hi,X=_[x],Z=X+g[Q],tt=X-g[Y],et=Gi(h?Ci(Z,G):Z,X,h?Ni(tt,K):tt);_[x]=et,A[x]=et-X}}e.modifiersData[r]=A}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,o=t.options,i=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Si(n.placement),c=Ei(a),l=[fi,hi].indexOf(a)>=0?"height":"width";if(i&&s){var u=function(t,e){return Ui("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:qi(t,mi))}(o.padding,n),d=ii(i),p="y"===c?di:fi,h="y"===c?pi:hi,f=n.rects.reference[l]+n.rects.reference[c]-s[c]-n.rects.popper[l],m=s[c]-n.rects.reference[c],g=ui(i),v=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,b=u[p],w=v-d[l]-u[h],x=v/2-d[l]/2+y,_=Gi(b,x,w),k=c;n.modifiersData[r]=((e={})[k]=_,e.centerOffset=_-x,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=e.elements.popper.querySelector(r)))&&Fi(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,i=e.modifiersData.preventOverflow,s=Wi(e,{elementContext:"reference"}),a=Wi(e,{altBoundary:!0}),c=Ki(s,r),l=Ki(a,o,i),u=Ji(c),d=Ji(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),Yi={passive:!0,capture:!0};function Xi(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function Zi(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function ts(t,e){return"function"==typeof t?t.apply(void 0,e):t}function es(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function ns(t){return[].concat(t)}function rs(t,e){-1===t.indexOf(e)&&t.push(e)}function os(t){return t.split("-")[0]}function is(t){return[].slice.call(t)}function ss(){return document.createElement("div")}function as(t){return["Element","Fragment"].some((function(e){return Zi(t,e)}))}function cs(t){return Zi(t,"MouseEvent")}function ls(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function us(t){return as(t)?[t]:function(t){return Zi(t,"NodeList")}(t)?is(t):Array.isArray(t)?t:is(document.querySelectorAll(t))}function ds(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function ps(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function hs(t){var e,n=ns(t)[0];return(null==n||null==(e=n.ownerDocument)?void 0:e.body)?n.ownerDocument:document}function fs(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}var ms={isTouch:!1},gs=0;function vs(){ms.isTouch||(ms.isTouch=!0,window.performance&&document.addEventListener("mousemove",ys))}function ys(){var t=performance.now();t-gs<20&&(ms.isTouch=!1,document.removeEventListener("mousemove",ys)),gs=t}function bs(){var t=document.activeElement;if(ls(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}var ws="undefined"!=typeof window&&"undefined"!=typeof document?navigator.userAgent:"",xs=/MSIE |Trident\//.test(ws);var _s={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},ks=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},_s,{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Os=Object.keys(ks);function Ss(t){var e=(t.plugins||[]).reduce((function(e,n){var r=n.name,o=n.defaultValue;return r&&(e[r]=void 0!==t[r]?t[r]:o),e}),{});return Object.assign({},t,{},e)}function As(t,e){var n=Object.assign({},e,{content:ts(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(Ss(Object.assign({},ks,{plugins:e}))):Os).reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(t){e[n]=r}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},ks.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}function Es(t,e){t.innerHTML=e}function Ts(t){var e=ss();return!0===t?e.className="tippy-arrow":(e.className="tippy-svg-arrow",as(t)?e.appendChild(t):Es(e,t)),e}function Ms(t,e){as(e.content)?(Es(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?Es(t,e.content):t.textContent=e.content)}function Ns(t){var e=t.firstElementChild,n=is(e.children);return{box:e,content:n.find((function(t){return t.classList.contains("tippy-content")})),arrow:n.find((function(t){return t.classList.contains("tippy-arrow")||t.classList.contains("tippy-svg-arrow")})),backdrop:n.find((function(t){return t.classList.contains("tippy-backdrop")}))}}function Cs(t){var e=ss(),n=ss();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=ss();function o(n,r){var o=Ns(e),i=o.box,s=o.content,a=o.arrow;r.theme?i.setAttribute("data-theme",r.theme):i.removeAttribute("data-theme"),"string"==typeof r.animation?i.setAttribute("data-animation",r.animation):i.removeAttribute("data-animation"),r.inertia?i.setAttribute("data-inertia",""):i.removeAttribute("data-inertia"),i.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?i.setAttribute("role",r.role):i.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||Ms(s,t.props),r.arrow?a?n.arrow!==r.arrow&&(i.removeChild(a),i.appendChild(Ts(r.arrow))):i.appendChild(Ts(r.arrow)):a&&i.removeChild(a)}return r.className="tippy-content",r.setAttribute("data-state","hidden"),Ms(r,t.props),e.appendChild(n),n.appendChild(r),o(t.props,t.props),{popper:e,onUpdate:o}}Cs.$$tippy=!0;var Is=1,Ds=[],js=[];function Ls(t,e){var n,r,o,i,s,a,c,l,u,d=As(t,Object.assign({},ks,{},Ss((n=e,Object.keys(n).reduce((function(t,e){return void 0!==n[e]&&(t[e]=n[e]),t}),{}))))),p=!1,h=!1,f=!1,m=!1,g=[],v=es(K,d.interactiveDebounce),y=Is++,b=(u=d.plugins).filter((function(t,e){return u.indexOf(t)===e})),w={id:y,reference:t,popper:ss(),popperInstance:null,props:d,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:b,clearDelayTimeouts:function(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(i)},setProps:function(e){0;if(w.state.isDestroyed)return;j("onBeforeUpdate",[w,e]),W();var n=w.props,r=As(t,Object.assign({},w.props,{},e,{ignoreAttributes:!0}));w.props=r,q(),n.interactiveDebounce!==r.interactiveDebounce&&(R(),v=es(K,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?ns(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&t.removeAttribute("aria-expanded");P(),D(),k&&k(n,r);w.popperInstance&&(X(),tt().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})));j("onAfterUpdate",[w,e])},setContent:function(t){w.setProps({content:t})},show:function(){0;var t=w.state.isVisible,e=w.state.isDestroyed,n=!w.state.isEnabled,r=ms.isTouch&&!w.props.touch,o=Xi(w.props.duration,0,ks.duration);if(t||e||n||r)return;if(M().hasAttribute("disabled"))return;if(j("onShow",[w],!1),!1===w.props.onShow(w))return;w.state.isVisible=!0,T()&&(_.style.visibility="visible");D(),$(),w.state.isMounted||(_.style.transition="none");if(T()){var i=C(),s=i.box,a=i.content;ds([s,a],0)}c=function(){var t;if(w.state.isVisible&&!m){if(m=!0,_.offsetHeight,_.style.transition=w.props.moveTransition,T()&&w.props.animation){var e=C(),n=e.box,r=e.content;ds([n,r],o),ps([n,r],"visible")}L(),P(),rs(js,w),null==(t=w.popperInstance)||t.forceUpdate(),w.state.isMounted=!0,j("onMount",[w]),w.props.animation&&T()&&function(t,e){H(t,e)}(o,(function(){w.state.isShown=!0,j("onShown",[w])}))}},function(){var t,e=w.props.appendTo,n=M();t=w.props.interactive&&e===ks.appendTo||"parent"===e?n.parentNode:ts(e,[n]);t.contains(_)||t.appendChild(_);X(),!1}()},hide:function(){0;var t=!w.state.isVisible,e=w.state.isDestroyed,n=!w.state.isEnabled,r=Xi(w.props.duration,1,ks.duration);if(t||e||n)return;if(j("onHide",[w],!1),!1===w.props.onHide(w))return;w.state.isVisible=!1,w.state.isShown=!1,m=!1,p=!1,T()&&(_.style.visibility="hidden");if(R(),V(),D(),T()){var o=C(),i=o.box,s=o.content;w.props.animation&&(ds([i,s],r),ps([i,s],"hidden"))}L(),P(),w.props.animation?T()&&function(t,e){H(t,(function(){!w.state.isVisible&&_.parentNode&&_.parentNode.contains(_)&&e()}))}(r,w.unmount):w.unmount()},hideWithInteractivity:function(t){0;N().addEventListener("mousemove",v),rs(Ds,v),v(t)},enable:function(){w.state.isEnabled=!0},disable:function(){w.hide(),w.state.isEnabled=!1},unmount:function(){0;w.state.isVisible&&w.hide();if(!w.state.isMounted)return;Z(),tt().forEach((function(t){t._tippy.unmount()})),_.parentNode&&_.parentNode.removeChild(_);js=js.filter((function(t){return t!==w})),w.state.isMounted=!1,j("onHidden",[w])},destroy:function(){0;if(w.state.isDestroyed)return;w.clearDelayTimeouts(),w.unmount(),W(),delete t._tippy,w.state.isDestroyed=!0,j("onDestroy",[w])}};if(!d.render)return w;var x=d.render(w),_=x.popper,k=x.onUpdate;_.setAttribute("data-tippy-root",""),_.id="tippy-"+w.id,w.popper=_,t._tippy=w,_._tippy=w;var O=b.map((function(t){return t.fn(w)})),S=t.hasAttribute("aria-expanded");return q(),P(),D(),j("onCreate",[w]),d.showOnCreate&&et(),_.addEventListener("mouseenter",(function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()})),_.addEventListener("mouseleave",(function(t){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&(N().addEventListener("mousemove",v),v(t))})),w;function A(){var t=w.props.touch;return Array.isArray(t)?t:[t,0]}function E(){return"hold"===A()[0]}function T(){var t;return!!(null==(t=w.props.render)?void 0:t.$$tippy)}function M(){return l||t}function N(){var t=M().parentNode;return t?hs(t):document}function C(){return Ns(_)}function I(t){return w.state.isMounted&&!w.state.isVisible||ms.isTouch||s&&"focus"===s.type?0:Xi(w.props.delay,t?0:1,ks.delay)}function D(){_.style.pointerEvents=w.props.interactive&&w.state.isVisible?"":"none",_.style.zIndex=""+w.props.zIndex}function j(t,e,n){var r;(void 0===n&&(n=!0),O.forEach((function(n){n[t]&&n[t].apply(void 0,e)})),n)&&(r=w.props)[t].apply(r,e)}function L(){var e=w.props.aria;if(e.content){var n="aria-"+e.content,r=_.id;ns(w.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(w.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var o=e&&e.replace(r,"").trim();o?t.setAttribute(n,o):t.removeAttribute(n)}}))}}function P(){!S&&w.props.aria.expanded&&ns(w.props.triggerTarget||t).forEach((function(t){w.props.interactive?t.setAttribute("aria-expanded",w.state.isVisible&&t===M()?"true":"false"):t.removeAttribute("aria-expanded")}))}function R(){N().removeEventListener("mousemove",v),Ds=Ds.filter((function(t){return t!==v}))}function B(t){if(!(ms.isTouch&&(f||"mousedown"===t.type)||w.props.interactive&&_.contains(t.target))){if(M().contains(t.target)){if(ms.isTouch)return;if(w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else j("onClickOutside",[w,t]);!0===w.props.hideOnClick&&(w.clearDelayTimeouts(),w.hide(),h=!0,setTimeout((function(){h=!1})),w.state.isMounted||V())}}function z(){f=!0}function F(){f=!1}function $(){var t=N();t.addEventListener("mousedown",B,!0),t.addEventListener("touchend",B,Yi),t.addEventListener("touchstart",F,Yi),t.addEventListener("touchmove",z,Yi)}function V(){var t=N();t.removeEventListener("mousedown",B,!0),t.removeEventListener("touchend",B,Yi),t.removeEventListener("touchstart",F,Yi),t.removeEventListener("touchmove",z,Yi)}function H(t,e){var n=C().box;function r(t){t.target===n&&(fs(n,"remove",r),e())}if(0===t)return e();fs(n,"remove",a),fs(n,"add",r),a=r}function U(e,n,r){void 0===r&&(r=!1),ns(w.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,r),g.push({node:t,eventType:e,handler:n,options:r})}))}function q(){var t;E()&&(U("touchstart",G,{passive:!0}),U("touchend",J,{passive:!0})),(t=w.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(U(t,G),t){case"mouseenter":U("mouseleave",J);break;case"focus":U(xs?"focusout":"blur",Q);break;case"focusin":U("focusout",Q)}}))}function W(){g.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,o=t.options;e.removeEventListener(n,r,o)})),g=[]}function G(t){var e,n=!1;if(w.state.isEnabled&&!Y(t)&&!h){var r="focus"===(null==(e=s)?void 0:e.type);s=t,l=t.currentTarget,P(),!w.state.isVisible&&cs(t)&&Ds.forEach((function(e){return e(t)})),"click"===t.type&&(w.props.trigger.indexOf("mouseenter")<0||p)&&!1!==w.props.hideOnClick&&w.state.isVisible?n=!0:et(t),"click"===t.type&&(p=!n),n&&!r&&nt(t)}}function K(t){var e=t.target,n=M().contains(e)||_.contains(e);"mousemove"===t.type&&n||function(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,o=t.popperState,i=t.props.interactiveBorder,s=os(o.placement),a=o.modifiersData.offset;if(!a)return!0;var c="bottom"===s?a.top.y:0,l="top"===s?a.bottom.y:0,u="right"===s?a.left.x:0,d="left"===s?a.right.x:0,p=e.top-r+c>i,h=r-e.bottom-l>i,f=e.left-n+u>i,m=n-e.right-d>i;return p||h||f||m}))}(tt().concat(_).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:d}:null})).filter(Boolean),t)&&(R(),nt(t))}function J(t){Y(t)||w.props.trigger.indexOf("click")>=0&&p||(w.props.interactive?w.hideWithInteractivity(t):nt(t))}function Q(t){w.props.trigger.indexOf("focusin")<0&&t.target!==M()||w.props.interactive&&t.relatedTarget&&_.contains(t.relatedTarget)||nt(t)}function Y(t){return!!ms.isTouch&&E()!==t.type.indexOf("touch")>=0}function X(){Z();var e=w.props,n=e.popperOptions,r=e.placement,o=e.offset,i=e.getReferenceClientRect,s=e.moveTransition,a=T()?Ns(_).arrow:null,l=i?{getBoundingClientRect:i,contextElement:i.contextElement||M()}:t,u=[{name:"offset",options:{offset:o}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(T()){var n=C().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}}];T()&&a&&u.push({name:"arrow",options:{element:a,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),w.popperInstance=Qi(l,_,Object.assign({},n,{placement:r,onFirstUpdate:c,modifiers:u}))}function Z(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function tt(){return is(_.querySelectorAll("[data-tippy-root]"))}function et(t){w.clearDelayTimeouts(),t&&j("onTrigger",[w,t]),$();var e=I(!0),n=A(),o=n[0],i=n[1];ms.isTouch&&"hold"===o&&i&&(e=i),e?r=setTimeout((function(){w.show()}),e):w.show()}function nt(t){if(w.clearDelayTimeouts(),j("onUntrigger",[w,t]),w.state.isVisible){if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&p)){var e=I(!1);e?o=setTimeout((function(){w.state.isVisible&&w.hide()}),e):i=requestAnimationFrame((function(){w.hide()}))}}else V()}}function Ps(t,e){void 0===e&&(e={});var n=ks.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",vs,Yi),window.addEventListener("blur",bs);var r=Object.assign({},e,{plugins:n}),o=us(t).reduce((function(t,e){var n=e&&Ls(e,r);return n&&t.push(n),t}),[]);return as(t)?o[0]:o}Ps.defaultProps=ks,Ps.setDefaultProps=function(t){Object.keys(t).forEach((function(e){ks[e]=t[e]}))},Ps.currentInput=ms;Object.assign({},Li,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}});Ps.setDefaultProps({render:Cs});var Rs=Ps;const Bs=xr.d.create({name:"aside",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML:()=>[{tag:"aside"}],renderHTML({HTMLAttributes:t}){return["aside",Object(xr.j)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setAside:()=>({commands:t})=>t.wrapIn("aside"),toggleAside:()=>({commands:t})=>t.toggleWrap("aside"),unsetAside:()=>({commands:t})=>t.lift("aside")})});class zs{constructor({editor:t,element:e,view:n,tippyOptions:r}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null==t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.editor=t,this.element=e,this.view=n,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(r),this.element.style.visibility="visible"}createTooltip(t={}){this.tippy=Rs(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...t})}update(t,e){const{state:n,composing:r}=t,{doc:o,selection:i}=n,s=e&&e.doc.eq(o)&&e.selection.eq(i);if(r||s)return;const{empty:a,$anchor:c,ranges:l}=i,u=Math.min(...l.map(t=>t.$from.pos)),d=Math.max(...l.map(t=>t.$to.pos));!a&&c.parent.textContent?(this.tippy.setProps({getReferenceClientRect:()=>{if(Object(xr.g)(t.state.selection)){const e=t.nodeDOM(u);if(e)return e.getBoundingClientRect()}return Object(xr.l)(t,u,d)}}),this.show()):this.hide()}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Fs=new Br.e("menuBubble"),$s=t=>new Br.d({key:Fs,view:e=>new zs({view:e,...t})});xr.b.create({name:"bubbleMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[$s({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});const Vs=Object(o.a)({props:{editor:{},className:String,tippyOptions:{}},render:r.g})((function(t){const[e,n]=Object(o.g)(0),s=Wn(),[a,c]=Object(o.g)(null);return Object(o.d)(()=>{console.log("useEffect bubbleMenuElement"),cancelAnimationFrame(e);const{editor:r,tippyOptions:o}=t;n(requestAnimationFrame(()=>{null!=s.current&&r.registerPlugin($s({editor:r,element:s.current}))}));const a=new i.a,l=({transaction:t})=>{t.steps.length>0?c(qs(r)):t.selection.empty?c(null):a.next()};return r.on("transaction",l),a.pipe(Object(pr.a)(700)).subscribe(t=>{c(qs(r))}),()=>{console.log("DESTROY bubbleMenuElement"),a.unsubscribe(),r.off("transaction",l),cancelAnimationFrame(e),r.unregisterPlugin(Fs)}},[s.current]),r.e`<div .ref=${s.ref()} class=${t.className} style=${Rn.a`
        visibility: 'hidden';
      `}>
      ${a}
    </div>`})),Hs=["figure"],Us=["codeBlock","topicTitle"];function qs(t){const e=t.state.selection;return e instanceof Br.c&&Hs.includes(e.node.type.name)||e instanceof Br.g&&(Us.includes(e.$from.parent.type.name)||Us.includes(e.$to.parent.type.name))?null:r.e`
      <button @click=${()=>t.chain().focus().toggleBold().run()} class=${t.isActive("bold")?"is-active":""}>
        bold
      </button>
      <button @click=${()=>t.chain().focus().toggleItalic().run()} class=${t.isActive("italic")?"is-active":""}>
        italic
      </button>
      <button @click=${()=>t.chain().focus().toggleStrike().run()} class=${t.isActive("strike")?"is-active":""}>
        strike
      </button>
      <button @click=${()=>t.chain().focus().toggleHighlight().run()} class=${t.isActive("highlight")?"is-active":""}>
        highlight
      </button>
      <button @click=${()=>{var e;const n=null!==(e=window.prompt("URL"))&&void 0!==e?e:"";t.chain().focus().toggleLink({href:n}).run()}} class=${t.isActive("link")?"is-active":""}>
        link
      </button>
      <button @click=${()=>t.chain().focus().toggleBlockquote().run()} class=${t.isActive("blockquote")?"is-active":""}>
        blockquote
      </button>
      <button @click=${()=>t.chain().focus().toggleAside().run()} class=${t.isActive("aside")?"is-active":""}>
        aside
      </button>

      <button @click=${()=>t.chain().focus().toggleHeading({level:2}).run()} class=${t.isActive("heading",{level:2})?"is-active":""}>
        h2
      </button>
      <button @click=${()=>t.chain().focus().toggleHeading({level:3}).run()} class=${t.isActive("heading",{level:3})?"is-active":""}>
        h3
      </button>
      <button @click=${()=>t.chain().focus().toggleHeading({level:4}).run()} class=${t.isActive("heading",{level:4})?"is-active":""}>
        h4
      </button>
    `}var Ws=n(163),Gs=n.n(Ws),Ks=n(138),Js=n.n(Ks),Qs=n(61),Ys=n(60),Xs=n(105),Zs=n(94),ta=n(169),ea=n(118),na=n(170),ra=n(140),oa=n(67),ia=n(69),sa=n(96),aa=n(97),ca=n(65),la=n(90),ua=n(99),da=n(100),pa=n(119),ha=n(147),fa=n(83),ma=n(101),ga=n(91),va=n(106),ya=n(66),ba=n(102),wa=n(103);let xa=navigator.userAgent.toLowerCase(),_a=(/opera/i.test(xa)||/opr/i.test(xa),/msie/i.test(xa)&&!/opera/i.test(xa)||/trident\//i.test(xa)||/edge/i.test(xa),/edge/i.test(xa)&&/opera/i.test(xa),/firefox/i.test(xa),/chrome/i.test(xa)&&/edge/i.test(xa),!/chrome/i.test(xa)&&/webkit|safari|khtml/i.test(xa),/iphone/i.test(xa),/ipod/i.test(xa),/ipad/i.test(xa),/android/i.test(xa),/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(xa)),ka=/iphone|ipod|ipad/i.test(xa);/opera mini|opera mobi/i.test(xa),/opera mini/i.test(xa),/mac/i.test(xa);function Oa(t,e,n=!0){sa.LinkBlot.blotName="link",sa.LinkBlot.tagName="a",sa.LinkBlot.showLinkTooltip=e=>{t&&t.showLinkTooltip(e,e.value,Object(ya.isEdit)(),o)},sa.LinkBlot.hideLinkTooltip=()=>t&&t.hideLinkTooltip(o),aa.MyQuill.register(sa.LinkBlot,!0),ua.FigureBlot.blotName="blockFigure",ua.FigureBlot.tagName="figure",ua.FigureBlot.quillSetSelection=(t,e=0)=>o.setSelection(t,e,Ys.a.sources.USER),ua.FigureBlot.quillDeleteText=(t,e,n=Ys.a.sources.USER)=>o.deleteText(t,e,n),ua.FigureBlot.quillInsertText=(t,e)=>o.insertText(t,e,Ys.a.sources.USER),ua.FigureBlot.draftSave=()=>Object(ya.draftSave)(r,o),aa.MyQuill.register(ua.FigureBlot,!0),aa.MyQuill.register(wa.DividerBlot),aa.MyQuill.register({"modules/syntax":ga.InsSyntaxModule,"formats/bold":pa.a,"formats/italic":ha.a,"formats/indent":ta.a,"formats/list":Zs.ListContinuer,"formats/list-item":Xs.a,"formats/code":ea.a,"formats/strike":na.a},!0);var r=!1;_a&&document.body.classList.add("mobile");var o=new aa.MyQuill(e,{scrollingContainer:"html, body",readOnly:!0,modules:{syntax:{highlight:t=>ba.default.highlightAuto(t).value},clipboard:{matchers:[i("h2",{blockHeader:!0}),i("h5",{blockSubheader:!0}),i("h6",{blockSubheader:!0}),["img",function(t,e){return t.src&&Object(ya.sanitize)(t.src,["http","https","data"])?(new Js.a).insert({blockFigure:{image:t.src,caption:t.alt||""}}):new Js.a}],["video",function(t,e){return t.src&&Object(ya.sanitize)(t.src,["http","https","data"])?(new Js.a).insert({blockFigure:{video:t.src}}):new Js.a}],["br",function(t,e){return console.log("modules.clipboard.matchers.br"),t.classList.contains("inline")?(new Js.a).insert({textBreak:!0}):e}]]},keyboard:{bindings:{"required enter":{key:ra.a.keys.ENTER,collapsed:!0,shiftKey:null,format:["blockTitle","blockDescription"],suffix:/^$/,handler:function(t,e){console.log("keyboard.bindings.required_enter.handler");let[n]=this.quill.scroll.descendant(ia.FieldBlot,t.index);return!(n&&n.next&&n.next.domNode&&!n.next.domNode.textContent)||(this.quill.setSelection(n.next.offset(this.quill.scroll),0,Ys.a.sources.USER),!1)}},"required tab prev":{key:ra.a.keys.TAB,shiftKey:!0,handler:function(t,e){console.log("keyboard.bindings.required_tab_prev.handler");let n=null;if(t.length>0){let e=o.scroll.descendants(Qs.c,t.index,t.length);if(1!=e.length)return!0;n=e[0]}else[n]=o.scroll.descendant(Qs.c,t.index);if(null!=n&&null!=n.prev&&n.prev instanceof ia.FieldBlot){let t=n.prev.offset(o.scroll),e=n.prev.length();return o.setSelection(t,e>1?e:0,Ys.a.sources.USER),!1}return!0}},"required tab next":{key:ra.a.keys.TAB,shiftKey:!1,handler:function(t,e){console.log("keyboard.bindings.required_tab_next.handler");let n=null;if(t.length>0){let e=o.scroll.descendants(Qs.c,t.index,t.length);if(1!=e.length)return!0;n=e[0]}else[n]=o.scroll.descendant(Qs.c,t.index);if(null!=n&&n instanceof ia.FieldBlot&&null!=n.next){let t=n.next.offset(o.scroll);if(n.next instanceof ia.FieldBlot){let e=n.next.length();o.setSelection(t,e>1?e:0,Ys.a.sources.USER)}else o.setSelection(t,0,Ys.a.sources.USER);return!1}return!0}},"no tab":{key:ra.a.keys.TAB,shiftKey:null,handler:function(t,e){return console.log("keyboard.bindings.no_tab.handler"),!1}},"detect embed":{key:ra.a.keys.ENTER,collapsed:!0,handler:function(e,n){console.log("keyboard.bindings.detect_embed.handler");let[r,i]=o.scroll.line(e.index);if(r){let n,s=r.domNode.textContent.substr(0,i);if(n=s.match(/(^|\s)(https?:\/\/\S+)$/)){let a=n[2];if(o.scroll.descendants(sa.LinkBlot,e.index-a.length,a.length).length||o.formatText(e.index-a.length,a.length,"link",a,Ys.a.sources.USER),!s.substr(0,i-a.length).trim().length&&"P"==r.domNode.tagName){let e=c(a);if(e){let n=r.offset(o.scroll);return o.updateContents((new Js.a).retain(n).delete(s.length).insert({blockFigure:e}),Ys.a.sources.USER),t&&t.hideBlocksTooltip(),!1}}}}return!0}},"divider autofill":{key:ra.a.keys.ENTER,collapsed:!0,prefix:/^([-*])\1{2,}$/,handler:function(t,e){console.log("keyboard.bindings.divider_autofill.handler");let[n,r]=o.scroll.line(t.index);if(n&&"P"==n.domNode.tagName){let t=n.offset(o.scroll),e=(new Js.a).retain(t).delete(n.length()).insert({blockDivider:!0});return n.next||e.insert("\n"),o.updateContents(e,Ys.a.sources.USER),!1}return!0}},break:{key:ra.a.keys.ENTER,shiftKey:!0,handler:a.bind(null,!0)},enter:{key:ra.a.keys.ENTER,handler:a.bind(null,!1)},"detect link":{key:" ",collapsed:!0,handler:function(t){console.log("detectLinkHandler",t);let[e,n]=o.scroll.line(t.index);if(e){let r,i=e.domNode.textContent.substr(0,n);if(r=i.match(/(^|\s)((?:https?|tg):\/\/\S+|www\.\S+)$/)){let e=r[2],n=e.length;"www."==e.substr(0,4)&&(e="http://"+e),o.scroll.descendants(sa.LinkBlot,t.index-n,n).length||o.formatText(t.index-n,n,"link",e,Ys.a.sources.USER)}}return!0}},"cancel placeholder":{key:ra.a.keys.ESCAPE,handler:function(t,e){return console.log("keyboard.bindings.cancel_placeholder.handler"),Aa(),this.quill.updateSelection(Ys.a.sources.USER),!0}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{list:!1,"code-block":!1,blockquote:!1,header:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query&&null==this.quill.scroll.query("list"))return!0;const{length:n}=e.prefix,[r,o]=this.quill.getLine(t.index);if(o>n)return!0;let i;switch(e.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i={type:"ordered",start:Number(e.prefix.slice(0,-1))-1}}this.quill.insertText(t.index," ",Ys.a.sources.USER),this.quill.history.cutoff(),console.log("keyboard.bindings.list_autofill.handler",t,e);const s=(new Js.a).retain(t.index-o).delete(n+1).retain(r.length()-2-o).retain(1,{list:i,start:i.start});console.log("keyboard.bindings.list_autofill.handler",s);const a=this.quill.updateContents(s,Ys.a.sources.USER);return console.log("keyboard.bindings.list_autofill.handler",a),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,Ys.a.sources.SILENT),!1}},"pre wrap":{key:192,collapsed:!0,format:{"code-block":!1},prefix:/^``$/,offset:2,handler:function(t,e){console.log("keyboard.bindings.pre_wrap.handler");let n=e.prefix.length,r=t.index-n;this.quill.scroll.deleteAt(r,n),this.quill.formatLine(r,1,"code-block",!0,Ys.a.sources.USER),this.quill.setSelection(r,Ys.a.sources.SILENT)}},code:{key:192,handler:function(t,e){if(console.log("keyboard.bindings.code.handler",!e.format),!e.collapsed){let n=o.scroll.descendants(Qs.c,t.index,t.length);if(n.length>1||1==n.length&&n[0]instanceof va.a)return this.quill.format("code-block",!e.format["code-block"],Ys.a.sources.USER),!1;if(o.scroll.descendants(oa.BreakBlot,t.index,t.length).length)return this.quill.format("code-block",!e.format["code-block"],Ys.a.sources.USER),!1}if(e.collapsed&&!e.format.code&&!/\s$/.test(e.prefix))return!0;this.quill.format("code",!e.format.code,Ys.a.sources.USER)}},"figure delete":{key:ra.a.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(t,e){console.log("keyboard.bindings.figure_delete.handler");let[n,r]=o.scroll.line(t.index);return!(n&&n.prev&&n.prev instanceof ua.FigureBlot)||(e.empty&&o.deleteText(t.index,1,Ys.a.sources.USER),o.setSelection(n.prev.offset(o.scroll)),!1)}},"field backspace":{key:ra.a.keys.BACKSPACE,collapsed:!0,offset:0,handler:function(t,e){console.log("keyboard.bindings.field_backspace.handler");let[n,r]=o.scroll.line(t.index);return!(n&&n.prev&&n.prev instanceof ia.FieldBlot&&n.domNode.textContent.length>0)}},strikethrough:{key:"X",shortKey:!0,shiftKey:!0,handler:function(t,e){o.formatText(t,"strike",!e.format.strike)}}}}}});function i(t,e){return[t,function(t,n){return n.compose((new Js.a).retain(n.length(),e))}]}function s(t){let e=function(t){let[e,n]=o.scroll.line(t);return o.getText(t,e.length()-n)}(t);return!e||"\n"==e}function a(t,e,n){console.log("breakHandler",t,e,n);let r,i=e.index;e.length>0&&o.scroll.deleteAt(i,e.length);let a=s(i),c=!1;return[r]=o.scroll.descendant(oa.BreakBlot,i),r?(!r.prev||r.prev instanceof oa.BreakBlot)&&(o.scroll.deleteAt(--i,1),c=!0):([r]=o.scroll.descendant(oa.BreakBlot,i-1),r&&(o.scroll.deleteAt(--i,1),c=!0)),[r]=o.scroll.descendant(ca.SingleLineBlot,i),r||c||!t?(o.insertText(i,"\n",Ys.a.sources.USER),o.setSelection(++i,0,Ys.a.sources.USER),(n.format.blockHeader||n.format.blockSubheader||n.format.blockBlockquote||n.format.blockPullquote)&&a&&o.formatLine(i,1,{blockHeader:!1,blockSubheader:!1,blockBlockquote:!1,blockPullquote:!1},Ys.a.sources.USER)):(o.insertEmbed(i,"textBreak",!0,Ys.a.sources.USER),[r]=o.scroll.descendant(oa.BreakBlot,i),!r||r.next||r.prev&&r.prev instanceof oa.BreakBlot||(o.insertEmbed(++i,"textBreak",!0,Ys.a.sources.SILENT),o.setSelection(i,0,Ys.a.sources.SILENT))),!1}function c(t){let e;if((e=t.match(/^(https?):\/\/(www\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/i))||(e=t.match(/^(https?):\/\/(www\.)?youtu\.be\/([a-zA-Z0-9_-]+)/i)))return{embed:"/embed/youtube?url="+encodeURIComponent(t)};if(e=t.match(/^(https?):\/\/(www\.)?vimeo\.com\/(\d+)/i))return{embed:"/embed/vimeo?url="+encodeURIComponent(t)};if(e=t.match(/^(https?):\/\/(www\.|mobile\.)?twitter\.com\/(.+)\/status\/(\d+)/i))return{embed:"/embed/twitter?url="+encodeURIComponent(t)};if(e=t.match(/^(https?):\/\/(t\.me|telegram\.me|telegram\.dog)\/([a-zA-Z0-9_]+)\/(\d+)/i))return{embed:"/embed/telegram?url="+encodeURIComponent(t)};if(e=t.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))return"video/"==e[1].substr(0,6)?{video:t}:{image:t};if(e=t.match(/^(https?):\/\/\S+/i)){let n=document.createElement("a");if(n.href=t,n.pathname.match(/\.(jpe?g|png|gif|mp4)$/i))return"mp4"==e[1]?{video:t}:{image:t}}return!1}function l(t){t.scroll.descendants(Qs.c,0,t.scroll.length()).forEach(t=>{if(t.domNode.hasAttribute("data-placeholder")){let e=t.domNode.textContent;t.domNode.classList.toggle("empty",!e)}})}function u(t){if(n){let[e,n]=t.scroll.lines();if(e instanceof Qs.a)t.updateContents((new Js.a).insert("\n",{blockTitle:!0}).insert("\n",{blockDescription:!0}),Ys.a.sources.SILENT);else if(e instanceof la.TitleBlot||t.formatLine(0,1,{blockTitle:!0},Ys.a.sources.SILENT),n){if(n instanceof Qs.a){let e=n.offset(t.scroll);t.updateContents((new Js.a).retain(e).insert("\n",{blockDescription:!0}),Ys.a.sources.SILENT)}else if(!(n instanceof da.DescriptionBlot)){let e=n.offset(t.scroll);t.formatLine(e,1,{blockDescription:!0},Ys.a.sources.SILENT)}}else{let e=t.scroll.length();t.updateContents((new Js.a).retain(e).insert("\n",{blockDescription:!0}),Ys.a.sources.SILENT)}let[,,r]=t.scroll.lines();if(r){let e=r.offset(t.scroll),n=t.scroll.length()-e;t.scroll.descendants(ia.FieldBlot,e,n).forEach(e=>{let n=e.offset(t.scroll),r=e.length(),o=e.constructor.blotName;t.formatText(n,r,o,!1,Ys.a.sources.SILENT)})}else{let e=t.scroll.length();t.insertText(e,"\n",Ys.a.sources.SILENT)}}const r=t.scroll.lines();e.querySelectorAll("[data-placeholder]").forEach(t=>t.removeAttribute("data-placeholder"));(n?3===r.length:1===r.length)&&r.forEach((t,e)=>{if("P"==t.domNode.tagName){(n?2===e:0==e)&&t.domNode.setAttribute("data-placeholder","The page content...")}})}function d(t){let e=t.querySelector(".prompt_input"),n=t.querySelector(".close");e.onkeydown=null,e.onblur=null,n.onclick=null,t.style.display="",t.classList.remove("tooltip_prompt"),o.focus()}return t&&o.addContainer(t),o.on(Ys.a.events.TEXT_CHANGE,(function(){o.getSelection();u(o),l(o),Aa(),Object(ya.draftSave)(r,o)})),o.on(Ys.a.events.SCROLL_OPTIMIZE,(function(t){t.forEach(t=>{if("childList"==t.type&&!t.addedNodes.length&&t.removedNodes.length){let e=t.previousSibling,n=t.nextSibling;if(!n&&e&&"BR"==e.tagName&&"inline"==e.className){let e=document.createElement("br");e.className="inline",t.target.appendChild(e)}else!n||!e||"BR"==e.tagName&&"inline"==e.className||"BR"!=n.tagName||"inline"!=n.className||n.nextSibling||n.parentNode&&n.parentNode.removeChild(n)}})})),o.scroll.domNode.setAttribute("dir","auto"),document.addEventListener("click touchstart",(function(e){let n=e.target;for(;n;){if(n===o.container)return;n=n.parentNode}t&&t.hideFormatTooltip(o),t&&t.hideBlocksTooltip()})),u(o),l(o),t&&(t.$bold_button.onclick=t=>{console.log("$bold_button.onclick");let e=t.target.classList.contains("active");t.preventDefault(),console.log("$bold_button.onclick",!e),o.format("bold",!e),console.log("$bold_button.onclick",o.getSelection(!0)),o.updateSelection(Ys.a.sources.API)}),t&&(t.$italic_button.onclick=t=>{let e=t.target.classList.contains("active");t.preventDefault(),o.format("italic",!e),o.updateSelection(Ys.a.sources.API)}),t&&(t.$link_button.onclick=e=>{let n=e.target.classList.contains("active");e.preventDefault();var r=o.getSelection(!0);if(n){o.scroll.descendants(sa.LinkBlot,r.index,r.length).forEach(t=>{let e=t.offset(o.scroll),n=t.length();o.formatText(e,n,"link",!1)}),t&&Sa(r,o,t)}else t&&function(t,e,n){let r=t.querySelector(".prompt_input"),o=t.querySelector(".close");r.value="",r.setAttribute("placeholder",e),r.onkeydown=e=>{let o=e.which||e.keyCode;if(27==o)d(t);else if(13==o){let o=r.value;o&&(n&&n(o),e.preventDefault()),d(t)}},r.onblur=()=>{d(t)},o.onclick=()=>{d(t)},t.style.display="",t.classList.add("tooltip_prompt"),r.focus()}(t.$tl_tooltip,"Paste or type a link...",(function(e){"#"!=(e=e.trim()).substr(0,1)&&"/"!=e.substr(0,1)&&"http://"!=e.substr(0,7)&&"https://"!=e.substr(0,8)&&"tg://"!=e.substr(0,5)&&"mailto:"!=e.substr(0,7)&&(e=e.indexOf("@")>0?"mailto:"+e:"http://"+e),o.focus(),o.format("link",e),Sa(r,o,t)}))}),t&&(t.$header_button.onclick=t=>{let e=t.target.classList.contains("active");t.preventDefault();let n=o.getSelection(!0);o.format("blockHeader",!e),o.scroll.descendants(fa.HeaderBlot,n.index,n.length).forEach(t=>{let e=t.offset(o.scroll),n=t.length();o.formatText(e,n,{bold:!1,italic:!1,code:!1},Ys.a.sources.SILENT)}),o.updateSelection(Ys.a.sources.API)}),t&&(t.$subheader_button.onclick=t=>{let e=t.target.classList.contains("active");t.preventDefault();let n=o.getSelection(!0);o.format("blockSubheader",!e),o.scroll.descendants(ma.SubheaderBlot,n.index,n.length).forEach(t=>{let e=t.offset(o.scroll),n=t.length();o.formatText(e,n,{bold:!1,italic:!1,code:!1},Ys.a.sources.SILENT)}),o.updateSelection(Ys.a.sources.API)}),t&&(t.$quote_button.onclick=t=>{let e=t.target,n=e.classList.contains("active"),r=e.classList.contains("pullquote");t.preventDefault();o.getSelection(!0);n?o.format("blockPullquote",!r):o.format("blockBlockquote",!0),o.updateSelection(Ys.a.sources.API)}),t&&(t.$strikeButton.onclick=t=>{let e=t.target.classList.contains("active");t.preventDefault(),o.format("strike",!e),o.updateSelection(Ys.a.sources.API)}),t&&(t.$image_button.onclick=()=>{let t=o.container.querySelector("input.ql-image[type=file][data-status=ready]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",ka?"image/gif, image/jpeg, image/jpg, image/png":"image/gif, image/jpeg, image/jpg, image/png, video/mp4"),t.classList.add("ql-image"),t.addEventListener("change",()=>{if(t&&null!=t.files&&null!=t.files[0]){var e=t.files[0];const n=function(){Object(ya.showError)("File too big (up to 5 MB allowed)")},r=5242880;!function(t,e){if("image/jpg"==t.type||"image/jpeg"==t.type)return Gs()(t,n=>{if("error"===n.type)e(t);else if(n.toBlob)n.toBlob((function(t){e(t)}),t.type);else{var r=n.toDataURL(t.type),o={type:t.type,base64_data:r.split(",")[1]};e(Object(ya.uploadDataToBlob)(o))}},{canvas:!0,orientation:!0});e(t)}(e,e=>{if(e.size>r)return n&&n();var i=new FileReader;i.onload=function(e){if(e&&null!==e.target){let n=c(e.target.result);if(n){let t=o.getSelection(!0);o.updateContents((new Js.a).retain(t.index).delete(t.length).insert({blockFigure:n}),Ys.a.sources.USER)}else Object(ya.showError)("Invalid file format");t.value="",t.setAttribute("data-status","ready")}},i.readAsDataURL(e)})}}),o.container.appendChild(t)),t.setAttribute("data-status","busy"),t.click()}),t&&(t.$embed_button.onclick=e=>{let n=o.getSelection(!0),[r]=o.scroll.line(n.index);const i=r.domNode;if(r){i.textContent||(i.setAttribute("data-placeholder","Paste a YouTube, Vimeo or Twitter link, and press Enter"),i.classList.add("placeholder_once","empty"),t.hideBlocksTooltip())}}),window.addEventListener("scroll resize",()=>{t&&t.tooltipUpdatePosition(t.$tl_tooltip,null,t.formatTTOptions,o),t&&t.tooltipUpdatePosition(t.$tl_link_tooltip,null,t.linkTTOptions,o)}),o}function Sa(t,e,n){let r=null==t?{}:e.getFormat(t),o=!!r.blockDescription,i=!(!r.blockHeader&&!r.blockSubheader),s=!!r["code-block"];if(n.$bold_button.classList.toggle("active",!!r.bold),n.$bold_button.classList.toggle("disabled",o||i||s),n.$italic_button.classList.toggle("active",!!r.italic),n.$italic_button.classList.toggle("disabled",o||i||s),n.$header_button.classList.toggle("active",!!r.blockHeader),n.$header_button.classList.toggle("disabled",o),n.$subheader_button.classList.toggle("active",!!r.blockSubheader),n.$subheader_button.classList.toggle("disabled",o),n.$quote_button.classList.toggle("active",!(!r.blockBlockquote&&!r.blockPullquote)),n.$quote_button.classList.toggle("pullquote",!!r.blockPullquote),n.$quote_button.classList.toggle("disabled",o),n.$strikeButton.classList.toggle("active",!!r.strike),n.$strikeButton.classList.toggle("disabled",o),null!=t){let r=e.scroll.descendants(sa.LinkBlot,t.index,t.length);n.$link_button.classList.toggle("active",!!r.length)}else n.$link_button.classList.toggle("active",!1);n.$link_button.classList.toggle("disabled",s)}function Aa(){const t=document.querySelector(".placeholder_once");null!==t&&(t.removeAttribute("data-placeholder"),t.classList.remove("placeholder_once","empty"))}var Ea=n(95),Ta=n(98);Vs("inscriptum-redactor-bubble-menu");const Ma=Object(o.a)({props:{content:{type:{},default:null},cbOnUpdateContent:{type:{},default:()=>{}},isTitle:Boolean},render:r.g})((function(t){const[e,i]=Object(o.g)(0),[s,a]=Object(o.g)(),c=Wn();return Object(o.d)(()=>(cancelAnimationFrame(e),i(requestAnimationFrame(()=>{const e=c.current;if(null!=e){let n=null;n=null!=t.content&&"object"==typeof t.content&&"ops"in t.content?function(t){const e=document.createElement("div"),n=document.createElement("template");n.append(e),document.body.append(n);const r=Oa(null,e);ia.FieldBlot,Ea.BlockquoteBlot,Ta.PullquoteBlot,va.a,Xs.a,la.TitleBlot,Qs.c,r.setContents(t);const o=r.root.innerHTML;return e.remove(),n.remove(),"function"==typeof r.destroy&&r.destroy(),o}(t.content):t.content,a(function(t,e,n=!1,r){const o=n?[zo,Fo.b,$o.b,Vo]:[_r];return new xr.a({element:t,content:e,onUpdate:null==r?void 0:r.onUpdate,extensions:[...o,To,Io,Nr,Oo,jr,Co,Xr,Zr,Sr,Ir,Eo,So,bo,Rr,yo,$r,Yr,Do,Lo,Ro,Bo.b,Bs,Wo.configure({onRenderHTML:()=>{setTimeout(()=>{document.querySelectorAll("a[href]").forEach(t=>{null==t._tippy&&Rs(t,{delay:[300,200],placement:"bottom",content:t=>t.href})})},1)}})]})}(e,n,t.isTitle,{onUpdate:({editor:e})=>{t.cbOnUpdateContent(e.getJSON())}}))}})),()=>{console.log("DESTROY redactorElement"),cancelAnimationFrame(e),null!=s&&s.destroy()}),[c.current,t.content,t.isTitle,t.cbOnUpdateContent]),r.e`<div class="redactor">
      <style>${n(430)}</style>
      <article .ref=${c.ref()} class="redactor__article"></article>
      ${null!=s&&r.e`<inscriptum-redactor-bubble-menu .editor=${s}></inscriptum-redactor-bubble-menu>`}
    </div>`})),Na=String.raw,Ca=(Ma("inscriptum-redactor"),tr("inscriptum-margin"),nr("inscriptum-folding"),rr()),Ia=or(),Da=br(),ja=Object(o.a)({props:{page:{type:{}}},render:r.g})((function(t){const[e,n]=Object(o.e)(yr,{data:t.page,isLoading:!1});let[s,a]=Object(o.g)(t.page.content);const[c,l]=Object(o.g)(t.page.isFolded),[u,d]=wr(mr),[p,h]=wr(gr),[f,m]=wr(vr);Object(o.d)(()=>{const r=(t.page.id,nt(new i.a)).subscribe(t=>n(t));return r.add(u.subscribe(t=>{null!=e.data&&(e.data.content=t.content)})),r.add(p.subscribe()),r.add(f.subscribe()),()=>{r.unsubscribe()}},[]),Object(o.d)(()=>{var t;null!=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.content)&&(null==s&&null!=e.data.content&&a(e.data.content),null!=e.data.isFolded&&c!==e.data.isFolded&&(e.data.isFolded||a(e.data.content)))},[e,s,c,a,l]);const g=Object(o.c)(t=>{null!=e.data&&(d({pageId:e.data.id,draftId:e.data.draftId,content:t}),null!=s?s.content=t.content:s=t)},[e,d,s]),v=Object(o.c)(t=>()=>{var n;null!=(null===(n=e.data)||void 0===n?void 0:n.draftId)&&h({draftId:e.data.draftId,order:t})},[e.data,d]),y=Object(o.c)(()=>{null!=e.data&&m({draftId:e.data.draftId,pageId:e.data.id,order:e.data.order})},[e.data]),b=Object(o.c)(()=>{var t;null!=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.id)&&function(t,e){fr(this,void 0,void 0,(function*(){return yield Nn(()=>fr(this,void 0,void 0,(function*(){const{insert_margin_one:n}=yield En().createMargin({page_id:t,created_at:(new Date).toISOString()});if(null!=(null==n?void 0:n.id))return e({type:ir.CREATE_MARGIN_DONE,payload:{pageId:t,marginId:n.id}}),n;e({type:ir.CREATE_MARGIN_FAIL,payload:{pageId:t,error:{massage:`Can not create a new Margin for Page ${t}!`}}})})))}))}(e.data.id,n)},[e]);if(null!=(null==e?void 0:e.data)){const t=r.e`<div class="page__controls">
        <div>
          <button class="btn btn_icon" title="add a new page" @click=${v(e.data.order+1)}>
            ${Ca({})}
          </button>
          ${e.data.order>0?r.e`<button class="btn btn_icon" title="delete this page" @click=${y}>
              ${Ia({})}
            </button>`:null}
        </div>
        <div>
          ${c?null:r.e`<button class="btn btn_icon" title="create new margin" @click=${b}>
              ${Da({})}
            </button>`}
        </div>
      </div>`;return r.e`
        <inscriptum-folding .label=${e.data.order>0?String(e.data.order):""} .value=${e.data.id} .isFolded=${c} .change=${(t,e)=>l(e)}></inscriptum-folding>
        ${c?r.e`
            <span style=${Na`
                display: flex;
                justify-content: center;
                font-size: 1.6rem;
              `}>
              ...
            </span>
            ${t}
          `:r.e`<div class="row" style=${Na`
              display: flex;
              width: 100%;
            `}>
            <div style=${Na`
                min-width: 732px;
                padding: 1rem 0 0 0;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
              `}>
              
              <inscriptum-redactor .content=${s} .cbOnUpdateContent=${g} .isTitle=${0===e.data.order}></inscriptum-redactor>
              ${t}
            </div>
            ${e.data.margins.length>0?r.e`<inscriptum-margin .pageId=${e.data.id} .marginId=${e.data.margins[0].id}></inscriptum-margin>`:null}
          </div>`}
      `}}));function La(t,e,n){return void 0===t||n!==t[e]?{...t,[e]:n}:t}const Pa=[];let Ra=!0;const Ba=function(t){const e=(null==t?void 0:t.mapper)||La;return n=>{const r=function(t,e,n){var r;const o=((r=class extends HTMLElement{constructor(){super(),this._props={},this.isScheduledNext=!1;for(const t in e){const r=e[t];let o=void 0;"type"in r&&(o=r.attribute),Reflect.defineProperty(this,t,{get:()=>this.props[t],set:e=>{this.props=n.apply(this,[this.props,t,e,o])},enumerable:!0})}}static get observedAttributes(){return Object.values(this.attributes)}set props(t){void 0!==t&&this.props!==t&&(this._props=t,this.next())}get props(){return this._props}async next(){if(!this.isScheduledNext&&null!=this.generation){this.isScheduledNext=!0;const t=await Promise.resolve(this.generation);this.isScheduledNext=!1,t.next(this.props)}}connectedCallback(){this.generation=t.apply(this,[this.props]),Ra=!0,this.generation.next(this.props),Ra=!1}attributeChangedCallback(t,e,n){if(e!==n)for(const[e,r]of Object.entries(this.constructor.attributes))if(r===t&&this[e]!==n){this[e]=n;break}}disconnectedCallback(){Pa.length=0}}).attributes={},r),i=Reflect.get(o,"attributes");for(const t in e){const n=e[t];"type"in n&&void 0!==n.attribute&&Reflect.defineProperty(o,"attributes",{value:{...i,[t]:n.attribute},enumerable:!0,writable:!0})}return o}(n,(null==t?void 0:t.props)||{},e);return(t,e)=>{try{customElements.define(t,r,e)}catch(t){console.warn(t)}const n=async e=>customElements.whenDefined(t).then(()=>customElements.get(t));return n.element=r,n.adapter=(e,n)=>e(t,n),n}}}({props:{items:{type:{},attribute:za}}})((function*(t){var e,o;for(;;)t=yield Object(r.g)(r.e`
        <style>${n(431)}</style>
        <div class="toc-stub"></div>
        <nav class="toc-panel">
          <ul class="toc-panel__list">
            <li class="toc-panel__title">${null!==(o=null===(e=t.items[0])||void 0===e?void 0:e.header)&&void 0!==o?o:"In this article"}</li>
            ${t.items.slice(1).map((t,e)=>{var n;return r.e`<li class="toc-panel__item">
                <span class="toc-panel__page-numb">${e+1}</span>
                <a class=${"toc-panel__header "+(e+1===0?"toc-panel__header_selected":"")}>${null!==(n=null==t?void 0:t.header)&&void 0!==n?n:"..."}</a>
              </li>`})}

            
          </ul>
        </nav>
      `,this)}));var za;function Fa(t,e){var n,r,o,i,s,a,c,l;switch(e.type){case Tn.LOAD:case Tn.LOADING:return Object.assign(Object.assign({},t),{isLoading:!0});case Tn.LOAD_DONE:if((null===(n=e.payload.pages)||void 0===n?void 0:n.length)!==e.payload.table_of_contents.length){e.payload.table_of_contents=[];for(const t of null!==(r=e.payload.pages)&&void 0!==r?r:[])e.payload.table_of_contents.push({header:$a(t.content),pageId:t.id});In(e.payload.table_of_contents,e.payload.id)}return Object.assign(Object.assign({},t),{data:e.payload,isLoading:!1});case u.DRAFT_ADD_PAGE_DONE:if(null!=t.data&&null!=e.payload.newPage){const n=null!==(o=t.data.pages)&&void 0!==o?o:[];for(const t of n){const n=e.payload.updatedPages.find(e=>e.id===t.id);null!=n&&(t.order=n.order)}n.push(e.payload.newPage);const r=t.data.table_of_contents;return In([...r.slice(0,e.payload.newPage.order),{header:"...",pageId:e.payload.newPage.id},...r.slice(e.payload.newPage.order)],t.data.id),Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{pages:n.sort((t,e)=>t.order-e.order)})})}return t;case u.DRAFT_DELETE_PAGE_DONE:if(null!=t.data){const n=(null!==(i=t.data.pages)&&void 0!==i?i:[]).filter(t=>t.id!==e.payload.deletedPage.id);for(const t of n){const n=e.payload.updatedPages.find(e=>e.id===t.id);null!=n&&(t.order=n.order)}const r=t.data.table_of_contents;return In([...r.slice(0,e.payload.deletedPage.order),...r.slice(e.payload.deletedPage.order+1)],t.data.id),Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{pages:n.sort((t,e)=>t.order-e.order)})})}return t;case Tn.UPDATE_TOC_DONE:return null!=t.data?Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{table_of_contents:e.payload.toc})}):t;case Tn.UPDATE_TOC_ERROR:return console.warn(e.payload.error),t;case u.PAGE_SAVE_DONE:if(null!=t.data){const n=null!==(c=null===(a=null===(s=t.data.pages)||void 0===s?void 0:s.find(t=>t.id===e.payload.pageId))||void 0===a?void 0:a.order)&&void 0!==c?c:-1,r=t.data.table_of_contents;let o=$a(e.payload.content);r[n]=null!==(l=r[n])&&void 0!==l?l:{},n>-1&&r[n].header!==String(o)&&(r[n]={header:String(o),pageId:e.payload.pageId},In(r,t.data.id))}return t;default:return t}}function $a(t){var e;let n="...";return null==t||("ops"in t&&(n=t.ops[0].insert),"type"in t&&Array.isArray(t.content)&&Array.isArray(t.content[0].content)&&"text"===t.content[0].content[0].type&&(n=null!==(e=t.content[0].content[0].text)&&void 0!==e?e:n)),n}const Va=String.raw,Ha=(ja("inscriptum-page"),Object(p.a)("loading-progress-bar"),Ba("inscriptum-table-of-content"),Object(o.a)({props:{id:{type:String,attribute:"data-id"}},render:r.g})((function(t){var e,i,s,a;const[c,p]=Object(o.e)(Fa,{isLoading:!1}),[f,m]=Object(o.g)(new h.a),[v,y]=Object(o.g)(0),b=Object(o.f)(null);return Object(o.d)(()=>{const e=(n=t.id,nt(l.$.pipe(),l.$.pipe(g(t=>t.type===u.PAGE_SAVE_DONE&&t.payload.draftId===n)))).subscribe(t=>p(t));var n;return()=>{e.unsubscribe()}},[]),Object(o.d)(()=>{!function(t){Cn(this,void 0,void 0,(function*(){return l.dispatch({type:Tn.LOADING,payload:{id:t}}),Nn(()=>Cn(this,void 0,void 0,(function*(){const{draft:e}=yield En().getDraftById({id:t});null!=e&&l.dispatch({type:Tn.LOAD_DONE,payload:{id:e.id,created_at:e.created_at,updated_at:e.updated_at,table_of_contents:e.table_of_contents,notes:e.notes,pages:e.pages.sort((t,e)=>t.order-e.order).map((e,n)=>{var r;return Object.assign(Object.assign({},e),{content:e.content,draftId:t,isFolded:0!==n,margins:null!==(r=e.margins)&&void 0!==r?r:[]})})}})})))}))}(t.id)},[t.id]),Object(o.d)(()=>(cancelAnimationFrame(v),y(requestAnimationFrame(()=>{null!=b.current&&(f.unsubscribe(),m(function(t){var e,n;const r=new h.a;let o=document.title;const i=null===(e=t.current)||void 0===e?void 0:e.togglePause,s=null===(n=t.current)||void 0===n?void 0:n.generateProgress;if(null!=i&&null!=s){let t=2e3,e=!1,n=!1;r.add(l.$.pipe(g(t=>t.type===u.PAGE_SAVE)).subscribe(()=>{n||(o=document.title,document.title="*"+o,n=!0)})),r.add(l.$.pipe(g(t=>t.type===u.PAGE_SAVING)).subscribe(()=>{e&&s.next(),t=2e3,e=!0;const n=s.next();void 0!==n&&1===n.value&&(setTimeout(()=>{e&&(i(!0),t-=300)},300),setTimeout(()=>{e&&i(!1)},1e3),setTimeout(()=>{e&&(i(!0),t-=1e3)},2e3),setTimeout(()=>{e&&(t-=1e3)},3e3))})),r.add(l.$.pipe(g(t=>t.type===u.PAGE_SAVE_DONE)).subscribe(r=>{e=!1,i(!1),setTimeout(()=>{s.next()},t>0?t:0),document.title=o,n=!1})),r.add(l.$.pipe(g(t=>t.type===u.PAGE_SAVE_FAIL)).subscribe(()=>{e=!1,i(!1),setTimeout(()=>{s.next()},t>0?t:0)}))}return r}(b)))})),()=>{cancelAnimationFrame(v),f.unsubscribe()}),[b.current]),Object(o.d)(()=>{var t;const e=null===(t=c.data)||void 0===t?void 0:t.table_of_contents[0];null!=e&&(document.title=e.header)},[c]),r.e`
      <style>${n(432)}</style>
      <loading-progress-bar .ref=${b}></loading-progress-bar>

      <um-preloader .loading=${c.isLoading}>
        <div class="draft-content">
          <inscriptum-table-of-content .items=${null!==(i=null===(e=c.data)||void 0===e?void 0:e.table_of_contents)&&void 0!==i?i:[]} style=${Va`
              margin-right: 7rem;
              margin-left: 3rem;
              min-width: 15rem;
            `}></inscriptum-table-of-content>
          <div style=${Va`
              width: 100%;
            `}>
            ${Object(d.a)(null!==(a=null===(s=c.data)||void 0===s?void 0:s.pages)&&void 0!==a?a:[],t=>`${t.id}_${t.order}`,t=>r.e`<inscriptum-page .page=${t} style=${Va`
                    position: relative;
                    display: block;
                    border-bottom: 1px solid #eee;
                  `}></inscriptum-page>`)}
          </div>
        </div>
      </um-preloader>
    `})))},63:function(t,e,n){var r;!function(o){"use strict";function i(t,e,n){var r,o=document.createElement("img");return o.onerror=function(r){return i.onerror(o,r,t,e,n)},o.onload=function(r){return i.onload(o,r,t,e,n)},"string"==typeof t?(i.fetchBlob(t,(function(e){e&&i.isInstanceOf("Blob",e)?(t=e,r=i.createObjectURL(t)):(r=t,n&&n.crossOrigin&&(o.crossOrigin=n.crossOrigin)),o.src=r}),n),o):i.isInstanceOf("Blob",t)||i.isInstanceOf("File",t)?(r=o._objectURL=i.createObjectURL(t))?(o.src=r,o):i.readFile(t,(function(t){var n=t.target;n&&n.result?o.src=n.result:e&&e(t)})):void 0}var s=o.createObjectURL&&o||o.URL&&URL.revokeObjectURL&&URL||o.webkitURL&&webkitURL;function a(t,e){!t._objectURL||e&&e.noRevoke||(i.revokeObjectURL(t._objectURL),delete t._objectURL)}i.fetchBlob=function(t,e){e()},i.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},i.transform=function(t,e,n,r,o){n(t,o)},i.onerror=function(t,e,n,r,o){a(t,o),r&&r.call(t,e)},i.onload=function(t,e,n,r,o){a(t,o),r&&i.transform(t,o,r,n,{originalWidth:t.naturalWidth||t.width,originalHeight:t.naturalHeight||t.height})},i.createObjectURL=function(t){return!!s&&s.createObjectURL(t)},i.revokeObjectURL=function(t){return!!s&&s.revokeObjectURL(t)},i.readFile=function(t,e,n){if(o.FileReader){var r=new FileReader;if(r.onload=r.onerror=e,r[n=n||"readAsDataURL"])return r[n](t),r}return!1},void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)}("undefined"!=typeof window&&window||this)},64:function(t,e,n){"use strict";n.d(e,"a",(function(){return be})),n.d(e,"b",(function(){return at})),n.d(e,"c",(function(){return xe})),n.d(e,"d",(function(){return we})),n.d(e,"e",(function(){return tt})),n.d(e,"f",(function(){return K})),n.d(e,"g",(function(){return Se})),n.d(e,"h",(function(){return ke})),n.d(e,"i",(function(){return Oe})),n.d(e,"j",(function(){return Y})),n.d(e,"k",(function(){return _e})),n.d(e,"l",(function(){return Ae}));var r=n(74),o=n(171),i=n(79),s=n(182),a=n(131),c=n(84);function l(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function u(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;var i=h(o);if(!i){var s=o.blockRange(),a=s&&Object(c.j)(s);return null!=a&&(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}var l=i.nodeBefore;if(!l.type.spec.isolating&&S(t,i,e))return!0;if(0==o.parent.content.size&&(d(l,"end")||r.c.isSelectable(l))){if(e){var u=t.tr.deleteRange(o.before(),o.after());u.setSelection(d(l,"end")?r.f.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):r.c.create(u.doc,i.pos-l.nodeSize)),e(u.scrollIntoView())}return!0}return!(!l.isAtom||i.depth!=o.depth-1)&&(e&&e(t.tr.delete(i.pos-l.nodeSize,i.pos).scrollIntoView()),!0)}function d(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function p(t,e,n){var o=t.selection,i=o.$head,s=i;if(!o.empty)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;s=h(i)}var a=s&&s.nodeBefore;return!(!a||!r.c.isSelectable(a))&&(e&&e(t.tr.setSelection(r.c.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)}function h(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function f(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size))return!1;var i=g(o);if(!i)return!1;var s=i.nodeAfter;if(S(t,i,e))return!0;if(0==o.parent.content.size&&(d(s,"start")||r.c.isSelectable(s))){if(e){var a=t.tr.deleteRange(o.before(),o.after());a.setSelection(d(s,"start")?r.f.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):r.c.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}return!(!s.isAtom||i.depth!=o.depth-1)&&(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0)}function m(t,e,n){var o=t.selection,i=o.$head,s=i;if(!o.empty)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;s=g(i)}var a=s&&s.nodeAfter;return!(!a||!r.c.isSelectable(a))&&(e&&e(t.tr.setSelection(r.c.create(t.doc,s.pos)).scrollIntoView()),!0)}function g(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function v(t,e){var n=t.selection,r=n.$from,o=n.$to,i=r.blockRange(o),s=i&&Object(c.j)(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)}function y(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function b(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function w(t,e){var n=t.selection,o=n.$head,i=n.$anchor;if(!o.parent.type.spec.code||!o.sameParent(i))return!1;var s=o.node(-1),a=o.indexAfter(-1),c=b(s.contentMatchAt(a));if(!s.canReplaceWith(a,a,c))return!1;if(e){var l=o.after(),u=t.tr.replaceWith(l,l,c.createAndFill());u.setSelection(r.f.near(u.doc.resolve(l),1)),e(u.scrollIntoView())}return!0}function x(t,e){var n=t.selection,o=n.$from,i=n.$to;if(n instanceof r.a||o.parent.inlineContent||i.parent.inlineContent)return!1;var s=b(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){var a=(!o.parentOffset&&i.index()<i.parent.childCount?o:i).pos,c=t.tr.insert(a,s.createAndFill());c.setSelection(r.g.create(c.doc,a+1)),e(c.scrollIntoView())}return!0}function _(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(Object(c.f)(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&Object(c.j)(o);return null!=i&&(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)}function k(t,e){var n=t.selection,o=n.$from,i=n.$to;if(t.selection instanceof r.c&&t.selection.node.isBlock)return!(!o.parentOffset||!Object(c.f)(t.doc,o.pos))&&(e&&e(t.tr.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;if(e){var s=i.parentOffset==i.parent.content.size,a=t.tr;(t.selection instanceof r.g||t.selection instanceof r.a)&&a.deleteSelection();var l=0==o.depth?null:b(o.node(-1).contentMatchAt(o.indexAfter(-1))),u=s&&l?[{type:l}]:null,d=Object(c.f)(a.doc,a.mapping.map(o.pos),1,u);if(u||d||!Object(c.f)(a.doc,a.mapping.map(o.pos),1,l&&[{type:l}])||(u=[{type:l}],d=!0),d&&(a.split(a.mapping.map(o.pos),1,u),!s&&!o.parentOffset&&o.parent.type!=l)){var p=a.mapping.map(o.before()),h=a.doc.resolve(p);o.node(-1).canReplaceWith(h.index(),h.index()+1,l)&&a.setNodeMarkup(a.mapping.map(o.before()),l)}e(a.scrollIntoView())}return!0}function O(t,e){return e&&e(t.tr.setSelection(new r.a(t.doc))),!0}function S(t,e,n){var o,s,a=e.nodeBefore,l=e.nodeAfter;if(a.type.spec.isolating||l.type.spec.isolating)return!1;if(function(t,e,n){var r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(i,i+1)||!o.isTextblock&&!Object(c.e)(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}(t,e,n))return!0;var u=e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(s=a.contentMatchAt(a.childCount)).findWrapping(l.type))&&s.matchType(o[0]||l.type).validEnd){if(n){for(var p=e.pos+l.nodeSize,h=i.c.empty,f=o.length-1;f>=0;f--)h=i.c.from(o[f].create(null,h));h=i.c.from(a.copy(h));var m=t.tr.step(new c.b(e.pos-1,p,e.pos,p,new i.j(h,1,0),o.length,!0)),g=p+2*o.length;Object(c.e)(m.doc,g)&&m.join(g),n(m.scrollIntoView())}return!0}var v=r.f.findFrom(e,1),y=v&&v.$from.blockRange(v.$to),b=y&&Object(c.j)(y);if(null!=b&&b>=e.depth)return n&&n(t.tr.lift(y,b).scrollIntoView()),!0;if(u&&l.isTextblock&&d(a,"end")){for(var w=a,x=[];x.push(w),!w.isTextblock;)w=w.lastChild;if(w.canReplace(w.childCount,w.childCount,l.content)){if(n){for(var _=i.c.empty,k=x.length-1;k>=0;k--)_=i.c.from(x[k].copy(_));n(t.tr.step(new c.b(e.pos-x.length,e.pos+l.nodeSize,e.pos+1,e.pos+l.nodeSize-1,new i.j(_,x.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function A(t,e){return function(n,r){var o=n.selection,i=o.$from,s=o.$to,a=i.blockRange(s),l=a&&Object(c.h)(a,t,e);return!!l&&(r&&r(n.tr.wrap(a,l).scrollIntoView()),!0)}}function E(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var T=E(l,u,p),M=E(l,f,m),N={Enter:E(y,x,_,k),"Mod-Enter":w,Backspace:T,"Mod-Backspace":T,Delete:M,"Mod-Delete":M,"Mod-a":O},C={"Ctrl-h":N.Backspace,"Alt-Backspace":N["Mod-Backspace"],"Ctrl-d":N.Delete,"Ctrl-Alt-Backspace":N["Mod-Delete"],"Alt-Delete":N["Mod-Delete"],"Alt-d":N["Mod-Delete"]};for(var I in N)C[I]=N[I];"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();function D(t,e){return function(n,r){var o=n.selection,s=o.$from,a=o.$to,l=s.blockRange(a),u=!1,d=l;if(!l)return!1;if(l.depth>=2&&s.node(l.depth-1).type.compatibleContent(t)&&0==l.startIndex){if(0==s.index(l.depth-1))return!1;var p=n.doc.resolve(l.start-2);d=new i.g(p,p,l.depth),l.endIndex<l.parent.childCount&&(l=new i.g(s,n.doc.resolve(a.end(l.depth)),l.depth)),u=!0}var h=Object(c.h)(d,t,e,l);return!!h&&(r&&r(function(t,e,n,r,o){for(var s=i.c.empty,a=n.length-1;a>=0;a--)s=i.c.from(n[a].type.create(n[a].attrs,s));t.step(new c.b(e.start-(r?2:0),e.end,e.start,e.end,new i.j(s,0,0),n.length,!0));for(var l=0,u=0;u<n.length;u++)n[u].type==o&&(l=u+1);for(var d=n.length-l,p=e.start+n.length-(r?2:0),h=e.parent,f=e.startIndex,m=e.endIndex,g=!0;f<m;f++,g=!1)!g&&Object(c.f)(t.doc,p,d)&&(t.split(p,d),p+=2*d),p+=h.child(f).nodeSize;return t}(n.tr,l,h,u,t).scrollIntoView()),!0)}}function j(t){return function(e,n){var r=e.selection,o=r.$from,s=r.$to,a=o.blockRange(s,(function(e){return e.childCount&&e.firstChild.type==t}));return!!a&&(!n||(o.node(a.depth-1).type==t?function(t,e,n,r){var o=t.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(o.step(new c.b(s-1,a,s,a,new i.j(i.c.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new i.g(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));return e(o.lift(r,Object(c.j)(r)).scrollIntoView()),!0}(e,n,t,a):function(t,e,n){for(var r=t.tr,o=n.parent,s=n.end,a=n.endIndex-1,l=n.startIndex;a>l;a--)s-=o.child(a).nodeSize,r.delete(s-1,s+1);var u=r.doc.resolve(n.start),d=u.nodeAfter,p=0==n.startIndex,h=n.endIndex==o.childCount,f=u.node(-1),m=u.index(-1);if(!f.canReplace(m+(p?0:1),m+1,d.content.append(h?i.c.empty:i.c.from(o))))return!1;var g=u.pos,v=g+d.nodeSize;return r.step(new c.b(g-(p?1:0),v+(h?1:0),g+1,v-1,new i.j((p?i.c.empty:i.c.from(o.copy(i.c.empty))).append(h?i.c.empty:i.c.from(o.copy(i.c.empty))),p?0:1,h?0:1),p?0:1)),e(r.scrollIntoView()),!0}(e,n,a)))}}function L(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function P(t,e){if("string"==typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function R(t,e){const n=P(e,t.schema),{from:r,to:o}=t.selection;let i=[];t.doc.nodesBetween(r,o,t=>{i=[...i,t]});const s=i.reverse().find(t=>t.type.name===n.name);return s?{...s.attrs}:{}}function B(t,e){if("string"==typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function z(t,e){const n=B(e,t.schema),{from:r,to:o,empty:i}=t.selection;let s=[];i?s=t.selection.$head.marks():t.doc.nodesBetween(r,o,t=>{s=[...s,...t.marks]});const a=s.find(t=>t.type.name===n.name);return a?{...a.attrs}:{}}function F(t,e){const n=Object.keys(e);return!n.length||!!n.filter(n=>e[n]===t[n]).length}function $(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?P(e,t.schema):null;let a=[];if(t.doc.nodesBetween(r,o,(t,e)=>{if(!t.isText){const n=Math.max(r,e),i=Math.min(o,e+t.nodeSize);a=[...a,{node:t,from:n,to:i}]}}),i)return!!a.filter(t=>!s||s.name===t.node.type.name).find(t=>F(t.node.attrs,n));const c=o-r;return a.filter(t=>!s||s.name===t.node.type.name).filter(t=>F(t.node.attrs,n)).reduce((t,e)=>t+(e.to-e.from),0)>=c}function V(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?B(e,t.schema):null;if(i)return!!(t.storedMarks||t.selection.$from.marks()).filter(t=>!s||s.name===t.type.name).find(t=>F(t.attrs,n));let a=0,c=[];if(t.doc.nodesBetween(r,o,(t,e)=>{if(t.isText){const n=Math.max(r,e),i=Math.min(o,e+t.nodeSize);a+=i-n,c=[...c,...t.marks.map(t=>({mark:t,from:n,to:i}))]}}),0===a)return!1;const l=c.filter(t=>!s||s.name===t.mark.type.name).filter(t=>F(t.mark.attrs,n)).reduce((t,e)=>t+(e.to-e.from),0),u=c.filter(t=>!s||t.mark.type!==s&&t.mark.type.excludes(s)).reduce((t,e)=>t+(e.to-e.from),0);return(l>0?l+u:l)>=a}function H(t){const e=`<body>${t}</body>`;return(new window.DOMParser).parseFromString(e,"text/html").body}function U(t,e,n){if(n={slice:!0,parseOptions:{},...n},"object"==typeof t&&null!==t)try{return Array.isArray(t)?i.c.fromArray(t.map(t=>e.nodeFromJSON(t))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),U("",e,n)}if("string"==typeof t){const r=i.a.fromSchema(e);return n.slice?r.parseSlice(H(t),n.parseOptions).content:r.parse(H(t),n.parseOptions)}return U("",e,n)}function q(t,e,n={}){return U(t,e,{slice:!1,parseOptions:n})}function W(t,e){const n=i.b.fromSchema(e).serializeFragment(t.content),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}class G{constructor(t,e){this.editor=t,this.commands=e}createCommands(){const{commands:t,editor:e}=this,{state:n,view:r}=e,{tr:o}=n,i=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([t,e])=>[t,(...t)=>{const n=e(...t)(i);return o.getMeta("preventDispatch")||r.dispatch(o),n}]))}createChain(t,e=!0){const{commands:n,editor:r}=this,{state:o,view:i}=r,s=[],a=!!t,c=t||o.tr,l={...Object.fromEntries(Object.entries(n).map(([t,n])=>[t,(...t)=>{const r=this.buildProps(c,e),o=n(...t)(r);return s.push(o),l}])),run:()=>(a||!e||c.getMeta("preventDispatch")||i.dispatch(c),s.every(t=>!0===t))};return l}createCan(t){const{commands:e,editor:n}=this,{state:r}=n,o=t||r.tr,i=this.buildProps(o,void 0);return{...Object.fromEntries(Object.entries(e).map(([t,e])=>[t,(...t)=>e(...t)({...i,dispatch:void 0})])),chain:()=>this.createChain(o,void 0)}}buildProps(t,e=!0){const{editor:n,commands:r}=this,{state:o,view:i}=n;o.storedMarks&&t.setStoredMarks(o.storedMarks);const s={tr:t,editor:n,view:i,state:this.chainableState(t,o),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([t,e])=>[t,(...t)=>e(...t)(s)]))}};return s}chainableState(t,e){let{selection:n}=t,{doc:r}=t,{storedMarks:o}=t;return{...e,schema:e.schema,plugins:e.plugins,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return n},get doc(){return r},get tr(){return n=t.selection,r=t.doc,o=t.storedMarks,t}}}}function K(t,e,n={}){if(void 0===t.config[e]&&t.parent)return K(t.parent,e,n);if("function"==typeof t.config[e]){return t.config[e].bind({...n,parent:t.parent?K(t.parent,e,n):null})}return t.config[e]}function J(t){return{baseExtensions:t.filter(t=>"extension"===t.type),nodeExtensions:t.filter(t=>"node"===t.type),markExtensions:t.filter(t=>"mark"===t.type)}}function Q(t){const e=[],{nodeExtensions:n,markExtensions:r}=J(t),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return t.forEach(t=>{const n=K(t,"addGlobalAttributes",{name:t.name,options:t.options});if(!n)return;n().forEach(t=>{t.types.forEach(n=>{Object.entries(t.attributes).forEach(([t,r])=>{e.push({type:n,name:t,attribute:{...i,...r}})})})})}),o.forEach(t=>{const n={name:t.name,options:t.options},r=K(t,"addAttributes",n);if(!r)return;const o=r();Object.entries(o).forEach(([n,r])=>{e.push({type:t.name,name:n,attribute:{...i,...r}})})}),e}function Y(...t){return t.filter(t=>!!t).reduce((t,e)=>{const n={...t};return Object.entries(e).forEach(([t,e])=>{n[t]?n[t]="class"===t?[n[t],e].join(" "):"style"===t?[n[t],e].join("; "):e:n[t]=e}),n},{})}function X(t,e){return e.filter(t=>t.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:{[e.name]:t.attrs[e.name]}).reduce((t,e)=>Y(t,e),{})}function Z(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===r)return!1;const o=e.filter(t=>t.attribute.rendered).reduce((t,e)=>{const r=e.attribute.parseHTML?e.attribute.parseHTML(n)||{}:{[e.name]:(o=n.getAttribute(e.name),"string"!=typeof o?o:o.match(/^\d*(\.\d+)?$/)?Number(o):"true"===o||"false"!==o&&o)};var o;return{...t,...Object.fromEntries(Object.entries(r).filter(([,t])=>null!=t))}},{});return{...r,...o}}}}function tt(t,e,...n){return"function"==typeof t?e?t.bind(e)(...n):t(...n):t}function et(t){return Object.fromEntries(Object.entries(t).filter(([t,e])=>("attrs"!==t||!function(t={}){return 0===Object.keys(t).length&&t.constructor===Object}(e))&&null!=e))}function nt(t){var e;const n=Q(t),{nodeExtensions:r,markExtensions:o}=J(t),s=null===(e=r.find(t=>K(t,"topNode")))||void 0===e?void 0:e.name,a=Object.fromEntries(r.map(e=>{const r=n.filter(t=>t.type===e.name),o={name:e.name,options:e.options},i=et({...t.reduce((t,n)=>{const r=K(n,"extendNodeSchema",o);return{...t,...r?r(e):{}}},{}),content:tt(K(e,"content",o)),marks:tt(K(e,"marks",o)),group:tt(K(e,"group",o)),inline:tt(K(e,"inline",o)),atom:tt(K(e,"atom",o)),selectable:tt(K(e,"selectable",o)),draggable:tt(K(e,"draggable",o)),code:tt(K(e,"code",o)),defining:tt(K(e,"defining",o)),isolating:tt(K(e,"isolating",o)),attrs:Object.fromEntries(r.map(t=>{var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]}))}),s=tt(K(e,"parseHTML",o));s&&(i.parseDOM=s.map(t=>Z(t,r)));const a=K(e,"renderHTML",o);return a&&(i.toDOM=t=>a({node:t,HTMLAttributes:X(t,r)})),[e.name,i]})),c=Object.fromEntries(o.map(e=>{const r=n.filter(t=>t.type===e.name),o={name:e.name,options:e.options},i=et({...t.reduce((t,n)=>{const r=K(n,"extendMarkSchema",o);return{...t,...r?r(e):{}}},{}),inclusive:tt(K(e,"inclusive",o)),excludes:tt(K(e,"excludes",o)),group:tt(K(e,"group",o)),spanning:tt(K(e,"spanning",o)),attrs:Object.fromEntries(r.map(t=>{var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]}))}),s=tt(K(e,"parseHTML",o));s&&(i.parseDOM=s.map(t=>Z(t,r)));const a=K(e,"renderHTML",o);return a&&(i.toDOM=t=>a({mark:t,HTMLAttributes:X(t,r)})),[e.name,i]}));return new i.i({topNode:s,nodes:a,marks:c})}function rt(t,e){return e.nodes[t]?e.nodes[t]:e.marks[t]?e.marks[t]:null}class ot{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=ot.resolve(t),this.schema=nt(this.extensions),this.extensions.forEach(t=>{var e;const n={name:t.name,options:t.options,editor:this.editor,type:rt(t.name,this.schema)};if("mark"===t.type){(null===(e=tt(K(t,"keepOnSplit",n)))||void 0===e||e)&&this.splittableMarks.push(t.name)}const r=K(t,"onBeforeCreate",n);r&&this.editor.on("beforeCreate",r);const o=K(t,"onCreate",n);o&&this.editor.on("create",o);const i=K(t,"onUpdate",n);i&&this.editor.on("update",i);const s=K(t,"onSelectionUpdate",n);s&&this.editor.on("selectionUpdate",s);const a=K(t,"onTransaction",n);a&&this.editor.on("transaction",a);const c=K(t,"onFocus",n);c&&this.editor.on("focus",c);const l=K(t,"onBlur",n);l&&this.editor.on("blur",l);const u=K(t,"onDestroy",n);u&&this.editor.on("destroy",u)})}static resolve(t){return ot.sort(ot.flatten(t))}static flatten(t){return t.map(t=>{const e=K(t,"addExtensions",{name:t.name,options:t.options});return e?[t,...this.flatten(e())]:t}).flat(10)}static sort(t){return t.sort((t,e)=>{const n=K(t,"priority")||100,r=K(e,"priority")||100;return n>r?-1:n<r?1:0})}get commands(){return this.extensions.reduce((t,e)=>{const n=K(e,"addCommands",{name:e.name,options:e.options,editor:this.editor,type:rt(e.name,this.schema)});return n?{...t,...n()}:t},{})}get plugins(){return[...this.extensions].reverse().map(t=>{const e={name:t.name,options:t.options,editor:this.editor,type:rt(t.name,this.schema)},n=[],r=K(t,"addKeyboardShortcuts",e);if(r){const t=Object.fromEntries(Object.entries(r()).map(([t,e])=>[t,()=>e({editor:this.editor})])),e=Object(s.b)(t);n.push(e)}const o=K(t,"addInputRules",e);if(this.editor.options.enableInputRules&&o){const t=o(),e=t.length?[Object(a.b)({rules:t})]:[];n.push(...e)}const i=K(t,"addPasteRules",e);if(this.editor.options.enablePasteRules&&i){const t=i();n.push(...t)}const c=K(t,"addProseMirrorPlugins",e);if(c){const t=c();n.push(...t)}return n}).flat()}get attributes(){return Q(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=J(this.extensions);return Object.fromEntries(e.filter(t=>!!K(t,"addNodeView")).map(e=>{const n=this.attributes.filter(t=>t.type===e.name),r={name:e.name,options:e.options,editor:t,type:P(e.name,this.schema)},o=K(e,"addNodeView",r);if(!o)return[];return[e.name,(r,i,s,a)=>{const c=X(r,n);return o()({editor:t,node:r,getPos:s,decorations:a,HTMLAttributes:c,extension:e})}]}))}get textSerializers(){const{editor:t}=this,{nodeExtensions:e}=J(this.extensions);return Object.fromEntries(e.filter(t=>!!K(t,"renderText")).map(e=>{const n=K(e,"renderText",{name:e.name,options:e.options,editor:t,type:P(e.name,this.schema)});if(!n)return[];return[e.name,t=>n(t)]}))}}function it(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function st(t,e){const n={...t};return it(t)&&it(e)&&Object.keys(e).forEach(r=>{it(e[r])?r in t?n[r]=st(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class at{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,this.options=this.config.defaultOptions}static create(t={}){return new at(t)}configure(t={}){const e=this.extend();return e.options=st(this.options,t),e}extend(t={}){const e=new at(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,e.options=t.defaultOptions?t.defaultOptions:e.parent.options,e}}const ct=at.create({name:"editable",addProseMirrorPlugins(){return[new r.d({key:new r.e("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{from:e,to:n}=t.state.selection;return((t,e,n,r,o)=>{let i="",s=!0;return t.state.doc.nodesBetween(e,n,(a,c)=>{var l;const u=t.extensionManager.textSerializers[a.type.name];u?(i+=u({node:a}),s=!r):a.isText?(i+=null===(l=null==a?void 0:a.text)||void 0===l?void 0:l.slice(Math.max(e,c)-c,n-c),s=!r):a.isLeaf&&o?(i+=o,s=!r):!s&&a.isBlock&&(i+=r,s=!0)},0),i})(t,e,n,"\n")}}})]}});var lt=Object.freeze({__proto__:null,blur:()=>({view:t})=>(t.dom.blur(),!0)});var ut=Object.freeze({__proto__:null,clearContent:(t=!1)=>({commands:e})=>e.setContent("",t)});var dt=Object.freeze({__proto__:null,clearNodes:()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return o.forEach(r=>{t.doc.nodesBetween(r.$from.pos,r.$to.pos,(t,r)=>{if(t.type.isText)return;const o=e.doc.resolve(e.mapping.map(r)),i=e.doc.resolve(e.mapping.map(r+t.nodeSize)),s=o.blockRange(i);if(!s)return;const a=Object(c.j)(s);if(t.type.isTextblock&&n){const{defaultType:t}=o.parent.contentMatchAt(o.index());e.setNodeMarkup(s.start,t)}(a||0===a)&&n&&e.lift(s,a)})}),!0}});var pt=Object.freeze({__proto__:null,command:t=>e=>t(e)});var ht=Object.freeze({__proto__:null,createParagraphNear:()=>({state:t,dispatch:e})=>x(t,e)});var ft=Object.freeze({__proto__:null,deleteRange:t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0}});var mt=Object.freeze({__proto__:null,deleteSelection:()=>({state:t,dispatch:e})=>l(t,e)});var gt=Object.freeze({__proto__:null,enter:()=>({commands:t})=>t.keyboardShortcut("Enter")});var vt=Object.freeze({__proto__:null,exitCode:()=>({state:t,dispatch:e})=>w(t,e)});function yt(t,e,n={}){return t.find(t=>t.type===e&&F(t.attrs,n))}function bt(t,e,n={}){return!!yt(t,e,n)}function wt(t,e,n={}){if(!t||!e)return;const r=t.parent.childAfter(t.parentOffset);if(!r.node)return;const o=yt(r.node.marks,e,n);if(!o)return;let i=t.index(),s=t.start()+r.offset,a=i+1,c=s+r.node.nodeSize;for(yt(r.node.marks,e,n);i>0&&o.isInSet(t.parent.child(i-1).marks);)i-=1,s-=t.parent.child(i).nodeSize;for(;a<t.parent.childCount&&bt(t.parent.child(a).marks,e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:c}}var xt=Object.freeze({__proto__:null,extendMarkRange:(t,e={})=>({tr:n,state:o,dispatch:i})=>{const s=B(t,o.schema),{doc:a,selection:c}=n,{$from:l,from:u,to:d}=c;if(i){const t=wt(l,s,e);if(t&&t.from<=u&&t.to>=d){const e=r.g.create(a,t.from,t.to);n.setSelection(e)}}return!0}});var _t=Object.freeze({__proto__:null,first:t=>e=>{const n="function"==typeof t?t(e):t;for(let t=0;t<n.length;t+=1)if(n[t](e))return!0;return!1}});function kt(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Ot(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!function(t){var e;return"class"===(null===(e=t.constructor)||void 0===e?void 0:e.toString().substring(0,5))}(t)}var St=Object.freeze({__proto__:null,focus:(t=null)=>({editor:e,view:n,tr:o,dispatch:i})=>{if(n.hasFocus()&&null===t||!1===t)return!0;if(i&&null===t&&!(Ot(s=e.state.selection)&&s instanceof r.g))return n.focus(),!0;var s;const{from:a,to:c}=function(t,e=null){if(!e)return null;if("start"===e||!0===e)return{from:0,to:0};if("end"===e){const{size:e}=t.doc.content;return{from:e,to:e}}return{from:e,to:e}}(e.state,t)||e.state.selection,{doc:l,storedMarks:u}=o,d=kt(a,0,l.content.size),p=kt(c,0,l.content.size),h=r.g.create(l,d,p),f=e.state.selection.eq(h);return i&&(o.setSelection(h),f&&u&&o.setStoredMarks(u),n.focus()),!0}});var At=Object.freeze({__proto__:null,forEach:(t,e)=>n=>t.every((t,r)=>e(t,{...n,index:r}))});var Et=Object.freeze({__proto__:null,insertContent:t=>({tr:e,commands:n})=>n.insertContentAt({from:e.selection.from,to:e.selection.to},t)});var Tt=Object.freeze({__proto__:null,insertContentAt:(t,e)=>({tr:n,dispatch:o,editor:i})=>{if(o){const o=U(e,i.schema,{parseOptions:{preserveWhitespace:"full"}});if("<>"===o.toString())return!0;const{from:s,to:a}="number"==typeof t?{from:t,to:t}:t;n.replaceWith(s,a,o),function(t,e,n){const o=t.steps.length-1;if(o<e)return;const i=t.steps[o];if(!(i instanceof c.c||i instanceof c.b))return;const s=t.mapping.maps[o];let a=0;s.forEach((t,e,n,r)=>{0===a&&(a=r)}),t.setSelection(r.f.near(t.doc.resolve(a),n))}(n,n.steps.length-1,1)}return!0}});var Mt=Object.freeze({__proto__:null,joinBackward:()=>({state:t,dispatch:e})=>u(t,e)});var Nt=Object.freeze({__proto__:null,joinForward:()=>({state:t,dispatch:e})=>f(t,e)});const Ct="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);var It=Object.freeze({__proto__:null,keyboardShortcut:t=>({editor:e,view:n,tr:r,dispatch:o})=>{const i=function(t){const e=t.split(/-(?!$)/);let n,r,o,i,s=e[e.length-1];"Space"===s&&(s=" ");for(let t=0;t<e.length-1;t+=1){const s=e[t];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))n=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else if(/^s(hift)?$/i.test(s))o=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);Ct?i=!0:r=!0}}return n&&(s="Alt-"+s),r&&(s="Ctrl-"+s),i&&(s="Meta-"+s),o&&(s="Shift-"+s),s}(t).split(/-(?!$)/),s=i.find(t=>!["Alt","Ctrl","Meta","Shift"].includes(t)),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",t=>t(n,a))});return null==c||c.steps.forEach(t=>{const e=t.map(r.mapping);e&&o&&r.maybeStep(e)}),!0}});var Dt=Object.freeze({__proto__:null,lift:(t,e={})=>({state:n,dispatch:r})=>!!$(n,P(t,n.schema),e)&&v(n,r)});var jt=Object.freeze({__proto__:null,liftEmptyBlock:()=>({state:t,dispatch:e})=>_(t,e)});var Lt=Object.freeze({__proto__:null,liftListItem:t=>({state:e,dispatch:n})=>j(P(t,e.schema))(e,n)});var Pt=Object.freeze({__proto__:null,newlineInCode:()=>({state:t,dispatch:e})=>y(t,e)});var Rt=Object.freeze({__proto__:null,replace:(t,e={})=>({state:n,commands:r})=>{console.warn("[tiptap warn]: replace() is deprecated. please use insertContent() instead.");const{from:o,to:i}=n.selection,s={from:o,to:i};return r.replaceRange(s,t,e)}});var Bt=Object.freeze({__proto__:null,replaceRange:(t,e,n={})=>({tr:r,state:o,dispatch:i})=>{console.warn("[tiptap warn]: replaceRange() is deprecated. please use insertContent() instead.");const s=P(e,o.schema),{from:a,to:c}=t;return i&&r.replaceRangeWith(a,c,s.create(n)),!0}});function zt(t,e){const n="string"==typeof e?[e]:e;return Object.keys(t).reduce((e,r)=>(n.includes(r)||(e[r]=t[r]),e),{})}var Ft=Object.freeze({__proto__:null,resetAttributes:(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=L("string"==typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(i=P(t,r.schema)),"mark"===a&&(s=B(t,r.schema)),o&&n.selection.ranges.forEach(t=>{r.doc.nodesBetween(t.$from.pos,t.$to.pos,(t,r)=>{i&&i===t.type&&n.setNodeMarkup(r,void 0,zt(t.attrs,e)),s&&t.marks.length&&t.marks.forEach(o=>{s===o.type&&n.addMark(r,r+t.nodeSize,s.create(zt(o.attrs,e)))})})}),!0)}});var $t=Object.freeze({__proto__:null,scrollIntoView:()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0)});var Vt=Object.freeze({__proto__:null,selectAll:()=>({state:t,dispatch:e})=>O(t,e)});var Ht=Object.freeze({__proto__:null,selectNodeBackward:()=>({state:t,dispatch:e})=>p(t,e)});var Ut=Object.freeze({__proto__:null,selectNodeForward:()=>({state:t,dispatch:e})=>m(t,e)});var qt=Object.freeze({__proto__:null,selectParentNode:()=>({state:t,dispatch:e})=>function(t,e){var n,o=t.selection,i=o.$from,s=o.to,a=i.sharedDepth(s);return 0!=a&&(n=i.before(a),e&&e(t.tr.setSelection(r.c.create(t.doc,n))),!0)}(t,e)});var Wt=Object.freeze({__proto__:null,setContent:(t,e=!1,n={})=>({tr:o,editor:i,dispatch:s})=>{const{doc:a}=o,c=q(t,i.schema,n),l=r.g.create(a,0,a.content.size);return s&&o.setSelection(l).replaceSelectionWith(c,!1).setMeta("preventUpdate",!e),!0}});var Gt=Object.freeze({__proto__:null,setMark:(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,c=B(t,r.schema);if(o)if(s){const t=z(r,c);n.addStoredMark(c.create({...t,...e}))}else a.forEach(t=>{const o=t.$from.pos,i=t.$to.pos;r.doc.nodesBetween(o,i,(t,r)=>{const s=Math.max(r,o),a=Math.min(r+t.nodeSize,i);t.marks.find(t=>t.type===c)?t.marks.forEach(t=>{c===t.type&&n.addMark(s,a,c.create({...t.attrs,...e}))}):n.addMark(s,a,c.create(e))})});return!0}});var Kt=Object.freeze({__proto__:null,setMeta:(t,e)=>({tr:n})=>(n.setMeta(t,e),!0)});var Jt=Object.freeze({__proto__:null,setNode:(t,e={})=>({state:n,dispatch:r})=>{const o=P(t,n.schema);return(i=o,s=e,function(t,e){var n=t.selection,r=n.from,o=n.to,a=!1;return t.doc.nodesBetween(r,o,(function(e,n){if(a)return!1;if(e.isTextblock&&!e.hasMarkup(i,s))if(e.type==i)a=!0;else{var r=t.doc.resolve(n),o=r.index();a=r.parent.canReplaceWith(o,o+1,i)}})),!!a&&(e&&e(t.tr.setBlockType(r,o,i,s).scrollIntoView()),!0)})(n,r);var i,s}});var Qt=Object.freeze({__proto__:null,setNodeSelection:t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,o=kt(t,0,n.content.size),i=r.c.create(n,o);e.setSelection(i)}return!0}});var Yt=Object.freeze({__proto__:null,setTextSelection:t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,{from:o,to:i}="number"==typeof t?{from:t,to:t}:t,s=kt(o,0,n.content.size),a=kt(i,0,n.content.size),c=r.g.create(n,s,a);e.setSelection(c)}return!0}});var Xt=Object.freeze({__proto__:null,sinkListItem:t=>({state:e,dispatch:n})=>{const r=P(t,e.schema);return(o=r,function(t,e){var n=t.selection,r=n.$from,s=n.$to,a=r.blockRange(s,(function(t){return t.childCount&&t.firstChild.type==o}));if(!a)return!1;var l=a.startIndex;if(0==l)return!1;var u=a.parent,d=u.child(l-1);if(d.type!=o)return!1;if(e){var p=d.lastChild&&d.lastChild.type==u.type,h=i.c.from(p?o.create():null),f=new i.j(i.c.from(o.create(null,i.c.from(u.type.create(null,h)))),p?3:1,0),m=a.start,g=a.end;e(t.tr.step(new c.b(m-(p?3:1),g,m,g,f,1,!0)).scrollIntoView())}return!0})(e,n);var o}});function Zt(t,e,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{const r=t.find(t=>t.type===e&&t.name===n);return!!r&&r.attribute.keepOnSplit}))}function te(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(t=>null==e?void 0:e.includes(t.type.name));t.tr.ensureMarks(r)}}var ee=Object.freeze({__proto__:null,splitBlock:({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:o,editor:i})=>{const{selection:s,doc:a}=e,{$from:l,$to:u}=s,d=Zt(i.extensionManager.attributes,l.node().type.name,l.node().attrs);if(s instanceof r.c&&s.node.isBlock)return!(!l.parentOffset||!Object(c.f)(a,l.pos))&&(o&&(t&&te(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;if(o){const o=u.parentOffset===u.parent.content.size;s instanceof r.g&&e.deleteSelection();const a=0===l.depth?void 0:function(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=o&&a?[{type:a,attrs:d}]:void 0,h=Object(c.f)(e.doc,e.mapping.map(l.pos),1,p);if(p||h||!Object(c.f)(e.doc,e.mapping.map(l.pos),1,a?[{type:a}]:void 0)||(h=!0,p=a?[{type:a,attrs:d}]:void 0),h&&(e.split(e.mapping.map(l.pos),1,p),a&&!o&&!l.parentOffset&&l.parent.type!==a)){const t=e.mapping.map(l.before()),n=e.doc.resolve(t);l.node(-1).canReplaceWith(n.index(),n.index()+1,a)&&e.setNodeMarkup(e.mapping.map(l.before()),a)}t&&te(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0}});var ne=Object.freeze({__proto__:null,splitListItem:t=>({tr:e,state:n,dispatch:o,editor:s})=>{var a;const l=P(t,n.schema),{$from:u,$to:d}=n.selection,p=n.selection.node;if(p&&p.isBlock||u.depth<2||!u.sameParent(d))return!1;const h=u.node(-1);if(h.type!==l)return!1;const f=s.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(o){let t=i.c.empty;const n=u.index(-1)>0;for(let e=u.depth-(n?1:2);e>=u.depth-3;e-=1)t=i.c.from(u.node(e).copy(t));const o=Zt(f,u.node().type.name,u.node().attrs),s=(null===(a=l.contentMatch.defaultType)||void 0===a?void 0:a.createAndFill(o))||void 0;t=t.append(i.c.from(l.createAndFill(null,s)||void 0)),e.replace(u.before(n?void 0:-1),u.after(-3),new i.j(t,n?3:2,2)).setSelection(r.g.near(e.doc.resolve(u.pos+(n?3:2)))).scrollIntoView()}return!0}const m=d.pos===u.end()?h.contentMatchAt(0).defaultType:null,g=Zt(f,h.type.name,h.attrs),v=Zt(f,u.node().type.name,u.node().attrs);e.delete(u.pos,d.pos);const y=m?[{type:l,attrs:g},{type:m,attrs:v}]:[{type:l,attrs:g}];return!!Object(c.f)(e.doc,u.pos,2)&&(o&&e.split(u.pos,2,y).scrollIntoView(),!0)}});function re(t,e){const{nodeExtensions:n}=J(e),r=n.find(e=>e.name===t);if(!r)return!1;const o=tt(K(r,"group",{name:r.name,options:r.options}));return"string"==typeof o&&o.split(" ").includes("list")}var oe=Object.freeze({__proto__:null,toggleList:(t,e)=>({editor:n,tr:r,state:o,dispatch:i,chain:s,commands:a,can:c})=>{const{extensions:l}=n.extensionManager,u=P(t,o.schema),d=P(e,o.schema),{selection:p}=o,{$from:h,$to:f}=p,m=h.blockRange(f);if(!m)return!1;const g=(v=t=>re(t.type.name,l),t=>function(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}(t.$from,v))(p);var v;if(m.depth>=1&&g&&m.depth-g.depth<=1){if(g.node.type===u)return a.liftListItem(d);if(re(g.node.type.name,l)&&u.validContent(g.node.content)&&i)return r.setNodeMarkup(g.pos,u),!0}return c().wrapInList(u)?a.wrapInList(u):s().clearNodes().wrapInList(u).run()}});var ie=Object.freeze({__proto__:null,toggleMark:(t,e={})=>({state:n,commands:r})=>{const o=B(t,n.schema);return V(n,o,e)?r.unsetMark(o):r.setMark(o,e)}});var se=Object.freeze({__proto__:null,toggleNode:(t,e,n={})=>({state:r,commands:o})=>{const i=P(t,r.schema),s=P(e,r.schema);return $(r,i,n)?o.setNode(s):o.setNode(i,n)}});var ae=Object.freeze({__proto__:null,toggleWrap:(t,e={})=>({state:n,dispatch:r})=>{const o=P(t,n.schema);return $(n,o,e)?v(n,r):A(o,e)(n,r)}});var ce=Object.freeze({__proto__:null,undoInputRule:()=>({state:t,dispatch:e})=>Object(a.d)(t,e)});var le=Object.freeze({__proto__:null,unsetAllMarks:()=>({tr:t,state:e,dispatch:n})=>{const{selection:r}=t,{empty:o,ranges:i}=r;return o||n&&Object.entries(e.schema.marks).forEach(([,e])=>{i.forEach(n=>{t.removeMark(n.$from.pos,n.$to.pos,e)})}),!0}});var ue=Object.freeze({__proto__:null,unsetMark:t=>({tr:e,state:n,dispatch:r})=>{const{selection:o}=e,i=B(t,n.schema),{$from:s,empty:a,ranges:c}=o;if(r){if(a){let{from:t,to:n}=o;const r=wt(s,i);r&&(t=r.from,n=r.to),e.removeMark(t,n,i)}else c.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos,i)});e.removeStoredMark(i)}return!0}});var de=Object.freeze({__proto__:null,updateAttributes:(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=L("string"==typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(i=P(t,r.schema)),"mark"===a&&(s=B(t,r.schema)),o&&n.selection.ranges.forEach(t=>{const o=t.$from.pos,a=t.$to.pos;r.doc.nodesBetween(o,a,(t,r)=>{i&&i===t.type&&n.setNodeMarkup(r,void 0,{...t.attrs,...e}),s&&t.marks.length&&t.marks.forEach(i=>{if(s===i.type){const c=Math.max(r,o),l=Math.min(r+t.nodeSize,a);n.addMark(c,l,s.create({...i.attrs,...e}))}})})}),!0)}});var pe=Object.freeze({__proto__:null,wrapIn:(t,e={})=>({state:n,dispatch:r})=>{const o=P(t,n.schema);return!$(n,o,e)&&A(o,e)(n,r)}});var he=Object.freeze({__proto__:null,wrapInList:(t,e={})=>({state:n,dispatch:r})=>D(P(t,n.schema),e)(n,r)});const fe=at.create({name:"commands",addCommands:()=>({...lt,...ut,...dt,...pt,...ht,...ft,...mt,...gt,...vt,...xt,..._t,...St,...At,...Et,...Tt,...Mt,...Nt,...It,...Dt,...jt,...Lt,...Pt,...Rt,...Bt,...Ft,...$t,...Vt,...Ht,...Ut,...qt,...Wt,...Gt,...Kt,...Jt,...Qt,...Yt,...Xt,...ee,...ne,...oe,...ie,...se,...ae,...ce,...le,...ue,...de,...pe,...he})}),me=at.create({name:"editable",addProseMirrorPlugins(){return[new r.d({key:new r.e("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ge=at.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new r.d({key:new r.e("focusEvents"),props:{attributes:{tabindex:"0"},handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),ve=at.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:t})=>[()=>t.undoInputRule(),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:t})=>[()=>t.deleteSelection(),()=>t.joinForward(),()=>t.selectNodeForward()]);return{Enter:()=>this.editor.commands.first(({commands:t})=>[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:()=>t(),"Mod-Backspace":()=>t(),Delete:()=>e(),"Mod-Delete":()=>e()}}});var ye=Object.freeze({__proto__:null,ClipboardTextSerializer:ct,Commands:fe,Editable:me,FocusEvents:ge,Keymap:ve});class be extends class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(t=>t.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(t=>t!==e):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}{constructor(t={}){super(),this.isFocused=!1,this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get commands(){return this.commandManager.createCommands()}chain(){return this.commandManager.createChain()}can(){return this.commandManager.createCan()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(t){const e=document.querySelector("style[data-tiptap-style]");if(null!==e)return e;const n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(n),n}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}'))}setOptions(t={}){this.options={...this.options,...t}}setEditable(t){this.setOptions({editable:t}),this.view&&this.state&&!this.isDestroyed&&this.view.updateState(this.state)}get isEditable(){return this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n="function"==typeof e?e(t,this.state.plugins):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(t){if(this.isDestroyed)return;const e="string"==typeof t?t+"$":t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(t=>!t.key.startsWith(e))});this.view.updateState(n)}createExtensionManager(){const t=[...Object.entries(ye).map(([,t])=>t),...this.options.extensions].filter(t=>["extension","node","mark"].includes(null==t?void 0:t.type));this.extensionManager=new ot(t,this)}createCommandManager(){this.commandManager=new G(this,this.extensionManager.commands)}createSchema(){this.schema=this.extensionManager.schema}createView(){this.view=new o.c(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:r.b.create({doc:q(this.options.content,this.schema,this.options.parseOptions)})});const t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.createNodeViews();this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach(t=>{var e;return null===(e=this.capturedTransaction)||void 0===e?void 0:e.step(t)}):void(this.capturedTransaction=t);const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this});const r=t.getMeta("focus"),o=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event}),o&&this.emit("blur",{editor:this,event:o.event}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return function(t,e){const n=L("string"==typeof e?e:e.name,t.schema);return"node"===n?R(t,e):"mark"===n?z(t,e):{}}(this.state,t)}getNodeAttributes(t){return console.warn("[tiptap warn]: editor.getNodeAttributes() is deprecated. please use editor.getAttributes() instead."),R(this.state,t)}getMarkAttributes(t){return console.warn("[tiptap warn]: editor.getMarkAttributes() is deprecated. please use editor.getAttributes() instead."),z(this.state,t)}isActive(t,e){const n="string"==typeof t?t:null,r="string"==typeof t?e:t;return function(t,e,n={}){if(!e)return $(t,null,n)||V(t,null,n);const r=L(e,t.schema);return"node"===r?$(t,e,n):"mark"===r&&V(t,e,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return W(this.state.doc,this.schema)}get isEmpty(){return function(t){var e;const n=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){var t;this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners(),(t=this.css)&&t.parentNode&&t.parentNode.removeChild(t)}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}class we{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,this.options=this.config.defaultOptions}static create(t={}){return new we(t)}configure(t={}){const e=this.extend();return e.options=st(this.options,t),e}extend(t={}){const e=new we(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,e.options=t.defaultOptions?t.defaultOptions:e.parent.options,e}}class xe{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,this.options=this.config.defaultOptions}static create(t={}){return new xe(t)}configure(t={}){const e=this.extend();return e.options=st(this.options,t),e}extend(t={}){const e=new xe(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,e.options=t.defaultOptions?t.defaultOptions:e.parent.options,e}}function _e(t,e,n){return new a.a(t,(t,r,o,i)=>{const s=n instanceof Function?n(r):n,{tr:a}=t;return r[0]&&a.replaceWith(o-1,i,e.create(s)),a})}function ke(t,e,n){return new a.a(t,(t,r,o,i)=>{const s=n instanceof Function?n(r):n,{tr:a}=t,c=r[r.length-1],l=r[0];let u=i;if(c){const n=l.search(/\S/),r=o+l.indexOf(c),d=r+c.length;if(function(t,e,n){let r=[];return n.doc.nodesBetween(t,e,(t,e)=>{r=[...r,...t.marks.map(n=>({from:e,to:e+t.nodeSize,mark:n}))]}),r}(o,i,t).filter(t=>{const{excluded:n}=t.mark.type;return n.find(t=>t.name===e.name)}).filter(t=>t.to>r).length)return null;d<i&&a.delete(d,i),r>o&&a.delete(o+n,r),u=o+n+c.length,a.addMark(o+n,u,e.create(s)),a.removeStoredMark(e)}return a})}function Oe(t,e,n){const o=(r,s)=>{const a=[];return r.forEach(r=>{if(r.isText&&r.text){const{text:o}=r;let i,c=0;for(;null!==(i=t.exec(o));){const t=Math.max(i.length-2,0),o=Math.max(i.length-1,0);if(null==s?void 0:s.type.allowsMarkType(e)){const s=i.index+i[0].indexOf(i[t]),l=s+i[t].length,u=s+i[t].lastIndexOf(i[o]),d=u+i[o].length,p=n instanceof Function?n(i):n;s>0&&a.push(r.cut(c,s)),a.push(r.cut(u,d).mark(e.create(p).addToSet(r.marks))),c=l}}c<o.length&&a.push(r.cut(c))}else a.push(r.copy(o(r.content,r)))}),i.c.fromArray(a)};return new r.d({key:new r.e("markPasteRule"),props:{transformPasted:t=>new i.j(o(t.content),t.openStart,t.openEnd)}})}function Se(t){return Ot(t)&&t instanceof r.c}function Ae(t,e,n){const r=t.coordsAtPos(e),o=t.coordsAtPos(n,-1),i=Math.min(r.top,o.top),s=Math.max(r.bottom,o.bottom),a=Math.min(r.left,o.left),c=Math.max(r.right,o.right),l={top:i,bottom:s,left:a,right:c,width:c-a,height:s-i,x:a,y:i};return{...l,toJSON:()=>l}}},65:function(t,e,n){"use strict";n.r(e),n.d(e,"SingleLineBlot",(function(){return a}));var r=n(61),o=n(67),i=n(62),s=n.n(i);class a extends r.c{replace(t){t.children.forEach(t=>{t instanceof o.BreakBlot&&t.replaceWith(s.a.create("text"," "))}),super.replace(t)}insertAt(t,e,n){void 0!==n&&"textBreak"==e?super.insertAt(t,"\n"):super.insertAt(t,e,n)}}},66:function(t,e,n){"use strict";n.r(e),n.d(e,"T",(function(){return i})),n.d(e,"draftSave",(function(){return s})),n.d(e,"getPageContent",(function(){return a})),n.d(e,"isEdit",(function(){return c})),n.d(e,"updateEditableText",(function(){return l})),n.d(e,"sanitize",(function(){return d})),n.d(e,"uploadDataToBlob",(function(){return p})),n.d(e,"showError",(function(){return h})),n.d(e,"updateEditable",(function(){return f})),n.d(e,"transliterate",(function(){return m})),n.d(e,"storageDelete",(function(){return g})),n.d(e,"draftClear",(function(){return v}));var r=n(89),o=n.n(r);let i={apiUrl:"https://inscriptum.js.org",datetime:0,pageId:0};function s(t,e){if(!t)return!1;if(!i.pageId){var n=a(!0,e);if(t!=n)return t=n,function(t,e){try{return localStorage.setItem(t,e),!!localStorage.getItem(t)}catch(t){return!1}}("draft",n)}return!1}function a(t,e){let n=e.scroll.domNode;n.querySelectorAll("textarea,input").forEach(t=>{t.setAttribute("data-value",t.value)});let r=n.cloneNode(!0);n.querySelectorAll("textarea,input").forEach(t=>{t.removeAttribute("data-value")}),r.querySelectorAll("textarea,input").forEach(t=>{t.value=t.getAttribute("data-value")||"",t.removeAttribute("data-value")}),l(r,!1);r.querySelectorAll("[contenteditable]").forEach(t=>t.removeAttribute("contenteditable"));r.querySelectorAll("[data-placeholder]").forEach(t=>t.removeAttribute("data-placeholder"));r.querySelectorAll("[data-label]").forEach(t=>t.removeAttribute("data-label"));r.querySelectorAll("[data-title]").forEach(t=>t.removeAttribute("data-title"));r.querySelectorAll(".editable_text").forEach(t=>t.classList.remove("editable_text"));r.querySelectorAll(".focus").forEach(t=>t.classList.remove("focus"));r.querySelectorAll(".empty").forEach(t=>t.classList.remove("empty"));r.querySelectorAll('[class=""]').forEach(t=>t.removeAttribute("class"));r.querySelectorAll(".file_progress").forEach(t=>t.remove());if(r.querySelectorAll(".cursor_wrapper").forEach(t=>t.remove()),!t){const t=r.querySelector("h1,address");t&&t.remove();const e=r.querySelector("br.inline");return e&&e.replaceWith("\n"),{data:JSON.stringify(u(r).children),length:r.innerHTML.length}}return r.querySelectorAll("h1").forEach(t=>{t.querySelector("br")||t.append(document.createElement("br"))}),r.querySelectorAll("address").forEach(t=>{t.querySelector("br")||t.append(document.createElement("br"))}),r.innerHTML}function c(){return document.getElementsByClassName("tl_article_edit").length>0}function l(t,e){void 0===e&&(e=c()),e?t.querySelectorAll(".editable_text").forEach(t=>{let e=!1;if(t.childNodes.forEach(t=>{!e&&t&&t.classList&&(e=t.classList.contains("editable_input"))}),!e){let e=t.textContent||"",n=document.createElement("textarea");n.classList.add("editable_input"),n.setAttribute("tabindex","-1"),n.setAttribute("rows","1"),n.value=e,e||t.classList.add("empty"),t.innerHTML="",t.append(n),o()(n)}}):t.querySelectorAll(".editable_text > .editable_input").forEach(t=>{let e=t.value,n=t.parentNode;n.innerHTML="",n.textContent=e})}function u(t){if(!t.tagName)return t.data;let e={tag:t.tagName.toLowerCase()};if(t.attributes.length){e.attrs={};for(var n=0;n<t.attributes.length;n++){let r=t.attributes[n];e.attrs[r.name]=r.value}}if(t.childNodes.length){e.children=[];for(n=0;n<t.childNodes.length;n++)e.children.push(u(t.childNodes[n]))}return e}function d(t,e){let n=document.createElement("a");n.href=t;let r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}function p(t){for(var e=atob(t.base64_data),n=[],r=0;r<e.length;r++)n.push(e.charCodeAt(r));return new Blob([new Uint8Array(n)],{type:t.type})}function h(t){let e=document.querySelector("#_error_msg");e.textContent=t,clearTimeout(e.to),e.classList.add("shown"),e.to=setTimeout(()=>{e.classList.remove("shown")},3e3)}function f(t,e,n,r,o,i){if(r&&r.classList.toggle("tl_article_edit",t),l(document.body),e&&(e.enable(t),t&&e.focus()),!t&&o&&i){const t=o.querySelector("h1"),r=t?t.textContent:"",s=o.querySelector("address"),a=s?s.textContent:"",c=o.querySelector("address a"),l=c&&c.getAttribute("href");i.querySelector("h1").textContent=r,i.querySelector("address a").textContent=a,l?i.querySelector("address a").setAttribute("href",l):i.querySelector("address a").removeAttribute("href"),n.hideFormatTooltip(e),n.hideBlocksTooltip()}}function m(t,e=!1){const n="щ   ш  ч  ц  ю  я  ё  ж  ъ  ы  э  а б в г д е з и й к л м н о п р с т у ф х ь".split(/ +/g),r="shh sh ch cz yu ya yo zh `` y' e` a b v g d e z i j k l m n o p r s t u f x `".split(/ +/g);for(let o=0;o<n.length;o++)t=(t=t.split(e?r[o]:n[o]).join(e?n[o]:r[o])).split(e?r[o].toUpperCase():n[o].toUpperCase()).join(e?n[o].toUpperCase():r[o].toUpperCase());return t}function g(t){try{return localStorage.removeItem(t),!0}catch(t){return!1}}function v(){g("draft")}!function(){var t=document.querySelector("time");if(t&&i.datetime){var e=new Date(1e3*i.datetime);let n="January February March April May June July August September October November December".split(" ")[e.getMonth()],r=e.getDate();t.textContent=n+" "+(10>r?"0":"")+r+", "+e.getFullYear()}}()},67:function(t,e,n){"use strict";n.r(e),n.d(e,"BreakBlot",(function(){return i}));var r=n(60),o=n(61);class i extends o.a{}i.blotName="textBreak",i.tagName="br",i.className="inline",r.a.register(i)},69:function(t,e,n){"use strict";n.r(e),n.d(e,"FieldBlot",(function(){return o}));var r=n(65);class o extends r.SingleLineBlot{}},74:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return S})),n.d(e,"e",(function(){return T})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return l}));var r=n(79),o=n(84),i=Object.create(null),s=function(t,e,n){this.ranges=n||[new c(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(t,e){void 0===e&&(e=r.j.empty);for(var n=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=n,n=n.lastChild;for(var s=t.steps.length,a=this.ranges,c=0;c<a.length;c++){var l=a[c],u=l.$from,d=l.$to,p=t.mapping.slice(s);t.replaceRange(p.map(u.pos),p.map(d.pos),c?r.j.empty:e),0==c&&g(t,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}},s.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=t.mapping.slice(n),l=c.map(s.pos),u=c.map(a.pos);o?t.deleteRange(l,u):(t.replaceRangeWith(l,u,e),g(t,n,e.isInline?-1:1))}},s.findFrom=function(t,e,n){var r=t.parent.inlineContent?new l(t):m(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?m(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):m(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},s.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new h(t.node(0))},s.atStart=function(t){return m(t,t,0,0,1)||new h(t)},s.atEnd=function(t){return m(t,t,t.content.size,t.childCount,-1)||new h(t)},s.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},s.jsonID=function(t,e){if(t in i)throw new RangeError("Duplicate use of selection JSON ID "+t);return i[t]=e,e.prototype.jsonID=t,e},s.prototype.getBookmark=function(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function(t,e){this.$from=t,this.$to=e},l=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=r.j.empty),t.prototype.replace.call(this,e,n),n==r.j.empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new u(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!s)return t.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i||(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new e(n,r)},Object.defineProperties(e.prototype,n),e}(s);s.jsonID("text",l);var u=function(t,e){this.anchor=t,this.head=e};u.prototype.map=function(t){return new u(t.map(this.anchor),t.map(this.head))},u.prototype.resolve=function(t){return l.between(t.resolve(this.anchor),t.resolve(this.head))};var d=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?t.near(a):new e(a)},e.prototype.content=function(){return new r.j(r.c.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new p(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(s);d.prototype.visible=!1,s.jsonID("node",d);var p=function(t){this.anchor=t};p.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new u(r,r):new p(r)},p.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&d.isSelectable(n)?new d(e):s.near(e)};var h=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=r.j.empty),n==r.j.empty){e.delete(0,e.doc.content.size);var o=t.atStart(e.doc);o.eq(e.selection)||e.setSelection(o)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return f},e}(s);s.jsonID("all",h);var f={map:function(){return this},resolve:function(t){return new h(t)}};function m(t,e,n,r,o,i){if(e.inlineContent)return l.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&d.isSelectable(a))return d.create(t,n-(o<0?a.nodeSize:0))}else{var c=m(t,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function g(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i,a=t.steps[r];if(a instanceof o.c||a instanceof o.b)t.mapping.maps[r].forEach((function(t,e,n,r){null==i&&(i=r)})),t.setSelection(s.near(t.doc.resolve(i),n))}}var v=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return r.d.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.d.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(o.d);function y(t,e){return e&&t?t.bind(e):t}var b=function(t,e,n){this.name=t,this.init=y(e.init,n),this.apply=y(e.apply,n)},w=[new b("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new b("selection",{init:function(t,e){return t.selection||s.atStart(e.doc)},apply:function(t){return t.selection}}),new b("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new b("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],x=function(t,e){var n=this;this.schema=t,this.fields=w.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new b(t.key,t.spec.state,t))}))},_=function(t){this.config=t},k={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};k.schema.get=function(){return this.config.schema},k.plugins.get=function(){return this.config.plugins},_.prototype.apply=function(t){return this.applyTransaction(t).state},_.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},_.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,l=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",t),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:e.length}:{state:this,n:0})}e.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},_.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new _(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<O.length;i++)O[i](this,t,e);return e},k.tr.get=function(){return new v(this)},_.create=function(t){for(var e=new x(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new _(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},_.prototype.reconfigure=function(t){for(var e=new x(this.schema,t.plugins),n=e.fields,r=new _(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},_.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},_.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new x(t.schema,t.plugins),i=new _(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=r.f.fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=s.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],l=c.spec.state;if(c.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(e,a))return void(i[o.name]=l.fromJSON.call(c,t,e[a],i))}i[o.name]=o.init(t,i)}})),i},_.addApplyListener=function(t){O.push(t)},_.removeApplyListener=function(t){var e=O.indexOf(t);e>-1&&O.splice(e,1)},Object.defineProperties(_.prototype,k);var O=[];var S=function(t){this.props={},t.props&&function t(e,n,r){for(var o in e){var i=e[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=t(i,n,{})),r[o]=i}return r}(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:E("plugin")};S.prototype.getState=function(t){return t[this.key]};var A=Object.create(null);function E(t){return t in A?t+"$"+ ++A[t]:(A[t]=0,t+"$")}var T=function(t){void 0===t&&(t="key"),this.key=E(t)};T.prototype.get=function(t){return t.config.pluginsByKey[this.key]},T.prototype.getState=function(t){return t[this.key]}},79:function(t,e,n){"use strict";function r(t){this.content=t}n.d(e,"a",(function(){return tt})),n.d(e,"b",(function(){return dt})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return Y})),n.d(e,"f",(function(){return M})),n.d(e,"g",(function(){return A})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return X})),n.d(e,"j",(function(){return p})),r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),s=o.content.slice();return-1==i?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),s=o.find(t);return i.splice(-1==s?i.length:s,0,e,n),new r(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=r.from(t)).size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=r.from(t)).size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var o=r;var i=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},s={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};i.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},i.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},i.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},i.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new i(r,this.size+t.size)},i.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,s=0;s<e;o++){var a=this.content[o],c=s+a.nodeSize;c>t&&((s<t||c>e)&&(a=a.isText?a.cut(Math.max(0,t-s),Math.min(a.text.length,e-s)):a.cut(Math.max(0,t-s-1),Math.min(a.content.size,e-s-1))),n.push(a),r+=a.nodeSize),s=c}return new i(n,r)},i.prototype.cutByIndex=function(t,e){return t==e?i.empty:0==t&&e==this.content.length?this:new i(this.content.slice(t,e))},i.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new i(r,o)},i.prototype.addToStart=function(t){return new i([t].concat(this.content),this.size+t.nodeSize)},i.prototype.addToEnd=function(t){return new i(this.content.concat(t),this.size+t.nodeSize)},i.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},s.firstChild.get=function(){return this.content.length?this.content[0]:null},s.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},s.childCount.get=function(){return this.content.length},i.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},i.prototype.maybeChild=function(t){return this.content[t]},i.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},i.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),function t(e,n,r){for(var o=0;;o++){if(o==e.childCount||o==n.childCount)return e.childCount==n.childCount?null:r;var i=e.child(o),s=n.child(o);if(i!=s){if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)r++;return r}if(i.content.size||s.content.size){var c=t(i.content,s.content,r+1);if(null!=c)return c}r+=i.nodeSize}else r+=i.nodeSize}}(this,t,e)},i.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),function t(e,n,r,o){for(var i=e.childCount,s=n.childCount;;){if(0==i||0==s)return i==s?null:{a:r,b:o};var a=e.child(--i),c=n.child(--s),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:r,b:o};if(a.isText&&a.text!=c.text){for(var u=0,d=Math.min(a.text.length,c.text.length);u<d&&a.text[a.text.length-u-1]==c.text[c.text.length-u-1];)u++,r--,o--;return{a:r,b:o}}if(a.content.size||c.content.size){var p=t(a.content,c.content,r-1,o-1);if(p)return p}r-=l,o-=l}else r-=l,o-=l}}(this,t,e,n)},i.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return c(0,t);if(t==this.size)return c(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?c(n+1,o):c(n,r);r=o}},i.prototype.toString=function(){return"<"+this.toStringInner()+">"},i.prototype.toStringInner=function(){return this.content.join(", ")},i.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},i.fromJSON=function(t,e){if(!e)return i.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(e.map(t.nodeFromJSON))},i.fromArray=function(t){if(!t.length)return i.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new i(e||t,n)},i.from=function(t){if(!t)return i.empty;if(t instanceof i)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new i([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(i.prototype,s);var a={index:0,offset:0};function c(t,e){return a.index=t,a.offset=e,a}function l(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!l(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!l(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}i.empty=new i([],0);var u=function(t,e){this.type=t,this.attrs=e};function d(t){var e=Error.call(this,t);return e.__proto__=d.prototype,e}u.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},u.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},u.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},u.prototype.eq=function(t){return this==t||this.type==t.type&&l(this.attrs,t.attrs)},u.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},u.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},u.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},u.setFrom=function(t){if(!t||0==t.length)return u.none;if(t instanceof u)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},u.none=[],d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="ReplaceError";var p=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},h={size:{configurable:!0}};function f(t,e,n){if(n.openStart>t.depth)throw new d("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new d("Inconsistent open depths");return function t(e,n,r,o){var s=e.index(o),a=e.node(o);if(s==n.index(o)&&o<e.depth-r.openStart){var c=t(e,n,r,o+1);return a.copy(a.content.replaceChild(s,c))}if(r.content.size){if(r.openStart||r.openEnd||e.depth!=o||n.depth!=o){var l=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(i.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(r,e),u=l.start,d=l.end;return b(a,function t(e,n,r,o,s){var a=e.depth>s&&g(e,n,s+1),c=o.depth>s&&g(r,o,s+1),l=[];y(null,e,s,l),a&&c&&n.index(s)==r.index(s)?(m(a,c),v(b(a,t(e,n,r,o,s+1)),l)):(a&&v(b(a,w(e,n,s+1)),l),y(n,r,s,l),c&&v(b(c,w(r,o,s+1)),l));return y(o,null,s,l),new i(l)}(e,u,d,n,o))}var p=e.parent,h=p.content;return b(p,h.cut(0,e.parentOffset).append(r.content).append(h.cut(n.parentOffset)))}return b(a,w(e,n,o))}(t,e,n,0)}function m(t,e){if(!e.type.compatibleContent(t.type))throw new d("Cannot join "+e.type.name+" onto "+t.type.name)}function g(t,e,n){var r=t.node(n);return m(r,e.node(n)),r}function v(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function y(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(v(t.nodeAfter,r),i++));for(var a=i;a<s;a++)v(o.child(a),r);e&&e.depth==n&&e.textOffset&&v(e.nodeBefore,r)}function b(t,e){if(!t.type.validContent(e))throw new d("Invalid content for node "+t.type.name);return t.copy(e)}function w(t,e,n){var r=[];(y(null,t,n,r),t.depth>n)&&v(b(g(t,e,n+1),w(t,e,n+1)),r);return y(e,null,n,r),new i(r)}h.size.get=function(){return this.content.size-this.openStart-this.openEnd},p.prototype.insertAt=function(t,e){var n=function t(e,n,r,o){var i=e.findIndex(n),s=i.index,a=i.offset,c=e.maybeChild(s);if(a==n||c.isText)return o&&!o.canReplace(s,s,r)?null:e.cut(0,n).append(r).append(e.cut(n));var l=t(c.content,n-a-1,r);return l&&e.replaceChild(s,c.copy(l))}(this.content,t+this.openStart,e,null);return n&&new p(n,this.openStart,this.openEnd)},p.prototype.removeBetween=function(t,e){return new p(function t(e,n,r){var o=e.findIndex(n),i=o.index,s=o.offset,a=e.maybeChild(i),c=e.findIndex(r),l=c.index,u=c.offset;if(s==n||a.isText){if(u!=r&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,n).append(e.cut(r))}if(i!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(i,a.copy(t(a.content,n-s-1,r-s-1)))}(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},p.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},p.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},p.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},p.fromJSON=function(t,e){if(!e)return p.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new p(i.fromJSON(t,e.content),n,r)},p.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new p(t,n,r)},Object.defineProperties(p.prototype,h),p.empty=new p(i.empty,0,0);var x=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},_={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};x.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},_.parent.get=function(){return this.node(this.depth)},_.doc.get=function(){return this.node(0)},x.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},x.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},x.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},x.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},x.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},x.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},x.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},_.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},_.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},_.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},x.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},x.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return u.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},x.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},x.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},x.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new A(this,t,n)},x.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},x.prototype.max=function(t){return t.pos>this.pos?t:this},x.prototype.min=function(t){return t.pos<this.pos?t:this},x.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},x.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(n.push(i,a,r+c),!l)break;if((i=i.child(a)).isText)break;o=l-1,r+=c+1}return new x(e,n,o)},x.resolveCached=function(t,e){for(var n=0;n<k.length;n++){var r=k[n];if(r.pos==e&&r.doc==t)return r}var o=k[O]=x.resolve(t,e);return O=(O+1)%S,o},Object.defineProperties(x.prototype,_);var k=[],O=0,S=12,A=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},E={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};E.start.get=function(){return this.$from.before(this.depth+1)},E.end.get=function(){return this.$to.after(this.depth+1)},E.parent.get=function(){return this.$from.node(this.depth)},E.startIndex.get=function(){return this.$from.index(this.depth)},E.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(A.prototype,E);var T=Object.create(null),M=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||i.empty,this.marks=r||u.none},N={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};N.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},N.childCount.get=function(){return this.content.childCount},M.prototype.child=function(t){return this.content.child(t)},M.prototype.maybeChild=function(t){return this.content.maybeChild(t)},M.prototype.forEach=function(t){this.content.forEach(t)},M.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},M.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},N.textContent.get=function(){return this.textBetween(0,this.content.size,"")},M.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},N.firstChild.get=function(){return this.content.firstChild},N.lastChild.get=function(){return this.content.lastChild},M.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},M.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},M.prototype.hasMarkup=function(t,e,n){return this.type==t&&l(this.attrs,e||t.defaultAttrs||T)&&u.sameSet(this.marks,n||u.none)},M.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},M.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},M.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},M.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return p.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new p(a,r.depth-i,o.depth-i)},M.prototype.replace=function(t,e,n){return f(this.resolve(t),this.resolve(e),n)},M.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},M.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},M.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},M.prototype.resolve=function(t){return x.resolveCached(this,t)},M.prototype.resolveNoCache=function(t){return x.resolve(this,t)},M.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},N.isBlock.get=function(){return this.type.isBlock},N.isTextblock.get=function(){return this.type.isTextblock},N.inlineContent.get=function(){return this.type.inlineContent},N.isInline.get=function(){return this.type.isInline},N.isText.get=function(){return this.type.isText},N.isLeaf.get=function(){return this.type.isLeaf},N.isAtom.get=function(){return this.type.isAtom},M.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),I(this.marks,t)},M.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},M.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=i.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var s=this.contentMatchAt(t).matchFragment(n,r,o),a=s&&s.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var c=r;c<o;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0},M.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},M.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},M.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=u.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!u.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},M.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},M.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=i.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(M.prototype,N);var C=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):I(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(M);function I(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var D=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},j={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};D.parse=function(t,e){var n=new L(t,e);if(null==n.next)return D.empty;var r=R(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];H(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new D(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(V);i.next.push(o[s],e[a.join(",")]||n(a))}return i}(H(t,0))}(function(t){var e=[[]];return o(function t(e,i){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(t(n,i))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=t(e.exprs[s],i);if(s==e.exprs.length-1)return a;o(a,i=n())}else{if("star"==e.type){var c=n();return r(i,c),o(t(e.expr,c),c),[r(c)]}if("plus"==e.type){var l=n();return o(t(e.expr,i),l),o(t(e.expr,l),l),[r(l)]}if("opt"==e.type)return[r(i)].concat(t(e.expr,i));if("range"==e.type){for(var u=i,d=0;d<e.min;d++){var p=n();o(t(e.expr,u),p),u=p}if(-1==e.max)o(t(e.expr,u),u);else for(var h=e.min;h<e.max;h++){var f=n();r(u,f),o(t(e.expr,u),f),u=f}return[r(u)]}if("name"==e.type)return[r(i,null,e.value)]}}(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},D.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},D.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},j.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},j.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},D.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},D.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(s,a){var c=s.matchFragment(t,n);if(c&&(!e||c.validEnd))return i.from(a.map((function(t){return t.createAndFill()})));for(var l=0;l<s.next.length;l+=2){var u=s.next[l],d=s.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(d)){r.push(d);var p=o(d,a.concat(u));if(p)return p}}}(this,[])},D.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},D.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},j.edgeCount.get=function(){return this.next.length>>1},D.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},D.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(D.prototype,j),D.empty=new D(!0);var L=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},P={next:{configurable:!0}};function R(t){var e=[];do{e.push(B(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function B(t){var e=[];do{e.push(z(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function z(t){for(var e=function(t){if(t.eat("(")){var e=R(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=$(t,e)}return e}function F(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function $(t,e){var n=F(t),r=n;return t.eat(",")&&(r="}"!=t.next?F(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function V(t,e){return e-t}function H(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort(V)}function U(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function q(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function W(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new J(t[n]);return e}P.next.get=function(){return this.tokens[this.pos]},L.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},L.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(L.prototype,P);var G=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=W(n.attrs),this.defaultAttrs=U(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},K={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};K.isInline.get=function(){return!this.isBlock},K.isTextblock.get=function(){return this.isBlock&&this.inlineContent},K.isLeaf.get=function(){return this.contentMatch==D.empty},K.isAtom.get=function(){return this.isLeaf||this.spec.atom},G.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},G.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},G.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:q(this.attrs,t)},G.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new M(this,this.computeAttrs(t),i.from(e),u.setFrom(n))},G.prototype.createChecked=function(t,e,n){if(e=i.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new M(this,this.computeAttrs(t),e,u.setFrom(n))},G.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=i.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(i.empty,!0);return o?new M(this,t,e.append(o),u.setFrom(n)):null},G.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},G.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},G.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},G.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:u.empty:t},G.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new G(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(G.prototype,K);var J=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},Q={isRequired:{configurable:!0}};Q.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(J.prototype,Q);var Y=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=W(r.attrs),this.rank=e,this.excluded=null;var o=U(this.attrs);this.instance=o&&new u(this,o)};Y.prototype.create=function(t){return!t&&this.instance?this.instance:new u(this,q(this.attrs,t))},Y.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new Y(t,r++,e,o)})),n},Y.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},Y.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},Y.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var X=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=o.from(t.nodes),this.spec.marks=o.from(t.marks),this.nodes=G.compile(this.spec.nodes,this),this.marks=Y.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=D.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?Z(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:Z(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Z(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}X.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof G))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},X.prototype.text=function(t,e){var n=this.nodes.text;return new C(n,n.defaultAttrs,t,u.setFrom(e))},X.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},X.prototype.nodeFromJSON=function(t){return M.fromJSON(this,t)},X.prototype.markFromJSON=function(t){return u.fromJSON(this,t)},X.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var tt=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};tt.prototype.parse=function(t,e){void 0===e&&(e={});var n=new st(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},tt.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new st(this,e,!0);return n.addAll(t,null,e.from,e.to),p.maxOpen(n.finish())},tt.prototype.matchTag=function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(ct(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},tt.prototype.matchStyle=function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var s=i.getAttrs(e);if(!1===s)continue;i.attrs=s}return i}}},tt.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=lt(t)),t.mark=e}))};for(var o in t.marks)r(o);var i;for(var s in t.nodes)i=void 0,(i=t.nodes[s].spec.parseDOM)&&i.forEach((function(t){n(t=lt(t)),t.node=s}));return e},tt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new tt(t,tt.schemaRules(t)))};var et={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},nt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},rt={ol:!0,ul:!0};function ot(t){return(t?1:0)|("full"===t?2:0)}var it=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=u.none,this.pendingMarks=r,this.stashMarks=[]};it.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(i.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},it.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=i.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},it.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},it.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):ut(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var st=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=ot(e.preserveWhitespace)|(n?4:0);r=o?new it(o.type,o.attrs,u.none,u.none,!0,e.topMatch||o.type.contentMatch,i):new it(n?null:t.schema.topNodeType,null,u.none,u.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},at={top:{configurable:!0},currentPos:{configurable:!0}};function ct(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function lt(t){var e={};for(var n in t)e[n]=t[n];return e}function ut(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],s=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,a=r.next;if(o==e)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}at.top.get=function(){return this.nodes[this.open]},st.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},st.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(2&n.options||(n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},st.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();rt.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&rt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:nt.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,s=this.top,a=this.needsBlock;if(et.hasOwnProperty(r))i=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,o,!1===o.consuming?n:null)},st.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},st.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},st.prototype.readStyles=function(t){var e=u.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e},st.prototype.addElementByRule=function(t,e,n){var r,o,i,s=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,r)}r&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},st.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&et.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},st.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},st.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},st.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},st.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:ot(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new it(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},st.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},st.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},st.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},at.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},st.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},st.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},st.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},st.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},st.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},st.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},st.prototype.addPendingMark=function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},st.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(st.prototype,at);var dt=function(t,e){this.nodes=t||{},this.marks=e||{}};function pt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ht(t){return t.document||window.document}dt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=ht(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var c=t.marks[s++],l=r.serializeMark(c,t.isInline,e);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(t,e))})),n},dt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=dt.renderSpec(ht(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},dt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},dt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&dt.renderSpec(ht(n),r(t,e))},dt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var d=c;d<e.length;d++){var p=e[d];if(0===p){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=dt.renderSpec(t,p,n),f=h.dom,m=h.contentDOM;if(s.appendChild(f),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},dt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new dt(this.nodesFromSchema(t),this.marksFromSchema(t)))},dt.nodesFromSchema=function(t){var e=pt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},dt.marksFromSchema=function(t){return pt(t.marks)}},80:function(t,e,n){var r,o,i;!function(s){"use strict";o=[n(63)],void 0===(i="function"==typeof(r=function(t){var e="undefined"!=typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);t.blobSlice=e&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},t.metaDataParsers={jpeg:{65505:[],65517:[]}},t.parseMetaData=function(e,n,r,o){o=o||{};var i=this,s=(r=r||{}).maxMetaDataSize||262144;!!("undefined"!=typeof DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&t.blobSlice)&&t.readFile(t.blobSlice.call(e,0,s),(function(e){if(e.target.error)return console.log(e.target.error),void n(o);var s,a,c,l,u=e.target.result,d=new DataView(u),p=2,h=d.byteLength-4,f=p;if(65496===d.getUint16(0)){for(;p<h&&((s=d.getUint16(p))>=65504&&s<=65519||65534===s);){if(p+(a=d.getUint16(p+2)+2)>d.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if((c=t.metaDataParsers.jpeg[s])&&!r.disableMetaDataParsers)for(l=0;l<c.length;l+=1)c[l].call(i,d,p,a,o,r);f=p+=a}!r.disableImageHead&&f>6&&(u.slice?o.imageHead=u.slice(0,f):o.imageHead=new Uint8Array(u).subarray(0,f))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(o)}),"readAsArrayBuffer")||n(o)},t.replaceHead=function(e,n,r){t.parseMetaData(e,(function(o){r(new Blob([n,t.blobSlice.call(e,o.imageHead.byteLength)],{type:"image/jpeg"}))}),{maxMetaDataSize:256,disableMetaDataParsers:!0})},t.hasMetaOption=function(t){return t&&t.meta};var n=t.transform;t.transform=function(e,r,o,i,s){t.hasMetaOption(r)?t.parseMetaData(i,(function(s){n.call(t,e,r,o,i,s)}),r,s):n.apply(t,arguments)}})?r.apply(e,o):r)||(t.exports=i)}()},82:function(t,e,n){"use strict";n.r(e),n.d(e,"uploadFileService",(function(){return r}));function r(t,e){return new Promise((n,r)=>{var o=new XMLHttpRequest,i=new FormData;o.open("POST","https://api.cloudinary.com/v1_1/inscriptum/upload",!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.upload.addEventListener("progress",(function(t){t.lengthComputable&&e&&e(t.loaded,t.total)})),e&&e(0,1),i.append("upload_preset","cz5pibn5"),i.append("tags","browser_upload"),i.append("file",t),o.send(i),o.onreadystatechange=t=>{if(4==o.readyState&&200==o.status){var e=JSON.parse(o.responseText);console.log(1111,e),e.src=e.secure_url,n(e)}},o.onerror=function(){r(new Error("Network Error"))}})}},83:function(t,e,n){"use strict";n.r(e),n.d(e,"HeaderBlot",(function(){return i}));var r=n(60),o=n(65);class i extends o.SingleLineBlot{optimize(t){super.optimize(t);let e=this.domNode.innerText;e=e.replace(/[\s_]+/g,"-"),e=e.replace(/(^-+|-+$)/g,""),this.domNode.id!==e&&this.domNode.setAttribute("id",e)}formatAt(t,e,n,r){("bold"!==n&&"italic"!==n&&"code"!==n||!r)&&super.formatAt(t,e,n,r)}}i.blotName="blockHeader",i.tagName="h3",r.a.register(i)},84:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return k})),n.d(e,"g",(function(){return E})),n.d(e,"h",(function(){return x})),n.d(e,"i",(function(){return A})),n.d(e,"j",(function(){return w}));var r=n(79),o=Math.pow(2,16);function i(t){return 65535&t}var s=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},a=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};a.prototype.recover=function(t){var e=0,n=i(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/o}(t)},a.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},a.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},a.prototype._map=function(t,e,n){for(var r=0,i=this.inverted?2:1,a=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var l=this.ranges[c]-(this.inverted?r:0);if(l>t)break;var u=this.ranges[c+i],d=this.ranges[c+a],p=l+u;if(t<=p){var h=l+r+((u?t==l?-1:t==p?1:e:e)<0?0:d);if(n)return h;var f=t==(e<0?l:p)?null:c/3+(t-l)*o;return new s(h,e<0?t!=l:t!=p,f)}r+=d-u}return n?t+r:new s(t+r)},a.prototype.touches=function(t,e){for(var n=0,r=i(e),o=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>t)break;var l=this.ranges[a+o];if(t<=c+l&&a==3*r)return!0;n+=this.ranges[a+s]-l}return!1},a.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),o+=l-c}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(t){return 0==t?a.empty:new a(t<0?[0,-t,0]:[0,0,t])},a.empty=new a([]);var c=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function l(t){var e=Error.call(this,t);return e.__proto__=l.prototype,e}c.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new c(this.maps,this.mirror,t,e)},c.prototype.copy=function(){return new c(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},c.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},c.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},c.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},c.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},c.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},c.prototype.invert=function(){var t=new c;return t.appendMappingInverted(this),t},c.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},c.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},c.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,t=this.maps[a].recover(i.recover);continue}}i.deleted&&(r=!0),t=i.pos}return n?t:new s(t,r)},l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="TransformError";var u=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new c},d={before:{configurable:!0},docChanged:{configurable:!0}};function p(){throw new Error("Override me")}d.before.get=function(){return this.docs.length?this.docs[0]:this.doc},u.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new l(e.failed);return this},u.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},d.docChanged.get=function(){return this.steps.length>0},u.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(u.prototype,d);var h=Object.create(null),f=function(){};f.prototype.apply=function(t){return p()},f.prototype.getMap=function(){return a.empty},f.prototype.invert=function(t){return p()},f.prototype.map=function(t){return p()},f.prototype.merge=function(t){return null},f.prototype.toJSON=function(){return p()},f.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=h[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},f.jsonID=function(t,e){if(t in h)throw new RangeError("Duplicate use of step JSON ID "+t);return h[t]=e,e.prototype.jsonID=t,e};var m=function(t,e){this.doc=t,this.failed=e};m.ok=function(t){return new m(t,null)},m.fail=function(t){return new m(null,t)},m.fromReplace=function(t,e,n,o){try{return m.ok(t.replace(e,n,o))}catch(t){if(t instanceof r.h)return m.fail(t.message);throw t}};var g=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&y(t,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?r.j.empty:new r.j(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var o=this.slice.size+t.slice.size==0?r.j.empty:new r.j(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,r.j.fromJSON(t,n.slice),!!n.structure)},e}(f);f.jsonID("replace",g);var v=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(y(t,this.from,this.gapFrom)||y(t,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return m.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?m.fromReplace(t,this.from,this.to,n):m.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,r.j.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(f);function y(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function b(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function w(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!b(r,o,i))break}}function x(t,e,n,r){void 0===r&&(r=t);var o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}(t,e),i=o&&function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:e).contentMatch,c=r;a&&c<o;c++)a=a.matchType(n.child(c).type);if(!a||!a.validEnd)return null;return s}(r,e);return i?o.map(_).concat({type:e,attrs:n}).concat(i.map(_)):null}function _(t){return{type:t,attrs:null}}function k(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var l=o.node(a),u=o.index(a);if(l.type.spec.isolating)return!1;var d=l.content.cutByIndex(u,l.childCount),p=r&&r[c]||l;if(p!=l&&(d=d.replaceChild(0,p.type.create(p.attrs))),!l.canReplace(u+1,l.childCount)||!p.type.validContent(d))return!1}var h=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(h,h,f?f.type:o.node(i+1).type)}function O(t,e){var n=t.resolve(e),r=n.index();return S(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function S(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function A(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),o=r.depth;;o--){var i=void 0,s=void 0,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&S(i,s)&&r.node(o).canReplace(a,a+1))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}}function E(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0),u=r.node(a),d=!1;if(1==s)d=u.canReplace(l,l,o);else{var p=u.contentMatchAt(l).findWrapping(o.firstChild.type);d=p&&u.canReplaceWith(l,l,p[0])}if(d)return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function T(t,e,n){for(var o=[],i=0;i<t.childCount;i++){var s=t.child(i);s.content.size&&(s=s.copy(T(s.content,e,s))),s.isInline&&(s=e(s,n,i)),o.push(s)}return r.c.fromArray(o)}f.jsonID("replaceAround",v),u.prototype.lift=function(t,e){for(var n=t.$from,o=t.$to,i=t.depth,s=n.before(i+1),a=o.after(i+1),c=s,l=a,u=r.c.empty,d=0,p=i,h=!1;p>e;p--)h||n.index(p)>0?(h=!0,u=r.c.from(n.node(p).copy(u)),d++):c--;for(var f=r.c.empty,m=0,g=i,y=!1;g>e;g--)y||o.after(g+1)<o.end(g)?(y=!0,f=r.c.from(o.node(g).copy(f)),m++):l++;return this.step(new v(c,l,s,a,new r.j(u.append(f),d,m),u.size-d,!0))},u.prototype.wrap=function(t,e){for(var n=r.c.empty,o=e.length-1;o>=0;o--)n=r.c.from(e[o].type.create(e[o].attrs,n));var i=t.start,s=t.end;return this.step(new v(i,s,i,s,new r.j(n,0,0),e.length,!0))},u.prototype.setBlockType=function(t,e,n,o){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,o)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(i.doc,i.mapping.slice(s).map(e),n)){i.clearIncompatible(i.mapping.slice(s).map(e,1),n);var a=i.mapping.slice(s),c=a.map(e,1),l=a.map(e+t.nodeSize,1);return i.step(new v(c,l,c+1,l-1,new r.j(r.c.from(n.create(o,null,t.marks)),0,0),1,!0)),!1}})),this},u.prototype.setNodeMarkup=function(t,e,n,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var s=e.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,s);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new v(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new r.j(r.c.from(s),0,0),1,!0))},u.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=r.c.empty,s=r.c.empty,a=o.depth,c=o.depth-e,l=e-1;a>c;a--,l--){i=r.c.from(o.node(a).copy(i));var u=n&&n[l];s=r.c.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}return this.step(new g(t,t,new r.j(i.append(s),e,e),!0))},u.prototype.join=function(t,e){void 0===e&&(e=1);var n=new g(t-e,t+e,r.j.empty,!0);return this.step(n)};var M=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),s=new r.j(T(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return m.fromReplace(t,this.from,this.to,s)},e.prototype.invert=function(){return new N(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(f);f.jsonID("addMark",M);var N=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new r.j(T(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return m.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new M(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(f);function C(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}f.jsonID("removeMark",N),u.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var d=Math.max(c,t),p=Math.min(c+r.nodeSize,e),h=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(h)||(s&&s.to==d&&s.mark.eq(u[f])?s.to=p:o.push(s=new N(d,p,u[f])));a&&a.to==d?a.to=p:i.push(a=new M(d,p,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},u.prototype.removeMark=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(t,e,(function(o,a){if(o.isInline){s++;var c=null;if(n instanceof r.e)for(var l,u=o.marks;l=n.isInSet(u);)(c||(c=[])).push(l),u=l.removeFromSet(u);else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length)for(var d=Math.min(a+o.nodeSize,e),p=0;p<c.length;p++){for(var h=c[p],f=void 0,m=0;m<i.length;m++){var g=i[m];g.step==s-1&&h.eq(i[m].style)&&(f=g)}f?(f.to=d,f.step=s):i.push({style:h,from:Math.max(a,t),to:d,step:s})}}})),i.forEach((function(t){return o.step(new N(t.from,t.to,t.style))})),this},u.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],s=t+1,a=0;a<o.childCount;a++){var c=o.child(a),l=s+c.nodeSize,u=n.matchType(c.type,c.attrs);if(u){n=u;for(var d=0;d<c.marks.length;d++)e.allowsMarkType(c.marks[d].type)||this.step(new N(s,l,c.marks[d]))}else i.push(new g(s,l,r.j.empty));s=l}if(!n.validEnd){var p=n.fillBefore(r.c.empty,!0);this.replace(s,s,new r.j(p,0,0))}for(var h=i.length-1;h>=0;h--)this.step(i[h]);return this},u.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=r.j.empty);var o=function(t,e,n,o){if(void 0===n&&(n=e),void 0===o&&(o=r.j.empty),e==n&&!o.size)return null;var i=t.resolve(e),s=t.resolve(n);return C(i,s,o)?new g(e,n,o):new I(i,s,o).fit()}(this.doc,t,e,n);return o&&this.step(o),this},u.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new r.j(r.c.from(n),0,0))},u.prototype.delete=function(t,e){return this.replace(t,e,r.j.empty)},u.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var I=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=r.c.empty;for(var s=t.depth;s>0;s--)this.placed=r.c.from(t.node(s).copy(this.placed))},D={depth:{configurable:!0}};function j(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(j(t.firstChild.content,e-1,n)))}function L(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(L(t.lastChild.content,e-1,n)))}function P(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function R(t,e,n){if(e<=0)return t;var o=t.content;return e>1&&(o=o.replaceChild(0,R(o.firstChild,e-1,1==o.childCount?n-1:0))),e>0&&(o=t.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(r.c.empty,!0)))),t.copy(o)}function B(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function z(t,e,n,o,i){if(e<n){var s=t.firstChild;t=t.replaceChild(0,s.copy(z(s.content,e+1,n,o,s)))}if(e>o){var a=i.contentMatchAt(0),c=a.fillBefore(t).append(t);t=c.append(a.matchFragment(c).fillBefore(r.c.empty,!0))}return t}function F(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}D.depth.get=function(){return this.frontier.length-1},I.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(e<0?this.$to:o.doc.resolve(e));if(!i)return null;for(var s=this.placed,a=o.depth,c=i.depth;a&&c&&1==s.childCount;)s=s.firstChild.content,a--,c--;var l=new r.j(s,a,c);return e>-1?new v(o.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||o.pos!=this.$to.pos?new g(o.pos,i.pos,l):void 0},I.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,o=(e?(n=P(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var s=this.frontier[i],a=s.type,c=s.match,l=void 0,u=void 0;if(1==t&&(o?c.matchType(o.type)||(u=c.fillBefore(r.c.from(o),!1)):a.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:i,parent:n,inject:u};if(2==t&&o&&(l=c.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:i,parent:n,wrap:l};if(n&&c.matchType(n.type))break}},I.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=P(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.j(e,n+1,Math.max(o,i.size+n>=e.size-o?n+1:0)),!0)},I.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=P(e,n);if(i.childCount<=1&&n>0){var s=e.size-n<=n+i.size;this.unplaced=new r.j(j(e,n-1,1),n-1,s?n-1:o)}else this.unplaced=new r.j(j(e,n,1),n,o)},I.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,o=t.parent,i=t.inject,s=t.wrap;this.depth>n;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,l=o?o.content:c.content,u=c.openStart-e,d=0,p=[],h=this.frontier[n],f=h.match,m=h.type;if(i){for(var g=0;g<i.childCount;g++)p.push(i.child(g));f=f.matchFragment(i)}for(var v=l.size+e-(c.content.size-c.openEnd);d<l.childCount;){var y=l.child(d),b=f.matchType(y.type);if(!b)break;(++d>1||0==u||y.content.size)&&(f=b,p.push(R(y.mark(m.allowedMarks(y.marks)),1==d?u:0,d==l.childCount?v:-1)))}var w=d==l.childCount;w||(v=-1),this.placed=L(this.placed,n,r.c.from(p)),this.frontier[n].match=f,w&&v<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var x=0,_=l;x<v;x++){var k=_.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),_=k.content}this.unplaced=w?0==e?r.j.empty:new r.j(j(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new r.j(j(c.content,e,d),c.openStart,c.openEnd)},I.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!B(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},I.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=B(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],l=c.match,u=B(t,a,c.type,l,!0);if(!u||u.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}},I.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=L(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},I.prototype.openFrontierNode=function(t,e,n){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=L(this.placed,this.depth,r.c.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},I.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(r.c.empty,!0);t.childCount&&(this.placed=L(this.placed,this.frontier.length,t))},Object.defineProperties(I.prototype,D),u.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(C(o,i,n))return this.step(new g(t,e,n));var s=F(o,this.doc.resolve(e));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var c=o.depth,l=o.pos-1;c>0;c--,l--){var u=o.node(c).type.spec;if(u.defining||u.isolating)break;s.indexOf(c)>-1?a=c:o.before(c)==l&&s.splice(1,0,-c)}for(var d=s.indexOf(a),p=[],h=n.openStart,f=n.content,m=0;;m++){var v=f.firstChild;if(p.push(v),m==n.openStart)break;f=v.content}h>0&&p[h-1].type.spec.defining&&o.node(d).type!=p[h-1].type?h-=1:h>=2&&p[h-1].isTextblock&&p[h-2].type.spec.defining&&o.node(d).type!=p[h-2].type&&(h-=2);for(var y=n.openStart;y>=0;y--){var b=(y+h+1)%(n.openStart+1),w=p[b];if(w)for(var x=0;x<s.length;x++){var _=s[(x+d)%s.length],k=!0;_<0&&(k=!1,_=-_);var O=o.node(_-1),S=o.index(_-1);if(O.canReplaceWith(S,S,w.type,w.marks))return this.replace(o.before(_),k?i.after(_):e,new r.j(z(n.content,0,n.openStart,b),b,n.openEnd))}}for(var A=this.steps.length,E=s.length-1;E>=0&&(this.replace(t,e,n),!(this.steps.length>A));E--){var T=s[E];T<0||(t=o.before(T),e=i.after(T))}return this},u.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,n.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new r.j(r.c.from(n),0,0))},u.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=F(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)}},89:function(t,e,n){var r,o,i;
/*!
	autosize 4.0.4
	license: MIT
	http://www.jacklmoore.com/autosize
*/o=[t,e],void 0===(i="function"==typeof(r=function(t,e){"use strict";var n,r,o="function"==typeof Map?new Map:(n=[],r=[],{has:function(t){return n.indexOf(t)>-1},get:function(t){return r[n.indexOf(t)]},set:function(t,e){-1===n.indexOf(t)&&(n.push(t),r.push(e))},delete:function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),r.splice(e,1))}}),i=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){i=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function s(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var e,n=null,r=null,s=null,a=function(){t.clientWidth!==r&&d()},c=function(e){window.removeEventListener("resize",a,!1),t.removeEventListener("input",d,!1),t.removeEventListener("keyup",d,!1),t.removeEventListener("autosize:destroy",c,!1),t.removeEventListener("autosize:update",d,!1),Object.keys(e).forEach((function(n){t.style[n]=e[n]})),o.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",c,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",d,!1),window.addEventListener("resize",a,!1),t.addEventListener("input",d,!1),t.addEventListener("autosize:update",d,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",o.set(t,{destroy:c,update:d}),"vertical"===(e=window.getComputedStyle(t,null)).resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),n="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(n)&&(n=0),d()}function l(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function u(){if(0!==t.scrollHeight){var e=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+n+"px",r=t.clientWidth,e.forEach((function(t){t.node.scrollTop=t.scrollTop})),o&&(document.documentElement.scrollTop=o)}}function d(){u();var e=Math.round(parseFloat(t.style.height)),n=window.getComputedStyle(t,null),r="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):t.offsetHeight;if(r<e?"hidden"===n.overflowY&&(l("scroll"),u(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==n.overflowY&&(l("hidden"),u(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),s!==r){s=r;var o=i("autosize:resized");try{t.dispatchEvent(o)}catch(t){}}}}function a(t){var e=o.get(t);e&&e.destroy()}function c(t){var e=o.get(t);e&&e.update()}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(t){return t}).destroy=function(t){return t},l.update=function(t){return t}):((l=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],(function(t){return s(t)})),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],a),t},l.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],c),t}),e.default=l,t.exports=e.default})?r.apply(e,o):r)||(t.exports=i)},90:function(t,e,n){"use strict";n.r(e),n.d(e,"TitleBlot",(function(){return i}));var r=n(60),o=n(69);class i extends o.FieldBlot{static create(t){let e=super.create(t);return e.setAttribute("data-placeholder","Title"),e.setAttribute("data-label","Title"),e}formatAt(t,e,n,r){n===i.blotName&&super.formatAt(t,e,n,r)}}i.blotName="blockTitle",i.tagName="h1",r.a.register(i)},91:function(t,e,n){"use strict";n.r(e),n.d(e,"CodeEndLineFlag",(function(){return s})),n.d(e,"InsSyntaxCodeBlock",(function(){return a})),n.d(e,"InsSyntaxModule",(function(){return c}));var r=n(60),o=n(81),i=n(106);class s extends o.a{static formats(){return{}}}s.blotName="code-end",s.className="l",s.tagName="SPAN",r.a.register(s);class a extends i.a{highlight(t){let e=this.domNode.textContent||"";if(this.cachedText!==e){if(e.trim().length>0||null==this.cachedText){let n="";const r=t(e).split("\n");for(let t=0;t<r.length-1;t++)n+=`<span class="l">${r[t]||" "}</span>\n`;n+=`<span class="l">${r[r.length-1]}</span>`,this.domNode.innerHTML=`<code class="hljs">${n}</code>`}this.cachedText=e}}}class c extends i.c{static register(){r.a.register(i.b,!0),r.a.register(a,!0)}highlight(){if(this.quill.selection.composing)return;this.quill.update(r.a.sources.USER);let t=this.quill.getSelection();this.quill.scroll.descendants(a).forEach(t=>{t.highlight(this.options.highlight)}),this.quill.update(r.a.sources.SILENT),null!=t&&document.activeElement===this.quill.container.querySelector("[contenteditable]")&&this.quill.setSelection(t,r.a.sources.SILENT)}}},92:function(t,e,n){"use strict";function r(t,e){return"function"==typeof t?t.apply(null,e):t}function o(t,e,n){return void 0===t||n!==t[e]?{...t,[e]:n}:t}n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return u}));const i=new WeakMap,s=[];function a(){const t=s[s.length-1],e=i.get(t);if(void 0!==e)return e;throw new Error("Hooks only valid inside an Articulated Function or a Custom Hook.")}function c(t,e){if(void 0===t||void 0===e)return!0;if(t.length!==e.length)return!0;for(const[n,r]of t.entries())if(!Object.is(r,e[n]))return!0;return!1}function l(t,e){return n.reset=function(){s.push(n);const t=a();try{for(let e of t.c)r(e)}finally{s.pop(),t.sS.length=0,t.e.length=0,t.c.length=0,t.m.length=0,t.nSSI=0,t.nEI=0,t.nMI=0}},n;function n(...o){s.push(n);let a,c=i.get(n);null==c?(c={nSSI:0,nEI:0,nMI:0,sS:[],e:[],c:[],m:[],hUS:!1,af:n.bind(this,...o)},i.set(n,c)):(c.nSSI=0,c.nEI=0,c.nMI=0,c.af=n.bind(this,...o));try{a=t.apply(this,o)}finally{try{return function(t){for(let[e,[n]]of t.e.entries())try{r(n)}finally{t.e[e][0]=void 0}}(c),e(a)}finally{c.hUS&&(c.hUS=!1,c.af()),s.pop()}}}}function u(t){return d((function(t,e){return r(e,[t])}),t)}function d(t,e,...n){var o=a();if(!(o.nSSI in o.sS)){let i=[r(e),function(e){i[0]=t(i[0],e),s.length>0?o.hUS=!0:o.af()}];o.sS[o.nSSI]=i,n.length>0&&o.sS[o.nSSI][1](n[0])}return[...o.sS[o.nSSI++]]}function p(t,...e){e.length>0?1==e.length&&Array.isArray(e[0])&&(e=e[0]):e=void 0;const n=a();n.nEI in n.e||(n.e[n.nEI]=[]);let o=n.nEI,i=n.e[o];c(i[1],e)&&(i[0]=function(){try{r(n.c[o])}finally{n.c[o]=void 0}var e=t();"function"==typeof e&&(n.c[o]=e)},i[1]=e),n.nEI++}function h(t,...e){return function(t,...e){e.length>0?1==e.length&&Array.isArray(e[0])&&(e=e[0]):e=[t];const n=a();n.nMI in n.m||(n.m[n.nMI]=[]);const r=n.m[n.nMI];if(c(r[1],e))try{r[0]=t()}finally{r[1]=e}return n.nMI++,r[0]}((function(){return t}),...e)}function f(t){var[e]=u({current:t});return e}function m(t){const e=t.mapper||o;return n=>{const r=function(t,e,n,r,o){var i;const s=((i=class extends HTMLElement{constructor(){super(),this._props={};const i=void 0!==o?this.attachShadow(o):this;this.aFunc=l(t,t=>n(t,i));for(const t in e){const n=e[t];let o=void 0;"type"in n&&(this.props[t]=n.default,o=n.attribute),Reflect.defineProperty(this,t,{get:()=>this.props[t],set:e=>{this.props=r.apply(this,[this.props,t,e,o])},enumerable:!0})}}static get observedAttributes(){return Object.values(this.attributes)}set props(t){void 0!==t&&this.props!==t&&(this._props=t,this.render())}get props(){return this._props}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){if(e!==n)for(const[e,r]of Object.entries(this.constructor.attributes))if(r===t&&this[e]!==n){this[e]=n;break}}render(){this.isConnected&&Reflect.apply(this.aFunc,this,[this.props])}}).attributes={},i),a=Reflect.get(s,"attributes");for(const t in e){const n=e[t];"type"in n&&void 0!==n.attribute&&Reflect.defineProperty(s,"attributes",{value:{...a,[t]:n.attribute},enumerable:!0,writable:!0})}return s}(n,t.props||{},t.render,e,t.shadow);return(t,e)=>{try{customElements.define(t,r,e)}catch(t){console.warn(t)}const n=async e=>customElements.whenDefined(t).then(()=>customElements.get(t));return n.element=r,n.adapter=(e,n)=>e(t,n),n}}}function g(t){return e=>n=>{const r=new WeakMap;return o=>{const i=n||f(null);let s=r.get(i);if(void 0===s){const n=l(e,e=>t.render(e,i));s=(t=o)=>Reflect.apply(n,i.current,[t]),r.set(i,s)}return s(o)}}}},94:function(t,e,n){"use strict";n.r(e),n.d(e,"ListContinuer",(function(){return o}));var r=n(105);class o extends r.b{static create(t){let e;return"string"==typeof t?e=super.create(t):(e=super.create(t.type),void 0!==t.start&&(e.setAttribute("start",t.start),e.style["counter-reset"]="list-0 "+t.start)),e}static formats(t){let e=super.formats(t);return console.log("MyList-static.formats",e,t.getAttribute("start")),{type:e,start:t.getAttribute("start")}}}},95:function(t,e,n){"use strict";n.r(e),n.d(e,"BlockquoteBlot",(function(){return i}));var r=n(60),o=n(61);class i extends o.c{}i.blotName="blockBlockquote",i.tagName="blockquote",r.a.register(i)},96:function(t,e,n){"use strict";n.r(e),n.d(e,"LinkBlot",(function(){return i}));var r=n(81),o=n(66);class i extends r.a{constructor(t,e){super(t),this.value=e,t.addEventListener("mouseover",i.showLinkTooltip.bind(this,this),!1),t.addEventListener("mouseout",i.hideLinkTooltip,!1)}static create(t){let e=super.create(t);t=this.sanitize(t),e.setAttribute("href",t);var n=t.substr(0,1);return"/"!=n&&"#"!=n&&"tg://"!=t.substr(0,5)&&"mailto:"!=t.substr(0,7)&&e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){const e=i.relativeUrl(t);return Object(o.sanitize)(t,["http","https","tg","mailto"])?e:"about:blank"}detach(){this.domNode.removeEventListener("mouseover",i.showLinkTooltip.bind(this,this),!1),this.domNode.removeEventListener("mouseout",i.hideLinkTooltip,!1),super.detach(),i.hideLinkTooltip()}format(t,e){if(t!==this.statics.blotName||!e)return super.format(t,e);e=i.sanitize(e),this.domNode.setAttribute("href",e),this.domNode.setAttribute("data-title",e)}static relativeUrl(t){let e=location,n=document.createElement("a");return n.href=t,e.origin!==n.origin?n.href:e.pathname!==n.pathname||e.search!==n.search?n.pathname+n.search+n.hash:e.href===n.href?n.hash||n.pathname+n.search+n.hash:n.hash}}},97:function(t,e,n){"use strict";n.r(e),n.d(e,"MyQuill",(function(){return o}));var r=n(60);class o extends r.a{formatLine(...t){super.formatLine(...t),this.updateSelection()}formatText(...t){super.formatText(...t),this.updateSelection()}updateSelection(t){if(this.hasFocus()){t=t||o.sources.SILENT;let e=this.getSelection(!0);this.setSelection(++e.index,e.length,t),this.setSelection(--e.index,e.length,t)}}}},98:function(t,e,n){"use strict";n.r(e),n.d(e,"PullquoteBlot",(function(){return i}));var r=n(60),o=n(61);class i extends o.c{}i.blotName="blockPullquote",i.tagName="aside",r.a.register(i)},99:function(t,e,n){"use strict";n.r(e),n.d(e,"FigureBlot",(function(){return d}));var r=n(60),o=n(61),i=n(140),s=n(89),a=n.n(s),c=n(82),l=n(66),u=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class d extends o.a{constructor(t,e){super(t),this.domNode=t,this.domWrapper=document.createElement("div"),this.domCursor=document.createElement("span"),this.domCaption=document.createElement("figcaption"),this.domWrapper.classList.add("figure_wrapper"),this.domCursor.classList.add("cursor_wrapper"),this.domCursor.setAttribute("contenteditable","true"),this.domCaption.classList.add("editable_text"),this.domCaption.setAttribute("data-placeholder","Caption (optional)"),e.caption&&(this.domCaption.innerText=e.caption),this.domNode.appendChild(this.domWrapper),this.domNode.appendChild(this.domCursor),this.domNode.appendChild(this.domCaption),setTimeout(()=>{Object(l.updateEditableText)(this.domNode)},1);let n=!1;e.image?(this.appendImgNode(e.image),n=this.uploadData(e.image)):e.video?(this.appendVideoNode(e.video),n=this.uploadData(e.video)):e.embed&&this.appendIframeNode(e.embed),n&&(this.domProgress=document.createElement("div"),this.domProgressBar=document.createElement("div"),this.domProgress.classList.add("file_progress"),this.domProgressBar.classList.add("file_progress_bar"),this.domWrapper.classList.add("loading"),this.domProgress.appendChild(this.domProgressBar),this.domWrapper.appendChild(this.domProgress),this.uploadFile(n)),this.domWrapper.onclick=()=>{if(!this.domNode.classList.contains("focus")){let t=this.offset(this.scroll);this.focus(),d.quillSetSelection(t)}},this.domCursor.onkeydown=t=>{let e=t.which||t.keyCode;if(e==i.a.keys.BACKSPACE){let e=this.offset(this.scroll);d.quillDeleteText(e,this.length()),d.quillSetSelection(e-1),t.preventDefault()}else if(e==i.a.keys.ENTER){let e=this.offset(this.scroll)+this.length();this.focus(),d.quillInsertText(e,"\n"),d.quillSetSelection(e),t.preventDefault()}},this.domCursor.onpaste=t=>{t.stopPropagation(),t.preventDefault()},this.domCaption.onkeydown=t=>{let e=t.which||t.keyCode,n=t.target;if(e==i.a.keys.ENTER){if(t.shiftKey)return;let e={start:n.selectionStart,end:n.selectionEnd},r=n.value;if(e.start!=e.end)r=r.substr(0,e.start)+r.substr(e.end),n.setSelectionRange(r.length,r.length);else if(e.end==r.length){let t=this.offset(this.scroll)+this.length();this.focus(),d.quillInsertText(t,"\n"),d.quillSetSelection(t)}t.preventDefault()}else if(e==i.a.keys.DOWN||e==i.a.keys.TAB||e==i.a.keys.RIGHT){let e={start:n.selectionStart,end:n.selectionEnd},r=n.value;if(e.start==e.end&&e.end==r.length){let e=this.offset(this.scroll)+this.length();this.focus(),d.quillSetSelection(e,0),t.preventDefault()}}else if(e==i.a.keys.LEFT||e==i.a.keys.UP){let e={start:n.selectionStart,end:n.selectionEnd};if(e.start==e.end&&0===e.start){let e=this.offset(this.scroll)-1;this.focus(),d.quillSetSelection(e,0),t.preventDefault()}}};const r=t=>{null!==t&&null!==t.target&&(this.domCaption.classList.toggle("empty",!t.target.value),a.a.update(t.target),d.draftSave())};this.domCaption.onpaste=t=>{t.stopPropagation(),r(t)},this.domCaption.onkeyup=r,this.domCaption.ondrop=r,this.domCaption.onchange=r,this.domCaption.oninput=r,this.domCaption.oncut=r,this.domCaption.onclick=t=>{t.target&&t.target.focus()}}static create(t){let e=super.create(t);return e.setAttribute("contenteditable","false"),e}appendImgNode(t){let e=document.createElement("img");return e.setAttribute("src",this.sanitize(t)),this.domWrapper.appendChild(e),e}appendVideoNode(t){let e=document.createElement("video");return e.setAttribute("src",this.sanitize(t)),e.setAttribute("preload","auto"),e.setAttribute("controls","controls"),e.addEventListener("loadeddata",(function(){this.mozHasAudio||this.webkitAudioDecodedByteCount||this.audioTracks&&this.audioTracks.length||(this.setAttribute("autoplay","autoplay"),this.setAttribute("loop","loop"),this.setAttribute("muted","muted"),this.removeAttribute("controls"),this.play())})),this.domWrapper.appendChild(e),e}appendIframeNode(t){let e=document.createElement("div"),n=document.createElement("div"),r=document.createElement("iframe");return e.classList.add("iframe_wrap"),e.appendChild(n),n.classList.add("iframe_helper"),n.style.paddingTop="56.25%",n.appendChild(r),r.setAttribute("src",this.sanitize(t)),r.setAttribute("width","640"),r.setAttribute("height","360"),r.setAttribute("frameborder","0"),r.setAttribute("allowtransparency","true"),r.setAttribute("allowfullscreen","true"),r.setAttribute("scrolling","no"),this.domWrapper.appendChild(e),e}uploadFile(t){this.uploadFileStart(t,(t,e)=>{let n=0;e&&t&&(n=100*t/e,n=Math.min(100,n)),this.domProgressBar.style.width=n+"%"},e=>{if(e){let n=this.sanitize(e.src);if("video/"==t.type.substr(0,6)){let t=this.domWrapper.querySelector("video");t&&t.setAttribute("src",n)}else{let t=this.domWrapper.querySelector("img");t&&t.setAttribute("src",n)}this.domWrapper.classList.remove("loading"),d.draftSave()}},t=>(d.quillDeleteText(this.offset(this.scroll),this.length(),r.a.sources.SILENT),d.draftSave(),Object(l.showError)(t)))}uploadData(t){let e=null;return!!(e=t.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))&&{type:e[1],base64_data:e[2]}}sanitize(t){return Object(l.sanitize)(t,["http","https","data"])?t:"//:0"}static value(t){let e={caption:""},n=t.querySelector("img");n&&(e.image=n.src);let r=t.querySelector("video");r&&(e.video=r.src);let o=t.querySelector("iframe");o&&(e.embed=o.src);let i=t.querySelector("figcaption");if(i){let t=i.querySelector(".editable_input");e.caption=t?t.value:i.innerText}return e}focus(){this.domNode.classList.add("focus")}blur(){this.domNode.classList.remove("focus")}_index(t,e){if(t===this.domCaption)return 0;let n=0;return t.nodeType==t.TEXT_NODE&&(n+=e>=0?e:t.data.length),t.previousSibling?n+this._index(t.previousSibling,-1):t.parentNode?n+this._index(t.parentNode,-1):0}_position(t,e){if(t.nodeType==t.TEXT_NODE)return e<=t.data.length?[t,e]:[null,e-=t.data.length];{let n=t.firstChild;for(;n;){let t=null;if([t,e]=this._position(n,e),t)return[t,e];n=n.nextSibling}return[t,e]}}update(t){this.domCursor.innerHTML=""}index(t,e){return 0}position(t,e){return[this.domCursor,0]}uploadFileStart(t,e,n,r){return u(this,void 0,void 0,(function*(){try{const r=yield Object(c.uploadFileService)(Object(l.uploadDataToBlob)(t),e);n&&n(r)}catch(t){r&&r("Network error")}}))}}}}]);