/*! For license information please see 6136.bundle.js.LICENSE.txt */
(self.webpackChunkinscriptum=self.webpackChunkinscriptum||[]).push([[6136,9367],{79367:function(e,t){var r,o,n;o=[e,t],void 0===(n="function"==typeof(r=function(e,t){"use strict";var r,o,n="function"==typeof Map?new Map:(r=[],o=[],{has:function(e){return r.indexOf(e)>-1},get:function(e){return o[r.indexOf(e)]},set:function(e,t){-1===r.indexOf(e)&&(r.push(e),o.push(t))},delete:function(e){var t=r.indexOf(e);t>-1&&(r.splice(t,1),o.splice(t,1))}}),l=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){l=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function a(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!n.has(e)){var t=null,r=null,o=null,a=function(){e.clientWidth!==r&&f()},i=function(t){window.removeEventListener("resize",a,!1),e.removeEventListener("input",f,!1),e.removeEventListener("keyup",f,!1),e.removeEventListener("autosize:destroy",i,!1),e.removeEventListener("autosize:update",f,!1),Object.keys(t).forEach((function(r){e.style[r]=t[r]})),n.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",i,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",f,!1),window.addEventListener("resize",a,!1),e.addEventListener("input",f,!1),e.addEventListener("autosize:update",f,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",n.set(e,{destroy:i,update:f}),u()}function u(){var r=window.getComputedStyle(e,null);"vertical"===r.resize?e.style.resize="none":"both"===r.resize&&(e.style.resize="horizontal"),t="content-box"===r.boxSizing?-(parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)):parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),isNaN(t)&&(t=0),f()}function c(t){var r=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=r,e.style.overflowY=t}function d(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function s(){if(0!==e.scrollHeight){var o=d(e),n=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",r=e.clientWidth,o.forEach((function(e){e.node.scrollTop=e.scrollTop})),n&&(document.documentElement.scrollTop=n)}}function f(){s();var t=Math.round(parseFloat(e.style.height)),r=window.getComputedStyle(e,null),n="content-box"===r.boxSizing?Math.round(parseFloat(r.height)):e.offsetHeight;if(n<t?"hidden"===r.overflowY&&(c("scroll"),s(),n="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==r.overflowY&&(c("hidden"),s(),n="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),o!==n){o=n;var a=l("autosize:resized");try{e.dispatchEvent(a)}catch(e){}}}}function i(e){var t=n.get(e);t&&t.destroy()}function u(e){var t=n.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return a(e,t)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],u),e}),t.default=c,e.exports=t.default})?r.apply(t,o):r)||(e.exports=n)},76136:(e,t,r)=>{"use strict";r.r(t),r.d(t,{T:()=>l,draftSave:()=>a,getPageContent:()=>i,isEdit:()=>u,updateEditableText:()=>c,sanitize:()=>s,uploadDataToBlob:()=>f,showError:()=>h,updateEditable:()=>p,storageDelete:()=>y,draftClear:()=>m});var o=r(79367),n=r.n(o);let l={apiUrl:"https://inscriptum.js.org",datetime:0,pageId:0};function a(e,t){if(!e)return!1;if(!l.pageId){var r=i(!0,t);if(e!=r)return e=r,function(e,t){try{return localStorage.setItem(e,t),!!localStorage.getItem(e)}catch(e){return!1}}("draft",r)}return!1}function i(e,t){let r=t.scroll.domNode;r.querySelectorAll("textarea,input").forEach((e=>{e.setAttribute("data-value",e.value)}));let o=r.cloneNode(!0);r.querySelectorAll("textarea,input").forEach((e=>{e.removeAttribute("data-value")})),o.querySelectorAll("textarea,input").forEach((e=>{e.value=e.getAttribute("data-value")||"",e.removeAttribute("data-value")})),c(o,!1);o.querySelectorAll("[contenteditable]").forEach((e=>e.removeAttribute("contenteditable")));o.querySelectorAll("[data-placeholder]").forEach((e=>e.removeAttribute("data-placeholder")));o.querySelectorAll("[data-label]").forEach((e=>e.removeAttribute("data-label")));o.querySelectorAll("[data-title]").forEach((e=>e.removeAttribute("data-title")));o.querySelectorAll(".editable_text").forEach((e=>e.classList.remove("editable_text")));o.querySelectorAll(".focus").forEach((e=>e.classList.remove("focus")));o.querySelectorAll(".empty").forEach((e=>e.classList.remove("empty")));o.querySelectorAll('[class=""]').forEach((e=>e.removeAttribute("class")));o.querySelectorAll(".file_progress").forEach((e=>e.remove()));if(o.querySelectorAll(".cursor_wrapper").forEach((e=>e.remove())),!e){const e=o.querySelector("h1,address");e&&e.remove();const t=o.querySelector("br.inline");return t&&t.replaceWith("\n"),{data:JSON.stringify(d(o).children),length:o.innerHTML.length}}return o.querySelectorAll("h1").forEach((e=>{e.querySelector("br")||e.append(document.createElement("br"))})),o.querySelectorAll("address").forEach((e=>{e.querySelector("br")||e.append(document.createElement("br"))})),o.innerHTML}function u(){return document.getElementsByClassName("tl_article_edit").length>0}function c(e,t){void 0===t&&(t=u()),t?e.querySelectorAll(".editable_text").forEach((e=>{let t=!1;if(e.childNodes.forEach((e=>{!t&&e&&e.classList&&(t=e.classList.contains("editable_input"))})),!t){let t=e.textContent||"",r=document.createElement("textarea");r.classList.add("editable_input"),r.setAttribute("tabindex","-1"),r.setAttribute("rows","1"),r.value=t,t||e.classList.add("empty"),e.innerHTML="",e.append(r),n()(r)}})):e.querySelectorAll(".editable_text > .editable_input").forEach((e=>{let t=e.value,r=e.parentNode;r.innerHTML="",r.textContent=t}))}function d(e){if(!e.tagName)return e.data;let t={tag:e.tagName.toLowerCase()};if(e.attributes.length){t.attrs={};for(var r=0;r<e.attributes.length;r++){let o=e.attributes[r];t.attrs[o.name]=o.value}}if(e.childNodes.length){t.children=[];for(r=0;r<e.childNodes.length;r++)t.children.push(d(e.childNodes[r]))}return t}function s(e,t){let r=document.createElement("a");r.href=e;let o=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(o)>-1}function f(e){for(var t=atob(e.base64_data),r=[],o=0;o<t.length;o++)r.push(t.charCodeAt(o));return new Blob([new Uint8Array(r)],{type:e.type})}function h(e){let t=document.querySelector("#_error_msg");t.textContent=e,clearTimeout(t.to),t.classList.add("shown"),t.to=setTimeout((()=>{t.classList.remove("shown")}),3e3)}function p(e,t,r,o,n,l){if(o&&o.classList.toggle("tl_article_edit",e),c(document.body),t&&(t.enable(e),e&&t.focus()),!e&&n&&l){const e=n.querySelector("h1"),o=e?e.textContent:"",a=n.querySelector("address"),i=a?a.textContent:"",u=n.querySelector("address a"),c=u&&u.getAttribute("href");l.querySelector("h1").textContent=o,l.querySelector("address a").textContent=i,c?l.querySelector("address a").setAttribute("href",c):l.querySelector("address a").removeAttribute("href"),r.hideFormatTooltip(t),r.hideBlocksTooltip()}}function y(e){try{return localStorage.removeItem(e),!0}catch(e){return!1}}function m(){y("draft")}!function(){var e=document.querySelector("time");if(e&&l.datetime){var t=new Date(1e3*l.datetime);let r="January February March April May June July August September October November December".split(" ")[t.getMonth()],o=t.getDate();e.textContent=r+" "+(10>o?"0":"")+o+", "+t.getFullYear()}}()}}]);