(window.webpackJsonp=window.webpackJsonp||[]).push([[27,33,63],{570:function(t,e){e.f={}.propertyIsEnumerable},572:function(t,e,r){"use strict";var n=r(651),o=r(19),i=r(652),a=r(207),s=r(84),l=r(204),u=r(87),c=r(51),d=Math.min,p=[].push,f=!c(function(){RegExp(4294967295,"y")});r(205)("split",2,function(t,e,r,c){var h;return h="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!n(t))return r.call(o,t,e);for(var i,a,s,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,f=void 0===e?4294967295:e>>>0,h=new RegExp(t.source,c+"g");(i=u.call(h,o))&&!((a=h.lastIndex)>d&&(l.push(o.slice(d,i.index)),i.length>1&&i.index<o.length&&p.apply(l,i.slice(1)),s=i[0].length,d=a,l.length>=f));)h.lastIndex===i.index&&h.lastIndex++;return d===o.length?!s&&h.test("")||l.push(""):l.push(o.slice(d)),l.length>f?l.slice(0,f):l}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)}:r,[function(r,n){var o=t(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,o,n):h.call(String(o),r,n)},function(t,e){var n=c(h,t,this,e,h!==r);if(n.done)return n.value;var u=o(t),p=String(this),m=i(u,RegExp),v=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"y":"g"),g=new m(f?u:"^(?:"+u.source+")",y),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===p.length)return null===l(g,p)?[p]:[];for(var S=0,E=0,w=[];E<p.length;){g.lastIndex=f?E:0;var x,A=l(g,f?p:p.slice(E));if(null===A||(x=d(s(g.lastIndex+(f?0:E)),p.length))===S)E=a(p,E,v);else{if(w.push(p.slice(S,E)),w.length===b)return w;for(var C=1;C<=A.length-1;C++)if(w.push(A[C]),w.length===b)return w;E=S=x}}return w.push(p.slice(S)),w}]})},574:function(t,e,r){"use strict";r.r(e),r.d(e,"T",function(){return i}),r.d(e,"draftSave",function(){return a}),r.d(e,"getPageContent",function(){return s}),r.d(e,"isEdit",function(){return l}),r.d(e,"updateEditableText",function(){return u}),r.d(e,"sanitize",function(){return d}),r.d(e,"uploadDataToBlob",function(){return p}),r.d(e,"showError",function(){return f});r(201),r(572);var n=r(643),o=r.n(n);let i={apiUrl:"https://inscriptum.js.org",datetime:0,pageId:0};function a(t,e){if(!t)return!1;if(!i.pageId){var r=s(!0,e);if(t!=r)return t=r,function(t,e){try{return localStorage.setItem(t,e),!!localStorage.getItem(t)}catch(t){return!1}}("draft",r)}return!1}function s(t,e){let r=e.scroll.domNode;r.querySelectorAll("textarea,input").forEach(t=>{t.setAttribute("data-value",t.value)});let n=r.cloneNode(!0);return r.querySelectorAll("textarea,input").forEach(t=>{t.removeAttribute("data-value")}),n.querySelectorAll("textarea,input").forEach(t=>{t.value=t.getAttribute("data-value")||"",t.removeAttribute("data-value")}),u(n,!1),n.querySelectorAll("[contenteditable]").forEach(t=>t.removeAttribute("contenteditable")),n.querySelectorAll("[data-placeholder]").forEach(t=>t.removeAttribute("data-placeholder")),n.querySelectorAll("[data-label]").forEach(t=>t.removeAttribute("data-label")),n.querySelectorAll("[data-title]").forEach(t=>t.removeAttribute("data-title")),n.querySelectorAll(".editable_text").forEach(t=>t.classList.remove("editable_text")),n.querySelectorAll(".focus").forEach(t=>t.classList.remove("focus")),n.querySelectorAll(".empty").forEach(t=>t.classList.remove("empty")),n.querySelectorAll('[class=""]').forEach(t=>t.removeAttribute("class")),n.querySelectorAll(".file_progress").forEach(t=>t.remove()),n.querySelectorAll(".cursor_wrapper").forEach(t=>t.remove()),t?(n.querySelectorAll("h1").forEach(t=>{t.querySelector("br")||t.append(document.createElement("br"))}),n.querySelectorAll("address").forEach(t=>{t.querySelector("br")||t.append(document.createElement("br"))}),n.innerHTML):(n.querySelector("h1,address").remove(),n.querySelector("br.inline").replaceWith("\n"),{data:JSON.stringify(c(n).children),length:n.innerHTML.length})}function l(){return document.getElementsByClassName("tl_article_edit").length>0}function u(t,e){void 0===e&&(e=l()),e?t.querySelectorAll(".editable_text").forEach(t=>{let e=!1;if(t.childNodes.forEach(t=>{!e&&t&&t.classList&&(e=t.classList.contains("editable_input"))}),!e){let e=t.textContent||"",r=document.createElement("textarea");r.classList.add("editable_input"),r.setAttribute("tabindex","-1"),r.setAttribute("rows","1"),r.value=e,e||t.classList.add("empty"),t.innerHTML="",t.append(r),o()(r)}}):t.querySelectorAll(".editable_text > .editable_input").forEach(t=>{let e=t.value,r=t.parentNode;r.innerHTML="",r.textContent=e})}function c(t){if(!t.tagName)return t.data;let e={tag:t.tagName.toLowerCase()};if(t.attributes.length){e.attrs={};for(var r=0;r<t.attributes.length;r++){let n=t.attributes[r];e.attrs[n.name]=n.value}}if(t.childNodes.length){e.children=[];for(r=0;r<t.childNodes.length;r++)e.children.push(c(t.childNodes[r]))}return e}function d(t,e){let r=document.createElement("a");r.href=t;let n=r.href.slice(0,r.href.indexOf(":"));return e.indexOf(n)>-1}function p(t){for(var e=atob(t.base64_data),r=[],n=0;n<e.length;n++)r.push(e.charCodeAt(n));return new Blob([new Uint8Array(r)],{type:t.type})}function f(t){let e=document.querySelector("#_error_msg");e.textContent=t,clearTimeout(e.to),e.classList.add("shown"),e.to=setTimeout(()=>{e.classList.remove("shown")},3e3)}!function(){var t=document.querySelector("time");if(t&&i.datetime){var e=new Date(1e3*i.datetime);let r="January February March April May June July August September October November December".split(" ")[e.getMonth()],n=e.getDate();t.textContent=r+" "+(10>n?"0":"")+n+", "+e.getFullYear()}}()},594:function(t,e,r){var n=r(15),o=r(58),i=r(80),a=r(595),s=r(52).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},595:function(t,e,r){e.f=r(14)},596:function(t,e){e.f=Object.getOwnPropertySymbols},597:function(t,e,r){var n=r(212),o=r(88).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},634:function(t,e,r){r(594)("asyncIterator")},635:function(t,e,r){"use strict";var n=r(15),o=r(31),i=r(30),a=r(83),s=r(33),l=r(709).KEY,u=r(51),c=r(57),d=r(89),p=r(56),f=r(14),h=r(595),m=r(594),v=r(710),y=r(711),g=r(19),b=r(53),S=r(54),E=r(206),w=r(81),x=r(211),A=r(712),C=r(713),N=r(52),T=r(82),q=C.f,L=N.f,O=A.f,_=n.Symbol,k=n.JSON,z=k&&k.stringify,P=f("_hidden"),F=f("toPrimitive"),I={}.propertyIsEnumerable,W=c("symbol-registry"),D=c("symbols"),j=c("op-symbols"),M=Object.prototype,H="function"==typeof _,B=n.QObject,R=!B||!B.prototype||!B.prototype.findChild,J=i&&u(function(){return 7!=x(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=q(M,e);n&&delete M[e],L(t,e,r),n&&t!==M&&L(M,e,n)}:L,X=function(t){var e=D[t]=x(_.prototype);return e._k=t,e},Y=H&&"symbol"==typeof _.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof _},K=function(t,e,r){return t===M&&K(j,e,r),g(t),e=E(e,!0),g(r),o(D,e)?(r.enumerable?(o(t,P)&&t[P][e]&&(t[P][e]=!1),r=x(r,{enumerable:w(0,!1)})):(o(t,P)||L(t,P,w(1,{})),t[P][e]=!0),J(t,e,r)):L(t,e,r)},U=function(t,e){g(t);for(var r,n=v(e=S(e)),o=0,i=n.length;i>o;)K(t,r=n[o++],e[r]);return t},G=function(t){var e=I.call(this,t=E(t,!0));return!(this===M&&o(D,t)&&!o(j,t))&&(!(e||!o(this,t)||!o(D,t)||o(this,P)&&this[P][t])||e)},V=function(t,e){if(t=S(t),e=E(e,!0),t!==M||!o(D,e)||o(j,e)){var r=q(t,e);return!r||!o(D,e)||o(t,P)&&t[P][e]||(r.enumerable=!0),r}},$=function(t){for(var e,r=O(S(t)),n=[],i=0;r.length>i;)o(D,e=r[i++])||e==P||e==l||n.push(e);return n},Q=function(t){for(var e,r=t===M,n=O(r?j:S(t)),i=[],a=0;n.length>a;)!o(D,e=n[a++])||r&&!o(M,e)||i.push(D[e]);return i};H||(s((_=function(){if(this instanceof _)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(r){this===M&&e.call(j,r),o(this,P)&&o(this[P],t)&&(this[P][t]=!1),J(this,t,w(1,r))};return i&&R&&J(M,t,{configurable:!0,set:e}),X(t)}).prototype,"toString",function(){return this._k}),C.f=V,N.f=K,r(597).f=A.f=$,r(570).f=G,r(596).f=Q,i&&!r(80)&&s(M,"propertyIsEnumerable",G,!0),h.f=function(t){return X(f(t))}),a(a.G+a.W+a.F*!H,{Symbol:_});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)f(Z[tt++]);for(var et=T(f.store),rt=0;et.length>rt;)m(et[rt++]);a(a.S+a.F*!H,"Symbol",{for:function(t){return o(W,t+="")?W[t]:W[t]=_(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in W)if(W[e]===t)return e},useSetter:function(){R=!0},useSimple:function(){R=!1}}),a(a.S+a.F*!H,"Object",{create:function(t,e){return void 0===e?x(t):U(x(t),e)},defineProperty:K,defineProperties:U,getOwnPropertyDescriptor:V,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),k&&a(a.S+a.F*(!H||u(function(){var t=_();return"[null]"!=z([t])||"{}"!=z({a:t})||"{}"!=z(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=e=n[1],(b(e)||void 0!==t)&&!Y(t))return y(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Y(e))return e}),n[1]=e,z.apply(k,n)}}),_.prototype[F]||r(17)(_.prototype,F,_.prototype.valueOf),d(_,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},643:function(t,e,r){var n,o,i;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/o=[t,e],void 0===(i="function"==typeof(n=function(t,e){"use strict";var r,n,o="function"==typeof Map?new Map:(r=[],n=[],{has:function(t){return r.indexOf(t)>-1},get:function(t){return n[r.indexOf(t)]},set:function(t,e){-1===r.indexOf(t)&&(r.push(t),n.push(e))},delete:function(t){var e=r.indexOf(t);e>-1&&(r.splice(e,1),n.splice(e,1))}}),i=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){i=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function a(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var e=null,r=null,n=null,a=function(){t.clientWidth!==r&&d()},s=function(e){window.removeEventListener("resize",a,!1),t.removeEventListener("input",d,!1),t.removeEventListener("keyup",d,!1),t.removeEventListener("autosize:destroy",s,!1),t.removeEventListener("autosize:update",d,!1),Object.keys(e).forEach(function(r){t.style[r]=e[r]}),o.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",s,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",d,!1),window.addEventListener("resize",a,!1),t.addEventListener("input",d,!1),t.addEventListener("autosize:update",d,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",o.set(t,{destroy:s,update:d}),"vertical"===(l=window.getComputedStyle(t,null)).resize?t.style.resize="none":"both"===l.resize&&(t.style.resize="horizontal"),e="content-box"===l.boxSizing?-(parseFloat(l.paddingTop)+parseFloat(l.paddingBottom)):parseFloat(l.borderTopWidth)+parseFloat(l.borderBottomWidth),isNaN(e)&&(e=0),d()}var l;function u(e){var r=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=r,t.style.overflowY=e}function c(){if(0!==t.scrollHeight){var n=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+e+"px",r=t.clientWidth,n.forEach(function(t){t.node.scrollTop=t.scrollTop}),o&&(document.documentElement.scrollTop=o)}}function d(){c();var e=Math.round(parseFloat(t.style.height)),r=window.getComputedStyle(t,null),o="content-box"===r.boxSizing?Math.round(parseFloat(r.height)):t.offsetHeight;if(o<e?"hidden"===r.overflowY&&(u("scroll"),c(),o="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==r.overflowY&&(u("hidden"),c(),o="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),n!==o){n=o;var a=i("autosize:resized");try{t.dispatchEvent(a)}catch(t){}}}}function s(t){var e=o.get(t);e&&e.destroy()}function l(t){var e=o.get(t);e&&e.update()}var u=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((u=function(t){return t}).destroy=function(t){return t},u.update=function(t){return t}):((u=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return a(t)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t},u.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],l),t}),e.default=u,t.exports=e.default})?n.apply(e,o):n)||(t.exports=i)},651:function(t,e,r){var n=r(53),o=r(79),i=r(14)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},652:function(t,e,r){var n=r(19),o=r(208),i=r(14)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||null==(r=n(a)[i])?e:o(r)}},654:function(t,e,r){"use strict";r.r(e),r.d(e,"uploadFileService",function(){return i});const n="inscriptum",o="cz5pibn5";function i(t,e){return new Promise((r,i)=>{var a=`https://api.cloudinary.com/v1_1/${n}/upload`,s=new XMLHttpRequest,l=new FormData;s.open("POST",a,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.upload.addEventListener("progress",function(t){t.lengthComputable&&e&&e(t.loaded,t.total)}),e&&e(0,1),l.append("upload_preset",o),l.append("tags","browser_upload"),l.append("file",t),s.send(l),s.onreadystatechange=(t=>{if(4==s.readyState&&200==s.status){var e=JSON.parse(s.responseText);console.log(1111,e),e.src=e.secure_url,r(e)}}),s.onerror=function(){i(new Error("Network Error"))}})}},709:function(t,e,r){var n=r(56)("meta"),o=r(53),i=r(31),a=r(52).f,s=0,l=Object.isExtensible||function(){return!0},u=!r(51)(function(){return l(Object.preventExtensions({}))}),c=function(t){a(t,n,{value:{i:"O"+ ++s,w:{}}})},d=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,n)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[n].i},getWeak:function(t,e){if(!i(t,n)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[n].w},onFreeze:function(t){return u&&d.NEED&&l(t)&&!i(t,n)&&c(t),t}}},710:function(t,e,r){var n=r(82),o=r(596),i=r(570);t.exports=function(t){var e=n(t),r=o.f;if(r)for(var a,s=r(t),l=i.f,u=0;s.length>u;)l.call(t,a=s[u++])&&e.push(a);return e}},711:function(t,e,r){var n=r(79);t.exports=Array.isArray||function(t){return"Array"==n(t)}},712:function(t,e,r){var n=r(54),o=r(597).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(n(t))}},713:function(t,e,r){var n=r(570),o=r(81),i=r(54),a=r(206),s=r(31),l=r(210),u=Object.getOwnPropertyDescriptor;e.f=r(30)?u:function(t,e){if(t=i(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return o(!n.f.call(t,e),t[e])}},728:function(t,e,r){"use strict";r.r(e),r.d(e,"FigureBlot",function(){return d});r(634),r(635),r(741),r(201);var n=r(530),o=r(532),i=r(642),a=r(643),s=r.n(a),l=r(654),u=r(574);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}class d extends o.a{constructor(t,e){super(t),this.domNode=t,this.domWrapper=document.createElement("div"),this.domCursor=document.createElement("span"),this.domCaption=document.createElement("figcaption"),this.domWrapper.classList.add("figure_wrapper"),this.domCursor.classList.add("cursor_wrapper"),this.domCursor.setAttribute("contenteditable","true"),this.domCaption.classList.add("editable_text"),this.domCaption.setAttribute("data-placeholder","Caption (optional)"),e.caption&&(this.domCaption.innerText=e.caption),this.domNode.appendChild(this.domWrapper),this.domNode.appendChild(this.domCursor),this.domNode.appendChild(this.domCaption),setTimeout(()=>{Object(u.updateEditableText)(this.domNode)},1);let r=!1;e.image?(this.appendImgNode(e.image),r=this.uploadData(e.image)):e.video?(this.appendVideoNode(e.video),r=this.uploadData(e.video)):e.embed&&this.appendIframeNode(e.embed),r&&(this.domProgress=document.createElement("div"),this.domProgressBar=document.createElement("div"),this.domProgress.classList.add("file_progress"),this.domProgressBar.classList.add("file_progress_bar"),this.domWrapper.classList.add("loading"),this.domProgress.appendChild(this.domProgressBar),this.domWrapper.appendChild(this.domProgress),this.uploadFile(r)),this.domWrapper.onclick=(()=>{if(!this.domNode.classList.contains("focus")){let t=this.offset(this.scroll);this.focus(),d.quillSetSelection(t)}}),this.domCursor.onkeydown=(t=>{let e=t.which||t.keyCode;if(e==i.a.keys.BACKSPACE){let e=this.offset(this.scroll);d.quillDeleteText(e,this.length()),d.quillSetSelection(e-1),t.preventDefault()}else if(e==i.a.keys.ENTER){let e=this.offset(this.scroll)+this.length();this.focus(),d.quillInsertText(e,"\n"),d.quillSetSelection(e),t.preventDefault()}}),this.domCursor.onpaste=(t=>{t.stopPropagation(),t.preventDefault()}),this.domCaption.onkeydown=(t=>{let e=t.which||t.keyCode,r=t.target;if(e==i.a.keys.ENTER){if(t.shiftKey)return;let e={start:r.selectionStart,end:r.selectionEnd},n=r.value;if(e.start!=e.end)n=n.substr(0,e.start)+n.substr(e.end),r.setSelectionRange(n.length,n.length);else if(e.end==n.length){let t=this.offset(this.scroll)+this.length();this.focus(),d.quillInsertText(t,"\n"),d.quillSetSelection(t)}t.preventDefault()}else if(e==i.a.keys.DOWN||e==i.a.keys.TAB||e==i.a.keys.RIGHT){let e={start:r.selectionStart,end:r.selectionEnd},n=r.value;if(e.start==e.end&&e.end==n.length){let e=this.offset(this.scroll)+this.length();this.focus(),d.quillSetSelection(e,0),t.preventDefault()}}else if(e==i.a.keys.LEFT||e==i.a.keys.UP){let e={start:r.selectionStart,end:r.selectionEnd};if(e.start==e.end&&0===e.start){let e=this.offset(this.scroll)-1;this.focus(),d.quillSetSelection(e,0),t.preventDefault()}}});const n=t=>{null!==t&&null!==t.target&&(this.domCaption.classList.toggle("empty",!t.target.value),s.a.update(t.target),d.draftSave())};this.domCaption.onpaste=(t=>{t.stopPropagation(),n(t)}),this.domCaption.onkeyup=n,this.domCaption.ondrop=n,this.domCaption.onchange=n,this.domCaption.oninput=n,this.domCaption.oncut=n,this.domCaption.onclick=(t=>{t.target&&t.target.focus()})}static create(t){let e=super.create(t);return e.setAttribute("contenteditable","false"),e}appendImgNode(t){let e=document.createElement("img");return e.setAttribute("src",this.sanitize(t)),this.domWrapper.appendChild(e),e}appendVideoNode(t){let e=document.createElement("video");return e.setAttribute("src",this.sanitize(t)),e.setAttribute("preload","auto"),e.setAttribute("controls","controls"),e.addEventListener("loadeddata",function(){this.mozHasAudio||this.webkitAudioDecodedByteCount||this.audioTracks&&this.audioTracks.length||(this.setAttribute("autoplay","autoplay"),this.setAttribute("loop","loop"),this.setAttribute("muted","muted"),this.removeAttribute("controls"),this.play())}),this.domWrapper.appendChild(e),e}appendIframeNode(t){let e=document.createElement("div"),r=document.createElement("div"),n=document.createElement("iframe");return e.classList.add("iframe_wrap"),e.appendChild(r),r.classList.add("iframe_helper"),r.style.paddingTop="56.25%",r.appendChild(n),n.setAttribute("src",this.sanitize(t)),n.setAttribute("width","640"),n.setAttribute("height","360"),n.setAttribute("frameborder","0"),n.setAttribute("allowtransparency","true"),n.setAttribute("allowfullscreen","true"),n.setAttribute("scrolling","no"),this.domWrapper.appendChild(e),e}uploadFile(t){this.uploadFileStart(t,(t,e)=>{let r=0;e&&t&&(r=100*t/e,r=Math.min(100,r)),this.domProgressBar.style.width=r+"%"},e=>{if(e){let r=this.sanitize(e.src);if("video/"==t.type.substr(0,6)){let t=this.domWrapper.querySelector("video");t&&t.setAttribute("src",r)}else{let t=this.domWrapper.querySelector("img");t&&t.setAttribute("src",r)}this.domWrapper.classList.remove("loading"),d.draftSave()}},t=>(d.quillDeleteText(this.offset(this.scroll),this.length(),n.a.sources.SILENT),d.draftSave(),Object(u.showError)(t)))}uploadData(t){let e=null;return!!(e=t.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))&&{type:e[1],base64_data:e[2]}}sanitize(t){return Object(u.sanitize)(t,["http","https","data"])?t:"//:0"}static value(t){let e={caption:""},r=t.querySelector("img");r&&(e.image=r.src);let n=t.querySelector("video");n&&(e.video=n.src);let o=t.querySelector("iframe");o&&(e.embed=o.src);let i=t.querySelector("figcaption");if(i){let t=i.querySelector(".editable_input");e.caption=t?t.value:i.innerText}return e}focus(){this.domNode.classList.add("focus")}blur(){this.domNode.classList.remove("focus")}_index(t,e){if(t===this.domCaption)return 0;let r=0;return t.nodeType==t.TEXT_NODE&&(r+=e>=0?e:t.data.length),t.previousSibling?r+this._index(t.previousSibling,-1):t.parentNode?r+this._index(t.parentNode,-1):0}_position(t,e){if(t.nodeType==t.TEXT_NODE)return e<=t.data.length?[t,e]:[null,e-=t.data.length];{let n=t.firstChild;for(;n;){let t=null;var r=c(this._position(n,e),2);if(t=r[0],e=r[1],t)return[t,e];n=n.nextSibling}return[t,e]}}update(t){this.domCursor.innerHTML=""}index(t,e){return 0}position(t,e){return[this.domCursor,0]}async uploadFileStart(t,e,r,n){try{const o=await Object(l.uploadFileService)(Object(u.uploadDataToBlob)(t),e);r&&r(o)}catch(t){n&&n("Network error")}}}},741:function(t,e,r){"use strict";var n=r(19),o=r(84),i=r(207),a=r(204);r(205)("match",1,function(t,e,r,s){return[function(r){var n=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,n):new RegExp(r)[e](String(n))},function(t){var e=s(r,t,this);if(e.done)return e.value;var l=n(t),u=String(this);if(!l.global)return a(l,u);var c=l.unicode;l.lastIndex=0;for(var d,p=[],f=0;null!==(d=a(l,u));){var h=String(d[0]);p[f]=h,""===h&&(l.lastIndex=i(u,o(l.lastIndex),c)),f++}return 0===f?null:p}]})}}]);