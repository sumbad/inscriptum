"use strict";(self.webpackChunkinscriptum=self.webpackChunkinscriptum||[]).push([[6455,8079,8926,3164,4099,9731,6681,3041,7466,9296,9691,9022,1888,6885,6301],{8079:(t,e,s)=>{s.r(e),s.d(e,{BlockquoteBlot:()=>o});var i=s(5039),r=s(3691);class o extends r.ZP{}o.blotName="blockBlockquote",o.tagName="blockquote",i.Z.register(o)},8926:(t,e,s)=>{s.r(e),s.d(e,{BreakBlot:()=>o});var i=s(5039),r=s(3691);class o extends r.i2{}o.blotName="textBreak",o.tagName="br",o.className="inline",i.Z.register(o)},3164:(t,e,s)=>{s.r(e),s.d(e,{DescriptionBlot:()=>o});var i=s(5039),r=s(9731);class o extends r.FieldBlot{static create(t){console.log("DescriptionBlot create ",t);let e=super.create(t);return e.setAttribute("data-placeholder","Summary of the text"),e.setAttribute("data-label","Description"),e}formatAt(t,e,s,i){console.log("DescriptionBlot formatAt ",t,e,s,i),s===o.blotName?super.formatAt(t,e,s,i):"link"===s&&super.formatAt(0,this.length(),s,i)}format(t,e){console.log("DescriptionBlot format ",t,e),super.format(t,e)}replace(t){console.log("DescriptionBlot replace ",t),super.replace(t)}insertAt(t,e,s){console.log("DescriptionBlot insertAt ",t,e,s),super.insertAt(t,e,s)}}o.blotName="blockDescription",o.tagName="address",i.Z.register(o)},4099:(t,e,s)=>{s.r(e),s.d(e,{DividerBlot:()=>r});var i=s(3691);class r extends i.i2{}r.blotName="blockDivider",r.tagName="hr"},9731:(t,e,s)=>{s.r(e),s.d(e,{FieldBlot:()=>r});var i=s(9022);class r extends i.SingleLineBlot{}},6681:(t,e,s)=>{s.r(e),s.d(e,{FigureBlot:()=>u});var i=s(5039),r=s(3691),o=s(1812),a=s(9367),l=s.n(a),n=s(8770),d=s(6136),c=function(t,e,s,i){return new(s||(s=Promise))((function(r,o){function a(t){try{n(i.next(t))}catch(t){o(t)}}function l(t){try{n(i.throw(t))}catch(t){o(t)}}function n(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,l)}n((i=i.apply(t,e||[])).next())}))};class u extends r.i2{constructor(t,e){super(t),this.domNode=t,this.domWrapper=document.createElement("div"),this.domCursor=document.createElement("span"),this.domCaption=document.createElement("figcaption"),this.domWrapper.classList.add("figure_wrapper"),this.domCursor.classList.add("cursor_wrapper"),this.domCursor.setAttribute("contenteditable","true"),this.domCaption.classList.add("editable_text"),this.domCaption.setAttribute("data-placeholder","Caption (optional)"),e.caption&&(this.domCaption.innerText=e.caption),this.domNode.appendChild(this.domWrapper),this.domNode.appendChild(this.domCursor),this.domNode.appendChild(this.domCaption),setTimeout((()=>{(0,d.updateEditableText)(this.domNode)}),1);let s=!1;e.image?(this.appendImgNode(e.image),s=this.uploadData(e.image)):e.video?(this.appendVideoNode(e.video),s=this.uploadData(e.video)):e.embed&&this.appendIframeNode(e.embed),s&&(this.domProgress=document.createElement("div"),this.domProgressBar=document.createElement("div"),this.domProgress.classList.add("file_progress"),this.domProgressBar.classList.add("file_progress_bar"),this.domWrapper.classList.add("loading"),this.domProgress.appendChild(this.domProgressBar),this.domWrapper.appendChild(this.domProgress),this.uploadFile(s)),this.domWrapper.onclick=()=>{if(!this.domNode.classList.contains("focus")){let t=this.offset(this.scroll);this.focus(),u.quillSetSelection(t)}},this.domCursor.onkeydown=t=>{let e=t.which||t.keyCode;if(e==o.Z.keys.BACKSPACE){let e=this.offset(this.scroll);u.quillDeleteText(e,this.length()),u.quillSetSelection(e-1),t.preventDefault()}else if(e==o.Z.keys.ENTER){let e=this.offset(this.scroll)+this.length();this.focus(),u.quillInsertText(e,"\n"),u.quillSetSelection(e),t.preventDefault()}},this.domCursor.onpaste=t=>{t.stopPropagation(),t.preventDefault()},this.domCaption.onkeydown=t=>{let e=t.which||t.keyCode,s=t.target;if(e==o.Z.keys.ENTER){if(t.shiftKey)return;let e={start:s.selectionStart,end:s.selectionEnd},i=s.value;if(e.start!=e.end)i=i.substr(0,e.start)+i.substr(e.end),s.setSelectionRange(i.length,i.length);else if(e.end==i.length){let t=this.offset(this.scroll)+this.length();this.focus(),u.quillInsertText(t,"\n"),u.quillSetSelection(t)}t.preventDefault()}else if(e==o.Z.keys.DOWN||e==o.Z.keys.TAB||e==o.Z.keys.RIGHT){let e={start:s.selectionStart,end:s.selectionEnd},i=s.value;if(e.start==e.end&&e.end==i.length){let e=this.offset(this.scroll)+this.length();this.focus(),u.quillSetSelection(e,0),t.preventDefault()}}else if(e==o.Z.keys.LEFT||e==o.Z.keys.UP){let e={start:s.selectionStart,end:s.selectionEnd};if(e.start==e.end&&0===e.start){let e=this.offset(this.scroll)-1;this.focus(),u.quillSetSelection(e,0),t.preventDefault()}}};const i=t=>{null!==t&&null!==t.target&&(this.domCaption.classList.toggle("empty",!t.target.value),l().update(t.target),u.draftSave())};this.domCaption.onpaste=t=>{t.stopPropagation(),i(t)},this.domCaption.onkeyup=i,this.domCaption.ondrop=i,this.domCaption.onchange=i,this.domCaption.oninput=i,this.domCaption.oncut=i,this.domCaption.onclick=t=>{t.target&&t.target.focus()}}static create(t){let e=super.create(t);return e.setAttribute("contenteditable","false"),e}appendImgNode(t){let e=document.createElement("img");return e.setAttribute("src",this.sanitize(t)),this.domWrapper.appendChild(e),e}appendVideoNode(t){let e=document.createElement("video");return e.setAttribute("src",this.sanitize(t)),e.setAttribute("preload","auto"),e.setAttribute("controls","controls"),e.addEventListener("loadeddata",(function(){this.mozHasAudio||this.webkitAudioDecodedByteCount||this.audioTracks&&this.audioTracks.length||(this.setAttribute("autoplay","autoplay"),this.setAttribute("loop","loop"),this.setAttribute("muted","muted"),this.removeAttribute("controls"),this.play())})),this.domWrapper.appendChild(e),e}appendIframeNode(t){let e=document.createElement("div"),s=document.createElement("div"),i=document.createElement("iframe");return e.classList.add("iframe_wrap"),e.appendChild(s),s.classList.add("iframe_helper"),s.style.paddingTop="56.25%",s.appendChild(i),i.setAttribute("src",this.sanitize(t)),i.setAttribute("width","640"),i.setAttribute("height","360"),i.setAttribute("frameborder","0"),i.setAttribute("allowtransparency","true"),i.setAttribute("allowfullscreen","true"),i.setAttribute("scrolling","no"),this.domWrapper.appendChild(e),e}uploadFile(t){this.uploadFileStart(t,((t,e)=>{let s=0;e&&t&&(s=100*t/e,s=Math.min(100,s)),this.domProgressBar.style.width=s+"%"}),(e=>{if(e){let s=this.sanitize(e.src);if("video/"==t.type.substr(0,6)){let t=this.domWrapper.querySelector("video");t&&t.setAttribute("src",s)}else{let t=this.domWrapper.querySelector("img");t&&t.setAttribute("src",s)}this.domWrapper.classList.remove("loading"),u.draftSave()}}),(t=>(u.quillDeleteText(this.offset(this.scroll),this.length(),i.Z.sources.SILENT),u.draftSave(),(0,d.showError)(t))))}uploadData(t){let e=null;return!!(e=t.match(/^data:(image\/gif|image\/jpe?g|image\/png|video\/mp4);base64,(.*)$/))&&{type:e[1],base64_data:e[2]}}sanitize(t){return(0,d.sanitize)(t,["http","https","data"])?t:"//:0"}static value(t){let e={caption:""},s=t.querySelector("img");s&&(e.image=s.src);let i=t.querySelector("video");i&&(e.video=i.src);let r=t.querySelector("iframe");r&&(e.embed=r.src);let o=t.querySelector("figcaption");if(o){let t=o.querySelector(".editable_input");e.caption=t?t.value:o.innerText}return e}focus(){this.domNode.classList.add("focus")}blur(){this.domNode.classList.remove("focus")}_index(t,e){if(t===this.domCaption)return 0;let s=0;return t.nodeType==t.TEXT_NODE&&(s+=e>=0?e:t.data.length),t.previousSibling?s+this._index(t.previousSibling,-1):t.parentNode?s+this._index(t.parentNode,-1):0}_position(t,e){if(t.nodeType==t.TEXT_NODE)return e<=t.data.length?[t,e]:[null,e-=t.data.length];{let s=t.firstChild;for(;s;){let t=null;if([t,e]=this._position(s,e),t)return[t,e];s=s.nextSibling}return[t,e]}}update(t){this.domCursor.innerHTML=""}index(t,e){return 0}position(t,e){return[this.domCursor,0]}uploadFileStart(t,e,s,i){return c(this,void 0,void 0,(function*(){try{const i=yield(0,n.uploadFileService)((0,d.uploadDataToBlob)(t),e);s&&s(i)}catch(t){i&&i("Network error")}}))}}},3041:(t,e,s)=>{s.r(e),s.d(e,{HeaderBlot:()=>o});var i=s(5039),r=s(9022);class o extends r.SingleLineBlot{optimize(t){super.optimize(t);let e=this.domNode.innerText;e=e.replace(/[\s_]+/g,"-"),e=e.replace(/(^-+|-+$)/g,""),this.domNode.id!==e&&this.domNode.setAttribute("id",e)}formatAt(t,e,s,i){("bold"!==s&&"italic"!==s&&"code"!==s||!i)&&super.formatAt(t,e,s,i)}}o.blotName="blockHeader",o.tagName="h3",i.Z.register(o)},5622:(t,e,s)=>{s.r(e),s.d(e,{CodeEndLineFlag:()=>a,InsSyntaxCodeBlock:()=>l,InsSyntaxModule:()=>n});var i=s(5039),r=s(1154),o=s(3549);class a extends r.Z{static formats(){return{}}}a.blotName="code-end",a.className="l",a.tagName="SPAN",i.Z.register(a);class l extends o.dn{highlight(t){let e=this.domNode.textContent||"";if(this.cachedText!==e){if(e.trim().length>0||null==this.cachedText){let s="";const i=t(e).split("\n");for(let t=0;t<i.length-1;t++)s+=`<span class="l">${i[t]||" "}</span>\n`;s+=`<span class="l">${i[i.length-1]}</span>`,this.domNode.innerHTML=`<code class="hljs">${s}</code>`}this.cachedText=e}}}class n extends o.ZP{static register(){i.Z.register(o.GW,!0),i.Z.register(l,!0)}highlight(){if(this.quill.selection.composing)return;this.quill.update(i.Z.sources.USER);let t=this.quill.getSelection();this.quill.scroll.descendants(l).forEach((t=>{t.highlight(this.options.highlight)})),this.quill.update(i.Z.sources.SILENT),null!=t&&document.activeElement===this.quill.container.querySelector("[contenteditable]")&&this.quill.setSelection(t,i.Z.sources.SILENT)}}},7466:(t,e,s)=>{s.r(e),s.d(e,{LinkBlot:()=>o});var i=s(1154),r=s(6136);class o extends i.Z{constructor(t,e){super(t),this.value=e,t.addEventListener("mouseover",o.showLinkTooltip.bind(this,this),!1),t.addEventListener("mouseout",o.hideLinkTooltip,!1)}static create(t){let e=super.create(t);t=this.sanitize(t),e.setAttribute("href",t);var s=t.substr(0,1);return"/"!=s&&"#"!=s&&"tg://"!=t.substr(0,5)&&"mailto:"!=t.substr(0,7)&&e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){const e=o.relativeUrl(t);return(0,r.sanitize)(t,["http","https","tg","mailto"])?e:"about:blank"}detach(){this.domNode.removeEventListener("mouseover",o.showLinkTooltip.bind(this,this),!1),this.domNode.removeEventListener("mouseout",o.hideLinkTooltip,!1),super.detach(),o.hideLinkTooltip()}format(t,e){if(t!==this.statics.blotName||!e)return super.format(t,e);e=o.sanitize(e),this.domNode.setAttribute("href",e),this.domNode.setAttribute("data-title",e)}static relativeUrl(t){let e=location,s=document.createElement("a");return s.href=t,e.origin!==s.origin?s.href:e.pathname!==s.pathname||e.search!==s.search?s.pathname+s.search+s.hash:e.href===s.href?s.hash||s.pathname+s.search+s.hash:s.hash}}},1428:(t,e,s)=>{s.r(e),s.d(e,{ListContinuer:()=>r});var i=s(9244);class r extends i.Z{static create(t){let e;return"string"==typeof t?e=super.create(t):(e=super.create(t.type),void 0!==t.start&&(e.setAttribute("start",t.start),e.style["counter-reset"]=`list-0 ${t.start}`)),e}static formats(t){let e=super.formats(t);return console.log("MyList-static.formats",e,t.getAttribute("start")),{type:e,start:t.getAttribute("start")}}}},9296:(t,e,s)=>{s.r(e),s.d(e,{MyQuill:()=>r});var i=s(5039);class r extends i.Z{formatLine(...t){super.formatLine(...t),this.updateSelection()}formatText(...t){super.formatText(...t),this.updateSelection()}updateSelection(t){if(this.hasFocus()){t=t||r.sources.SILENT;let e=this.getSelection(!0);this.setSelection(++e.index,e.length,t),this.setSelection(--e.index,e.length,t)}}}},9691:(t,e,s)=>{s.r(e),s.d(e,{PullquoteBlot:()=>o});var i=s(5039),r=s(3691);class o extends r.ZP{}o.blotName="blockPullquote",o.tagName="aside",i.Z.register(o)},9022:(t,e,s)=>{s.r(e),s.d(e,{SingleLineBlot:()=>l});var i=s(3691),r=s(8926),o=s(347),a=s.n(o);class l extends i.ZP{replace(t){t.children.forEach((t=>{t instanceof r.BreakBlot&&t.replaceWith(a().create("text"," "))})),super.replace(t)}insertAt(t,e,s){void 0!==s&&"textBreak"==e?super.insertAt(t,"\n"):super.insertAt(t,e,s)}}},1888:(t,e,s)=>{s.r(e),s.d(e,{SubheaderBlot:()=>o});var i=s(5039),r=s(3041);class o extends r.HeaderBlot{}o.blotName="blockSubheader",o.tagName="h4",i.Z.register(o)},6885:(t,e,s)=>{s.r(e),s.d(e,{TitleBlot:()=>o});var i=s(5039),r=s(9731);class o extends r.FieldBlot{static create(t){let e=super.create(t);return e.setAttribute("data-placeholder","Title"),e.setAttribute("data-label","Title"),e}formatAt(t,e,s,i){s===o.blotName&&super.formatAt(t,e,s,i)}}o.blotName="blockTitle",o.tagName="h1",i.Z.register(o)},6301:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});var i=s(637),r=s(9622),o=s(2247),a=s(4085),l=s(1042),n=s(836),d=s(6167),c=s(5688);i.Z.registerLanguage("javascript",r.Z),i.Z.registerLanguage("typescript",o.Z),i.Z.registerLanguage("sql",a.Z),i.Z.registerLanguage("xml",l.Z),i.Z.registerLanguage("css",n.Z),i.Z.registerLanguage("bash",d.Z),i.Z.registerLanguage("yaml",c.Z);const u=i.Z}}]);