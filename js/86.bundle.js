(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{666:function(t,e,n){"use strict";n.r(e),n.d(e,"DemoLitComponent",function(){return S});var i=n(212),s=n(46),o=n(531),a=n(598),r=n(551),l=n(101),c=n(102),d=n(67),u=n(559),f=n(570),h=n(584);function b(){var t=m(["\n      ",'\n      \n      <div id="tooltip-controls">\n        <button id="bold-button"><i class="fas fa-bold"></i></button>\n        <button id="italic-button"><i class="fas fa-italic"></i></button>\n        <button id="link-button"><i class="fas fa-link"></i></button>\n        <button id="blockquote-button"><i class="fas fa-quote-right"></i></button>\n        <button id="header-1-button">\n          <span class="fa-layers fa-fw">\n            <i class="fas fa-heading"></i>\n            <span class="fa-layers-text" data-fa-transform="shrink-6 down-4 right-11">\n              1\n            </span>\n          </span>\n        </button>\n        <button id="header-2-button">\n          <span class="fa-layers fa-fw">\n            <i class="fas fa-heading"></i>\n            <span class="fa-layers-text" data-fa-transform="shrink-6 down-4 right-11">\n              2\n            </span>\n          </span>\n        </button>\n      </div>\n      <div id="sidebar-controls">\n        <button id="show-controls">\n          ','\n        </button>\n        <span class="controls">\n          <button id="image-button"><i class="fas fa-camera"></i></button>\n          <button id="video-button"><i class="fas fa-play"></i></button>\n          <button id="tweet-button"><i class="fab fa-twitter"></i></button>\n          <button id="divider-button"><i class="fas fa-minus"></i></button>\n        </span>\n      </div>\n      <div id="editor-container">\n        <p>Tell your story...<p>\n      </div>\n      \n      <button class="editor__publish-btn" @click=','>\n        <i class="fas fa-file-export fa-2x"></i>\n      </button>\n    ']);return b=function(){return t},t}function v(){var t=m(['<i class="fas fa-plus"></i>']);return v=function(){return t},t}function p(){var t=m(['<i class="fas fa-plus" data-fa-transform="rotate-45"></i>']);return p=function(){return t},t}function y(){var t=m(["<style>","</style>"]);return y=function(){return t},t}function m(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var g=function(t,e,n,i){var s,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(a=(o<3?s(a):o>3?s(e,n,a):s(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a};u.b.add(f.g,f.c,f.i,f.j,f.n,f.h,f.d,f.l,h.b,f.k,f.m);var S=class extends i.a{constructor(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c.a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.a(e);super(o.a,!1),this._storageService=e,this._authService=i,this.html=s.e,this.css=n(627),this.state={time:(new Date).toLocaleTimeString()},this.active=!1,this.changedContent$=new d.BehaviorSubject(null),this.changedContent$.skip(2).debounceTime(1e4).subscribe(e=>{null!==e&&this._storageService.updateDraft(this.id,e).then(()=>{t=e})}),window.addEventListener("beforeunload",e=>{var n=this.changedContent$.getValue();null!==n&&t!==n&&(this._storageService.updateDraft(this.id,n).then(()=>{t=n}),e.returnValue="Has not saved content!")})}connectedCallback(){super.connectedCallback();var t=this.querySelector("#editor-container"),e=this.querySelector("#tooltip-controls"),n=this.querySelector("#sidebar-controls"),i=this.querySelector("#show-controls"),s=new a.default(t);s.addContainer(e),s.addContainer(n),s.on("editor-change",(t,i)=>{if("selection-change"===t&&null!=i)if(0===i.length){e.style.display="none";var[o,a]=s.scroll.scroll.descendant(r.c,i.index);if(null!=o&&o.domNode.firstChild instanceof HTMLBRElement){var l=s.getBounds(i);n.classList.remove("active"),this.active=!1,n.style.display="initial",n.style.left="".concat(l.left-80,"px"),n.style.top="".concat(l.top-5,"px")}else e.style.display="none",n.style.display="none";this.changedContent$.next(s.getContents())}else{n.style.display="none",n.classList.remove("active"),this.active=!1;var c=s.getBounds(i);e.style.display="initial",e.style.left="".concat(c.left+c.width/2-e.offsetWidth/2,"px"),e.style.top="".concat(c.bottom+10,"px")}});var o=this.querySelector("#bold-button"),l=this.querySelector("#italic-button"),c=this.querySelector("#link-button"),d=this.querySelector("#blockquote-button"),f=this.querySelector("#header-1-button"),h=this.querySelector("#header-2-button"),b=this.querySelector("#divider-button"),v=this.querySelector("#image-button"),p=this.querySelector("#video-button"),y=this.querySelector("#tweet-button");o.addEventListener("click",()=>{s.format("bold",!0)}),l.addEventListener("click",()=>{s.format("italic",!0)}),c.addEventListener("click",()=>{var t=prompt("Enter link URL");s.format("link",t)}),d.addEventListener("click",()=>{s.format("blockquote",!0)}),f.addEventListener("click",()=>{s.format("header",1)}),h.addEventListener("click",()=>{s.format("header",2)}),b.addEventListener("click",()=>{var t=s.getSelection(!0);s.insertEmbed(t.index,"divider",!0,a.default.sources.USER),s.setSelection(t.index+1,0,a.default.sources.SILENT),n.style.display="none"}),v.addEventListener("click",()=>{var t=s.getSelection(!0);s.insertEmbed(t.index,"image",{alt:"Quill Cloud",url:"https://quilljs.com/0.20/assets/images/cloud.png"},a.default.sources.USER),s.setSelection(t.index+1,0,a.default.sources.SILENT),n.style.display="none"}),p.addEventListener("click",()=>{var t=s.getSelection(!0);s.insertEmbed(t.index,"video","https://www.youtube.com/embed/QHH3iSeDBLo?showinfo=0",a.default.sources.USER),s.formatText(t.index+1,1,{height:"170",width:"400"}),s.setSelection(t.index+1,0,a.default.sources.SILENT),n.style.display="none"}),y.addEventListener("click",()=>{var t=s.getSelection(!0);s.insertEmbed(t.index,"tweet","464454167226904576",a.default.sources.USER),s.setSelection(t.index+1,0,a.default.sources.SILENT),n.style.display="none"}),i.addEventListener("click",()=>{this.active=!this.active,n.classList.toggle("active"),console.log(JSON.stringify(s.getContents())),console.log(s.root.innerHTML)}),this._authService.$authenticated.subscribe(t=>{t&&this._storageService.allDrafts().then(t=>{this.id=t.allDrafts[0].id,s.setContents(t.allDrafts[0].contents)})}),window.quill=s,u.a.watch()}render(){var t=this.html(y(),this.css),e=this.active?this.html(p()):this.html(v());return this.html(b(),t,e,this.clickHandlerPublish.bind(this))}clickHandlerPublish(t){t.preventDefault();var e=this.querySelector("#editor-container>.ql-editor"),n=document.createElement("a"),i=new Blob([e.innerHTML],{type:"application/octet-stream"});n.href=window.URL.createObjectURL(i),n.download="Download.html",n.click()}};g([Object(i.d)()],S.prototype,"active",void 0),S=g([Object(i.b)("inscriptum-editor")],S)}}]);