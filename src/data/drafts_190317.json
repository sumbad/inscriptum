[{"contents":{"ops":[{"insert":"Сборка и упаковка проекта"},{"attributes":{"header":1},"insert":"\n"},{"insert":"Наиболее интересным выглядит NectarJS. Тем более, что обещают производительность, как у нативных приложений. Но есть два опасения для использования:\nпроект находится в alpha версии;"},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"вся компиляция происходит на удаленном сервере (SAAS или CAAS - Compiler As A Service). Т.е. мы не можем повлиять на этот процесс и нет 100% гарантии, что код останется приватным."},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Ссылки"},{"attributes":{"header":2},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/25564719/deploying-node-js-project-without-npm-on-client-side"},"insert":"Оптимизация размера node_modules"},{"insert":"."},{"attributes":{"list":"ordered"},"insert":"\n"},{"attributes":{"link":"https://hackernoon.com/javascript-compilation-epoch-ebfb7b5bb664"},"insert":"Статья про компиляцию/сборку js приложений"},{"insert":"."},{"attributes":{"list":"ordered"},"insert":"\n"},{"attributes":{"link":"https://github.com/Parellin-Technologies-LLC/basic-fs/wiki/pkg-vs-nexe-vs-nodec"},"insert":"Сравнение pkg vs nexe vs nodec"},{"insert":"."},{"attributes":{"list":"ordered"},"insert":"\n"},{"attributes":{"link":"https://github.com/nexe/nexe"},"insert":"nexe"},{"insert":"."},{"attributes":{"list":"ordered"},"insert":"\n"},{"attributes":{"link":"https://github.com/zeit/pkg"},"insert":"pkg"},{"insert":"."},{"attributes":{"list":"ordered"},"insert":"\n"},{"attributes":{"link":"https://nectarjs.com/"},"insert":"NectarJS - компиляция js в нативный код"},{"insert":"."},{"attributes":{"list":"ordered"},"insert":"\n"}]},"id":"cjqgv9g0k5j930136cc6ew445"},{"contents":{"ops":[{"insert":"Разделение frontend и backend, с сохранением взаимопонимания"},{"attributes":{"blockTitle":true},"insert":"\n"},{"insert":"Независимый frontend и backend"},{"attributes":{"blockAuthor":true},"insert":"\n"},{"insert":"Несколько лет назад мне попалась небольшая статья в журнале, ученый рассказывал о процессе обучения. Отмечалось, что для полноценного получения знаний нужно всё больше и больше времени, а в недалеком будущем этот процесс может быть равен 80-ти годам жизни. Видимо, в IT это будущее уже настало.\nМне посчастливилось, я начинал программировать в те годы, когда не было разделение на backend и frontend программистов, когда не звучали слова UX, прототип, QA и продуктолог. Мир был проще, деревья были выше и зеленее, воздух чище, а во дворах играли дети, а не парковались автомобили. Как бы мне ни хотелось вернуться в те годы, нужно признать, что всё это не замысел какого-то суперзлодея, а ход эволюционного развития общества. Да, общество могло начать развиваться и иначе, но как говорится история не терпит сослагательных наклонений. \nПредыстория"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"Продукт над которым работает наша команда тоже появился в те далекие годы, когда не было жесткого разделения по направлениям. Он имел неплохую согласованную архитектуру, умел хорошо управлять поведением пользователя и даже позволял расширять себя с помощью системы плагинов. Шло время, команда развивала продукт и вроде бы всё было хорошо, но стали прослеживаться странные явления. К примеру, когда программист занимался бизнес логикой, он как-то начинал плохо верстать формы, делал их неудобными и сложными для восприятия. Про вопросы QA и развитие продукта вообще можно было забыть в моменты, когда приложение падало с неизвестной ошибкой. Ну, собственно, всё как у всех, когда продукт сравнительно небольшой и общие требования не столь высоки один программист успевал делать работу в разных направлениях. Когда же требования в каждом из этих направлений сильно возросли, а ты видишь картину в целом и прекрасно понимаешь, что если функция не будет правильно и стабильно работать, то все эти кнопочки, формочки, тесты, презентации и продвижения ничем не помогут, то ты просто откладываешь всё вокруг и садишься за исправление работы этой злосчастной функции. После этого ты делаешь свой маленький подвиг пусть он и останется никем неоцененным, но функция начинает работать. Собственно, как-то так и появились в нашей команде люди, ответственные за разные направления, чтобы эти маленькие подвиги дошли до клиентов, которым они действительно нужны.\nFrontend и backend"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"Стать профессионалом во всём долго и дорого. Поэтому современный мир прикладных программистов делится в основной своей массе на frontend и backend. Здесь вроде всё понятно, набираем команду frontend, она теперь у нас будет отвечать за пользовательский интерфейс. У backend тоже всё хорошо, наконец они могут сфокусироваться на бизнес логике, моделях данных и других подкапотных вещах. Для какого-то абстрактного нового проекта на этом можно было закончить статью, но у нас уже было написанное приложение. Приложение, интерфейс которого строился на стороне сервера. Frontend только реализовывал полученные от него инструкции. Иными словами, за интерфейс пользователя отвечал не frontend, а backend. Архитектурно frontend и backend работали как одно целое - изменяя одно, были вынуждены менять другое. И это не самое страшно, наибольшей проблемой стала невозможность разработки пользовательского интерфейса без глубинных знаний того, что происходит на сервере. \nИспользование монолита из backend+frontend приводит к невозможности развивать продукт требуемыми темпами и часто ведет к жесткой связанности или \"перетягиванию одеяла\" в разработке. Современный интерфейс часто модифицируется под нужды клиентов, что приводит к постоянным изменениям в структуре отображаемых данных. У нас это вело к необходимости менять логику backend'а, хотя структура самих данных чаще всего оставалась неизменной.\nПочти два года назад начался процесс кардинальной переработки продукта и стало понятно, что дальше так жить нельзя. Сильная зависимость между frontend и backend приводит к невозможности делать работу параллельно и тем самым тормозит обе части команды. Проектируя новое API нужно было отделить frontend и backend, но при этом сохранить согласованность их работы. Кто-то скажет, что согласованность нужно достигать с помощью повышения soft skills. Да, коммуникации нужно развивать, но это не панацея. К примеру, посмотрите на дорожное движение, там тоже важно, чтобы водители были взаимовежливы, умели объезжать случайные препятствия и помогали друг другу на дороге в сложных ситуациях. Но! Без правил дорожного движения мы даже при наилучших коммуникациях получили бы аварии на каждом перекрестке и огромные риски не доехать до пункта назначения в запланированное время.\nAPI"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"Цели для нового API сформировались сами собой из наших ежедневных трудностей в реализации новых продуктовых и дизайнерских идей:\nСлабая связанность компонентов системы. Параллельное развитие frontend и backend."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Высокая масштабируемость. Иными словами, новое API не должно стать для нас препятствием в наращивании функциональности."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Стабильность и согласованность."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Весь research по API начали не с backend, как это обычно принято, а наоборот - подумали, что нужно пользователям нашего API. Понятно, что наиболее распространены решения в виде разного рода REST API. В последние годы к ним добавляют описательные модели через инструменты типо "},{"attributes":{"link":"https://swagger.io/"},"insert":"swagger"},{"insert":", но нужно понимать, что это тот же REST. И по сути, самым главным его плюсом и минусом являются правила, которые носят исключительно описательный характер. Это значит, что никто не запрещает создателю такого API отклоняться от постулатов REST в ходе реализации отдельных частей. Другим распространенным решением является GraphQL и, хотя, он тоже не идеален, но в отличие от REST, GraphQL API это не просто описательная модель, а настоящие правила.\nРассмотрев возможные варианты работы с сервером мы остановились на GraphQL в качестве API для frontend. Но, так как наш backend на C++, то реализация GraphQL сервера оказалось нетривиальной задачей. \nПосле ряда тестов мы решили, что нужен промежуточный слой в виде Node.js сервера. Изучили современные фреймворки и остановились на Express.js. Далее нужно было решить как обращаться к API backend'а. Сначала смотрели в сторону поднятия REST API, потом пробовали использовать аддоны на C++ для Node.js. В итоге поняли, что это всё нам не подходит и после подробного анализа выбрали API на базе gRPC сервисов.\nСобрав воедино полученный опыт использования C++, TypesSript, GraphQL и gRPC мы получили архитектуру приложения, позволяющую гибко развивать backend и frontend, продолжая при этом создавать единый программный продукт.\nКак результат, получилась схема, где frontend общается с промежуточным сервером с помощью GraphQL запросов (знает, что спросить и что получит в ответ). GraphQL сервер в резолверах вызывает API функции gRPC сервера, при этом для связи они используют Protobuf схемы. API сервер на базе gRPC знает у какого микросервиса взять данные или кому передать полученный запрос. Сами микросервисы при этом построены также на gRPC, что обеспечивает скорость обработки запросов, типизацию данных и возможность использования различных языков программирования для их разработки.\nОсновные цели, которые мы достигли: \nЗа отображение отвечает frontend, а за данные backend. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"На frontend сохранилась гибкость в плане запросов и получения данных. Интерфейс знает, что можно попросить у сервера и какие ответы должны быть. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"На backend появилась возможность изменения кода с уверенностью, что интерфейс у пользователя продолжит работать. Стал возможным переход на микросервисную архитектуру без необходимости сразу же переделывать весь frontend. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Появилась возможность использования mock данных для frontend, когда еще не готов backend. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Создание схем для совместной работы исключили проблемы взаимодействия, когда команды понимали одну и ту же задачу по разному. Сократилось количество итераций по переделке форматов данных - действуем по принципу \"Семь раз отмерь, один раз отрежь\". "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Возможность параллельного планирования работ на спринт. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Возможность набора разработчиков не знакомых с C++ для реализации отдельных микросервисов. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Возможность встраивания в текущее решение, для постепенного перехода."},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Заключение"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"Это была краткая и очень общая статья по результатам нашей сложной исследовательской работы на тему как же с технической точки зрения менять архитектуру для дальнейшего развития продукта. Здесь я поверхностно затронул вопросы командной и межкомандной работы над одним продуктом, выбор технологи API (REST vs GraphQL), связь Node.js приложения с C++ и т.д. Каждая из этих тем тянет на отдельную статью и если вам будет интересно, то мы их обязательно напишем.\n\n\n\n\n\n\n\n"}]},"id":"cjqz0cbno609r0136k6gf5oot"},{"contents":{"ops":[{"insert":"Планы развития"},{"attributes":{"blockTitle":true},"insert":"\n"},{"insert":"5 марта 2019"},{"attributes":{"blockAuthor":true},"insert":"\n"},{"insert":"Нужно придумать и написать общий план развития биллинга. Подумать про команду, факторы развития и деградации. Важным моментом является рассмотрение рисков. Нужен четкий план с приблизительными датами. Список целей, развитие клиентских приложений. Вопросы безопасности. Плагинам нужно будет посвятить отдельную большую часть рассказа.\n\nИсходные данные"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"Признание уникальности команды, проекта, ситуации - это всегда достаточно неоднозначная позиция. С одной стороны становится понятнее, что и как делать в будущем, можно более точно прогнозировать риски и затраты, с другой - это повод для оправданий. Таким образом можно сказать, что что-то пошло ни так не потому, что мы ошиблись, просчитались, приложили не достаточно усилий, а потому, что ситуация уникальна, мы уникальны и другие доводы в этом же роде...\nМне не хотелось бы впадать в такое состояние, но для полноты картины некоторые особенно важные аспекты биллинга упомянуть нужно.\nКомплексный продукт. Даже можно сказать эталон комплексного продукта. В современном олигархическом обществе финансовые отношения на столько запутаны, имеют такое количество нюансов, что учесть их и создать систему становится пазлом на миллиона кусочков. К этому нужно прибавить все продаваемые продукты, которые сами по себе так же являются отдельными предметными областями. Помимо этого высокая сложность заключается в множестве интеграций с другими продуктам.  Комплексность проявляется и в архитектуре приложения, которое с одной стороны сильно завязано на так называемое ядро (core), а с другой является сложно изменяемым монолитом."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Обратная совместимость. На habr есть статья, где описывается анонс 5-ой версии, стоит почитать комментарии, переход для пользователей был не простым. Поэтому для нас очень важен момент максимальной обратной совместимости. Мы не можем просто убрать старое и создать новое. Как говорится, в процессе разработки могут \"рушиться целые вселенные, рваться снаряды и происходить революции\", но клиент должен наблюдать плавное, безболезненное и ожидаемое развитие системы."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Разные клиенты. У всех клиенты разные. Но у нас на это ещё и накладывается то, что они с двух совершенно разных сегментов - администраторы биллинга и их пользователи. К сожалению, их взгляды и потребности далеко не всегда совпадают, а порой и совершенно противоречат друг другу. Нужно угодить всем."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"\nЦели"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"В единоборствах есть выражение - \"смотри сквозь стену, чтобы пробить стену\". Поэтому наши цели и планы можно назвать наполеоновскими. Вначале по крупным блокам.\nОжидаемый и прогнозируемый результат по разработке (lean software development)."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Более быстрый цикл выпуска (не больше 1-го спринта)."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Сохранение обратной совместимости при обновлениях."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Стабильность и отказоустойчивость (уменьшение bugfix, снижение количество переоткрываемых задач)."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Headless решения и плагины для максимальной гибкости."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Рассмотрим их подробнее. Далее буду приводить цели в каждом из блоков, проводимые и планируемые действия для их достижения, критерии оценки и ожидаемые сроки.\nКонцепция развития"},{"attributes":{"blockSubheader":true},"insert":"\n"},{"insert":"Повышение профессиональных компетенций в командах биллинга. Прозрачное и удобное межкомандное взаимодействие."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Динамические клиентские приложения с системой плагинов (поставляемых из коробки) для решения широкого спектра пользовательских задач из любых категорий."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Модернизация биллинга, создание гибкой и распределенной программной системы (API, микросервисы, независимость клиентских приложений)."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"\nПо поводу первого из пунктов, есть предложение улучшить и закрепить более прозрачный процесс разработки фич.\n"},{"insert":{"blockFigure":{"caption":"","image":"https://res.cloudinary.com/inscriptum/image/upload/v1552269709/blob_yizavz.jpg"}}},{"attributes":{"blockSubheader":true},"insert":"\n"},{"insert":"С указанием ролей данный процесс выглядит следующим образом:\n"},{"insert":{"blockFigure":{"caption":"","image":"https://res.cloudinary.com/inscriptum/image/upload/v1552280962/blob_zfezok.png"}}},{"insert":"Необходимо отметить, что стейкхолдеры присутствуют на первых трех этапах. На каждом из них проводится брейншторм для выявления рисков и учета всех нюансов.\nИспользую технику user story mapping (построение карты истории пользователя) и job to be done (JTBD) команды подходят к составлению свимлайнов в проектах YouTrack. После оценки задач в свимлайнах мы получаем достаточно точную оценку для выпуска конкретной фичи.\nСледующим предложением который тесно связан с изменением жизненного цикла является создание доски прогресса по фичам=свимлайнам.\n"},{"insert":{"blockFigure":{"caption":"","image":"https://res.cloudinary.com/inscriptum/image/upload/v1552286390/blob_jlp2ao.jpg"}}},{"insert":"Наглядность и возможность смещать усилия видя перед собой всю картину является хорошим началом на пути lean development.\nКлиентские приложения"},{"attributes":{"blockSubheader":true},"insert":"\n"},{"insert":"На данный момент у нас одно клиентское приложение 5-го поколения продуктов, а так же десктопный и мобильный пользовательские интерфейсы. При этом ведется проектирование нового интерфейса для администраторов биллинга.\nВ интерфейсе 5-ки не происходит глобальных доработок механизмов его построения (не путать с 5-кой в целом), только исправление баг.\nШестой интерфейс в биллинге является наиболее старым из всех шестых интерфейсов в компании. При его создании было сломано много копий, испробовано подходов и применено технических решений. Первые пол года разработки можно смело отнести к пробе пера. Далее спустя год стало понятно, что требуется и каким образом это действительно можно реализовать. В итоге к бета релизу шестой интерфейс подошел с массой \"велосипедов\", \"костылей\" и решений которые нужно было менять и в коде и в UX.\nТехнические задачи:\nСоздание инструментария (динамические формы, таблицы, основные UI компоненты)."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Перевод приложения на динамические формы и таблицы, элементы меню и другие настраиваемые элементы."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Шаринг кода (вынос общих участков, использование корпоративных библиотек)."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Стабильность и отказоустойчивость (unit и функциональные тесты)."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"\nПлагины"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"\n"},{"insert":{"blockFigure":{"caption":"","image":"https://res.cloudinary.com/inscriptum/image/upload/v1552287133/blob_smvwgk.jpg"}}},{"insert":"\n"}]},"id":"cjs2g09oq0k9l0196cetgmfr3"},{"contents":{"ops":[{"insert":"Разделение фронта и бэка с сохранением согласованности"},{"attributes":{"blockTitle":true},"insert":"\n"},{"attributes":{"blockAuthor":true},"insert":"\n"},{"insert":"Конвейер\nЛебедь рак и щука\n\nsdfsdfsdfsdfsdfsdfsdfsdfsdf\nsfsdf\nsdfsdf\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nsdfsdfd dsf\n\n\n"},{"insert":{"blockFigure":{"caption":"12sdf1aaagaaaa","image":"https://res.cloudinary.com/inscriptum/image/upload/v1552828519/blob_oztsve.jpg"}}},{"insert":"\n\n\n\n  // highlight() {"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //   // console.log(1111, this.quill.selection);"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //   // console.log(22222, document.querySelectorAll(':hover'));"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //   if (this.quill.selection.composing) return;"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //   this.quill.update(Quill.sources.USER);"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //   let range = this.quill.getSelection();"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //   console.log(44444, this.quill.scroll.descendants(InsSyntaxCodeBlock));"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" aaaaaaa aaaaaaa aaaaaaa"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" aa"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //   this.quill.scroll.descendants(InsSyntaxCodeBlock).forEach((code) => {"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //     code.highlight(this.options.highlight);"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //   });"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //   this.quill.update(Quill.sources.SILENT);"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  //   console.log(range);"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" aaa"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"     if ("},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"       range != null"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"       && document.activeElement === this.quill.scrollingContainer"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"     ) {"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"       this.quill.setSelection(range, Quill.sources.SILENT);"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"     }"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  }"},{"attributes":{"code-block":true},"insert":"\n"}]},"id":"cjssez50a79730136phuqjwsm"},{"contents":{"ops":[{"insert":"Разделение фронта и бэка с сохранением согласованности"},{"attributes":{"blockTitle":true},"insert":"\n"},{"attributes":{"blockAuthor":true},"insert":"\n"},{"insert":"Конвейер\nЛебедь рак и щука\n\nsdfsdfsdfsdfsdfsdfsdfsdfsdf\nsfsdf\nsdfsdf\n"},{"attributes":{"link":"https://stackoverflow.com/"},"insert":"Stack Overflow"},{"insert":"\n\n"},{"attributes":{"list":"ordered"},"insert":"\n\n\n\n"},{"attributes":{"link":"https://stackoverflow.com/users/login?ssrc=head&returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f44445177%2fquilljs-jumps-to-top"},"insert":"Log In"},{"insert":" "},{"attributes":{"link":"https://stackoverflow.com/users/signup?ssrc=head&returnurl=%2fusers%2fstory%2fcurrent"},"insert":"Sign Up"},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"\nBy using our site, you acknowledge that you have read and understand our "},{"attributes":{"link":"https://stackoverflow.com/legal/cookie-policy"},"insert":"Cookie Policy"},{"insert":", "},{"attributes":{"link":"https://stackoverflow.com/legal/privacy-policy"},"insert":"Privacy Policy"},{"insert":", and our "},{"attributes":{"link":"https://stackoverflow.com/legal/terms-of-service/public"},"insert":"Terms of Service"},{"insert":".\n\n"},{"attributes":{"link":"https://stackoverflow.com/"},"insert":"Home"},{"attributes":{"list":"ordered"},"insert":"\n\n"},{"insert":"PUBLIC"},{"attributes":{"list":"ordered"},"insert":"\n\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/questions"},"insert":"Stack Overflow"},{"attributes":{"list":"ordered"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/tags"},"insert":"Tags"},{"attributes":{"list":"ordered"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/users"},"insert":"Users"},{"attributes":{"list":"ordered"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs?med=site-ui&ref=jobs-tab"},"insert":"Jobs"},{"attributes":{"list":"ordered"},"insert":"\n"},{"attributes":{"bold":true},"insert":"Teams"},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Q&A for work"},{"attributes":{"list":"ordered"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/teams"},"insert":"Learn More"},{"attributes":{"list":"ordered"},"insert":"\n\n"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top"},"insert":"QuillJs - jumps to top"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/ask"},"insert":"Ask Question"},{"insert":"\n\n0\n\n1\nI'm using QuillJs as a text editor on my website. In a long post the screen view jumps to top when pasting text or changing heading type or alignment or color or inserting a link or video. Can't find out why.\nQuillJs version: 1.2.6 Browser: Chrome 58.0.3029.110 OS: Windows 10\nInitialization:\nvar toolbarOptions = ["},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"    [{ 'header': [1, 2, 3, 4, 5, 6, false] },"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"       'bold', 'italic', 'underline', 'strike', { 'align': [] },"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"        { 'list': 'ordered' }, { 'list': 'bullet' },"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"        { 'color': [] }, { 'background': [] }], "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"        ['image', 'blockquote', 'code-block', 'link', 'video'],"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":" "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"        ['clean']                                      "},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"    ];"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"var quill = new Quill('#editor', {"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"    modules: {"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"      toolbar: toolbarOptions"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"    },"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"    theme: 'snow'"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"});"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"Or maybe you can advise a better simple and free html editor for a website? I don't like CKE or Tinymce.\n"},{"attributes":{"link":"https://stackoverflow.com/questions/tagged/javascript"},"insert":"javascript"},{"insert":" "},{"attributes":{"link":"https://stackoverflow.com/questions/tagged/rich-text-editor"},"insert":"rich-text-editor"},{"insert":" "},{"attributes":{"link":"https://stackoverflow.com/questions/tagged/quill"},"insert":"quill"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/44445177"},"insert":"share"},{"attributes":{"link":"https://stackoverflow.com/posts/44445177/edit"},"insert":"improve this question"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/posts/44445177/revisions"},"insert":"edited Jan 23 at 21:13"},{"insert":"\n"},{"insert":{"blockFigure":{"caption":"","image":"https://www.gravatar.com/avatar/0831ca2a26e862e3e42c159c624e2ded?s=32&d=identicon&r=PG"}}},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/users/8211528/hooman-bahreini"},"insert":"Hooman Bahreini"},{"insert":"\n"},{"attributes":{"bold":true},"insert":"4,118"},{"insert":"3934\nasked Jun 8 '17 at 20:41\n"},{"insert":{"blockFigure":{"caption":"","image":"https://i.stack.imgur.com/Ec2Mv.png?s=32&g=1"}}},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/users/7404575/vulp"},"insert":"vulp"},{"insert":"\n"},{"attributes":{"bold":true},"insert":"481"},{"insert":"418\nHave you added custom CSS? If so you may need to set the scrollingContainer configuration "},{"attributes":{"link":"http://quilljs.com/docs/configuration/#scrollingcontainer"},"insert":"quilljs.com/docs/configuration/#scrollingcontainer"},{"insert":" – "},{"attributes":{"link":"https://stackoverflow.com/users/235771/jhchen"},"insert":"jhchen"},{"insert":" "},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top#comment75890813_44445177"},"insert":"Jun 8 '17 at 22:46"},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Yes, there is custom css. But I don't know how to set scrollingContainer configuration properly. There is only mention about it on the quilljs website, but no detailed explanation. – "},{"attributes":{"link":"https://stackoverflow.com/users/7404575/vulp"},"insert":"vulp"},{"insert":" "},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top#comment75917222_44445177"},"insert":"Jun 9 '17 at 14:30"},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"I got it. If you want an editor to be scrolled and maintained by a web page main scrollbar, you need to set "},{"attributes":{"italic":true},"insert":"scrollingContainer"},{"insert":" property to "},{"attributes":{"bold":true},"insert":"'body'"},{"insert":" during configuration of Quill object. – "},{"attributes":{"link":"https://stackoverflow.com/users/7404575/vulp"},"insert":"vulp"},{"insert":" "},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top#comment75958540_44445177"},"insert":"Jun 11 '17 at 8:59"},{"insert":" "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"The scrollingContainer is used to specify which element has the scrollbars. In your case it sounds like body, but for others it may be some other element. It is common for some websites to have a #sidebar #header and #main container which scrolls and in that case you want the #main container as the scrollingContainer. Again it's whichever element has the scrollbars. – "},{"attributes":{"link":"https://stackoverflow.com/users/235771/jhchen"},"insert":"jhchen"},{"insert":" "},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top#comment75975026_44445177"},"insert":"Jun 12 '17 at 2:07"},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Thanks for help, @jhchen – "},{"attributes":{"link":"https://stackoverflow.com/users/7404575/vulp"},"insert":"vulp"},{"insert":" "},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top#comment76032898_44445177"},"insert":"Jun 13 '17 at 11:45"},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"add a comment\n2 Answers"},{"attributes":{"blockHeader":true},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top?answertab=active#tab-top"},"insert":"active"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top?answertab=oldest#tab-top"},"insert":"oldest"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top?answertab=votes#tab-top"},"insert":"votes"},{"insert":"\n\n3\n\n\nIf you want an editor to be scrolled and maintained by a web page's main scrollbar, you need to set "},{"attributes":{"bold":true},"insert":"scrollingContainer"},{"insert":" property to "},{"attributes":{"italic":true},"insert":"'body'"},{"insert":" during configuration of Quill object.\nvar quill = new Quill('#editor', {"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"  modules: { toolbar: toolbarOptions },"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"    theme: 'snow',"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"    scrollingContainer: 'body'"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"});"},{"attributes":{"code-block":true},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/a/44482094"},"insert":"share"},{"attributes":{"link":"https://stackoverflow.com/posts/44482094/edit"},"insert":"improve this answer"},{"insert":"\nanswered Jun 11 '17 at 9:01\n"},{"insert":{"blockFigure":{"caption":"","image":"https://i.stack.imgur.com/Ec2Mv.png?s=32&g=1"}}},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/users/7404575/vulp"},"insert":"vulp"},{"insert":"\n"},{"attributes":{"bold":true},"insert":"481"},{"insert":"418\nadd a comment\n\n2\n\nThis happens when any option is clicked from the quill toolbar. I had similar issue and I was using react-quill 0.4.1.\nTry using event.preventDefault and event.stopPropagation on quill toolbar to fix this.\nThe following fixed the issue for me.\ncomponentDidMount()"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"{"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"$('.quill-toolbar').on(\"mousedown\", function(event){"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"            event.preventDefault();"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"            event.stopPropagation();"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"        });"},{"attributes":{"code-block":true},"insert":"\n"},{"insert":"}"},{"attributes":{"code-block":true},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/a/45823484"},"insert":"share"},{"attributes":{"link":"https://stackoverflow.com/posts/45823484/edit"},"insert":"improve this answer"},{"insert":"\nanswered Aug 22 '17 at 17:14\n"},{"insert":{"blockFigure":{"caption":"asddssd dsfsf","image":"https://www.gravatar.com/avatar/289ca27afe9c83d19e241f97c619c094?s=32&d=identicon&r=PG&f=1"}}},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/users/2721259/sindhu-anandhakrishnan"},"insert":"Sindhu Anandhakrishnan"},{"insert":"\n"},{"attributes":{"bold":true},"insert":"21"},{"insert":"4\nadd a comment\nYour Answer"},{"attributes":{"blockHeader":true},"insert":"\n"},{"attributes":{"list":"bullet"},"insert":"\n\n\n\n\n\n\n\n\n\n\n\n"},{"insert":"\nSign up or "},{"attributes":{"link":"https://stackoverflow.com/users/login?ssrc=question_page&returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f44445177%2fquilljs-jumps-to-top%23new-answer"},"insert":"log in"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":" Sign up using Google\n Sign up using Facebook\n Sign up using Email and Password\nPost as a guest"},{"attributes":{"blockHeader":true},"insert":"\n"},{"attributes":{"bold":true},"insert":"Name"},{"insert":"\n"},{"attributes":{"bold":true},"insert":"Email"},{"insert":"\nRequired, but never shown\nPost Your Answer\n"},{"attributes":{"italic":true},"insert":"By clicking \"Post Your Answer\", you acknowledge that you have read our updated "},{"attributes":{"italic":true,"link":"https://stackoverflow.com/legal/terms-of-service/public"},"insert":"terms of service"},{"attributes":{"italic":true},"insert":", "},{"attributes":{"italic":true,"link":"https://stackoverflow.com/legal/privacy-policy"},"insert":"privacy policy"},{"attributes":{"italic":true},"insert":" and "},{"attributes":{"italic":true,"link":"https://stackoverflow.com/legal/cookie-policy"},"insert":"cookie policy"},{"attributes":{"italic":true},"insert":", and that your continued use of the website is subject to these policies."},{"insert":"\nNot the answer you're looking for? Browse other questions tagged "},{"attributes":{"link":"https://stackoverflow.com/questions/tagged/javascript"},"insert":"javascript"},{"insert":" "},{"attributes":{"link":"https://stackoverflow.com/questions/tagged/rich-text-editor"},"insert":"rich-text-editor"},{"insert":" "},{"attributes":{"link":"https://stackoverflow.com/questions/tagged/quill"},"insert":"quill"},{"insert":" or "},{"attributes":{"link":"https://stackoverflow.com/questions/ask"},"insert":"ask your own question"},{"insert":"."},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"asked\n1 year, 9 months ago\nviewed\n723 times\nactive\n"},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top?lastactivity"},"insert":"1 month ago"},{"insert":"\n"},{"attributes":{"bold":true},"insert":"UPCOMING EVENTS"},{"insert":"\n\n\n"},{"attributes":{"link":"https://stackoverflow.com/election?cb=1"},"insert":"2019 Community Moderator Election"},{"insert":"\nends in 6 days\n\n"},{"attributes":{"link":"https://stackoverflow.com/jobs/remote-developer-jobs"},"insert":"Work from anywhere"},{"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/192163/backend-engineer-developers-care-team-heetch"},"insert":"Backend Engineer - Developers Care team"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/192163/backend-engineer-developers-care-team-heetch"},"insert":"Heetch"},{"attributes":{"italic":true,"link":"https://stackoverflow.com/jobs/192163/backend-engineer-developers-care-team-heetch"},"insert":"No office location"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/192163/backend-engineer-developers-care-team-heetch"},"insert":"REMOTE"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs/192163/backend-engineer-developers-care-team-heetch"},"insert":"gomicroservices"},{"attributes":{"list":"bullet"},"insert":"\n\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/244716/remote-full-stack-ruby-on-rails-engineer-flexhire"},"insert":"Remote Full Stack Ruby on Rails Engineer"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/244716/remote-full-stack-ruby-on-rails-engineer-flexhire"},"insert":"Flexhire"},{"attributes":{"italic":true,"link":"https://stackoverflow.com/jobs/244716/remote-full-stack-ruby-on-rails-engineer-flexhire"},"insert":"No office location"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/244716/remote-full-stack-ruby-on-rails-engineer-flexhire"},"insert":"$75K - $110KREMOTE"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs/244716/remote-full-stack-ruby-on-rails-engineer-flexhire"},"insert":"ruby-on-railsruby"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs/244716/remote-full-stack-ruby-on-rails-engineer-flexhire"},"insert":"High response rate"},{"attributes":{"list":"bullet"},"insert":"\n\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/224633/senior-software-engineer-platform-auth0"},"insert":"Senior Software Engineer - Platform"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/224633/senior-software-engineer-platform-auth0"},"insert":"Auth0"},{"attributes":{"italic":true,"link":"https://stackoverflow.com/jobs/224633/senior-software-engineer-platform-auth0"},"insert":"No office location"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/224633/senior-software-engineer-platform-auth0"},"insert":"REMOTE"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs/224633/senior-software-engineer-platform-auth0"},"insert":"gogrpc"},{"attributes":{"list":"bullet"},"insert":"\n\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/243209/remote-quality-assurance-engineer-flexhire"},"insert":"Remote Quality Assurance Engineer"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/243209/remote-quality-assurance-engineer-flexhire"},"insert":"Flexhire"},{"attributes":{"italic":true,"link":"https://stackoverflow.com/jobs/243209/remote-quality-assurance-engineer-flexhire"},"insert":"No office location"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/jobs/243209/remote-quality-assurance-engineer-flexhire"},"insert":"$25K - $35KREMOTE"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs/243209/remote-quality-assurance-engineer-flexhire"},"insert":"testingautomated-tests"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs/243209/remote-quality-assurance-engineer-flexhire"},"insert":"High response rate"},{"attributes":{"list":"bullet"},"insert":"\n\n"},{"insert":"Work remotely - from home or wherever you choose."},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs/remote-developer-jobs"},"insert":"Browse remote jobs"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://chat.stackoverflow.com/"},"insert":"37 people chatting"},{"insert":"\n"},{"attributes":{"link":"https://chat.stackoverflow.com/rooms/17"},"insert":"JavaScript"},{"insert":"\n1 hour ago - "},{"attributes":{"link":"https://chat.stackoverflow.com/users/511302"},"insert":"paul23"},{"insert":"\n"},{"insert":{"blockFigure":{"caption":"","image":"https://www.gravatar.com/avatar/1f73e4b9767a731da47c3b5a2c3fc575?s=23&d=identicon&r=PG"}}},{"insert":"\n"},{"insert":{"blockFigure":{"caption":"","image":"https://www.gravatar.com/avatar/17f5502f74c9d40b40cc238c9d0ca171?s=23&d=identicon&r=PG"}}},{"insert":"\n"},{"insert":{"blockFigure":{"caption":"","image":"https://i.stack.imgur.com/efFVd.gif?s=128&g=1&g&s=32"}}},{"insert":"\n"},{"insert":{"blockFigure":{"caption":"","image":"https://i.stack.imgur.com/V2VL3.png?s=128&g=1&g&s=32"}}},{"insert":"\n"},{"insert":{"blockFigure":{"caption":"","image":"https://graph.facebook.com/10156168835270673/picture?type=large"}}},{"insert":"\n"},{"insert":{"blockFigure":{"caption":"","image":"https://i.stack.imgur.com/Sej2t.jpg?s=128&g=1&g&s=32"}}},{"insert":"\n"},{"insert":{"blockFigure":{"caption":"","image":"https://i.stack.imgur.com/vn9G9.png?s=128&g=1&g&s=32"}}},{"insert":"\n"},{"attributes":{"link":"https://chat.stackoverflow.com/rooms/81492"},"insert":"Tamil iOS, Web and Phonegap Developers"},{"insert":"\n13 hours ago - "},{"attributes":{"link":"https://chat.stackoverflow.com/users/6727675"},"insert":"Dilip Tiwari"},{"insert":"\n"},{"insert":{"blockFigure":{"caption":"","image":"https://www.gravatar.com/avatar/71888676f9c5c90986019148ac576bac?s=23&d=identicon&r=PG"}}},{"insert":"\nRelated"},{"attributes":{"blockSubheader":true},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/1144805?rq=1"},"insert":"1394"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/1144805/scroll-to-the-top-of-the-page-using-javascript-jquery?rq=1"},"insert":"Scroll to the top of the page using JavaScript/jQuery?"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/11630646?rq=1"},"insert":"8"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/11630646/qt-rich-text-editor-is-there-an-already-made-one?rq=1"},"insert":"Qt rich text editor - is there an already-made one?"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/12247339?rq=1"},"insert":"4"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/12247339/how-to-enable-font-family-and-color-options-in-tinymce-editor?rq=1"},"insert":"how to enable font family and color options in tinymce editor?"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/24891400?rq=1"},"insert":"1"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/24891400/i-want-to-paste-formatted-text-from-ms-word-by-keeping-the-formation-same-in-my?rq=1"},"insert":"I want to paste formatted text from MS Word by keeping the formation same in my tinyMCE editor"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/34734750?rq=1"},"insert":"4"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/34734750/how-to-create-a-quilljs-toolbar-exactly-as-shown-in-samples?rq=1"},"insert":"How to create a QuillJS toolbar exactly as shown in samples?"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/39080207?rq=1"},"insert":"7"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/39080207/how-to-format-text-and-embed-a-video-with-quill?rq=1"},"insert":"How to format text and embed a video with Quill?"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/49284906?rq=1"},"insert":"0"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/49284906/tinymce4-producing-u-s-tags-instead-of-span-tag-for-underline-strikethr?rq=1"},"insert":"TinyMCE4: Producing <u> & <s> tags instead of span tag for Underline & Strikethrough"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/49624102?rq=1"},"insert":"0"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/49624102/adding-videos-in-texteditorview?rq=1"},"insert":"Adding videos in TextEditorView"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/50987365?rq=1"},"insert":"0"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/50987365/quill-rich-text-editor-unexplainable-toolbar-behavior?rq=1"},"insert":"Quill rich text editor - unexplainable toolbar behavior"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/q/52786098?rq=1"},"insert":"0"},{"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/52786098/is-there-a-rich-text-editor-for-nativescript-vue?rq=1"},"insert":"Is there a rich text editor for NativeScript-Vue?"},{"insert":"\n"},{"attributes":{"link":"https://stackexchange.com/questions?tab=hot"},"insert":"Hot Network Questions"},{"attributes":{"blockSubheader":true},"insert":"\n"},{"attributes":{"link":"https://money.stackexchange.com/questions/106366/accountant-lawyer-will-not-return-my-call"},"insert":"Accountant/ lawyer will not return my call"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://movies.stackexchange.com/questions/97694/how-did-alan-turing-break-the-enigma-code-using-the-hint-given-by-the-lady-in-th"},"insert":"How did Alan Turing break the Enigma code using the hint given by the lady in the bar?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://tex.stackexchange.com/questions/479275/lmodern-tipa-cause-first-instance-of-diacritic-to-break"},"insert":"lmodern + tipa cause first instance of diacritic to break"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://aviation.stackexchange.com/questions/61046/why-would-a-jet-engine-that-runs-at-temps-excess-of-2000c-burn-when-it-crashes"},"insert":"Why would a jet engine that runs at temps excess of 2000°C burn when it crashes?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://codegolf.stackexchange.com/questions/181350/am-i-not-good-enough-for-you"},"insert":"Am I not good enough for you?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://rpg.stackexchange.com/questions/143033/how-to-discourage-prevent-pcs-from-using-door-choke-points"},"insert":"How to discourage/prevent PCs from using door choke-points?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://security.stackexchange.com/questions/205193/replacing-windows-7-security-updates-with-anti-virus"},"insert":"Replacing Windows 7 security updates with anti-virus?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://music.stackexchange.com/questions/81382/playing-one-triplet-not-three"},"insert":"Playing ONE triplet (not three)"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://travel.stackexchange.com/questions/133750/how-does-airport-security-verify-that-you-can-carry-a-battery-bank-over-100-wh"},"insert":"How does airport security verify that you can carry a battery bank over 100 Wh?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://money.stackexchange.com/questions/106395/is-it-true-that-real-estate-prices-mainly-go-up"},"insert":"Is it true that real estate prices mainly go up?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://softwareengineering.stackexchange.com/questions/388461/does-splitting-a-potentially-monolithic-application-into-several-smaller-ones-he"},"insert":"Does splitting a potentially monolithic application into several smaller ones help prevent bugs?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://ux.stackexchange.com/questions/124329/best-approach-to-update-all-entries-in-a-list-that-is-paginated"},"insert":"Best approach to update all entries in a list that is paginated?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://mathoverflow.net/questions/325354/a-curious-inequality-concerning-binomial-coefficients"},"insert":"A curious inequality concerning binomial coefficients"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://ell.stackexchange.com/questions/200271/infinitive-telling-the-purpose"},"insert":"infinitive telling the purpose"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/55132628/provisioning-profile-doesnt-include-the-application-identifier-and-keychain-acc"},"insert":"Provisioning profile doesn't include the application-identifier and keychain-access-groups entitlements"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://scifi.stackexchange.com/questions/207188/sword-in-the-stone-story-where-the-sword-was-held-in-place-by-electromagnets"},"insert":"Sword in the Stone story where the sword was held in place by electromagnets"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://latin.stackexchange.com/questions/9274/etymology-of-ambulance"},"insert":"Etymology of ambulance"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://academia.stackexchange.com/questions/126274/can-you-reject-a-postdoc-offer-after-the-pi-has-paid-a-large-sum-for-flights-acc"},"insert":"Can you reject a postdoc offer after the PI has paid a large sum for flights/accommodation for your visit?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://codegolf.stackexchange.com/questions/181468/its-a-yearly-task-alright"},"insert":"It's a yearly task, alright"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://writing.stackexchange.com/questions/43289/do-i-really-need-to-have-a-scientific-explanation-for-my-premise"},"insert":"Do I really need to have a scientific explanation for my premise?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://workplace.stackexchange.com/questions/131309/should-i-tell-my-boss-the-work-he-did-was-worthless"},"insert":"Should I tell my boss the work he did was worthless"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://writing.stackexchange.com/questions/43305/how-do-i-express-some-one-as-a-black-person"},"insert":"How do I express some one as a black person?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://math.stackexchange.com/questions/3146736/what-is-the-probability-somebodys-birthday-is-the-day-before-mine"},"insert":"What is the probability somebody's birthday is the day before mine?"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://electronics.stackexchange.com/questions/427028/potentiometer-like-component"},"insert":"Potentiometer like component"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/feeds/question/44445177"},"insert":" question feed"},{"insert":"\n\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/"},"insert":"STACK OVERFLOW"},{"attributes":{"blockSubheader":true},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions"},"insert":"Questions"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs"},"insert":"Jobs"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs/directory/developer-jobs"},"insert":"Developer Jobs Directory"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/jobs/salary"},"insert":"Salary Calculator"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/help"},"insert":"Help"},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Mobile"},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Disable Responsiveness"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"bold":true,"link":"https://www.stackoverflowbusiness.com/"},"insert":"PRODUCTS"},{"attributes":{"blockSubheader":true},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/teams"},"insert":"Teams"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://www.stackoverflowbusiness.com/talent"},"insert":"Talent"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://www.stackoverflowbusiness.com/advertising"},"insert":"Advertising"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/enterprise"},"insert":"Enterprise"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackoverflow.com/company/about"},"insert":"COMPANY"},{"attributes":{"blockSubheader":true},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/company/about"},"insert":"About"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/company/press"},"insert":"Press"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/company/work-here"},"insert":"Work Here"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/legal"},"insert":"Legal"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/legal/privacy-policy"},"insert":"Privacy Policy"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/company/contact"},"insert":"Contact Us"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackexchange.com/"},"insert":"STACK EXCHANGE"},{"attributes":{"blockSubheader":true},"insert":"\n"},{"attributes":{"bold":true,"link":"https://stackexchange.com/"},"insert":"NETWORK"},{"attributes":{"blockSubheader":true},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top#"},"insert":"Technology"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top#"},"insert":"Life / Arts"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top#"},"insert":"Culture / Recreation"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top#"},"insert":"Science"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.com/questions/44445177/quilljs-jumps-to-top#"},"insert":"Other"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://stackoverflow.blog/?blb=1"},"insert":"Blog"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://www.facebook.com/officialstackoverflow/"},"insert":"Facebook"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://twitter.com/stackoverflow"},"insert":"Twitter"},{"attributes":{"list":"bullet"},"insert":"\n"},{"attributes":{"link":"https://linkedin.com/company/stack-overflow"},"insert":"LinkedIn"},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"site design / logo © 2019 Stack Exchange Inc; user contributions licensed under "},{"attributes":{"link":"https://creativecommons.org/licenses/by-sa/3.0/"},"insert":"cc by-sa 3.0"},{"insert":" with "},{"attributes":{"link":"https://stackoverflow.blog/2009/06/25/attribution-required/"},"insert":"attribution required"},{"insert":".rev 2019.3.13.33034\n \n"}]},"id":"cjtaqisih05di0183jpbl0a80"},{"contents":{"ops":[{"insert":"Разделение frontend и backend, с сохранением взаимопонимания"},{"attributes":{"blockTitle":true},"insert":"\n"},{"insert":"Независимый frontend и backend"},{"attributes":{"blockAuthor":true},"insert":"\n"},{"insert":"Несколько лет назад мне попалась небольшая статья в журнале, ученый рассказывал о процессе обучения. Отмечалось, что для полноценного получения знаний нужно всё больше и больше времени, а в недалеком будущем этот процесс может быть равен 80-ти годам жизни. Видимо, в IT это будущее уже настало.\nМне посчастливилось, я начинал программировать в те годы, когда не было разделение на backend и frontend программистов, когда не звучали слова UX, прототип, QA и продуктолог. Мир был проще, деревья были выше и зеленее, воздух чище, а во дворах играли дети, а не парковались автомобили. Как бы мне ни хотелось вернуться в те годы, нужно признать, что всё это не замысел какого-то суперзлодея, а ход эволюционного развития общества. Да, общество могло начать развиваться и иначе, но как говорится история не терпит сослагательных наклонений. \nПредыстория"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"Продукт над которым работает наша команда тоже появился в те далекие годы, когда не было жесткого разделения по направлениям. Он имел неплохую согласованную архитектуру, умел хорошо управлять поведением пользователя и даже позволял расширять себя с помощью системы плагинов. Шло время, команда развивала продукт и вроде бы всё было хорошо, но стали прослеживаться странные явления. К примеру, когда программист занимался бизнес логикой, он как-то начинал плохо верстать формы, делал их неудобными и сложными для восприятия. Про вопросы QA и развитие продукта вообще можно было забыть в моменты, когда приложение падало с неизвестной ошибкой. Ну, собственно, всё как у всех, когда продукт сравнительно небольшой и общие требования не столь высоки один программист успевал делать работу в разных направлениях. Когда же требования в каждом из этих направлений сильно возросли, а ты видишь картину в целом и прекрасно понимаешь, что если функция не будет правильно и стабильно работать, то все эти кнопочки, формочки, тесты, презентации и продвижения ничем не помогут, то ты просто откладываешь всё вокруг и садишься за исправление работы этой злосчастной функции. После этого ты делаешь свой маленький подвиг пусть он и останется никем неоцененным, но функция начинает работать. Собственно, как-то так и появились в нашей команде люди, ответственные за разные направления, чтобы эти маленькие подвиги дошли до клиентов, которым они действительно нужны.\nFrontend и backend"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"Стать профессионалом во всём долго и дорого. Поэтому современный мир прикладных программистов делится в основной своей массе на frontend и backend. Здесь вроде всё понятно, набираем команду frontend, она теперь у нас будет отвечать за пользовательский интерфейс. У backend тоже всё хорошо, наконец они могут сфокусироваться на бизнес логике, моделях данных и других подкапотных вещах. Для какого-то абстрактного нового проекта на этом можно было закончить статью, но у нас уже было написанное приложение. Приложение, интерфейс которого строился на стороне сервера. Frontend только реализовывал полученные от него инструкции. Иными словами, за интерфейс пользователя отвечал не frontend, а backend. Архитектурно frontend и backend работали как одно целое - изменяя одно, были вынуждены менять другое. И это не самое страшно, наибольшей проблемой стала невозможность разработки пользовательского интерфейса без глубинных знаний того, что происходит на сервере. \nИспользование монолита из backend+frontend приводит к невозможности развивать продукт требуемыми темпами и часто ведет к жесткой связанности или \"перетягиванию одеяла\" в разработке. Современный интерфейс часто модифицируется под нужды клиентов, что приводит к постоянным изменениям в структуре отображаемых данных. У нас это вело к необходимости менять логику backend'а, хотя структура самих данных чаще всего оставалась неизменной.\nПочти два года назад начался процесс кардинальной переработки продукта и стало понятно, что дальше так жить нельзя. Сильная зависимость между frontend и backend приводит к невозможности делать работу параллельно и тем самым тормозит обе части команды. Проектируя новое API нужно было отделить frontend и backend, но при этом сохранить согласованность их работы. Кто-то скажет, что согласованность нужно достигать с помощью повышения soft skills. Да, коммуникации нужно развивать, но это не панацея. К примеру, посмотрите на дорожное движение, там тоже важно, чтобы водители были взаимовежливы, умели объезжать случайные препятствия и помогали друг другу на дороге в сложных ситуациях. Но! Без правил дорожного движения мы даже при наилучших коммуникациях получили бы аварии на каждом перекрестке и огромные риски не доехать до пункта назначения в запланированное время.\nAPI"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"Цели для нового API сформировались сами собой из наших ежедневных трудностей в реализации новых продуктовых и дизайнерских идей:\nСлабая связанность компонентов системы. Параллельное развитие frontend и backend."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Высокая масштабируемость. Иными словами, новое API не должно стать для нас препятствием в наращивании функциональности."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Стабильность и согласованность."},{"attributes":{"list":"ordered"},"insert":"\n"},{"insert":"Весь research по API начали не с backend, как это обычно принято, а наоборот - подумали, что нужно пользователям нашего API. Понятно, что наиболее распространены решения в виде разного рода REST API. В последние годы к ним добавляют описательные модели через инструменты типо swagger, но нужно понимать, что это тот же REST. И по сути, самым главным его плюсом и минусом являются правила, которые носят исключительно описательный характер. Это значит, что никто не запрещает создателю такого API отклоняться от постулатов REST в ходе реализации отдельных частей. Другим распространенным решением является GraphQL и, хотя, он тоже не идеален, но в отличие от REST, GraphQL API это не просто описательная модель, а настоящие правила.\nРассмотрев возможные варианты работы с сервером мы остановились на GraphQL в качестве API для frontend. Но, так как наш backend на C++, то реализация GraphQL сервера оказалось нетривиальной задачей. \nПосле ряда тестов мы решили, что нужен промежуточный слой в виде Node.js сервера. Изучили современные фреймворки и остановились на Express.js. Далее нужно было решить как обращаться к API backend'а. Сначала смотрели в сторону поднятия REST API, потом пробовали использовать аддоны на C++ для Node.js. В итоге поняли, что это всё нам не подходит и после подробного анализа выбрали API на базе gRPC сервисов.\nСобрав воедино полученный опыт использования C++, TypesSript, GraphQL и gRPC мы получили архитектуру приложения, позволяющую гибко развивать backend и frontend, продолжая при этом создавать единый программный продукт.\nКак результат, получилась схема, где frontend общается с промежуточным сервером с помощью GraphQL запросов (знает, что спросить и что получит в ответ). GraphQL сервер в резолверах вызывает API функции gRPC сервера, при этом для связи они используют Protobuf схемы. API сервер на базе gRPC знает у какого микросервиса взять данные или кому передать полученный запрос. Сами микросервисы при этом построены также на gRPC, что обеспечивает скорость обработки запросов, типизацию данных и возможность использования различных языков программирования для их разработки.\nОсновные цели, которые мы достигли: \nЗа отображение отвечает frontend, а за данные backend. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"На frontend сохранилась гибкость в плане запросов и получения данных. Интерфейс знает, что можно попросить у сервера и какие ответы должны быть. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"На backend появилась возможность изменения кода с уверенностью, что интерфейс у пользователя продолжит работать. Стал возможным переход на микросервисную архитектуру без необходимости сразу же переделывать весь frontend. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Появилась возможность использования mock данных для frontend, когда еще не готов backend. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Создание схем для совместной работы исключили проблемы взаимодействия, когда команды понимали одну и ту же задачу по разному. Сократилось количество итераций по переделке форматов данных - действуем по принципу \"Семь раз отмерь, один раз отрежь\". "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Возможность параллельного планирования работ на спринт. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Возможность набора разработчиков не знакомых с C++ для реализации отдельных микросервисов. "},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Возможность встраивания в текущее решение, для постепенного перехода."},{"attributes":{"list":"bullet"},"insert":"\n"},{"insert":"Заключение"},{"attributes":{"blockHeader":true},"insert":"\n"},{"insert":"Это была краткая и очень общая статья по результатам нашей сложной исследовательской работы на тему как же с технической точки зрения менять архитектуру для дальнейшего развития продукта. Здесь я поверхностно затронул вопросы командной и межкомандной работы над одним продуктом, выбор технологи API (REST vs GraphQL), связь Node.js приложения с C++ и т.д. Каждая из этих тем тянет на отдельную статью и если вам будет интересно, то мы их обязательно напишем.\n\n\n\n\n\n\n"}]},"id":"cjtchtz3h8aq60136dugg451j"}]