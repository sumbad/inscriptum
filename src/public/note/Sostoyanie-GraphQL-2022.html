  
    <html>
      <head>
        <meta charset="utf-8">
        <title>Состояние GraphQL 2022</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="format-detection" content="telephone=no">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="MobileOptimized" content="176">
        <meta name="HandheldFriendly" content="True">
        <meta name="robots" content="index, follow">
        <meta name="description" content="Заметки по обзору State of GraphQL проведенному в 2022 году. Основной акцент сделан на API, инструментах генерации и валидации">
        <meta property="og:site_name" content="inscriptum">
        <meta property="og:type" content="article">
        <meta property="og:title" content="Состояние GraphQL 2022">
        <meta property="og:description" content="Заметки по обзору State of GraphQL проведенному в 2022 году. Основной акцент сделан на API, инструментах генерации и валидации">
        <meta property="og:image" content="https://res.cloudinary.com/inscriptum/image/upload/v1666703258/blob_rlpbxo.png">
        <meta property="article:published_time" content="2022-10-29T13:10:24.947+00:00">
        <meta property="article:modified_time" content="2022-10-29T13:10:24.947Z">
        <meta property="article:author" content="denis.sumbaev@gmail.com">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Состояние GraphQL 2022">
        <meta name="twitter:description" content="Заметки по обзору State of GraphQL проведенному в 2022 году. Основной акцент сделан на API, инструментах генерации и валидации">
        <meta name="twitter:image" content="https://res.cloudinary.com/inscriptum/image/upload/v1666703258/blob_rlpbxo.png">
        <style>html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:rgba(0,0,0,0)}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:root{--light-grey: #e1e1e1;--dark-grey: #333;--primary-color: #33c3f0;--secondary-color: #555555;--border-color: #bbb;--link-color: #1eaedb;--font-color: #222;--color-contrast-low: hsl(240, 1%, 83%);--color-contrast-medium: hsl(240, 1%, 48%);--color-contrast-high: hsl(240, 4%, 20%);--font-family: Inter, sans-serif;--ipad-min-width: 1366;--container-width: 960px}html{font-size:62.5%}body{font-size:1.5em;line-height:1.6;font-weight:400;font-family:"Inter",sans-serif;color:#222}a{color:#1eaedb}a:hover{color:#1b9cc5}hr{margin-top:3rem;margin-bottom:3.5rem;border-width:0;border-top:1px solid #e1e1e1}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:2rem;font-weight:300}h1{font-size:4rem;line-height:1.2;letter-spacing:-0.1rem}h2{font-size:3.6rem;line-height:1.25;letter-spacing:-0.1rem}h3{font-size:3rem;line-height:1.3;letter-spacing:-0.1rem}h4{font-size:2.4rem;line-height:1.35;letter-spacing:-0.08rem}h5{font-size:1.8rem;line-height:1.5;letter-spacing:-0.05rem}h6{font-size:1.5rem;line-height:1.6;letter-spacing:0}@media(min-width: 550px){h1{font-size:5rem}h2{font-size:4.2rem}h3{font-size:3.6rem}h4{font-size:3rem}h5{font-size:2.4rem}h6{font-size:1.5rem}}p{margin-top:0}.navbar{display:none}@media(min-width: 750px){.navbar+.docs-section{border-top-width:0}.navbar,.navbar-spacer{display:block;width:100%;height:6.5rem;background:#fff;z-index:99;border-top:1px solid #eee;border-bottom:1px solid #eee}.navbar-spacer{display:none}.navbar>.container{width:100%}.navbar-list{list-style:none;margin-bottom:0;padding-left:0;margin-top:0}.navbar-item{position:relative;float:left;margin-bottom:0}.navbar-link{text-transform:uppercase;font-size:11px;font-weight:600;letter-spacing:.2rem;margin-right:35px;text-decoration:none;line-height:6.5rem;color:#222}.navbar-link.active{color:#33c3f0}.has-docked-nav .navbar{position:fixed;top:0;left:0}.has-docked-nav .navbar-spacer{display:block}.has-docked-nav .navbar>.container{width:80%}}@font-face{font-family:"Inter";font-style:normal;font-weight:100 900;font-display:swap;src:url(/fonts/inter/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format("woff2");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Inter";font-style:normal;font-weight:100 900;font-display:swap;src:url(/fonts/inter/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"JetBrainsMono";font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/jetbrainsmono/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTPlOTk6OThhvAWV8.woff) format("woff");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"JetBrainsMono";font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/jetbrainsmono/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxTOlOTk6OThhvA.woff) format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}html{font-family:sans-serif}@supports(font-variation-settings: normal){html{font-family:"Inter var",sans-serif}}.container{max-width:800px}html,body{height:100%}body{display:flex;flex-direction:column}main{flex:1 0 auto}inscriptum-footer{flex-shrink:0;margin-top:2rem}</style>
        <link rel="shortcut icon" type="image/png" href="favicon.png">
        <link href="/css/note.css" rel="stylesheet">
      </head>
      <body>
        <article>
          <section><h1 data-placeholder="Title" data-label="Title">Состояние GraphQL 2022</h1><p data-placeholder="Summary of the text" data-label="Summary" role="definition">Заметки по обзору<strong> State of GraphQL </strong>проведенному в 2022 году. Основной акцент сделан на API, инструментах генерации и валидации</p><p data-placeholder="Take a notes"><a target="_blank" rel="noopener noreferrer nofollow" href="https://2022.stateofgraphql.com/">Ссылка на результаты опроса</a>.</p><figure><img src="https://res.cloudinary.com/inscriptum/image/upload/v1666703258/blob_rlpbxo.png"><figcaption> </figcaption></figure><p>Автором обзора является <a target="_blank" rel="noopener noreferrer nofollow" href="https://sachagreif.com/"><strong>Sacha Greif</strong></a><span>, помощь оказывали open-source команды и консультанты. Количество респондентов 3,094. При этом автор обращает внимание, что обзор построен на ответах относительно малого числа людей и не может считаться стопроцентной оценкой GraphQL экосистемы. Опрос также не связан напрямую с сообществом GraphQL или Facebook.</span></p><p><span>Про репрезентативность и инклюзивность опроса можно прочесть в разделе </span><a target="_blank" rel="noopener noreferrer nofollow" href="https://2022.stateofgraphql.com/en-US/about">About.</a></p></section><section><h2>Features </h2><p></p><h4><a target="_blank" rel="noopener noreferrer nofollow" href="https://2022.stateofgraphql.com/en-US/features/#features_security_performance">Security &amp; Performance</a></h4><p>Это важно для любой серверной технологии, но для GraphQL API вопрос производительности всегда стоял ребром. Высокая гибкость с одной стороны порождает непредсказуемые затраты с другой. На вопросы больше половины респондентов ответили, что или слышали, или используют методы для безопасности и производительности.</p><figure style="width: 300px;
float: right;"><img src="https://miro.medium.com/max/1400/1*eYbI8JT2LsGdGpdFascE0A.png"><figcaption> </figcaption></figure><p>Больше всего меня здесь заинтересовала тема <a target="_blank" rel="noopener noreferrer nofollow" href="https://blog.devgenius.io/a-principled-approach-to-graphql-query-cost-analysis-8c7243de42c1"><strong>Query Cost Analysis</strong></a>. Неизвестность "пугает" гораздо сильнее, чем реальная опасность. В случае с GraphQL API неконтролируемая сложность, "стоимость" запросов всегда была чуть ли не главной проблемой. Возможность её прогнозирования могло бы существенно изменить ситуацию.</p><p><span>Второй важный момент это  </span><strong>Query Rate Limiting</strong><span> и </span><strong>Query Depth Limiting</strong>, <span>дана ссылка на </span><a target="_blank" rel="noopener noreferrer nofollow" href="https://blog.logrocket.com/securing-graphql-api-using-rate-limits-and-depth-limits/">статью</a>. Если кратко, то<span> ограничение скорости и глубины GraphQL запросов является обязательным условием (особенно для публичных API). Это нужно для стабильной производительности сервера, защиты от атак с бесконечным запросами (вложенные запросы, способные привести к зацикливанию).</span></p><p></p><h4><a target="_blank" rel="noopener noreferrer nofollow" href="https://2022.stateofgraphql.com/en-US/features/#features_other_features">Other Features</a></h4><p>Вполне ожидаемо в сравнении <strong>GraphQL Subscriptions</strong> и <strong>Live Queries</strong> первое является более популярным и известным.</p><p>Интересным оказалось то, что больше половины слышали или использовали <strong>Apollo Federation</strong>. На мой взгляд, это одна из самых простых и гибких концепций микросервисной архитектуры с хорошей теоретической основой.</p></section><section><h2>Libraries</h2><p></p><h4><a target="_blank" rel="noopener noreferrer nofollow" href="https://2022.stateofgraphql.com/en-US/libraries/servers">GraphQL Servers</a></h4><p>Неожиданным для меня стало то, что <strong>GraphQL.js </strong>оказался только на третьем месте по популярности, уступив серверам на Java и Elixir. Обратите внимание, что <a target="_blank" rel="noopener noreferrer nofollow" href="https://mercurius.dev/#/"><strong>Mercurius</strong></a><strong> </strong>в итоге занял четвёртое место, обогнав даже <strong>Apollo Server</strong>. Остаётся только порадоваться и пожелать дальнейшего столь же стремительного развитие проекту Matteo Collina.</p><figure style=""><img src="https://res.cloudinary.com/inscriptum/image/upload/v1666785282/blob_kjrxtd.png"><figcaption>Популярность GraphQL серверов</figcaption></figure><p></p><h4><a target="_blank" rel="noopener noreferrer nofollow" href="https://2022.stateofgraphql.com/en-US/libraries/clients">GraphQL Clients</a></h4><p>Среди клиентских инструментов без больших сдвигов. Есть много инструментов от Apollo, не потеряли своих пользователей и остальные популярные библиотеки. Можно выделить <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/nearform/graphql-hooks"><strong>GraphQL Hooks</strong></a>, как модульное решение. А так же <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/prisma-labs/graphql-request"><strong>graphql-request</strong></a> в силу своей простоты.</p><figure><img src="https://res.cloudinary.com/inscriptum/image/upload/v1666800961/blob_u8glzh.png"><figcaption>Удовлетворённость пользователей Apollo Client</figcaption></figure><p></p><h4><a target="_blank" rel="noopener noreferrer nofollow" href="https://2022.stateofgraphql.com/en-US/libraries/api-generators/">API Generators</a></h4><p>Количество и популярность разного рода GraphQL API в виде headless CMS или сервисов с годами не уменьшается, а только растёт.</p><figure><img src="https://res.cloudinary.com/inscriptum/image/upload/v1666802063/blob_zeeseg.png"><figcaption>Негативные и позитивные взгляды на разные GraphQL API</figcaption></figure><p>Подобная бизнес модель продолжает работать. И несмотря на многие преимущества REST в плане безопасности и стабильности, его неочевидность и необходимость подробной документации затрудняют предоставление, как отдельного сервиса. В свою очередь GraphQL являясь самодокументируемым может продаваться в виде отдельного сервиса как услуги.</p><p></p><h4><a target="_blank" rel="noopener noreferrer nofollow" href="https://2022.stateofgraphql.com/en-US/libraries/schema-builders">Schema Builders</a></h4><p>Вместе с высокой однозначностью типов и преобразованием GraphQL схемы в AST дерево были открыты широкие возможности для автоматизации разных процессов. Наиболее успешным в этом плане стал проект <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.the-guild.dev/graphql/codegen"><strong>GraphQL Code Generator</strong></a>, который благодаря своим модулям способен генерировать код как для сервера, так и для клиента. Можно ограничится как типами, так и сгенерировать функции под запросы с клиента.</p><figure><img src="https://res.cloudinary.com/inscriptum/image/upload/v1666803335/blob_mbvvvo.png"><figcaption>Выбран плагин для генерации хуков под React-Apollo</figcaption></figure><p>Процесс разработки можно ускорить в разы, а где-то и вовсе свести процесс к вызову заранее сгенерированных блоков кода.</p><p>Но самой большой заслугой подобных инструментов я назвал бы сокращение разрыва между разными частями приложения. Клиент и сервер становятся ближе, они не просто строятся на одной схеме идеологически, а технически опираются на неё через сгенерированные типы или участки кода.</p></section><section><h2>Other Tools</h2><p></p><h4><a target="_blank" rel="noopener noreferrer nofollow" href="https://2022.stateofgraphql.com/en-US/other-tools/#combining_schemas">Combining Schemas</a></h4><figure style="width: 300px;
float: right;"><img src="https://res.cloudinary.com/inscriptum/image/upload/v1666939664/blob_aacmq5.png"><figcaption> </figcaption></figure><p>В качестве наиболее используемого инструмента для комбинации, агрегации и объединения GraphQL схем их разных API респонденты указали <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apollographql.com/docs/federation/">Apollo&nbsp;Federation</a>.  Как уже отмечал выше эта концепция имеет массу плюсов. И, наверное, наиболее существенный – это формализация микросервисной архитектуры. В отличие от REST, где всё согласование строится исключительно на условных договорённостях. К этому я бы добавил, что не обязательно Apollo Federation, сама по себе идеи GraphQL федерации. А в качестве прикладного инструмента я бы порекомендовал посмотреть на <a target="_blank" rel="noopener noreferrer nofollow" href="https://mercurius.dev/#/docs/federation">Mercurius Federation</a>, как более легковесную и лишённую "легаси" реализацию.</p><p></p><h4><a target="_blank" rel="noopener noreferrer nofollow" href="https://2022.stateofgraphql.com/en-US/other-tools/#server_languages">Server Languages</a></h4><p>Наконец последний раздел, на который я обращу внимание – это серверные языки применяемые для GraphQL API. Абсолютное большинство выбрало <strong>TypeScript/JavaScript</strong>. Язык – это всего лишь инструмент, почему именно этот инструмент выбирают в данном случае?</p><p>На мой взгляд, причина в разнесении основной логики работы <strong>backend по микросервисам</strong>. При этом всё общение с клиентским приложением строится через <strong>Backend for frontend (BFF)</strong> или  <strong>API Gateway</strong>. Иными словами, backend, с которым взаимодействует frontend, становится прослойкой до другого сервиса или источника данных в случае перенесения логики в функции и хранимые процедуры СУБД.</p></section>
        </article>
      </body>
      <script type="text/javascript" src="/js/note.js"></script>
    </html>